<!DOCTYPE html>
<!-- Created with https://studio.penguinmod.com/PenguinMod-Packager/ -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:">
  <title>Game</title>
  <style>
    body {
      color: #ffffff;
      font-family: sans-serif;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    :root, body.is-fullscreen {
      background-color: #000000;
    }
    [hidden] {
      display: none !important;
    }
    h1 {
      font-weight: normal;
    }
    a {
      color: inherit;
      text-decoration: underline;
      cursor: pointer;
    }

    #app, #loading, #error, #launch {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: default;
      user-select: none;
      -webkit-user-select: none;
      background-color: #000000;
    }
    #launch {
      background-color: rgba(0, 0, 0, 0.7);
      cursor: pointer;
    }
    .green-flag {
      width: 80px;
      height: 80px;
      padding: 16px;
      border-radius: 100%;
      background: rgba(255, 255, 255, 0.75);
      border: 3px solid hsla(0, 100%, 100%, 1);
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
    }
    #loading {
      
    }
    .progress-bar-outer {
      border: 1px solid currentColor;
      height: 10px;
      width: 200px;
      max-width: 200px;
    }
    .progress-bar-inner {
      height: 100%;
      width: 0;
      background-color: currentColor;
    }
    .loading-text, noscript {
      font-weight: normal;
      font-size: 36px;
      margin: 0 0 16px;
    }
    .loading-image {
      margin: 0 0 16px;
    }
    #error-message, #error-stack {
      font-family: monospace;
      max-width: 600px;
      white-space: pre-wrap;
      user-select: text;
      -webkit-user-select: text;
    }
    #error-stack {
      text-align: left;
      max-height: 200px;
      overflow: auto;
    }
    .control-button {
      width: 2rem;
      height: 2rem;
      padding: 0.375rem;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      user-select: none;
      -webkit-user-select: none;
      cursor: pointer;
      border: 0;
      border-radius: 4px;
    }
    .control-button:hover {
      background: #00c3ff26;
    }
    .control-button.active {
      background: #00c3ff59;
    }
    .fullscreen-button {
      background: white !important;
    }
    .standalone-fullscreen-button {
      position: absolute;
      top: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 0 0 0 4px;
      padding: 4px;
      cursor: pointer;
    }
    .sc-canvas {
      cursor: auto;
    }
    .sc-monitor-root[data-opcode^="data_"] .sc-monitor-value-color {
      background-color: #ff8c1a;
    }
    .sc-monitor-row-value-outer {
      background-color: #fc662c;
    }
    .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
      background-color: #e25b27;
    }
    
  </style>
  <meta name="theme-color" content="#000000">
  
</head>
<body>
  <div id="app"></div>

  <div id="launch" class="screen" hidden title="Click to start">
    <div class="green-flag">
      <svg viewBox="0 0 16.63 17.5" width="42" height="44">
        <defs><style>.cls-1,.cls-2{fill:#007AF4;stroke:#003080;stroke-linecap:round;stroke-linejoin:round;}.cls-2{stroke-width:1.5px;}</style></defs>
        <path class="cls-1" d="M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0"/>
        <line class="cls-2" x1="0.75" y1="16.75" x2="0.75" y2="0.75"/>
      </svg>
    </div>
  </div>

  <div id="loading" class="screen">
    <noscript>Enable JavaScript</noscript>
    
    
    <div class="progress-bar-outer"><div class="progress-bar-inner" id="loading-inner"></div></div>
  </div>

  <div id="error" class="screen" hidden>
    <h1>Error</h1>
    <details>
      <summary id="error-message"></summary>
      <p id="error-stack"></p>
    </details>
  </div>

  <script src="script.js"></script>
  <script>
    const appElement = document.getElementById('app');
    const launchScreen = document.getElementById('launch');
    const loadingScreen = document.getElementById('loading');
    const loadingInner = document.getElementById('loading-inner');
    const errorScreen = document.getElementById('error');
    const errorScreenMessage = document.getElementById('error-message');
    const errorScreenStack = document.getElementById('error-stack');

    const handleError = (error) => {
      console.error(error);
      if (!errorScreen.hidden) return;
      errorScreen.hidden = false;
      errorScreenMessage.textContent = '' + error;
      let debug = error && error.stack || 'no stack';
      debug += '\nUser agent: ' + navigator.userAgent;
      errorScreenStack.textContent = debug;
    };
    const setProgress = (progress) => {
      if (loadingInner) loadingInner.style.width = progress * 100 + '%';
    };
    const interpolate = (a, b, t) => a + t * (b - a);

    try {
      setProgress(0.1);

      const scaffolding = new Scaffolding.Scaffolding();
      scaffolding.width = 480;
      scaffolding.height = 360;
      scaffolding.resizeMode = "preserve-ratio";
      scaffolding.editableLists = false;
      scaffolding.usePackagedRuntime = true;
      scaffolding.setup();
      scaffolding.appendTo(appElement);

      const vm = scaffolding.vm;
      window.scaffolding = scaffolding;
      window.vm = scaffolding.vm;
      window.Scratch = {
        vm,
        renderer: vm.renderer,
        audioEngine: vm.runtime.audioEngine,
        bitmapAdapter: vm.runtime.v2BitmapAdapter,
        videoProvider: vm.runtime.ioDevices.video.provider
      };

      scaffolding.setUsername("player####".replace(/#/g, () => Math.floor(Math.random() * 10)));
      scaffolding.setAccentColor("#00c3ff");

      try {
        scaffolding.addCloudProvider(new Scaffolding.Cloud.WebSocketProvider(["wss://clouddata.turbowarp.org","wss://clouddata.turbowarp.xyz"], "p4-@Game.pmp"));
      } catch (error) {
        console.error(error);
      }

      vm.setTurboMode(false);
      if (vm.setInterpolation) vm.setInterpolation(false);
      if (vm.setFramerate) vm.setFramerate(30);
      if (vm.renderer.setUseHighQualityRender) vm.renderer.setUseHighQualityRender(false);
      if (vm.setRuntimeOptions) vm.setRuntimeOptions({
        fencing: true,
        miscLimits: true,
        maxClones: 300,
        dangerousOptimizations: false
      });
      if (vm.setCompilerOptions) vm.setCompilerOptions({
        enabled: true,
        warpTimer: false
      });
      if (vm.renderer.setMaxTextureDimension) vm.renderer.setMaxTextureDimension(2048);

      if (typeof ScaffoldingAddons !== 'undefined') {
        ScaffoldingAddons.run(scaffolding, {"gamepad":false,"pointerlock":false,"specialCloudBehaviors":false,"unsafeCloudBehaviors":false,"pause":false});
      }

      scaffolding.setExtensionSecurityManager({
        getSandboxMode: () => 'unsandboxed',
        canLoadExtensionFromProject: () => true
      });
      for (const extension of ["data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Skins%0A%2F%2F%20ID%3A%20lmsSkins%0A%2F%2F%20Description%3A%20Have%20your%20sprites%20render%20as%20other%20images%20or%20costumes.%0A%2F%2F%20By%3A%20LilyMakesThings%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FLilyMakesThings%2F%3E%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20requireNonPackagedRuntime%20%3D%20(blockName)%20%3D%3E%20%7B%0A%20%20%20%20if%20(Scratch.vm.runtime.isPackaged)%20%7B%0A%20%20%20%20%20%20alert(%0A%20%20%20%20%20%20%20%20%60To%20use%20the%20Skins%20%24%7BblockName%7D%20block%2C%20the%20creator%20of%20the%20packaged%20project%20must%20uncheck%20%22Remove%20raw%20asset%20data%20after%20loading%20to%20save%20RAM%22%20under%20advanced%20settings%20in%20the%20packager.%60%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20true%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BRenderWebGL.SVGSkin%7D%20svgSkin%0A%20%20%20*%20%40returns%20%7BPromise%3Cvoid%3E%7D%0A%20%20%20*%2F%0A%20%20const%20svgSkinFinishedLoading%20%3D%20(svgSkin)%20%3D%3E%0A%20%20%20%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(svgSkin._svgImageLoaded)%20%7B%0A%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20svgSkin._svgImage.addEventListener(%22load%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20svgSkin._svgImage.addEventListener(%22error%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20renderer%20%3D%20runtime.renderer%3B%0A%20%20const%20Cast%20%3D%20Scratch.Cast%3B%0A%0A%20%20var%20createdSkins%20%3D%20%5B%5D%3B%0A%0A%20%20class%20Skins%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._refreshTargets()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._refreshTargets()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22lmsSkins%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Skins%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%236b56ff%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23604de6%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%235645cc%22%2C%0A%20%20%20%20%20%20%20%20docsURI%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2FLily%2FSkins%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22registerSVGSkin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22create%20SVG%20skin%20%5BSVG%5D%20as%20%5BNAME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%3Csvg%20%2F%3E%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20skin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22registerCostumeSkin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22load%20skin%20from%20%5BCOSTUME%5D%20as%20%5BNAME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COSTUME%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20skin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22registerURLSkin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22load%20skin%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URL%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fdango.png%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20skin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getSkinLoaded%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22skin%20%5BNAME%5D%20is%20loaded%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20skin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSkin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20skin%20of%20%5BTARGET%5D%20to%20%5BNAME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targetMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20skin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22restoreSkin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22restore%20skin%20of%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targetMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22restoreTargets%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22restore%20targets%20with%20skin%20%5BNAME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20skin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCurrentSkin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22current%20skin%20of%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targetMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getSkinAttribute%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BATTRIBUTE%5D%20of%20skin%20%5BNAME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTRIBUTE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22skinAttributes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20skin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteSkin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22delete%20skin%20%5BNAME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20skin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteAllSkins%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22delete%20all%20skins%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20targetMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22_getTargets%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20skinAttributes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22width%22%2C%20%22height%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20registerSVGSkin(args)%20%7B%0A%20%20%20%20%20%20const%20skinName%20%3D%20%60lms-%24%7BCast.toString(args.NAME)%7D%60%3B%0A%20%20%20%20%20%20const%20svgData%20%3D%20Cast.toString(args.SVG)%3B%0A%0A%20%20%20%20%20%20let%20oldSkinId%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(createdSkins%5BskinName%5D)%20%7B%0A%20%20%20%20%20%20%20%20oldSkinId%20%3D%20createdSkins%5BskinName%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20This%20generally%20takes%20a%20few%20frames%2C%20so%20yield%20the%20block%0A%20%20%20%20%20%20const%20skinId%20%3D%20renderer.createSVGSkin(svgData)%3B%0A%20%20%20%20%20%20createdSkins%5BskinName%5D%20%3D%20skinId%3B%0A%0A%20%20%20%20%20%20await%20svgSkinFinishedLoading(renderer._allSkins%5BskinId%5D)%3B%0A%0A%20%20%20%20%20%20if%20(oldSkinId)%20%7B%0A%20%20%20%20%20%20%20%20this._refreshTargetsFromID(oldSkinId%2C%20false%2C%20skinId)%3B%0A%20%20%20%20%20%20%20%20renderer.destroySkin(oldSkinId)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20registerCostumeSkin(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!requireNonPackagedRuntime(%22add%20costume%20skin%22))%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20skinName%20%3D%20%60lms-%24%7BCast.toString(args.NAME)%7D%60%3B%0A%20%20%20%20%20%20const%20costumeIndex%20%3D%20util.target.getCostumeIndexByName(args.COSTUME)%3B%0A%20%20%20%20%20%20if%20(costumeIndex%20%3D%3D%3D%20-1)%20return%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20util.target.sprite.costumes%5BcostumeIndex%5D%3B%0A%0A%20%20%20%20%20%20const%20url%20%3D%20costume.asset.encodeDataURI()%3B%0A%20%20%20%20%20%20const%20rotationCenterX%20%3D%20costume.rotationCenterX%3B%0A%20%20%20%20%20%20const%20rotationCenterY%20%3D%20costume.rotationCenterY%3B%0A%0A%20%20%20%20%20%20let%20rotationCenter%20%3D%20%5BrotationCenterX%2C%20rotationCenterY%5D%3B%0A%20%20%20%20%20%20if%20(!rotationCenterX%20%7C%7C%20!rotationCenterY)%20rotationCenter%20%3D%20null%3B%0A%0A%20%20%20%20%20%20let%20oldSkinId%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(createdSkins%5BskinName%5D)%20%7B%0A%20%20%20%20%20%20%20%20oldSkinId%20%3D%20createdSkins%5BskinName%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20skinId%20%3D%20await%20this._createURLSkin(url%2C%20rotationCenter)%3B%0A%20%20%20%20%20%20createdSkins%5BskinName%5D%20%3D%20skinId%3B%0A%0A%20%20%20%20%20%20if%20(oldSkinId)%20%7B%0A%20%20%20%20%20%20%20%20this._refreshTargetsFromID(oldSkinId%2C%20false%2C%20skinId)%3B%0A%20%20%20%20%20%20%20%20renderer.destroySkin(oldSkinId)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20registerURLSkin(args)%20%7B%0A%20%20%20%20%20%20const%20skinName%20%3D%20%60lms-%24%7BCast.toString(args.NAME)%7D%60%3B%0A%20%20%20%20%20%20const%20url%20%3D%20Cast.toString(args.URL)%3B%0A%0A%20%20%20%20%20%20let%20oldSkinId%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(createdSkins%5BskinName%5D)%20%7B%0A%20%20%20%20%20%20%20%20oldSkinId%20%3D%20createdSkins%5BskinName%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20skinId%20%3D%20await%20this._createURLSkin(url)%3B%0A%20%20%20%20%20%20if%20(!skinId)%20return%3B%0A%20%20%20%20%20%20createdSkins%5BskinName%5D%20%3D%20skinId%3B%0A%0A%20%20%20%20%20%20if%20(oldSkinId)%20%7B%0A%20%20%20%20%20%20%20%20this._refreshTargetsFromID(oldSkinId%2C%20false%2C%20skinId)%3B%0A%20%20%20%20%20%20%20%20renderer.destroySkin(oldSkinId)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSkinLoaded(args)%20%7B%0A%20%20%20%20%20%20const%20skinName%20%3D%20%60lms-%24%7BCast.toString(args.NAME)%7D%60%3B%0A%20%20%20%20%20%20return%20!!createdSkins%5BskinName%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setSkin(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20skinName%20%3D%20%60lms-%24%7BCast.toString(args.NAME)%7D%60%3B%0A%20%20%20%20%20%20if%20(!createdSkins%5BskinName%5D)%20return%3B%0A%0A%20%20%20%20%20%20const%20targetName%20%3D%20Cast.toString(args.TARGET)%3B%0A%20%20%20%20%20%20const%20target%20%3D%20this._getTargetFromMenu(targetName%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20target.drawableID%3B%0A%0A%20%20%20%20%20%20const%20skinId%20%3D%20createdSkins%5BskinName%5D%3B%0A%20%20%20%20%20%20renderer._allDrawables%5BdrawableID%5D.skin%20%3D%20renderer._allSkins%5BskinId%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20restoreSkin(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20targetName%20%3D%20Cast.toString(args.TARGET)%3B%0A%20%20%20%20%20%20const%20target%20%3D%20this._getTargetFromMenu(targetName%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%20%20%20%20%20%20target.updateAllDrawableProperties()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCurrentSkin(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20targetName%20%3D%20Cast.toString(args.TARGET)%3B%0A%20%20%20%20%20%20const%20target%20%3D%20this._getTargetFromMenu(targetName%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20target.drawableID%3B%0A%0A%20%20%20%20%20%20const%20skinId%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin._id%3B%0A%20%20%20%20%20%20const%20skinName%20%3D%20this._getSkinNameFromID(skinId)%3B%0A%20%20%20%20%20%20return%20skinName%20%3F%20skinName.replace(%22lms-%22%2C%20%22%22)%20%3A%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSkinAttribute(args)%20%7B%0A%20%20%20%20%20%20const%20skins%20%3D%20renderer._allSkins%3B%0A%20%20%20%20%20%20const%20skinName%20%3D%20%60lms-%24%7BCast.toString(args.NAME)%7D%60%3B%0A%0A%20%20%20%20%20%20if%20(!createdSkins%5BskinName%5D)%20return%200%3B%0A%20%20%20%20%20%20const%20skinId%20%3D%20createdSkins%5BskinName%5D%3B%0A%20%20%20%20%20%20if%20(!skins%5BskinId%5D)%20return%200%3B%0A%0A%20%20%20%20%20%20const%20size%20%3D%20skins%5BskinId%5D.size%3B%0A%20%20%20%20%20%20const%20attribute%20%3D%20Cast.toString(args.ATTRIBUTE).toLowerCase()%3B%0A%0A%20%20%20%20%20%20switch%20(attribute)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22width%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20Math.ceil(size%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20case%20%22height%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20Math.ceil(size%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20deleteSkin(args)%20%7B%0A%20%20%20%20%20%20const%20skinName%20%3D%20%60lms-%24%7BCast.toString(args.NAME)%7D%60%3B%0A%20%20%20%20%20%20if%20(!createdSkins%5BskinName%5D)%20return%3B%0A%20%20%20%20%20%20const%20skinId%20%3D%20createdSkins%5BskinName%5D%3B%0A%0A%20%20%20%20%20%20this._refreshTargetsFromID(skinId%2C%20true)%3B%0A%20%20%20%20%20%20renderer.destroySkin(skinId)%3B%0A%20%20%20%20%20%20Reflect.deleteProperty(createdSkins%2C%20skinName)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20deleteAllSkins()%20%7B%0A%20%20%20%20%20%20this._refreshTargets()%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20createdSkins.length%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20renderer.destroySkin(createdSkins%5Bi%5D)%3B%0A%20%20%20%20%20%20createdSkins%20%3D%20%5B%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20restoreTargets(args)%20%7B%0A%20%20%20%20%20%20const%20skinName%20%3D%20%60lms-%24%7BCast.toString(args.NAME)%7D%60%3B%0A%20%20%20%20%20%20if%20(!createdSkins%5BskinName%5D)%20return%3B%0A%20%20%20%20%20%20const%20skinId%20%3D%20createdSkins%5BskinName%5D%3B%0A%0A%20%20%20%20%20%20this._refreshTargetsFromID(skinId%2C%20true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Utility%20Functions%0A%0A%20%20%20%20_refreshTargetsFromID(skinId%2C%20reset%2C%20newId)%20%7B%0A%20%20%20%20%20%20const%20drawables%20%3D%20renderer._allDrawables%3B%0A%20%20%20%20%20%20const%20skins%20%3D%20renderer._allSkins%3B%0A%0A%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20const%20drawableID%20%3D%20target.drawableID%3B%0A%20%20%20%20%20%20%20%20const%20targetSkin%20%3D%20drawables%5BdrawableID%5D.skin.id%3B%0A%0A%20%20%20%20%20%20%20%20if%20(targetSkin%20%3D%3D%3D%20skinId)%20%7B%0A%20%20%20%20%20%20%20%20%20%20target.updateAllDrawableProperties()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!reset)%0A%20%20%20%20%20%20%20%20%20%20%20%20drawables%5BdrawableID%5D.skin%20%3D%20newId%20%3F%20skins%5BnewId%5D%20%3A%20skins%5BskinId%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_refreshTargets()%20%7B%0A%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20target.updateAllDrawableProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getSkinNameFromID(skinId)%20%7B%0A%20%20%20%20%20%20for%20(const%20skinName%20in%20createdSkins)%20%7B%0A%20%20%20%20%20%20%20%20if%20(createdSkins%5BskinName%5D%20%3D%3D%3D%20skinId)%20return%20skinName%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getTargetFromMenu(targetName%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(targetName)%3B%0A%20%20%20%20%20%20if%20(targetName%20%3D%3D%3D%20%22_myself_%22)%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20if%20(targetName%20%3D%3D%3D%20%22_stage_%22)%20target%20%3D%20runtime.getTargetForStage()%3B%0A%20%20%20%20%20%20return%20target%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20_createURLSkin(URL%2C%20rotationCenter)%20%7B%0A%20%20%20%20%20%20let%20imageData%3B%0A%20%20%20%20%20%20if%20(await%20Scratch.canFetch(URL))%20%7B%0A%20%20%20%20%20%20%20%20imageData%20%3D%20await%20Scratch.fetch(URL)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20contentType%20%3D%20imageData.headers.get(%22Content-Type%22)%3B%0A%20%20%20%20%20%20if%20(contentType%20%3D%3D%3D%20%22image%2Fsvg%2Bxml%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20renderer.createSVGSkin(await%20imageData.text()%2C%20rotationCenter)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(%0A%20%20%20%20%20%20%20%20contentType%20%3D%3D%3D%20%22image%2Fpng%22%20%7C%7C%0A%20%20%20%20%20%20%20%20contentType%20%3D%3D%3D%20%22image%2Fjpeg%22%20%7C%7C%0A%20%20%20%20%20%20%20%20contentType%20%3D%3D%3D%20%22image%2Fbmp%22%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20eslint-disable-next-line%20no-restricted-syntax%0A%20%20%20%20%20%20%20%20const%20output%20%3D%20new%20Image()%3B%0A%20%20%20%20%20%20%20%20output.src%20%3D%20URL%3B%0A%20%20%20%20%20%20%20%20output.crossOrigin%20%3D%20%22anonymous%22%3B%0A%20%20%20%20%20%20%20%20await%20output.decode()%3B%0A%20%20%20%20%20%20%20%20return%20renderer.createBitmapSkin(output)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getTargets()%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22myself%22%2C%20value%3A%20%22_myself_%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22Stage%22%2C%20value%3A%20%22_stage_%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20targetName%20%3D%20target.getName()%3B%0A%20%20%20%20%20%20%20%20%20%20spriteNames.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20targetName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20targetName%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20spriteNames%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20Skins())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Particle%20Tools%0D%0A%2F%2F%20ID%3A%20ParticleToolsSP%0D%0A%2F%2F%20Description%3A%20Tools%20for%20making%20particle%20engines%20easier.%0D%0A%2F%2F%20By%3A%20SharkPool%0D%0A%0D%0A%2F%2F%20Version%20V.1.2.0%0D%0A%0D%0A(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Particle%20Tools%20must%20run%20unsandboxed%22)%3B%0D%0A%0D%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0D%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0D%0A%0D%0A%20%20const%20menuIconURI%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNDQuMjkzODgiIGhlaWdodD0iMTQ0LjI5Mzg4IiB2aWV3Qm94PSIwLDAsMTQ0LjI5Mzg4LDE0NC4yOTM4OCI%2BPGRlZnM%2BPGxpbmVhckdyYWRpZW50IHgxPSIyMzcuNDQwOTUiIHkxPSIxNDEuMzYxOSIgeDI9IjIzNy40NDA5NSIgeTI9IjE3Ny4xNDUzMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJjb2xvci0xIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmZmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDkwZmYiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iMjQyLjU1OTA2IiB5MT0iMTgzLjQxNzEzIiB4Mj0iMjQyLjU1OTA2IiB5Mj0iMjE4LjYzODEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iY29sb3ItMiI%2BPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDA5MGZmIi8%2BPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8%2BPC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjIwMS4zNjE5MSIgeTE9IjE4Mi41NTkwNiIgeDI9IjIzNS4xNzY3NiIgeTI9IjE4Mi41NTkwNiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJjb2xvci0zIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmZmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDkwZmYiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iMjQ1LjM4NTY5IiB5MT0iMTc3LjQ0MDk1IiB4Mj0iMjc4LjYzODEiIHkyPSIxNzcuNDQwOTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iY29sb3ItNCI%2BPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDA5MGZmIi8%2BPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8%2BPC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjI1MC41NTQzIiB5MT0iMTU3LjcxNTAzIiB4Mj0iMjY5LjY5MjU0IiB5Mj0iMTYxLjQyMjAzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgaWQ9ImNvbG9yLTUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzAwOTBmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPjwvbGluZWFyR3JhZGllbnQ%2BPGxpbmVhckdyYWRpZW50IHgxPSIyMTAuMzA3NDYiIHkxPSIxOTguNTc3OTgiIHgyPSIyMjkuNDQ1NzEiIHkyPSIyMDIuMjg0OTciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iY29sb3ItNiI%2BPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8%2BPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMDA5MGZmIi8%2BPC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjIwNS42MTg3NSIgeTE9IjE1OS4yNTA5NiIgeDI9IjIzMi41MTU1OCIgeTI9IjE2My41ODI5MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJjb2xvci03Ij48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmZmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDkwZmYiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iMjQ4LjM0MjE1IiB5MT0iMTk2LjkyMTMyIiB4Mj0iMjc0LjQ2ODc2IiB5Mj0iMjAxLjEyOTIzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgaWQ9ImNvbG9yLTgiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzAwOTBmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPjwvbGluZWFyR3JhZGllbnQ%2BPC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNjcuODUzMDYsLTEwNy44NTMwNikiPjxnIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2lzUGFpbnRpbmdMYXllciZxdW90Ozp0cnVlfSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTE2Ny44NTMwNiwxODBjMCwtMzkuODQ1NjYgMzIuMzAxMjgsLTcyLjE0Njk0IDcyLjE0Njk0LC03Mi4xNDY5NGMzOS44NDU2NSwwIDcyLjE0Njk0LDMyLjMwMTI4IDcyLjE0Njk0LDcyLjE0Njk0YzAsMzkuODQ1NjYgLTMyLjMwMTI4LDcyLjE0Njk0IC03Mi4xNDY5NCw3Mi4xNDY5NGMtMzkuODQ1NjYsMCAtNzIuMTQ2OTQsLTMyLjMwMTI4IC03Mi4xNDY5NCwtNzIuMTQ2OTR6IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgZmlsbD0iIzAwOTBmZiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiLz48cGF0aCBkPSJNMjM0LjE1ODQ5LDE0MS4zNjE5aDkuMzU4MDVjMCwwIC01LjA5MjkzLDkuODg1MTUgLTYuMTA0MDIsMTkuMTE4NzJjLTEuMTI2NTgsMTAuMjg4MzIgMi4wNzY5MywxNi42NjQ3IDEuNjMyNDQsMTYuNjY0N2MtMC44MTU5LDAgLTYuNTUxNTIsLTYuMzg5OTcgLTcuNTM3NzEsLTE2LjY4Mzk5Yy0wLjg4MzkyLC05LjIyNjQ3IDIuNjUxMjUsLTE5LjA5OTQzIDIuNjUxMjUsLTE5LjA5OTQzeiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aW5kZXgmcXVvdDs6bnVsbH0iIGZpbGw9InVybCgjY29sb3ItMSkiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTI0NS44NDE1MiwyMTguNjM4MWgtOS4zNTgwNGMwLDAgNS4wOTI5NCwtOS44ODUxNSA2LjEwNDAzLC0xOS4xMTg3MmMxLjEyNjU4LC0xMC4yODgzMiAtMS4yMzMyNywtMTYuMTAyMjYgLTAuNzg4NzksLTE2LjEwMjI2YzAuODE1OSwwIDUuNzA3ODcsNS44Mjc1NCA2LjY5NDA2LDE2LjEyMTU0YzAuODgzOTIsOS4yMjY0NyAtMi42NTEyNiwxOS4wOTk0MyAtMi42NTEyNiwxOS4wOTk0M3oiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBmaWxsPSJ1cmwoI2NvbG9yLTIpIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMCIvPjxwYXRoIGQ9Ik0yMDEuMzYxOTEsMTg1Ljg0MTUydi05LjM1ODA0YzAsMCA5Ljg4NTE1LDUuMDkyOTQgMTkuMTE4NzEsNi4xMDQwM2MxMC4yODgzMiwxLjEyNjU4IDE0LjY5NjE0LC0wLjk1MjA0IDE0LjY5NjE0LC0wLjUwNzU1YzAsMC44MTU5IC00LjQyMTQxLDUuNDI2NjQgLTE0LjcxNTQzLDYuNDEyODNjLTkuMjI2NDcsMC44ODM5MiAtMTkuMDk5NDIsLTIuNjUxMjUgLTE5LjA5OTQyLC0yLjY1MTI1eiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aW5kZXgmcXVvdDs6bnVsbH0iIGZpbGw9InVybCgjY29sb3ItMykiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTI3OC42MzgxLDE3NC4xNTg0OXY5LjM1ODA1YzAsMCAtOS44ODUxNSwtNS4wOTI5MyAtMTkuMTE4NzIsLTYuMTA0MDJjLTEwLjI4ODMyLC0xLjEyNjU4IC0xNC4xMzM2OSwwLjY3MDgyIC0xNC4xMzM2OSwwLjIyNjMzYzAsLTAuODE1OSAzLjg1ODk3LC01LjE0NTQxIDE0LjE1Mjk4LC02LjEzMTZjOS4yMjY0NywtMC44ODM5MiAxOS4wOTk0MiwyLjY1MTI1IDE5LjA5OTQyLDIuNjUxMjV6IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgZmlsbD0idXJsKCNjb2xvci00KSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjAiLz48cGF0aCBkPSJNMjY2LjQ5MzQzLDE0Ny40NzA4M2w0Ljk0MjM2LDQuOTUxMjdjMCwwIC03LjkxOTk0LDIuNTI2MTIgLTEzLjMzOTM1LDYuODY3NzdjLTYuMDM4NDcsNC44Mzc2MiAtOS42NTQzLDExLjUzMzcyIC05Ljg4OTA1LDExLjI5ODU1Yy0wLjQzMDksLTAuNDMxNjggMS44NTQ4LC04LjQ3NDY5IDYuNzgwNDQsLTE0LjQzMzE3YzQuNDE0ODMsLTUuMzQwNTUgMTEuNTA1NiwtOC42ODQ0MyAxMS41MDU2LC04LjY4NDQzeiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aW5kZXgmcXVvdDs6bnVsbH0iIGZpbGw9InVybCgjY29sb3ItNSkiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTIxMy41MDY1NywyMTIuNTI5MThsLTQuOTQyMzcsLTQuOTUxMjdjMCwwIDcuOTE5OTQsLTIuNTI2MTIgMTMuMzM5MzUsLTYuODY3NzdjNi4wMzg0NywtNC44Mzc2MiA5LjY1NDMsLTExLjUzMzcyIDkuODg5MDUsLTExLjI5ODU0YzAuNDMwOSwwLjQzMTY4IC0xLjg1NDgsOC40NzQ2OSAtNi43ODA0NCwxNC40MzMxNmMtNC40MTQ4Myw1LjM0MDU1IC0xMS41MDU1OSw4LjY4NDQzIC0xMS41MDU1OSw4LjY4NDQzeiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aW5kZXgmcXVvdDs6bnVsbH0iIGZpbGw9InVybCgjY29sb3ItNikiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTIwNi4yMTQzLDE1NS41NTMyM2w0LjgxOTE0LC01LjM1MjIxYzAsMCAzLjAzMDk2LDguMDAzNDEgNy43OTEzLDEzLjMzNjczYzUuMzA0MTEsNS45NDI1MyAxMi4zODYwMSw5LjI5MjY5IDEyLjE1NzExLDkuNTQ2OTJjLTAuNDIwMTcsMC40NjY2MyAtOC44MTM3OSwtMS40NDIzMSAtMTUuMjA5MTgsLTYuMTc5MzljLTUuNzMyMTUsLTQuMjQ1ODQgLTkuNTU4MzUsLTExLjM1MjAzIC05LjU1ODM1LC0xMS4zNTIwM3oiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBmaWxsPSJ1cmwoI2NvbG9yLTcpIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMCIvPjxwYXRoIGQ9Ik0yNzMuODkwMjcsMjA0LjcyMTA4bC00LjY4MTE0LDUuMTk4OTRjMCwwIC0yLjk0NDE2LC03Ljc3NDIzIC03LjU2ODE4LC0xMi45NTQ4MWMtNS4xNTIyMiwtNS43NzIzNyAtMTIuMDMxMzIsLTkuMDI2NTkgLTExLjgwODk4LC05LjI3MzU0YzAuNDA4MTMsLTAuNDUzMjcgOC41NjE0MSwxLjQwMTAxIDE0Ljc3MzY2LDYuMDAyNDZjNS41NjgwMSw0LjEyNDI2IDkuMjg0NjQsMTEuMDI2OTUgOS4yODQ2NCwxMS4wMjY5NXoiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBmaWxsPSJ1cmwoI2NvbG9yLTgpIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMCIvPjxwYXRoIGQ9Ik0yMzEuODUyNjEsMTQwLjk3NDA1YzAsLTQuNjM0MjMgMy43NTY3OCwtOC4zOTEwMiA4LjM5MTAxLC04LjM5MTAyYzQuNjM0MjMsMCA4LjM5MTAyLDMuNzU2NzkgOC4zOTEwMiw4LjM5MTAyYzAsNC42MzQyMyAtMy43NTY3OSw4LjM5MTAxIC04LjM5MTAyLDguMzkxMDFjLTQuNjM0MjMsMCAtOC4zOTEwMSwtMy43NTY3OCAtOC4zOTEwMSwtOC4zOTEwMXoiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMS41Ii8%2BPHBhdGggZD0iTTI0OC4xNDc0LDIxOS4wMjU5NmMwLDQuNjM0MjMgLTMuNzU2NzksOC4zOTEwMSAtOC4zOTEwMiw4LjM5MTAxYy00LjYzNDIzLDAgLTguMzkxMDEsLTMuNzU2NzggLTguMzkxMDEsLTguMzkxMDFjMCwtNC42MzQyMyAzLjc1Njc4LC04LjM5MTAyIDguMzkxMDEsLTguMzkxMDJjNC42MzQyMywwIDguMzkxMDIsMy43NTY3OSA4LjM5MTAyLDguMzkxMDJ6IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjEuNSIvPjxwYXRoIGQ9Ik0yMDAuOTc0MDUsMTg4LjE0NzRjLTQuNjM0MjMsMCAtOC4zOTEwMiwtMy43NTY3OSAtOC4zOTEwMiwtOC4zOTEwMmMwLC00LjYzNDIzIDMuNzU2NzksLTguMzkxMDEgOC4zOTEwMiwtOC4zOTEwMWM0LjYzNDIzLDAgOC4zOTEwMSwzLjc1Njc4IDguMzkxMDEsOC4zOTEwMWMwLDQuNjM0MjMgLTMuNzU2NzgsOC4zOTEwMiAtOC4zOTEwMSw4LjM5MTAyeiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aW5kZXgmcXVvdDs6bnVsbH0iIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48cGF0aCBkPSJNMjc5LjAyNTk2LDE3MS44NTI2MWM0LjYzNDIzLDAgOC4zOTEwMSwzLjc1Njc4IDguMzkxMDEsOC4zOTEwMWMwLDQuNjM0MjMgLTMuNzU2NzksOC4zOTEwMiAtOC4zOTEwMSw4LjM5MTAyYy00LjYzNDIzLDAgLTguMzkxMDIsLTMuNzU2NzkgLTguMzkxMDIsLTguMzkxMDJjMCwtNC42MzQyMyAzLjc1NjgsLTguMzkxMDEgOC4zOTEwMiwtOC4zOTEwMXoiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMS41Ii8%2BPHBhdGggZD0iTTI2NS40ODA4LDE0Ni4wNDU5NmMyLjQ1MTk0LC0yLjQ0NzUzIDYuNDIzNzQsLTIuNDQzOTUgOC44NzEyNywwLjAwNzk5YzIuNDQ3NTIsMi40NTE5NCAyLjQ0Mzk1LDYuNDIzNzQgLTAuMDA3OTksOC44NzEyNmMtMi40NTE5NCwyLjQ0NzUzIC02LjQyMzc0LDIuNDQzOTUgLTguODcxMjYsLTAuMDA3OTljLTIuNDQ3NTIsLTIuNDUxOTQgLTIuNDQzOTYsLTYuNDIzNzQgMC4wMDc5OCwtOC44NzEyNnoiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMS41Ii8%2BPHBhdGggZD0iTTIxNC41MTkxOSwyMTMuOTU0MDRjLTIuNDUxOTQsMi40NDc1MyAtNi40MjM3NCwyLjQ0Mzk1IC04Ljg3MTI3LC0wLjAwNzk5Yy0yLjQ0NzUzLC0yLjQ1MTk0IC0yLjQ0Mzk1LC02LjQyMzc0IDAuMDA3OTksLTguODcxMjdjMi40NTE5NCwtMi40NDc1MyA2LjQyMzczLC0yLjQ0Mzk1IDguODcxMjYsMC4wMDc5OWMyLjQ0NzUzLDIuNDUxOTQgMi40NDM5Niw2LjQyMzc0IC0wLjAwNzk4LDguODcxMjZ6IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjEuNSIvPjxwYXRoIGQ9Ik0yMDQuODA1LDE1Ni42NzIzMWMtMi42NTA0OSwtMi4zODY1IC0yLjg2NDQ5LC02LjQ2OTc5IC0wLjQ3Nzk5LC05LjEyMDI4YzIuMzg2NSwtMi42NTA0OSA2LjQ2OTc5LC0yLjg2NDQ5IDkuMTIwMjcsLTAuNDc3OTljMi42NTA0OSwyLjM4NjUgMi44NjQ1LDYuNDY5NzkgMC40Nzc5OSw5LjEyMDI3Yy0yLjM4NjUsMi42NTA0OSAtNi40Njk3OSwyLjg2NDUgLTkuMTIwMjgsMC40Nzh6IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjEuNSIvPjxwYXRoIGQ9Ik0yNzUuMjU5MiwyMDMuNjM0MDRjMi41NzQ1OSwyLjMxODE2IDIuNzgyNDYsNi4yODQ1MiAwLjQ2NDMsOC44NTkxMWMtMi4zMTgxNiwyLjU3NDU5IC02LjI4NDUxLDIuNzgyNDYgLTguODU5MTEsMC40NjQzYy0yLjU3NDU5LC0yLjMxODE2IC0yLjc4MjQ2LC02LjI4NDUyIC0wLjQ2NDMsLTguODU5MWMyLjMxODE2LC0yLjU3NDU5IDYuMjg0NTIsLTIuNzgyNDcgOC44NTkxMSwtMC40NjQzeiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aW5kZXgmcXVvdDs6bnVsbH0iIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0D%0A%0D%0A%20%20class%20ParticleToolsSP%20%7B%0D%0A%20%20%20%20constructor()%20%7B%0D%0A%20%20%20%20%20%20this.IDs%20%3D%20%7B%7D%3B%0D%0A%20%20%20%20%20%20this.IDcount%20%3D%200%3B%0D%0A%20%20%20%20%20%20this.Gravity%20%3D%209.8%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22ParticleToolsSP%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20%22Particle%20Tools%22%2C%0D%0A%20%20%20%20%20%20%20%20docsURI%3A%20%22https%3A%2F%2Fextensions.penguinmod.com%2Fdocs%2Fparticle-tools%22%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20%22%230090ff%22%2C%0D%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22genID%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22generate%20new%20particle%20ID%20with%20velocity%20x%20%5BVELX%5D%20and%20y%20%5BVELY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VELX%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%205%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VELY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%208%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceID%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20particle%20ID%20%5BID%5D%20with%20velocity%20x%20%5BVELX%5D%20and%20y%20%5BVELY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VELX%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%205%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VELY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%208%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Operations%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteID%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22delete%20all%20particle%20IDs%22%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteOneID%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22delete%20particle%20ID%20%5BNAME%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenID%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22when%20particle%20ID%20is%20%5BTYPE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EVENT%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22reportID%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22particle%20ID%20%5BNAME%5D%20%5BREPORT%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPORT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22REPORT_TYPE%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22existID%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22particle%20ID%20%5BNAME%5D%20%5BTYPE%5D%20%3F%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EXIST%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22reportCnt%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22number%20of%20particle%20IDs%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Velocity%20Randomizer%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22genVel%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pick%20random%20%5BMIN%5D%20to%20%5BMAX%5D%20precision%20%5BTorF%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIN%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20-5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MAX%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%205%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TorF%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22PRECISION%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Gravity%20Force%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setGravity%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20gravity%20to%20%5BGRAVITY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20GRAVITY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%209.8%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22currentGrav%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22current%20gravity%22%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22updateGravity%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22update%20%5BREPORT%5D%20with%20gravity%20for%20particle%20ID%3A%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPORT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22REPORT_TYPE%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22updateCustomGravity%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22update%20%5BREPORT%5D%20with%20force%20%5BINPUT%5D%20for%20particle%20ID%3A%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201.5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPORT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22REPORT_TYPE%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20REPORT_TYPE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22all%22%2C%20%22x%20velocity%22%2C%20%22y%20velocity%22%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20PRECISION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22on%22%2C%20%22off%22%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20EXIST%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22exists%22%2C%20%22used%22%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20EVENT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22added%22%2C%20%22deleted%22%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20genID(args)%20%7B%0D%0A%20%20%20%20%20%20this.IDcount%2B%2B%3B%0D%0A%20%20%20%20%20%20this.IDs%5Bthis.IDcount%5D%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20ID%3A%20this.IDcount.toString()%2C%0D%0A%20%20%20%20%20%20%20%20%22X%20Velocity%22%3A%20args.VELX.toString()%2C%0D%0A%20%20%20%20%20%20%20%20%22Y%20Velocity%22%3A%20args.VELY.toString()%2C%0D%0A%20%20%20%20%20%20%20%20active%3A%20false%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20runtime.startHats(%22ParticleToolsSP_whenID%22%2C%20%7B%20TYPE%3A%20%22added%22%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20replaceID(args)%20%7B%0D%0A%20%20%20%20%20%20if%20(this.IDs%5Bargs.ID%5D%20%3D%3D%3D%20undefined)%20this.IDcount%2B%2B%3B%0D%0A%20%20%20%20%20%20this.IDs%5Bargs.ID%5D%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20ID%3A%20args.ID.toString()%2C%0D%0A%20%20%20%20%20%20%20%20%22X%20Velocity%22%3A%20args.VELX.toString()%2C%0D%0A%20%20%20%20%20%20%20%20%22Y%20Velocity%22%3A%20args.VELY.toString()%2C%0D%0A%20%20%20%20%20%20%20%20active%3A%20false%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20runtime.startHats(%22ParticleToolsSP_whenID%22%2C%20%7B%20TYPE%3A%20%22added%22%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20reportID(args)%20%7B%0D%0A%20%20%20%20%20%20const%20ID%20%3D%20args.NAME%3B%0D%0A%20%20%20%20%20%20if%20(this.IDs%5BID%5D%20%3D%3D%3D%20undefined)%20return%20%22ID%20doesnt%20exist!%22%3B%0D%0A%20%20%20%20%20%20const%20Value%20%3D%20this.IDs%5BID%5D%3B%0D%0A%20%20%20%20%20%20delete%20Value.active%3B%0D%0A%20%20%20%20%20%20if%20(args.REPORT%20%3D%3D%3D%20%22all%22)%20return%20JSON.stringify(Value)%3B%0D%0A%20%20%20%20%20%20else%20if%20(args.REPORT%20%3D%3D%3D%20%22x%20velocity%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.IDs%5BID%5D.active%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20return%20Value%5B%22X%20Velocity%22%5D%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20this.IDs%5BID%5D.active%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20return%20Value%5B%22Y%20Velocity%22%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20updateGravity(args)%20%7B%0D%0A%20%20%20%20%20%20const%20ID%20%3D%20args.ID%3B%0D%0A%20%20%20%20%20%20if%20(this.IDs%5BID%5D%20!%3D%3D%20undefined)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.IDs%5BID%5D.active%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20const%20Value%20%3D%20this.IDs%5BID%5D%3B%0D%0A%20%20%20%20%20%20%20%20const%20currentXVelocity%20%3D%20parseFloat(Value%5B%22X%20Velocity%22%5D)%3B%0D%0A%20%20%20%20%20%20%20%20const%20currentYVelocity%20%3D%20parseFloat(Value%5B%22Y%20Velocity%22%5D)%3B%0D%0A%20%20%20%20%20%20%20%20const%20newXVelocity%20%3D%20currentXVelocity%20-%20this.Gravity%3B%0D%0A%20%20%20%20%20%20%20%20const%20newYVelocity%20%3D%20currentYVelocity%20-%20this.Gravity%3B%0D%0A%20%20%20%20%20%20%20%20if%20(args.REPORT%20%3D%3D%3D%20%22all%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20Value%5B%22X%20Velocity%22%5D%20%3D%20newXVelocity.toString()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20Value%5B%22Y%20Velocity%22%5D%20%3D%20newYVelocity.toString()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(args.REPORT%20%3D%3D%3D%20%22x%20velocity%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20Value%5B%22X%20Velocity%22%5D%20%3D%20newXVelocity.toString()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20Value%5B%22Y%20Velocity%22%5D%20%3D%20newYVelocity.toString()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20updateCustomGravity(args)%20%7B%0D%0A%20%20%20%20%20%20const%20ID%20%3D%20args.ID%3B%0D%0A%20%20%20%20%20%20if%20(this.IDs%5BID%5D%20!%3D%3D%20undefined)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.IDs%5BID%5D.active%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20const%20Value%20%3D%20this.IDs%5BID%5D%3B%0D%0A%20%20%20%20%20%20%20%20const%20currentXVelocity%20%3D%20parseFloat(Value%5B%22X%20Velocity%22%5D)%3B%0D%0A%20%20%20%20%20%20%20%20const%20currentYVelocity%20%3D%20parseFloat(Value%5B%22Y%20Velocity%22%5D)%3B%0D%0A%20%20%20%20%20%20%20%20const%20newXVelocity%20%3D%20currentXVelocity%20-%20args.INPUT%3B%0D%0A%20%20%20%20%20%20%20%20const%20newYVelocity%20%3D%20currentYVelocity%20-%20args.INPUT%3B%0D%0A%20%20%20%20%20%20%20%20if%20(args.REPORT%20%3D%3D%3D%20%22all%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20Value%5B%22X%20Velocity%22%5D%20%3D%20newXVelocity.toString()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20Value%5B%22Y%20Velocity%22%5D%20%3D%20newYVelocity.toString()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(args.REPORT%20%3D%3D%3D%20%22x%20velocity%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20Value%5B%22X%20Velocity%22%5D%20%3D%20newXVelocity.toString()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20Value%5B%22Y%20Velocity%22%5D%20%3D%20newYVelocity.toString()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20genVel(args)%20%7B%0D%0A%20%20%20%20%20%20if%20(args.TorF%20%3D%3D%3D%20%22on%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20max%20%3D%20Scratch.Cast.toNumber(args.MAX)%3B%0D%0A%20%20%20%20%20%20%20%20const%20min%20%3D%20Scratch.Cast.toNumber(args.MIN)%3B%0D%0A%20%20%20%20%20%20%20%20return%20Math.round((Math.random()%20*%20(max%20-%20min%20%2B%201)%20%2B%20min)%20*%2010000)%20%2F10000%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20max%20%3D%20Scratch.Cast.toNumber(args.MAX)%3B%0D%0A%20%20%20%20%20%20%20%20const%20min%20%3D%20Scratch.Cast.toNumber(args.MIN)%3B%0D%0A%20%20%20%20%20%20%20%20return%20Math.floor(Math.random()%20*%20(max%20-%20min%20%2B%201)%20%2B%20min)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20reportCnt()%20%7B%20return%20this.IDcount%20%7D%0D%0A%0D%0A%20%20%20%20currentGrav()%20%7B%20return%20this.Gravity%20%7D%0D%0A%0D%0A%20%20%20%20deleteID()%20%7B%0D%0A%20%20%20%20%20%20if%20(Object.keys(this.IDs).length%20%3E%200)%20runtime.startHats(%22ParticleToolsSP_whenID%22%2C%20%7B%20TYPE%3A%20%22deleted%22%20%7D)%3B%0D%0A%20%20%20%20%20%20this.IDs%20%3D%20%7B%7D%3B%0D%0A%20%20%20%20%20%20this.IDcount%20%3D%200%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20deleteOneID(args)%20%7B%0D%0A%20%20%20%20%20%20const%20ID%20%3D%20args.NAME%3B%0D%0A%20%20%20%20%20%20if%20(this.IDs%5BID%5D)%20%7B%0D%0A%20%20%20%20%20%20%20%20runtime.startHats(%22ParticleToolsSP_whenID%22%2C%20%7B%20TYPE%3A%20%22deleted%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20delete%20this.IDs%5BID%5D%3B%0D%0A%20%20%20%20%20%20%20%20if%20(this.IDcount%20%3E%200)%20this.IDcount--%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20existID(args)%20%7B%0D%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22exists%22)%20return%20Scratch.Cast.toBoolean(this.IDs%5Bargs.NAME%5D)%3B%0D%0A%20%20%20%20%20%20else%20return%20(this.IDs%5Bargs.NAME%5D%20%26%26%20this.IDs%5Bargs.NAME%5D.active)%20%7C%7C%20false%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setGravity(args)%20%7B%20this.Gravity%20%3D%20args.GRAVITY%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20ParticleToolsSP())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Sprite%20Effects%0A%2F%2F%20ID%3A%20SPspriteEffects%0A%2F%2F%20Description%3A%20Apply%20New%20Non-Vanilla%20Effects%20to%20Sprites%20and%20the%20Canvas!%0A%2F%2F%20By%3A%20SharkPool%0A%0A%2F%2F%20Version%20V.1.6.0%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Sprite%20Effects%20must%20run%20unsandboxed%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMzYiIGhlaWdodD0iMTM2IiB2aWV3Qm94PSIwLDAsMTM2LDEzNiI%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3MiwtMTEyKSI%2BPGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTE3MiwxODBjMCwtMzcuNTU1MzYgMzAuNDQ0NjQsLTY4IDY4LC02OGMzNy41NTUzNiwwIDY4LDMwLjQ0NDY0IDY4LDY4YzAsMzcuNTU1MzYgLTMwLjQ0NDY0LDY4IC02OCw2OGMtMzcuNTU1MzYsMCAtNjgsLTMwLjQ0NDY0IC02OCwtNjh6IiBmaWxsPSIjNzc0ZGNiIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTE3OC40MzI0MywxODBjMCwtMzQuMDAyODMgMjcuNTY0NzQsLTYxLjU2NzU3IDYxLjU2NzU3LC02MS41Njc1N2MzNC4wMDI4MywwIDYxLjU2NzU3LDI3LjU2NDc0IDYxLjU2NzU3LDYxLjU2NzU3YzAsMzQuMDAyODMgLTI3LjU2NDc0LDYxLjU2NzU3IC02MS41Njc1Nyw2MS41Njc1N2MtMzQuMDAyODMsMCAtNjEuNTY3NTcsLTI3LjU2NDc0IC02MS41Njc1NywtNjEuNTY3NTd6IiBmaWxsPSIjOTk2NmZmIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSJub3JtYWwiIGZvbnQtc2l6ZT0iMTIiIHRleHQtYW5jaG9yPSJzdGFydCIvPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPjxwYXRoIGQ9Ik0yNjkuNTE4MTYsMTcwLjE5ODgyYzEuNjk4NzYsLTAuNzM5ODkgMi44NzM5NSwtMi4zMjkxOSAzLjA4MzU5LC00LjE3MDE4bDAuNDc5MDUsLTQuMTg1NThjMC4yMjg5LC0xLjk3OTA1IDIuOTI3MjksLTIuMzgzMjYgMy43MjMwNSwtMC41NTc3bDEuNjg3NDgsMy44NjEwNWMwLjczOTg5LDEuNjk4NzYgMi4zMjkxOSwyLjg3Mzk1IDQuMTY3MTksMy4wODQwNmw0LjE4NTU5LDAuNDc5MDZjMS45NzkwNSwwLjIyODkgMi4zODMyNywyLjkyNzMxIDAuNTU4MTUsMy43MjYwNmwtMy44NjE1MSwxLjY4NDQ3Yy0xLjY5NTc2LDAuNzM5NDMgLTIuODcwOTQsMi4zMjg3NCAtMy4wODEwNSw0LjE2Njc0bC0wLjQ4MjA2LDQuMTg2MDVjLTAuMjI1OTEsMS45Nzg2IC0yLjkyNDMxLDIuMzgyODIgLTMuNzIzMDYsMC41NTc2OWwtMS42ODQ0OCwtMy44NjE1MWMtMC43Mzk0MywtMS42OTU3NiAtMi4zMjg3NCwtMi44NzA5NCAtNC4xNjk3MywtMy4wODA2bC00LjE4NTU4LC0wLjQ3OTA2Yy0xLjk3OTA1LC0wLjIyODkgLTIuMzgzMjgsLTIuOTI3MzEgLTAuNTU4MTYsLTMuNzI2MDV6Ii8%2BPC9nPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPjxwYXRoIGQ9Ik0xOTUuMzExODksMTkyLjgzNDM2YzEuNDQzNTMsLTEuNTYwOCAxLjk0NTI0LC0zLjc3MjU1IDEuMzE2NDQsLTUuODAzNDNsLTEuNDI3MDUsLTQuNjE4NGMtMC42NzIyMywtMi4xODQ4MSAxLjk3NjM1LC0zLjg1Mzk2IDMuNjU0MzIsLTIuMzAyOThsMy41NTM1OSwzLjI3ODI2YzEuNTYwOCwxLjQ0MzUzIDMuNzcyNTUsMS45NDUyMyA1LjgwMDQ5LDEuMzE4MzFsNC42MTg0MSwtMS40MjcwNWMyLjE4NDgxLC0wLjY3MjI0IDMuODUzOTcsMS45NzYzNSAyLjMwNDgzLDMuNjU3MjdsLTMuMjgwMTIsMy41NTA2NWMtMS40NDA1OCwxLjU1ODkzIC0xLjk0MjI5LDMuNzcwNjkgLTEuMzE1MzYsNS43OTg2MmwxLjQyNDEsNC42MjAyN2MwLjY3NTE3LDIuMTgyOTYgLTEuOTczNCwzLjg1MjExIC0zLjY1NDMyLDIuMzAyOTdsLTMuNTUwNjUsLTMuMjgwMTJjLTEuNTU4OTMsLTEuNDQwNTggLTMuNzcwNjgsLTEuOTQyMjggLTUuODAxNTcsLTEuMzEzNWwtNC42MTg0MSwxLjQyNzA1Yy0yLjE4NDgxLDAuNjcyMjQgLTMuODUzOTcsLTEuOTc2MzUgLTIuMzA0ODMsLTMuNjU3Mjd6Ii8%2BPC9nPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPjxwYXRoIGQ9Ik0yMzMuNDk5MDMsMjE4LjQxODAxYzEuMzA5NjYsLTAuNzczNzMgMi4xMDczLC0yLjE4Njg1IDIuMDkyOTEsLTMuNzA3OTJsLTAuMDMwNzQsLTMuNDU4NDdjLTAuMDEyNTgsLTEuNjM1NDkgMi4xNDUzMywtMi4yMzYyOCAyLjk3NzM0LC0wLjgyODkxbDEuNzYzMjksMi45NzYwOWMwLjc3MzczLDEuMzA5NjYgMi4xODY4NSwyLjEwNzI5IDMuNzA1NTIsMi4wOTM1OWwzLjQ1ODQ3LC0wLjAzMDczYzEuNjM1NDksLTAuMDEyNTggMi4yMzYyOSwyLjE0NTMzIDAuODI5NTksMi45Nzk3M2wtMi45NzY3OCwxLjc2MDljLTEuMzA3MjUsMC43NzMwNiAtMi4xMDQ5LDIuMTg2MTggLTIuMDkxMTgsMy43MDQ4NmwwLjAyODMzLDMuNDU5MTVjMC4wMTQ5NywxLjYzNDgzIC0yLjE0MjkzLDIuMjM1NjEgLTIuOTc3MzMsMC44Mjg5MWwtMS43NjA5LC0yLjk3Njc5Yy0wLjc3MzA2LC0xLjMwNzI1IC0yLjE4NjE4LC0yLjEwNDg5IC0zLjcwNzI1LC0yLjA5MDUybC0zLjQ1ODQ2LDAuMDMwNzRjLTEuNjM1NDksMC4wMTI1OCAtMi4yMzYyOSwtMi4xNDUzMyAtMC44Mjk1OSwtMi45Nzk3M3oiLz48L2c%2BPGcgZmlsbD0iI2ZmZmZmZiIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMCI%2BPHBhdGggZD0iTTI2OS40NzcwMywyMTQuNzA0NTFsLTAuMjUwNDksLTAuMjUwNWMtMC4wMDA1NCwtMC4wMDA1MyAtMC4wMDEwNywtMC4wMDEwNyAtMC4wMDE2MSwtMC4wMDE2bC0wLjAwMDAyLC0wLjAwMDAybC0yNi4xNDA1OSwtMjYuMTQxNDVjLTIuOTc1NzcsMi4wNDU2NCAtNi43NzEyMiwyLjg3NTM5IC0xMC41NjI0NywxLjk4MDE1Yy02LjQ0MTUzLC0xLjUyMTA1IC0xMC42NjYzOCwtNy41MDEyIC0xMC4xNzc0NiwtMTMuODk5NDljLTAuMzI3NjksMC4wMjQyNSAtMC42NTg3LDAuMDM2NTkgLTAuOTkyNTksMC4wMzY1OWMtNy4zMjMzNywwIC0xMy4yNjAyMiwtNS45MzY4NSAtMTMuMjYwMjIsLTEzLjI2MDIyYzAsLTIuNzkwNzEgMC44NjIxMiwtNS4zODAwNyAyLjMzNDU0LC03LjUxNjMxbC0xLjM3Njg4LC0xLjM3NjkzYy0wLjk0MDcxLC0wLjk0MDcxIC0wLjk0MDcxLC0yLjQ2ODYxIDAsLTMuNDA5MzJjMC45NDA3MSwtMC45NDA3MSAyLjQ2ODYxLC0wLjk0MDcxIDMuNDA5MzIsMGwwLjI0ODA3LDAuMjQ4MDdjMC4wMDEzNSwwLjAwMTM0IDAuMDAyNjksMC4wMDI2OCAwLjAwNDA0LDAuMDA0MDNsMS4xMjQ4LDEuMTI0OGMyLjEzNjIzLC0xLjQ3MjQ0IDQuNzI1NjEsLTIuMzM0NTcgNy41MTYzNCwtMi4zMzQ1N2M3LjMyMzM3LDAgMTMuMjYwMjIsNS45MzY4NSAxMy4yNjAyMiwxMy4yNjAyMmMwLDAuMzMzNDYgLTAuMDEyMzEsMC42NjQwNCAtMC4wMzY1LDAuOTkxMzJjMS4zMjIyNSwtMC4wOTg5OSAyLjY4MTkyLDAuMDAwMjYgNC4wNDEwNCwwLjMyMTJjNy4xMjc0MSwxLjY4MzAxIDExLjU0MDk1LDguODI1MjYgOS44NTc5NSwxNS45NTI2NmMtMC4zODk0OSwxLjY0OTQ3IC0xLjA3MTM3LDMuMTUzNTkgLTEuOTc3NzksNC40NzA0M2wyNi4zODk2MywyNi4zODk2M2MwLjk0MDcxLDAuOTQwNzEgMC45NDA3MSwyLjQ2ODYyIDAsMy40MDkzM2MtMC40NzEzMywwLjQ2OTM3IC0xLjA4Nzk5LDAuNzA2OTkgLTEuNzA0NjUsMC43MDY5OWgtMC4wMDAwMWMtMC42MTY2NywwIC0xLjIzMzMyLC0wLjIzNTY2IC0xLjcwNDY1LC0wLjcwNTA0eiIvPjxwYXRoIGQ9Ik0yMjEuMzUxOCwxNzYuNDI4MmMtNy4zMjMzNywwIC0xMy4yNjAyMiwtNS45MzY4NSAtMTMuMjYwMjIsLTEzLjI2MDIyYzAsLTIuNzkwNzEgMC44NjIxMSwtNS4zODAwNyAyLjMzNDUzLC03LjUxNjMxbC0xLjEyNDc4LC0xLjEyNDgxYy0wLjQ3MDM2LC0wLjQ3MDM2IC0wLjcwNTUzLC0xLjA4NzUxIC0wLjcwNTUzLC0xLjcwNDY3YzAsLTAuNjE3MTYgMC4yMzUxNywtMS4yMzQzMSAwLjcwNTUzLC0xLjcwNDY3YzAuOTQwNzEsLTAuOTQwNzEgMi40Njg2MiwtMC45NDA3MSAzLjQwOTMzLDBsMS4xMjQ4LDEuMTI0OGMyLjEzNjIzLC0xLjQ3MjQ0IDQuNzI1NjEsLTIuMzM0NTcgNy41MTYzNCwtMi4zMzQ1N2M3LjMyMzM3LDAgMTMuMjYwMjIsNS45MzY4NSAxMy4yNjAyMiwxMy4yNjAyMmMwLDIuNzkwNzMgLTAuODYyMTMsNS4zODAxIC0yLjMzNDU3LDcuNTE2MzRsMTAuNDkwMTIsMTAuNDkwMTJjMi4xMzYyMywtMS40NzI0NCA0LjcyNTYxLC0yLjMzNDU1IDcuNTE2MzMsLTIuMzM0NTVjNy4zMjMzNywwIDEzLjI2MjE4LDUuOTM4ODIgMTMuMjYyMTgsMTMuMjYwMjJjMCwyLjc5MDkgLTAuODYyNTIsNS4zODA3MSAtMi4zMzU0Nyw3LjUxNzM3bDExLjY3NTc1LDExLjY3NTc1YzAuOTQwNzEsMC45NDA3MSAwLjk0MDcxLDIuNDY4NjIgMCwzLjQwOTMzYy0wLjQ3MTMzLDAuNDY5MzcgLTEuMDg3OTksMC43MDY5OSAtMS43MDQ2NSwwLjcwNjk5aC0wLjAwMDAxYy0wLjYxNjY3LDAgLTEuMjMzMzIsLTAuMjM1NjYgLTEuNzA0NjUsLTAuNzA1MDRsLTAuMDAwMDIsMC4wMDAwMWwtMTEuNjc2NjksLTExLjY3NzA3Yy0yLjEzNjQ4LDEuNDcyNTYgLTQuNzI1OTUsMi4zMzQ4MyAtNy41MTY0NCwyLjMzNDgzYy03LjMyMzM3LDAgLTEzLjI2MDIyLC01LjkzODgxIC0xMy4yNjAyMiwtMTMuMjYyMThjMCwtMi43OTA0OCAwLjg2MTk3LC01LjM3OTY0IDIuMzM0MTYsLTcuNTE1NzZsLTEwLjQ5MDA5LC0xMC40OTA0M2MtMi4xMzYxNiwxLjQ3MjI4IC00LjcyNTQsMi4zMzQyOSAtNy41MTU5NSwyLjMzNDI5eiIvPjxwYXRoIGQ9Ik0yNjkuNDc3MDMsMjE0LjcwNDUxbC0wLjU3MTk2LC0wLjU3MTk4bC0xNC4xOTY1MSwtMTQuMTk2NTFjLTAuMDEwMSwtMC4wMTAwOCAtMC4wMjAwOCwtMC4wMjAyMiAtMC4wMjk5NiwtMC4wMzA0M2wtMjUuODEwODUsLTI1LjgxMTY5Yy0yLjEzNjE2LDEuNDcyMjggLTQuNzI1NCwyLjMzNDMgLTcuNTE1OTUsMi4zMzQzYy03LjMyMzM3LDAgLTEzLjI2MDIyLC01LjkzNjg1IC0xMy4yNjAyMiwtMTMuMjYwMjJjMCwtMi43OTA3MSAwLjg2MjEyLC01LjM4MDA3IDIuMzM0NTQsLTcuNTE2MzFsLTEuMTI0NzgsLTEuMTI0ODJjLTAuNDcwMzYsLTAuNDcwMzYgLTAuNzA1NTMsLTEuMDg3NTEgLTAuNzA1NTMsLTEuNzA0NjZjMCwtMC42MTcxNSAwLjIzNTE4LC0xLjIzNDMxIDAuNzA1NTMsLTEuNzA0NjZjMC45NDA3MSwtMC45NDA3MSAyLjQ2ODYyLC0wLjk0MDcxIDMuNDA5MzMsMGwxLjEyNDgsMS4xMjQ4YzIuMTM2MjMsLTEuNDcyNDQgNC43MjU2MSwtMi4zMzQ1NyA3LjUxNjM0LC0yLjMzNDU3YzcuMzIzMzcsMCAxMy4yNjAyMiw1LjkzNjg1IDEzLjI2MDIyLDEzLjI2MDIyYzAsMi43OTA3MyAtMC44NjIxMyw1LjM4MDEgLTIuMzM0NTcsNy41MTYzNGw0MC42MDg5LDQwLjYwODljMC45NDA3MSwwLjk0MDcxIDAuOTQwNzEsMi40Njg2MiAwLDMuNDA5MzNjLTAuNDcxMzMsMC40NjkzNyAtMS4wODc5OSwwLjcwNjk5IC0xLjcwNDY1LDAuNzA2OTloLTAuMDAwMDFjLTAuNjE2NjcsMCAtMS4yMzMzMiwtMC4yMzU2NiAtMS43MDQ2NSwtMC43MDUwNHoiLz48L2c%2BPGcgZmlsbD0iI2ZmZmZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSI%2BPHBhdGggZD0iTTIzNS42Njg4MywxNDAuNDY4NWMwLjY4NzMyLC0xLjI2ODI1IDAuNjQ2MjcsLTIuODA2NTMgLTAuMTA3NzIsLTQuMDM2MzFsLTEuNzEyNzUsLTIuNzk3MTNjLTAuODA4MzYsLTEuMzIzNyAwLjY1MzA3LC0yLjg2NTI4IDIuMDE2MzksLTIuMTI2OTZsMi44ODYxMSwxLjU1OTRjMS4yNjgyNSwwLjY4NzMyIDIuODA2NTMsMC42NDYyNyA0LjAzNDcsLTAuMTA2bDIuNzk3MTMsLTEuNzEyNzVjMS4zMjM3LC0wLjgwODM2IDIuODY1MjksMC42NTMwNyAyLjEyODY4LDIuMDE4MDFsLTEuNTYxMTIsMi44ODQ1Yy0wLjY4NTY5LDEuMjY2NTQgLTAuNjQ0NjQsMi44MDQ4MiAwLjEwNzYzLDQuMDMyOThsMS43MTExMywyLjc5ODg1YzAuODA5OTksMS4zMjE5OSAtMC42NTE0NSwyLjg2MzU3IC0yLjAxNjM5LDIuMTI2OTZsLTIuODg0NTEsLTEuNTYxMTNjLTEuMjY2NTQsLTAuNjg1NjkgLTIuODA0ODEsLTAuNjQ0NjMgLTQuMDM0NiwwLjEwOTM1bC0yLjc5NzExLDEuNzEyNzRjLTEuMzIzNywwLjgwODM2IC0yLjg2NTI5LC0wLjY1MzA3IC0yLjEyODY3LC0yLjAxODAxeiIvPjwvZz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%0A%20%20let%20sprite%20%3D%20true%3B%0A%20%20let%20nameOffset%20%3D%200%3B%0A%20%20let%20displacementSrCs%20%3D%20%5B%5D%3B%0A%20%20let%20maskOptions%20%3D%20%5B0%2C%200%2C%20100%5D%3B%0A%20%20let%20allFilters%20%3D%20%5B%5D%3B%0A%20%20%2F*%20%0A%20%20%20%20Note%3A%20Canvas%20Filter%20Application%0A%20%20%20%20The%20reason%20I%20use%3A%20%22Scratch.renderer.canvas.parentNode.parentNode.parentNode%22%0A%0A%20%20%20%20Is%20due%20to%20the%20%22Canvas%20Effects%22%20Extension%20not%20allowing%20other%20extensions%0A%20%20%20%20to%20apply%20effects%20to%20the%20Canvas.%20I%20use%202%20other%20parentNodes%20because%20the%0A%20%20%20%20filter%20attributes%20are%20amplified%20for%20some%20reason%20%3A%2F%0A%20%20*%2F%0A%20%20let%20canvas%20%3D%20Scratch.renderer.canvas.parentNode.parentNode.parentNode%3B%0A%0A%20%20%2F%2F%20This%20function%20was%20ripped%20from%20Looks%20Plus%20by%20Lily%0A%20%20const%20requireNonPackagedRuntime%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(runtime.isPackaged)%20%7B%0A%20%20%20%20%20%20alert(%60For%20Sprite%20Effects%20Blocks%20to%20work%2C%20the%20creator%20of%20the%20packaged%20project%20must%20uncheck%20%22Remove%20raw%20asset%20data%20after%20loading%20to%20save%20RAM%22%20under%20advanced%20settings%20in%20the%20packager.%60)%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20true%3B%0A%20%20%7D%3B%0A%0A%20%20class%20SPspriteEffects%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPspriteEffects%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Sprite%20Effects%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%239966FF%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23774DCB%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22sourceSwitch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Switch%20Effect%20Sources%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Filters%20and%20Effects%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSpriteBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20blend%20mode%20of%20%5BSPRITE%5D%20to%20%5BBLEND%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BLEND%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22BLENDING%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setImageBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20blend%20mode%20of%20%5BSPRITE%5D%20to%20%5BBLEND%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BLEND%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22BLENDING%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSpriteEffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20effect%20to%20%5BSPRITE%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EFFECTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setImageEffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20effect%20to%20%5BSPRITE%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EFFECTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSpriteMotion%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20motion%20blur%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setImageMotion%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20motion%20blur%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%25%20y%20%5BY%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22hueSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20hue%20%5BCOLOR%5D%20to%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22hueImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20hue%20%5BCOLOR%5D%20to%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22splitSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20effect%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20with%20colors%20%5BCOLOR1%5D%20%5BCOLOR2%5D%20and%20%5BCOLOR3%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR2%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%2300ff00%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR3%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%230000ff%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22SPLITTING%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22splitImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20effect%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20with%20colors%20%5BCOLOR1%5D%20%5BCOLOR2%5D%20and%20%5BCOLOR3%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR2%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%2300ff00%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR3%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%230000ff%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22SPLITTING%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyCustomSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20effect%20with%20ID%20%5BID%5D%20to%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22custom-svg-filter%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22my-filter%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyCustomImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20effect%20with%20ID%20%5BID%5D%20to%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22custom-svg-filter%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22my-filter%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22waveSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20wave%20effect%20to%20%5BSPRITE%5D%20on%20%5Baxis%5D%20with%20seed%20%5BSEED%5D%20at%20x%20%5BNUM%5D%20y%20%5BY%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22AXISES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEED%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22waveImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20wave%20effect%20to%20%5BSPRITE%5D%20on%20%5Baxis%5D%20with%20seed%20%5BSEED%5D%20at%20%5BNUM%5D%20y%20%5BY%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22AXISES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEED%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22glitchSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20glitch%20effect%20to%20%5BSPRITE%5D%20with%20%5BLINE%5D%20lines%20offset%20x%20%5BX%5D%20y%20%5BY%5D%20thickness%20%5BNUM%5D%20on%20%5Baxis%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22AXISES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LINE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22glitchImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20glitch%20effect%20to%20%5BSPRITE%5D%20with%20%5BLINE%5D%20lines%20offset%20x%20%5BX%5D%20y%20%5BY%5D%20thickness%20%5BNUM%5D%20on%20%5Baxis%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22AXISES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LINE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tileSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20mosaic%20effect%20to%20%5BSPRITE%5D%20at%20x%20%5Bx%5D%20y%20%5By%5D%20size%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tileImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20mosaic%20effect%20to%20%5BSPRITE%5D%20at%20x%20%5Bx%5D%20y%20%5By%5D%20size%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22vhsSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20vhs%20effect%20to%20%5BSPRITE%5D%20offset%20x%20%5BX%5D%20y%20%5BY%5D%20on%20%5Baxis%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22AXISES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22vhsImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20vhs%20effect%20to%20%5BSPRITE%5D%20offset%20x%20%5BX%5D%20y%20%5BY%5D%20on%20%5Baxis%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22AXISES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ditherSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20dither%20effect%20to%20%5BSPRITE%5D%20width%20%5BW%5D%20height%20%5BH%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20W%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20H%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ditherImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20dither%20effect%20to%20%5BSPRITE%5D%20width%20%5BW%5D%20height%20%5BH%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20W%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20H%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22distortSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20distortion%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22DISTORTION%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22distortImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20distortion%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22DISTORTION%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22distortSpriteImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20distortion%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22distortImageImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20%5BEFFECT%5D%20distortion%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22distortPreset%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22distortion%20%5BTYPE%5D%20preset%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22DISTORTION%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Formatting%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22patternSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20%5BCOLOR%5D%20with%20pattern%20%5BPAT%5D%20scale%20%5BSIZE%5D%20in%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PAT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22patternImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20%5BCOLOR%5D%20with%20pattern%20%5BPAT%5D%20scale%20%5BSIZE%5D%20in%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PAT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22outlineSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22add%20%5BOUTLINE%5D%20outline%20to%20%5BSPRITE%5D%20at%20%5BNUM%5D%25%20colored%20%5BCOLOR%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OUTLINE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OUTLINES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22outlineImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22add%20%5BOUTLINE%5D%20outline%20to%20%5BSPRITE%5D%20at%20%5BNUM%5D%25%20colored%20%5BCOLOR%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OUTLINE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OUTLINES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteShadow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22add%20shadow%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20colored%20%5BCOLOR%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22imageShadow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22add%20shadow%20to%20%5BSPRITE%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20colored%20%5BCOLOR%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applySpriteLight%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22add%20lighting%20to%20%5BSPRITE%5D%20tinted%20%5BCOLOR%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyImageLight%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22add%20lighting%20to%20%5BSPRITE%5D%20tinted%20%5BCOLOR%5D%20at%20x%20%5BX%5D%20y%20%5BY%5D%20at%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22advSpriteLight%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20light%20to%20%5BSPRITE%5D%20using%20map%20%5BMAP%5D%20with%20mode%20%5BBLEND%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BLEND%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22BLENDING2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MAP%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22advImageLight%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20light%20to%20%5BSPRITE%5D%20using%20map%20%5BMAP%5D%20with%20mode%20%5BBLEND%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BLEND%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22BLENDING2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MAP%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22maskSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22mask%20%5BTYPE%5D%20%5BSPRITE2%5D%20from%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22MASKING%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22maskImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22mask%20%5BTYPE%5D%20%5BSPRITE2%5D%20from%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22MASKING%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setMaskXY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20mask%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setMaskSZ%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20mask%20size%20to%20%5BSIZE%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22maskATT%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22current%20%5BATT%5D%20of%20mask%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22maskATTs%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unClipSPR%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22resize%20viewbox%20of%20%5BSPRITE%5D%20by%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unClipIMG%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22resize%20viewbox%20of%20%5BSPRITE%5D%20by%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setXY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BSPRITE%5D%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setXY2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BSPRITE%5D%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDIR%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22point%20%5BSPRITE%5D%20in%20direction%20%5BDIR%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIR%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2090%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDIR2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22point%20%5BSPRITE%5D%20in%20direction%20%5BDIR%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIR%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2090%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSCALE%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22stretch%20%5BSPRITE%5D%20to%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSCALE2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22stretch%20%5BSPRITE%5D%20to%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSKEW%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22skew%20%5BSPRITE%5D%20to%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSKEW2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22skew%20%5BSPRITE%5D%20to%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20sprite%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22data%20URI%20or%20%3Csvg%20content%3E%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Canvas%20Filters%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22filterWarn%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Canvas%20Filter%20Disclaimer%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22addCanvasFilter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20filter%20%5BFILTER%5D%20to%20canvas%20with%20name%20%5BNAME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FILTER%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22insert%20sprite%2Fcustom%20filter%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22filter-1%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22removeCanvasFilter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22remove%20filter%20named%20%5BNAME%5D%20from%20canvas%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22filter-1%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22removeAllFilters%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22remove%20all%20canvas%20filters%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22canvasWarn%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Canvas%20Effects%20Compatibility%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22toggleCompat%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22toggle%20compatibility%20with%20Canvas%20Effects%20%5BON_OFF%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ON_OFF%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TOGGLE%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20TARGETS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this.getTargets(false)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TARGETS2%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this.getTargets(true)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20EFFECTS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22blur%22%2C%20%22saturation%22%2C%20%22contrast%22%2C%20%22sepia%22%2C%20%22bloom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22bloom%20v2%22%2C%20%22amplify%22%2C%20%22discrete%22%2C%20%22thermal%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22posterize%22%2C%20%22inflate%22%2C%20%22bevel%22%2C%20%22liquify%22%2C%20%22ripple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22erode%22%2C%20%22torn%22%2C%20%22disolve%22%2C%20%22displacement%22%2C%20%22grain%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20DISTORTION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22bulge%22%2C%20%22whirl%22%2C%20%22ripple%22%2C%20%22shockwave%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20maskATTs%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22text%22%3A%22x%20position%22%2C%20%22value%22%3A%220%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22text%22%3A%22y%20position%22%2C%20%22value%22%3A%221%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22text%22%3A%22size%22%2C%20%22value%22%3A%222%22%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20OUTLINES%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22filled%22%2C%20%22solid%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20AXISES%3A%20%7B%20acceptReporters%3A%20false%2C%20items%3A%20%5B%22x%20axis%22%2C%20%22y%20axis%22%2C%20%22both%20axes%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20SPLITTING%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22color%20split%22%2C%20%22abberation%22%2C%20%22chromatic%20aberration%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20MASKING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%7B%22text%22%3A%22erase%22%2C%20%22value%22%3A%22out%22%7D%2C%20%7B%22text%22%3A%22overlay%22%2C%20%22value%22%3A%22%20%22%7D%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TOGGLE%3A%20%20%5B%22on%22%2C%20%22off%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20BLENDING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22normal%22%2C%20%22multiply%22%2C%20%22screen%22%2C%20%22overlay%22%2C%20%22exclusion%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22color-dodge%22%2C%20%22color-burn%22%2C%20%22hard-light%22%2C%20%22soft-light%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22difference%22%2C%20%22luminosity%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20BLENDING2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22multiply%22%2C%20%22screen%22%2C%20%22darken%22%2C%20%22lighten%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22overlay%22%2C%20%22hard-light%22%2C%20%22soft-light%22%2C%20%22difference%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22exclusion%22%2C%20%22hue%22%2C%20%22saturation%22%2C%20%22color%22%2C%20%22luminosity%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20sourceSwitch()%20%7B%20sprite%20%3D%20sprite%20%3F%20false%20%3A%20true%2C%20Scratch.vm.extensionManager.refreshBlocks()%20%7D%0A%20%20%20%20filterWarn()%20%7B%0A%20%20%20%20%20%20alert(%60Unfortunately%2C%20due%20to%20various%20limitations%2C%20not%20ALL%20effects%20(like%20some%20Formatting%20Blocks)%20will%20work%20on%20the%20Canvas...%0A%20%20%20%20%20%20%20%20%5CnYou%20are%20welcome%20to%20experiment%20by%20making%20your%20own%20svg%20filters%20and%20using%20them%20on%20the%20canvas!%60)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20toggleCompat(args)%20%7B%20canvas%20%3D%20args.ON_OFF%20%3D%3D%3D%20%22on%22%20%3F%20vm.renderer.canvas.parentNode.parentNode.parentNode%20%3A%20vm.renderer.canvas%20%7D%0A%20%20%20%20canvasWarn()%20%7B%0A%20%20%20%20%20%20alert(%60Canvas%20Effects%2C%20created%20by%20TheShovel%2C%20was%20coded%20to%20not%20work%20with%20extensions%20like%20Sprite%20Effects%2C%0A%20%20%20%20%20%20%20%20%5CnToggling%20Compatibility%20%22off%22%20will%20cause%20Sprite%20Effects%20Canvas%20Filters%20to%20not%20Work%20with%20Canvas%20Effects%0A%20%20%20%20%20%20%20%20%5CnToggling%20Compatibility%20%22on%22%20will%20cause%20Sprite%20Effects%20Canvas%20Filters%20to%20Work%20with%20Canvas%20Effects%2C%20but%20will%20have%20Weird%20Visual%20Bugs%60)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setSpriteEffect(args%2C%20util)%20%7B%20return%20this.setMainEffect(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20setImageEffect(args)%20%7B%20return%20await%20this.setMainEffect(args%2C%20true)%20%7D%0A%20%20%20%20applyCustomSprite(args%2C%20util)%20%7B%20return%20this.customFilter(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20applyCustomImage(args)%20%7B%20return%20await%20this.customFilter(args%2C%20true)%20%7D%0A%0A%20%20%20%20setSpriteMotion(args%2C%20util)%20%7B%20return%20this.motionBlur(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20setImageMotion(args)%20%7B%20return%20await%20this.motionBlur(args%2C%20true)%20%7D%0A%0A%20%20%20%20setSpriteBlend(args%2C%20util)%20%7B%20return%20this.blendType(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20setImageBlend(args)%20%7B%20return%20await%20this.blendType(args%2C%20true)%20%7D%0A%20%20%20%20hueSprite(args%2C%20util)%20%7B%20return%20this.setHue(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20hueImage(args)%20%7B%20return%20await%20this.setHue(args%2C%20true)%20%7D%0A%0A%20%20%20%20splitSprite(args%2C%20util)%20%7B%20return%20this.colorSplit(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20splitImage(args)%20%7B%20return%20await%20this.colorSplit(args%2C%20true)%20%7D%0A%0A%20%20%20%20distortSprite(args%2C%20util)%20%7B%20return%20this.setDistort(args%2C%20false%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20distortImage(args)%20%7B%20return%20await%20this.setDistort(args%2C%20true%2C%20false)%20%7D%0A%20%20%20%20distortSpriteImage(args%2C%20util)%20%7B%20return%20this.setDistort(args%2C%20false%2C%20true%2C%20util)%20%7D%0A%20%20%20%20async%20distortImageImage(args)%20%7B%20return%20await%20this.setDistort(args%2C%20true%2C%20true)%20%7D%0A%20%20%20%20waveSprite(args%2C%20util)%20%7B%20return%20this.waveEffect(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20waveImage(args)%20%7B%20return%20await%20this.waveEffect(args%2C%20true)%20%7D%0A%0A%20%20%20%20glitchSprite(args%2C%20util)%20%7B%20return%20this.setGlitch(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20glitchImage(args)%20%7B%20return%20await%20this.setGlitch(args%2C%20true)%20%7D%0A%0A%20%20%20%20tileSprite(args%2C%20util)%20%7B%20return%20this.addTile(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20tileImage(args)%20%7B%20return%20await%20this.addTile(args%2C%20true)%20%7D%0A%0A%20%20%20%20vhsSprite(args%2C%20util)%20%7B%20return%20this.setVHS(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20vhsImage(args)%20%7B%20return%20await%20this.setVHS(args%2C%20true)%20%7D%0A%0A%20%20%20%20ditherSprite(args%2C%20util)%20%7B%20return%20this.dither(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20ditherImage(args)%20%7B%20return%20await%20this.dither(args%2C%20true)%20%7D%0A%0A%20%20%20%20patternSprite(args%2C%20util)%20%7B%20return%20this.addPattern(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20patternImage(args)%20%7B%20return%20await%20this.addPattern(args%2C%20true)%20%7D%0A%0A%20%20%20%20outlineSprite(args%2C%20util)%20%7B%20return%20this.addOutline(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20outlineImage(args)%20%7B%20return%20await%20this.addOutline(args%2C%20true)%20%7D%0A%20%20%20%20applySpriteLight(args%2C%20util)%20%7B%20return%20this.lighting(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20applyImageLight(args)%20%7B%20return%20await%20this.lighting(args%2C%20true)%20%7D%0A%20%20%20%20advSpriteLight(args%2C%20util)%20%7B%20return%20this.advLighting(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20advImageLight(args)%20%7B%20return%20await%20this.advLighting(args%2C%20true)%20%7D%0A%20%20%20%20spriteShadow(args%2C%20util)%20%7B%20return%20this.addShadow(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20imageShadow(args)%20%7B%20return%20await%20this.addShadow(args%2C%20true)%20%7D%0A%0A%20%20%20%20maskSprite(args%2C%20util)%20%7B%20return%20this.mask(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20maskImage(args)%20%7B%20return%20await%20this.mask(args%2C%20true)%20%7D%0A%20%20%20%20unClipSPR(args%2C%20util)%20%7B%20return%20this.updateView(args%2C%20false%2C%20util)%20%7D%0A%20%20%20%20async%20unClipIMG(args)%20%7B%20return%20await%20this.updateView(args%2C%20true)%20%7D%0A%0A%20%20%20%20setXY(args%2C%20util)%20%7B%20return%20this.setATT(args%2C%20false%2C%200%2C%20util)%20%7D%0A%20%20%20%20async%20setXY2(args)%20%7B%20return%20await%20this.setATT(args%2C%20true%2C%200)%20%7D%0A%20%20%20%20setDIR(args%2C%20util)%20%7B%20return%20this.setATT(args%2C%20false%2C%201%2C%20util)%20%7D%0A%20%20%20%20async%20setDIR2(args)%20%7B%20return%20await%20this.setATT(args%2C%20true%2C%201)%20%7D%0A%20%20%20%20setSCALE(args%2C%20util)%20%7B%20return%20this.setATT(args%2C%20false%2C%202%2C%20util)%20%7D%0A%20%20%20%20async%20setSCALE2(args)%20%7B%20return%20await%20this.setATT(args%2C%20true%2C%202)%20%7D%0A%20%20%20%20setSKEW(args%2C%20util)%20%7B%20return%20this.setATT(args%2C%20false%2C%203%2C%20util)%20%7D%0A%20%20%20%20async%20setSKEW2(args)%20%7B%20return%20await%20this.setATT(args%2C%20true%2C%203)%20%7D%0A%0A%20%20%20%20setMaskXY(args)%20%7B%20maskOptions%5B0%5D%20%3D%20Scratch.Cast.toNumber(args.x)%3B%20maskOptions%5B1%5D%20%3D%20Scratch.Cast.toNumber(args.y)%20*%20-1%20%7D%0A%20%20%20%20setMaskSZ(args)%20%7B%20maskOptions%5B2%5D%20%3D%20Scratch.Cast.toNumber(args.SIZE)%20%7D%0A%20%20%20%20maskATT(args)%20%7B%20return%20maskOptions%5Bargs.ATT%5D%20%7D%0A%0A%20%20%20%20async%20setMainEffect(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20let%20filterElement%3B%0A%20%20%20%20%20%20%20%20let%20amtIn%20%3D%20args.NUM%3B%0A%20%20%20%20%20%20%20%20let%20scaleFactor%3B%0A%20%20%20%20%20%20%20%20let%20tableValue%3B%0A%20%20%20%20%20%20%20%20switch%20(args.EFFECT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20%22saturation%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22saturation%22%3E%3CfeColorMatrix%20type%3D%22saturate%22%20values%3D%22%24%7BamtIn%20%2F%20100%7D%22%3E%3C%2FfeColorMatrix%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22sepia%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20scaleFactor%20%3D%20amtIn%20%2F%20100%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22sepia%22%3E%3CfeColorMatrix%20type%3D%22matrix%22%20values%3D%22%24%7B0.393%20*%20scaleFactor%7D%20%24%7B0.769%20*%20scaleFactor%7D%20%24%7B0.189%20*%20scaleFactor%7D%200%200%20%24%7B0.349%20*%20scaleFactor%7D%20%24%7B0.686%20*%20scaleFactor%7D%20%24%7B0.168%20*%20scaleFactor%7D%200%200%20%24%7B0.272%20*%20scaleFactor%7D%20%24%7B0.534%20*%20scaleFactor%7D%20%24%7B0.131%20*%20scaleFactor%7D%200%200%200%200%200%201%200%22%3E%3C%2FfeColorMatrix%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22amplify%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20amtIn%20%3D%20amtIn%20%2B%20100%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22amplify%22%3E%3CfeComponentTransfer%3E%3CfeFuncR%20type%3D%22linear%22%20slope%3D%22%24%7BamtIn%20%2F%20100%7D%22%3E%3C%2FfeFuncR%3E%3CfeFuncG%20type%3D%22linear%22%20slope%3D%22%24%7BamtIn%20%2F%20100%7D%22%3E%3C%2FfeFuncG%3E%3CfeFuncB%20type%3D%22linear%22%20slope%3D%22%24%7BamtIn%20%2F%20100%7D%22%3E%3C%2FfeFuncB%3E%3C%2FfeComponentTransfer%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22inflate%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22inflate%22%3E%3CfeMorphology%20in%3D%22SourceGraphic%22%20operator%3D%22dilate%22%20radius%3D%22%24%7BMath.abs(amtIn%20%2F%2010)%7D%22%3E%3C%2FfeMorphology%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22contrast%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20amtIn%20%3D%20amtIn%20%2B%20100%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22contrast%22%3E%3CfeComponentTransfer%3E%3CfeFuncR%20type%3D%22gamma%22%20exponent%3D%22%24%7BamtIn%20%2F%20100%7D%22%20amplitude%3D%22%24%7BamtIn%20%2F%20100%7D%22%20offset%3D%220%22%20%2F%3E%3CfeFuncG%20type%3D%22gamma%22%20exponent%3D%22%24%7BamtIn%20%2F%20100%7D%22%20amplitude%3D%22%24%7BamtIn%20%2F%20100%7D%22%20offset%3D%220%22%20%2F%3E%3CfeFuncB%20type%3D%22gamma%22%20exponent%3D%22%24%7BamtIn%20%2F%20100%7D%22%20amplitude%3D%22%24%7BamtIn%20%2F%20100%7D%22%20offset%3D%220%22%20%2F%3E%3C%2FfeComponentTransfer%3E%3C%2Ffilter%3E%60%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22discrete%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22discrete%22%3E%3CfeComponentTransfer%3E%3CfeFuncR%20type%3D%22discrete%22%20tableValues%3D%220%20%24%7BamtIn%20%2F%20100%7D%200%201%22%2F%3E%3CfeFuncG%20type%3D%22discrete%22%20tableValues%3D%220%20%24%7BamtIn%20%2F%20100%7D%200%201%22%2F%3E%3CfeFuncB%20type%3D%22discrete%22%20tableValues%3D%220%20%24%7BamtIn%20%2F%20100%7D%200%201%22%2F%3E%3CfeFuncA%20type%3D%22discrete%22%20tableValues%3D%220%20%24%7BamtIn%20%2F%20100%7D%200%201%22%2F%3E%3C%2FfeComponentTransfer%3E%3C%2Ffilter%3E%60%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22torn%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22torn%22%3E%3CfeOffset%20in%3D%22SourceGraphic%22%20dx%3D%22%24%7BamtIn%20%2F%20-4%7D%22%20dy%3D%22%24%7BamtIn%20%2F%20-4%7D%22%20result%3D%22offsetRes%22%20%2F%3E%3CfeTurbulence%20type%3D%22turbulence%22%20baseFrequency%3D%220.05%22%20numOctaves%3D%222%22%20result%3D%22turbulence%22%20%2F%3E%3CfeDisplacementMap%20in2%3D%22turbulence%22%20in%3D%22offsetRes%22%20scale%3D%22%24%7BamtIn%7D%22%20xChannelSelector%3D%22R%22%20yChannelSelector%3D%22G%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22bevel%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22bevel%22%3E%3CfeGaussianBlur%20stdDeviation%3D%22%24%7BMath.abs(args.NUM%20%2F%2010)%7D%22%20in%3D%22SourceAlpha%22%20result%3D%22BLUR%22%2F%3E%3CfeSpecularLighting%20surfaceScale%3D%222%22%20specularConstant%3D%222%22%20specularExponent%3D%2220%22%20lighting-color%3D%22%23ffffff%22%20in%3D%22BLUR%22%20result%3D%22SPECULAR%22%3E%3CfePointLight%20x%3D%2240%22%20y%3D%22-30%22%20z%3D%2250%22%20%2F%3E%3C%2FfeSpecularLighting%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22SPECULAR%22%20in2%3D%22SourceAlpha%22%20result%3D%22COMPOSITE%22%2F%3E%3CfeMerge%3E%3CfeMergeNode%20in%3D%22SourceGraphic%22%20%2F%3E%3CfeMergeNode%20in%3D%22COMPOSITE%22%2F%3E%3C%2FfeMerge%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22liquify%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22liquify%22%20width%3D%22150%25%22%20height%3D%22160%25%22%20x%3D%22-25%25%22%20y%3D%22-25%25%22%3E%3CfeTurbulence%20baseFrequency%3D%220.05%22%20type%3D%22fractalNoise%22%20numOctaves%3D%221%22%20seed%3D%22%24%7BMath.round(Math.abs(Math.sin(Date.now()%20%2F%205)%20*%2010))%7D%22%20result%3D%22BOTTOM-SPLASH_10%22%3E%3C%2FfeTurbulence%3E%3CfeGaussianBlur%20stdDeviation%3D%22%24%7BamtIn%7D%22%20in%3D%22SourceGraphic%22%20result%3D%22BOTTOM-SPLASH_20%22%3E%3C%2FfeGaussianBlur%3E%3CfeDisplacementMap%20scale%3D%22%24%7BamtIn%20*%2010%7D%22%20in%3D%22BOTTOM-SPLASH_20%22%20in2%3D%22BOTTOM-SPLASH_10%22%20result%3D%22BOTTOM-SPLASH_30%22%3E%3C%2FfeDisplacementMap%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22BOTTOM-SPLASH_30%22%20in2%3D%22SourceGraphic%22%20result%3D%22BOTTOM-SPLASH_40%22%3E%3C%2FfeComposite%3E%3CfeTurbulence%20baseFrequency%3D%220.1%22%20type%3D%22fractalNoise%22%20numOctaves%3D%221%22%20seed%3D%22%24%7BMath.round(Math.abs(Math.sin(Date.now()%20%2F%205)%20*%2010))%7D%22%20result%3D%22MIDDLE-SPLASH_10%22%3E%3C%2FfeTurbulence%3E%3CfeGaussianBlur%20in%3D%22SourceGraphic%22%20stdDeviation%3D%22%24%7BamtIn%20*%200.01%7D%22%20result%3D%22MIDDLE-SPLASH_20%22%3E%3C%2FfeGaussianBlur%3E%3CfeDisplacementMap%20in%3D%22MIDDLE-SPLASH_20%22%20in2%3D%22MIDDLE-SPLASH_10%22%20scale%3D%22%24%7BamtIn%20*%202.5%7D%22%20result%3D%22MIDDLE-SPLASH_30%22%3E%3C%2FfeDisplacementMap%3E%3CfeComposite%20in%3D%22MIDDLE-SPLASH_30%22%20in2%3D%22SourceGraphic%22%20operator%3D%22in%22%20result%3D%22MIDDLE-SPLASH_40%22%3E%3C%2FfeComposite%3E%3CfeTurbulence%20baseFrequency%3D%220.07%22%20type%3D%22fractalNoise%22%20numOctaves%3D%221%22%20seed%3D%22%24%7BMath.round(Math.abs(Math.sin(Date.now()%20%2F%205)%20*%2010))%7D%22%20result%3D%22TOP-SPLASH_10%22%3E%3C%2FfeTurbulence%3E%3CfeGaussianBlur%20stdDeviation%3D%22%24%7BamtIn%20*%200.035%7D%22%20in%3D%22SourceGraphic%22%20result%3D%22TOP-SPLASH_20%22%3E%3C%2FfeGaussianBlur%3E%3CfeDisplacementMap%20scale%3D%22%24%7BamtIn%20*%2022%7D%22%20in%3D%22TOP-SPLASH_20%22%20in2%3D%22TOP-SPLASH_10%22%20result%3D%22TOP-SPLASH_30%22%3E%3C%2FfeDisplacementMap%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22TOP-SPLASH_30%22%20in2%3D%22SourceGraphic%22%20result%3D%22TOP-SPLASH_40%22%3E%3C%2FfeComposite%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22ripple%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!displacementSrCs%5B2%5D)%20await%20this.getSources()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20scaleFactor%20%3D%20(amtIn%20*%201.5).toFixed(2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tableValue%20%3D%20%5B100%20%2B%202%20*%20(100%20-%20amtIn)%20%2F%202%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tableValue%5B1%5D%20%3D%20(100%20-%20tableValue%5B0%5D)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22ripple%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3CfeImage%20xlink%3Ahref%3D%22%24%7BdisplacementSrCs%5B2%5D%7D%22%20x%3D%22%24%7BtableValue%5B1%5D%7D%25%22%20y%3D%22%24%7BtableValue%5B1%5D%7D%25%22%20width%3D%22%24%7BtableValue%5B0%5D%7D%25%22%20height%3D%22%24%7BtableValue%5B0%5D%7D%25%22%20result%3D%22rippleImage%22%20%2F%3E%3CfeDisplacementMap%20xChannelSelector%3D%22R%22%20yChannelSelector%3D%22G%22%20in%3D%22SourceGraphic%22%20in2%3D%22rippleImage%22%20result%3D%22displacementMap%22%20color-interpolation-filters%3D%22sRGB%22%20scale%3D%22%24%7BamtIn%7D%22%20%2F%3E%3CfeComposite%20operator%3D%22in%22%20in2%3D%22rippleImage%22%3E%3C%2FfeComposite%3E%3CfeComposite%20operator%3D%22over%22%20in2%3D%22SourceGraphic%22%3E%3C%2FfeComposite%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22thermal%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20tableValue%20%3D%20%5B%600%200.125%20%24%7B0.8%20*%20(amtIn%20%2F%2010)%7D%20%24%7B1%20*%20(amtIn%20%2F%2010)%7D%20%24%7B1%20*%20(amtIn%20%2F%2010)%7D%60%2C%20%600%200%200%20%24%7B0.843%20*%20(amtIn%20%2F%2010)%7D%201%60%2C%20%600%20%24%7B0.549%20*%20(amtIn%20%2F%2010)%7D%20%24%7B0.466%20*%20(amtIn%20%2F%2010)%7D%200%201%60%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22thermal%22%20color-interpolation-filters%3D%22sRGB%22%3E%3CfeComponentTransfer%3E%3CfeFuncR%20type%3D%22table%22%20tableValues%3D%22%24%7BtableValue%5B0%5D%7D%22%20%2F%3E%3CfeFuncG%20type%3D%22table%22%20tableValues%3D%22%24%7BtableValue%5B1%5D%7D%22%20%2F%3E%3CfeFuncB%20type%3D%22table%22%20tableValues%3D%22%24%7BtableValue%5B2%5D%7D%22%20%2F%3E%3C%2FfeComponentTransfer%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22erode%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22erode%22%3E%3CfeMorphology%20in%3D%22SourceGraphic%22%20operator%3D%22erode%22%20radius%3D%22%24%7BMath.abs(amtIn%20%2F%2010)%7D%22%3E%3C%2FfeMorphology%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22disolve%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22disolve%22%3E%3CfeTurbulence%20baseFrequency%3D%220.1%22%20type%3D%22fractalNoise%22%20numOctaves%3D%225%22%20result%3D%22TURBULENCE%22%2F%3E%3CfeDisplacementMap%20in%3D%22SourceGraphic%22%20in2%3D%22TURBULENCE%22%20scale%3D%22%24%7BamtIn%7D%22%20xChannelSelector%3D%22R%22%20yChannelSelector%3D%22G%22%2F%3E%3CfeTile%20result%3D%22TILED%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22TILED%22%20in2%3D%22SourceGraphic%22%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22posterize%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22posterize%22%3E%3CfeComponentTransfer%3E%3CfeFuncR%20type%3D%22discrete%22%20tableValues%3D%220%20%24%7BamtIn%20%2F%20100%7D%201%22%20%2F%3E%3CfeFuncG%20type%3D%22discrete%22%20tableValues%3D%220%20%24%7BamtIn%20%2F%20100%7D%201%22%20%2F%3E%3CfeFuncB%20type%3D%22discrete%22%20tableValues%3D%220%20%24%7BamtIn%20%2F%20100%7D%201%22%20%2F%3E%3C%2FfeComponentTransfer%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22displacement%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20amtIn%20%3D%20amtIn%20%3D%3D%3D%2064%20%3F%2065%20%3A%20amtIn%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22displacement%22%3E%3CfeTurbulence%20type%3D%22fractalNoise%22%20baseFrequency%3D%22%24%7B(1000000%20-%20(Math.abs(amtIn%20-%20100)%20*%2010000))%20%2F%20100%7D%22%20numOctaves%3D%222%22%20seed%3D%22%24%7BMath.round(Math.random()%20*%20100)%7D%22%20result%3D%22turbulence%22%20%2F%3E%3CfeDisplacementMap%20in%3D%22SourceGraphic%22%20in2%3D%22turbulence%22%20scale%3D%2225%22%20xChannelSelector%3D%22R%22%20yChannelSelector%3D%22G%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22grain%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(amtIn%20%3D%3D%3D%200)%20return%20svg%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22grain%22%3E%3CfeTurbulence%20type%3D%22fractalNoise%22%20baseFrequency%3D%22%24%7BamtIn%20%2F%20100%7D%22%20numOctaves%3D%223%22%20result%3D%22turbulence%22%20seed%3D%22%24%7BMath.round(10%20*%20(Math.sin(Date.now()%20*%2050)))%7D%22%20%2F%3E%3CfeColorMatrix%20in%3D%22turbulence%22%20type%3D%22saturate%22%20values%3D%220%22%20result%3D%22grain%22%20%2F%3E%3CfeComposite%20in%3D%22grain%22%20in2%3D%22SourceGraphic%22%20operator%3D%22in%22%20%2F%3E%3CfeComposite%20in%3D%220.5%22%20in2%3D%22SourceGraphic%22%20operator%3D%22over%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22bloom%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22bloom%22%3E%3CfeGaussianBlur%20in%3D%22SourceGraphic%22%20stdDeviation%3D%225%22%20%2F%3E%3CfeComposite%20in2%3D%22SourceGraphic%22%20operator%3D%22arithmetic%22%20k2%3D%22%24%7BamtIn%20%2F%20100%7D%22%20k3%3D%221%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22bloom%20v2%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22bloom-v2%22%3E%3CfeGaussianBlur%20in%3D%22SourceGraphic%22%20stdDeviation%3D%225%22%20%2F%3E%3CfeComposite%20in2%3D%22SourceGraphic%22%20operator%3D%22arithmetic%22%20k2%3D%22%24%7BamtIn%20%2F%20100%7D%22%20k3%3D%221%22%20color-interpolation-filters%3D%22sRGB%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22blur%22%3E%3CfeGaussianBlur%20stdDeviation%3D%22%24%7BMath.abs(amtIn)%7D%22%20in%3D%22SourceGraphic%22%20result%3D%22BLUR%22%3E%3C%2FfeGaussianBlur%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20args.EFFECT.replaceAll(%22%20%22%2C%20%22-%22))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20motionBlur(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22motionBlur%22%3E%3CfeGaussianBlur%20stdDeviation%3D%22%24%7BMath.abs(args.X)%7D%2C%20%24%7BMath.abs(args.Y)%7D%22%20in%3D%22SourceGraphic%22%20result%3D%22BLUR%22%3E%3C%2FfeGaussianBlur%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22motionBlur%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20blendType(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22blend-%24%7Bargs.BLEND%7D%22%3E%3CfeBlend%20in%3D%22SourceGraphic%22%20in2%3D%22SourceGraphic%22%20mode%3D%22%24%7Bargs.BLEND%7D%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%60blend-%24%7Bargs.BLEND%7D%60)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20customFilter(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20return%20this.filterApplier(svg%2C%20args.EFFECT%2C%20args.ID)%3B%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20setHue(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22hue%22%3E%3CfeColorMatrix%20in%3D%22SourceGraphic%22%20type%3D%22matrix%22%20values%3D%22%24%7Bthis.hexMap(args.COLOR)%7D%22%3E%3C%2FfeColorMatrix%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22hue%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20addShadow(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20rgbColor%20%3D%20this.hexToRgb(args.COLOR)%3B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22shadow%22%3E%3CfeDropShadow%20dx%3D%22%24%7Bargs.X%7D%22%20dy%3D%22%24%7Bargs.Y%20*%20-1%7D%22%20stdDeviation%3D%22%24%7Bargs.NUM%20%2F%202%7D%22%20flood-color%3D%22rgb(%24%7BrgbColor.r%7D%2C%20%24%7BrgbColor.g%7D%2C%20%24%7BrgbColor.b%7D)%22%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22shadow%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20addOutline(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20let%20filterElement%3B%0A%20%20%20%20%20%20%20%20const%20rgbColor%20%3D%20this.hexToRgb(args.COLOR)%3B%0A%20%20%20%20%20%20%20%20let%20effect%3B%0A%20%20%20%20%20%20%20%20if%20(args.OUTLINE%20%3D%3D%3D%20%22filled%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20effect%20%3D%20%22filled-outline%22%3B%0A%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22filled-outline%22%3E%3CfeMorphology%20operator%3D%22dilate%22%20radius%3D%22%24%7Bargs.NUM%7D%22%20in%3D%22SourceAlpha%22%20result%3D%22thickened%22%20%2F%3E%3CfeComposite%20operator%3D%22over%22%20in%3D%22SourceGraphic%22%20in2%3D%22thickened%22%20%2F%3E%3CfeFlood%20flood-color%3D%22rgb(%24%7BrgbColor.r%7D%2C%20%24%7BrgbColor.g%7D%2C%20%24%7BrgbColor.b%7D)%22%20result%3D%22flood%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22flood%22%20in2%3D%22thickened%22%2F%3E%3CfeComposite%20operator%3D%22over%22%20in%3D%22SourceGraphic%22%20%2F%3E%3C%2Ffilter%3E%60%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20effect%20%3D%20%22outline%22%3B%0A%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22outline%22%3E%3CfeMorphology%20operator%3D%22dilate%22%20radius%3D%22%24%7Bargs.NUM%7D%22%20in%3D%22SourceAlpha%22%20result%3D%22thickened%22%20%2F%3E%3CfeComposite%20operator%3D%22over%22%20in%3D%22SourceGraphic%22%20in2%3D%22thickened%22%20%2F%3E%3CfeFlood%20flood-color%3D%22rgb(%24%7BrgbColor.r%7D%2C%20%24%7BrgbColor.g%7D%2C%20%24%7BrgbColor.b%7D)%22%20result%3D%22flood%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22flood%22%20in2%3D%22thickened%22%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20effect)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20colorSplit(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20let%20filterElement%3B%0A%20%20%20%20%20%20%20%20let%20effect%3B%0A%20%20%20%20%20%20%20%20if%20(args.EFFECT.includes(%22color%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20effect%20%3D%20%22color-split%22%3B%0A%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22color-split%22%3E%3CfeFlood%20flood-color%3D%22%24%7Bargs.COLOR1%7D%22%20flood-opacity%3D%220.5%22%20result%3D%22RED%22%2F%3E%3CfeFlood%20flood-color%3D%22%24%7Bargs.COLOR2%7D%22%20flood-opacity%3D%220.5%22%20result%3D%22GREEN%22%2F%3E%3CfeFlood%20flood-color%3D%22%24%7Bargs.COLOR3%7D%22%20flood-opacity%3D%220.5%22%20result%3D%22BLUE%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22RED%22%20in2%3D%22SourceAlpha%22%20result%3D%22RED%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22GREEN%22%20in2%3D%22SourceAlpha%22%20result%3D%22GREEN%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22BLUE%22%20in2%3D%22SourceAlpha%22%20result%3D%22BLUE%22%2F%3E%3CfeOffset%20in%3D%22RED%22%20dx%3D%22%24%7Bargs.X%20*%20-1%7D%22%20dy%3D%22%24%7Bargs.Y%7D%22%20result%3D%22RED_OFF%22%2F%3E%3CfeOffset%20in%3D%22GREEN%22%20dx%3D%22%24%7Bargs.X%7D%22%20dy%3D%22%24%7Bargs.Y%20*%20-1%7D%22%20result%3D%22GREEN_OFF%22%2F%3E%3CfeOffset%20in%3D%22BLUE%22%20dx%3D%220%22%20dy%3D%220%22%20result%3D%22BLUE_OFF%22%2F%3E%3CfeBlend%20mode%3D%22screen%22%20in%3D%22RED_OFF%22%20in2%3D%22GREEN_OFF%22%20result%3D%22RG%22%2F%3E%3CfeBlend%20mode%3D%22screen%22%20in%3D%22RG%22%20in2%3D%22BLUE_OFF%22%20result%3D%22FINAL_RESULT%22%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(args.EFFECT.includes(%22chromatic%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20effect%20%3D%20%22chromatic-abberation%22%3B%0A%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22chromatic-abberation%22%3E%3CfeOffset%20in%3D%22SourceGraphic%22%20dx%3D%22%24%7Bargs.X%7D%22%20dy%3D%22%24%7Bargs.Y%7D%22%20result%3D%22layer-one%22%20%2F%3E%3CfeColorMatrix%20in%3D%22layer-one%22%20result%3D%22customColor1%22%20type%3D%22matrix%22%20values%3D%22%24%7Bthis.hexMap(args.COLOR1)%7D%22%3E%3C%2FfeColorMatrix%3E%3CfeOffset%20in%3D%22SourceGraphic%22%20dx%3D%22%24%7Bargs.X%20*%20-1%7D%22%20dy%3D%22%24%7Bargs.Y%20*%20-1%7D%22%20result%3D%22layer-two%22%20%2F%3E%3CfeColorMatrix%20in%3D%22layer-two%22%20result%3D%22customColor2%22%20type%3D%22matrix%22%20values%3D%22%24%7Bthis.hexMap(args.COLOR2)%7D%22%3E%3C%2FfeColorMatrix%3E%3CfeBlend%20in%3D%22customColor1%22%20in2%3D%22customColor2%22%20mode%3D%22screen%22%20result%3D%22color-split%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20effect%20%3D%20%22abberation%22%3B%0A%20%20%20%20%20%20%20%20%20%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22abberation%22%3E%3CfeFlood%20flood-color%3D%22%24%7Bargs.COLOR1%7D%22%20flood-opacity%3D%220.5%22%20result%3D%22RED%22%2F%3E%3CfeFlood%20flood-color%3D%22%24%7Bargs.COLOR2%7D%22%20flood-opacity%3D%220.5%22%20result%3D%22GREEN%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22SourceGraphic%22%20in2%3D%22SourceAlpha%22%20result%3D%22BLUE%22%20%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22RED%22%20in2%3D%22SourceAlpha%22%20result%3D%22RED%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22GREEN%22%20in2%3D%22SourceAlpha%22%20result%3D%22GREEN%22%2F%3E%3CfeComposite%20operator%3D%22in%22%20in%3D%22BLUE%22%20in2%3D%22SourceAlpha%22%20result%3D%22BLUE%22%2F%3E%3CfeOffset%20in%3D%22RED%22%20dx%3D%22%24%7Bargs.X%20*%20-1%7D%22%20dy%3D%22%24%7Bargs.Y%7D%22%20result%3D%22RED_OFF%22%2F%3E%3CfeOffset%20in%3D%22GREEN%22%20dx%3D%22%24%7Bargs.X%7D%22%20dy%3D%22%24%7Bargs.Y%20*%20-1%7D%22%20result%3D%22GREEN_OFF%22%2F%3E%3CfeOffset%20in%3D%22BLUE%22%20dx%3D%220%22%20dy%3D%220%22%20result%3D%22BLUE_OFF%22%2F%3E%3CfeBlend%20mode%3D%22screen%22%20in%3D%22RED_OFF%22%20in2%3D%22GREEN_OFF%22%20result%3D%22RG%22%2F%3E%3CfeBlend%20mode%3D%22screen%22%20in%3D%22RG%22%20in2%3D%22BLUE_OFF%22%20result%3D%22FINAL_RESULT%22%2F%3E%3CfeComposite%20operator%3D%22over%22%20in%3D%22SourceGraphic%22%20in2%3D%22FINAL_RESULT%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20effect)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20waveEffect(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20ChannelSelector%20%3D%20%5Bargs.axis%20%3D%3D%3D%20%22x%20axis%22%20%3F%20%22A%22%20%3A%20%22R%22%2C%20args.axis%20%3D%3D%3D%20%22y%20axis%22%20%3F%20%22A%22%20%3A%20%22G%22%5D%3B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22wave%22%3E%3CfeTurbulence%20type%3D%22fractalNoise%22%20baseFrequency%3D%22%24%7Bargs.Y%20%2F%20100%7D%2C%20%24%7Bargs.NUM%20%2F%20100%7D%22%20numOctaves%3D%222%22%20seed%3D%22%24%7Bargs.SEED%7D%22%20result%3D%22turbulence%22%20%2F%3E%3CfeDisplacementMap%20in%3D%22SourceGraphic%22%20in2%3D%22turbulence%22%20scale%3D%2225%22%20xChannelSelector%3D%22%24%7BChannelSelector%5B0%5D%7D%22%20yChannelSelector%3D%22%24%7BChannelSelector%5B1%5D%7D%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22wave%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20addTile(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20let%20atts%20%3D%20%5B%2Fwidth%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%2C%20%2Fheight%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%5D%3B%0A%20%20%20%20%20%20%20%20atts%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(atts%5B0%5D%20%3F%20parseFloat(atts%5B0%5D%5B1%5D)%20%3A%20100)%2C%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(atts%5B1%5D%20%3F%20parseFloat(atts%5B1%5D%5B1%5D)%20%3A%20100)%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20const%20amts%20%3D%20%5BMath.abs(100%20-%20Scratch.Cast.toNumber(args.NUM))%2C%20Scratch.Cast.toNumber(args.x)%2C%20Scratch.Cast.toNumber(args.y)%5D%3B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%0A%20%20%20%20%20%20%20%20%60%3Cfilter%20id%3D%22tile%22%3E%3CfeImage%20x%3D%22%24%7Bamts%5B1%5D%7D%22%20y%3D%22%24%7Bamts%5B2%5D%7D%22%20width%3D%22%24%7Bamts%5B0%5D%20%2F%20atts%5B0%5D%20*%20100%7D%25%22%20height%3D%22%24%7Bamts%5B0%5D%20%2F%20atts%5B1%5D%20*%20100%7D%25%22%20xlink%3Ahref%3D%22%24%7Bawait%20this.svgToBitmap(svg%2C%20atts%5B0%5D%2C%20atts%5B1%5D)%7D%22%2F%3E%3CfeTile%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22tile%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20addPattern(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20let%20svg2%20%3D%20await%20this.getImage(args.PAT)%3B%0A%20%20%20%20%20%20if%20(svg%20%26%26%20svg2)%20%7B%0A%20%20%20%20%20%20%20%20let%20atts%20%3D%20%5B%2Fwidth%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg2)%2C%20%2Fheight%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg2)%5D%3B%0A%20%20%20%20%20%20%20%20atts%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(atts%5B0%5D%20%3F%20parseFloat(atts%5B0%5D%5B1%5D)%20%3A%20100)%2C%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(atts%5B1%5D%20%3F%20parseFloat(atts%5B1%5D%5B1%5D)%20%3A%20100)%2C%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(args.SIZE)%20%2F%20100%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20const%20nameGen%20%3D%20%60pat-%24%7BMath.random()%7D%60%3B%20%2F%2F%20People%20may%20use%20multiple%20patterns%0A%20%20%20%20%20%20%20%20const%20pattern%20%3D%60%3Cdefs%3E%3Cpattern%20id%3D%22%24%7BnameGen%7D%22%20patternUnits%3D%22userSpaceOnUse%22%20width%3D%22%24%7Batts%5B0%5D%7D%22%20height%3D%22%24%7Batts%5B1%5D%7D%22%20patternTransform%3D%22scale(%24%7Batts%5B2%5D%7D)%22%3E%3Cimage%20xlink%3Ahref%3D%22%24%7Bawait%20this.svgToBitmap(svg2%2C%20atts%5B0%5D%2C%20atts%5B1%5D)%7D%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22%24%7Batts%5B0%5D%7D%22%20height%3D%22%24%7Batts%5B1%5D%7D%22%20%2F%3E%3C%2Fpattern%3E%3C%2Fdefs%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.patternApply(svg%2C%20pattern%2C%20nameGen%2C%20args.COLOR)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%20%20%20%20patternApply(svg%2C%20pattern%2C%20name%2C%20color)%20%7B%0A%20%20%20%20%20%20if%20(nameOffset%20%3E%20100)%20nameOffset%20%3D%200%3B%0A%20%20%20%20%20%20let%20svgTag%20%3D%20svg.indexOf(%22%3E%22)%3B%0A%20%20%20%20%20%20if%20(svgTag%20%3E%20-1)%20%7B%0A%20%20%20%20%20%20%20%20svgTag%20%3D%20svg.indexOf(%22%3E%22)%3B%0A%20%20%20%20%20%20%20%20let%20appliedSVG%20%3D%20%60%24%7Bsvg.substring(0%2C%20svgTag)%7D%20%3E%24%7Bpattern.slice(0%2C%20-1)%7D%24%7Bsvg.slice(svgTag)%7D%60%3B%0A%20%20%20%20%20%20%20%20appliedSVG%20%3D%20appliedSVG.replaceAll(color%2C%20%60url(%23%24%7Bname%7D)%60)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20replace%20needs%20to%20be%20repeated%20twice%20to%20avoid%20the%20new%20name%20being%20used%20in%20other%20namespaces%0A%20%20%20%20%20%20%20%20return%20appliedSVG.replace(%60%23%24%7Bname%7D)%60%2C%20%60%23%24%7Bname%7D%24%7BnameOffset%7D)%60).replace(%60%22%24%7Bname%7D%22%60%2C%20%60%22%24%7Bname%7D%24%7BnameOffset%7D%22%60)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20lighting(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20widthMatch%20%3D%20%2Fwidth%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0A%20%20%20%20%20%20%20%20const%20heightMatch%20%3D%20%2Fheight%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0A%20%20%20%20%20%20%20%20const%20pos%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(args.X)%20%2B%20Scratch.Cast.toNumber(widthMatch%20%3F%20parseFloat(widthMatch%5B1%5D)%20%2F%202%20%3A%20(vm.runtime.stageWidth%20%2F%202))%2C%0A%20%20%20%20%20%20%20%20%20%20(Scratch.Cast.toNumber(args.Y)%20*%20-1)%20%2B%20Scratch.Cast.toNumber(heightMatch%20%3F%20parseFloat(heightMatch%5B1%5D)%20%2F%202%20%3A%20(vm.runtime.stageHeight%20%2F%202))%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20const%20off%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_canvas_%22%20%3F%20canvas.getBoundingClientRect().width%20%2F%20vm.runtime.stageWidth%3A%201%3B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22lighting%22%3E%3CfeSpecularLighting%20result%3D%22specOut%22%20specularExponent%3D%2220%22%20lighting-color%3D%22%24%7Bargs.COLOR%7D%22%3E%3CfePointLight%20x%3D%22%24%7Bpos%5B0%5D%20*%20off%7D%22%20y%3D%22%24%7Bpos%5B1%5D%20*%20off%7D%22%20z%3D%22%24%7BScratch.Cast.toNumber(args.NUM)%20*%20off%7D%22%20%2F%3E%3C%2FfeSpecularLighting%3E%3CfeComposite%20in%3D%22SourceGraphic%22%20in2%3D%22specOut%22%20operator%3D%22arithmetic%22%20k1%3D%220%22%20k2%3D%221%22%20k3%3D%221%22%20k4%3D%220%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22lighting%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20advLighting(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20const%20source%20%3D%20args.MAP.startsWith(%22data%3Aimage%2F%22)%20%7C%7C%20args.MAP.startsWith(%22http%22)%20%3F%20args.MAP%20%3A%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(args.MAP)%7D%60%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20widthMatch%20%3D%20%2Fwidth%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0A%20%20%20%20%20%20%20%20const%20heightMatch%20%3D%20%2Fheight%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0A%20%20%20%20%20%20%20%20const%20size%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(widthMatch%20%3F%20parseFloat(widthMatch%5B1%5D)%20%3A%20parseFloat(canvas.getBoundingClientRect().width))%2C%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(heightMatch%20%3F%20parseFloat(heightMatch%5B1%5D)%20%3A%20parseFloat(canvas.getBoundingClientRect().height))%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22advLight%22%3E%3CfeImage%20xlink%3Ahref%3D%22%24%7Bsource%7D%22%20result%3D%22normalMap%22%20width%3D%22%24%7Bsize%5B0%5D%7D%22%20height%3D%22%24%7Bsize%5B1%5D%7D%22%20x%3D%221%22%20y%3D%221%22%20%2F%3E%3CfeComponentTransfer%20in%3D%22normalMap%22%3E%3CfeFuncR%20type%3D%22discrete%22%20tableValues%3D%220%22%20%2F%3E%3CfeFuncG%20type%3D%22discrete%22%20tableValues%3D%220%22%20%2F%3E%3CfeFuncB%20type%3D%22table%22%20tableValues%3D%220%201%22%20%2F%3E%3C%2FfeComponentTransfer%3E%3CfeBlend%20in%3D%22SourceGraphic%22%20in2%3D%22normalMap%22%20mode%3D%22%24%7Bargs.BLEND%7D%22%20%2F%3E%3CfeComposite%20in2%3D%22SourceAlpha%22%20operator%3D%22in%22%20%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22advLight%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20setDistort(args%2C%20isImage%2C%20override%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20let%20source%3B%0A%20%20%20%20%20%20%20%20if%20(override)%20source%20%3D%20args.EFFECT.startsWith(%22data%3Aimage%2F%22)%20%3F%20args.EFFECT%20%3A%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(args.EFFECT)%7D%60%3B%0A%20%20%20%20%20%20%20%20else%20source%20%3D%20args.EFFECT%20%3D%3D%3D%20%22bulge%22%20%3F%200%20%3A%20args.EFFECT%20%3D%3D%3D%20%22whirl%22%20%3F%201%20%3A%20args.EFFECT%20%3D%3D%3D%20%22ripple%22%20%3F%202%20%3A%203%3B%0A%20%20%20%20%20%20%20%20const%20mul%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_canvas_%22%20%3F%20vm.renderer.canvas.width%20%2F%20vm.runtime.stageWidth%20*%202%20%3A%201%3B%0A%20%20%20%20%20%20%20%20const%20amts%20%3D%20%5BScratch.Cast.toNumber(args.NUM)%2C%20Scratch.Cast.toNumber(args.X)%2C%20Scratch.Cast.toNumber(args.Y)%5D%3B%0A%20%20%20%20%20%20%20%20if%20(!displacementSrCs%5B2%5D%20%26%26%20!override)%20await%20this.getSources()%3B%0A%20%20%20%20%20%20%20%20let%20tableValue%20%3D%20%5B100%20%2B%202%20*%20(100%20-%20amts%5B0%5D)%20%2F%202%5D%3B%0A%20%20%20%20%20%20%20%20tableValue%5B1%5D%20%3D%20(100%20-%20tableValue%5B0%5D)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%60%3Cfilter%20id%3D%22%24%7Boverride%20%3F%20%22customDistort%22%20%3A%20args.EFFECT%7D%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%20%20%20%20%3CfeImage%20id%3D%22dMapS%22%20xlink%3Ahref%3D%22%24%7Boverride%20%3F%20source%20%3A%20displacementSrCs%5Bsource%5D%7D%22%20x%3D%22%24%7B(tableValue%5B1%5D%20%2B%20amts%5B1%5D)%20*%20mul%7D%25%22%20y%3D%22%24%7B(tableValue%5B1%5D%20-%20amts%5B2%5D)%20*%20mul%7D%25%22%20width%3D%22%24%7BtableValue%5B0%5D%20*%20mul%7D%25%22%20height%3D%22%24%7BtableValue%5B0%5D%20*%20mul%7D%25%22%20result%3D%22distortImg%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%3CfeDisplacementMap%20id%3D%22dMapRes%22%20xChannelSelector%3D%22R%22%20yChannelSelector%3D%22G%22%20in%3D%22SourceGraphic%22%20in2%3D%22distortImg%22%20result%3D%22displacementMap%22%20color-interpolation-filters%3D%22sRGB%22%20scale%3D%22%24%7Bamts%5B0%5D%20*%20mul%7D%22%20%2F%3E%3CfeComposite%20operator%3D%22in%22%20in2%3D%22distortImg%22%3E%3C%2FfeComposite%3E%0A%20%20%20%20%20%20%20%20%24%7Bamts%5B0%5D%20%3C%200%20%26%26%20args.EFFECT%20!%3D%3D%20%22ripple%22%20%3F%20%22%22%20%3A%20%60%3CfeComposite%20operator%3D%22over%22%20in2%3D%22SourceGraphic%22%3E%3C%2FfeComposite%3E%60%7D%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20override%20%3F%20%22customDistort%22%20%3A%20args.EFFECT)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20distortPreset(args)%20%7B%0A%20%20%20%20%20%20const%20source%20%3D%20%7B%20bulge%20%3A%200%2C%20whirl%20%3A%201%2C%20ripple%20%3A%202%2C%20shockwave%20%3A%203%20%7D%3B%0A%20%20%20%20%20%20if%20(!displacementSrCs%5B2%5D)%20await%20this.getSources()%3B%0A%20%20%20%20%20%20return%20displacementSrCs%5Bsource%5Bargs.TYPE%5D%5D%20%7C%7C%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20setGlitch(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20mul%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_canvas_%22%20%3F%20999%20%3A%20100%3B%0A%20%20%20%20%20%20%20%20const%20axis%20%3D%20args.axis%20%3D%3D%3D%20%22x%20axis%22%20%3F%20%5Btrue%2C%20false%5D%20%3A%20args.axis%20%3D%3D%3D%20%22y%20axis%22%20%3F%20%5Bfalse%2C%20true%5D%20%3A%20%5Btrue%2C%20true%5D%3B%0A%20%20%20%20%20%20%20%20let%20allMerges%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20let%20mergeTxt%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20args.LINE%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20allMerges%2B%3D%20%60%3CfeMergeNode%20in%3D%22merge%24%7Bi%7D%22%20%2F%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20mergeTxt%2B%3D%20%60%3CfeOffset%20in%3D%22SourceGraphic%22%20dx%3D%22%24%7Bargs.X%20*%20(Math.random()%20%3E%200.5%20%3F%201%20%3A%20-1)%7D%22%20dy%3D%22%24%7Bargs.Y%20*%20(Math.random()%20%3E%200.5%20%3F%201%20%3A%20-1)%7D%22%20result%3D%22off%24%7Bi%7D%22%2F%3E%3CfeMerge%20x%3D%22%24%7Baxis%5B0%5D%20%3F%20Math.random()%20*%20mul%20%3A%200%7D%25%22%20y%3D%22%24%7Baxis%5B1%5D%20%3F%20Math.random()%20*%20mul%20%3A%200%7D%25%22%20width%3D%22%24%7Baxis%5B0%5D%20%3F%20args.NUM%20%3A%20mul%7D%25%22%20height%3D%22%24%7Baxis%5B1%5D%20%3F%20args.NUM%20%3A%20mul%7D%25%22%20result%3D%22merge%24%7Bi%7D%22%3E%3CfeMergeNode%20in%3D%22SourceGraphic%22%20%2F%3E%3CfeMergeNode%20in%3D%22off%24%7Bi%7D%22%20%2F%3E%3C%2FfeMerge%3E%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22glitch%22%3E%24%7BmergeTxt%7D%3CfeMerge%3E%3CfeMergeNode%20in%3D%22SourceGraphic%22%20%2F%3E%24%7BallMerges%7D%3C%2FfeMerge%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22glitch%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20setVHS(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20full%20%3D%20vm.renderer.canvas.getBoundingClientRect().width%20%3E%20Scratch.vm.runtime.stageWidth%20%3F%201%20%3A%201.9%3B%0A%20%20%20%20%20%20%20%20const%20mul%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_canvas_%22%20%3F%20%5Bruntime.stageHeight%20%2F%20full%2C%20runtime.stageWidth%20%2F%20full%5D%20%3A%20%5B100%2C%20100%5D%3B%0A%20%20%20%20%20%20%20%20const%20axis%20%3D%20args.axis%20%3D%3D%3D%20%22x%20axis%22%20%3F%20%5Btrue%2C%20false%5D%20%3A%20args.axis%20%3D%3D%3D%20%22y%20axis%22%20%3F%20%5Bfalse%2C%20true%5D%20%3A%20%5Btrue%2C%20true%5D%3B%0A%20%20%20%20%20%20%20%20const%20amts%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(args.X)%2C%20Scratch.Cast.toNumber(args.Y)%2C%20Scratch.Cast.toNumber(args.NUM)%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20if%20(amts%5B2%5D%20%3D%3D%3D%200)%20return%20svg%3B%20%2F%2F%200%25%20vhs%20effect%20is%20just%20the%20original%20image%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22vhs%22%3E%3CfeOffset%20in%3D%22SourceGraphic%22%20dx%3D%22%24%7Bamts%5B0%5D%7D%22%20dy%3D%22%24%7Bamts%5B1%5D%7D%22%20result%3D%22off%22%2F%3E%3CfeMerge%20in%3D%22SourceGraphic%22%20x%3D%22%24%7Baxis%5B0%5D%20%3F%20(100%20-%20amts%5B2%5D)%20*%20(%20mul%5B0%5D%20%2F%20100)%20%3A%200%7D%25%22%20y%3D%22%24%7Baxis%5B1%5D%20%3F%20(100%20-%20amts%5B2%5D)%20*%20(%20mul%5B1%5D%20%2F%20100)%20%3A%200%7D%25%22%20width%3D%22%24%7Baxis%5B0%5D%20%3F%20amts%5B2%5D%20*%20mul%5B0%5D%20%3A%20mul%5B0%5D%7D%25%22%20height%3D%22%24%7Baxis%5B1%5D%20%3F%20amts%5B2%5D%20*%20mul%5B1%5D%20%3A%20mul%5B1%5D%7D%25%22%20result%3D%22merge1%22%3E%3CfeMergeNode%20in%3D%22off%22%20%2F%3E%3CfeMergeNode%20in%3D%22merge1%22%20%2F%3E%3C%2FfeMerge%3E%3CfeMerge%20in%3D%22off%22%20x%3D%220%25%22%20y%3D%220%25%22%20width%3D%22%24%7Baxis%5B0%5D%20%3F%20mul%5B0%5D%20-%20amts%5B2%5D%20%3A%20mul%5B0%5D%7D%25%22%20height%3D%22%24%7Baxis%5B1%5D%20%3F%20mul%5B1%5D%20-%20amts%5B2%5D%20%3A%20mul%5B1%5D%7D%25%22%20result%3D%22merge2%22%3E%3CfeMergeNode%20in%3D%22SourceGraphic%22%20%2F%3E%3CfeMergeNode%20in%3D%22merge2%22%20%2F%3E%3C%2FfeMerge%3E%3CfeMerge%3E%24%7Bamts%5B2%5D%20%3C%20100%20%3F%20%60%3CfeMergeNode%20in%3D%22merge1%22%20%2F%3E%3CfeMergeNode%20in%3D%22merge2%22%20%2F%3E%60%20%3A%20%60%3CfeMergeNode%20in%3D%22merge1%22%20%2F%3E%60%7D%3C%2FfeMerge%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22vhs%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20dither(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20const%20size%20%3D%20%5BScratch.Cast.toNumber(args.W)%2C%20Scratch.Cast.toNumber(args.H)%5D%3B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22dither%22%20color-interpolation-filters%3D%22sRGB%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22100%25%22%20height%3D%22100%25%22%3E%3CfeImage%20width%3D%22%24%7Bsize%5B0%5D%7D%22%20height%3D%22%24%7Bsize%5B1%5D%7D%22%20xlink%3Ahref%3D%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5%2BAAAASElEQVR42gXBgQAAIAxFwW8QwhBCCCGEIYQQQgghhBBCCEMYwutOkphzYmbsvdG9l9YaEYG7o1or5xxKKay1UGYyxuC9R%2B%2BdD7yGJkTj6F0HAAAAAElFTkSuQmCC%22%2F%3E%3CfeTile%2F%3E%3CfeComposite%20operator%3D%22in%22%20in2%3D%22SourceGraphic%22%2F%3E%3CfeComposite%20operator%3D%22arithmetic%22%20k1%3D%220%22%20k2%3D%221%22%20k3%3D%221%22%20k4%3D%22-0.5%22%20in%3D%22SourceGraphic%22%2F%3E%3CfeComponentTransfer%3E%3CfeFuncR%20type%3D%22discrete%22%20tableValues%3D%220%201%22%2F%3E%3CfeFuncG%20type%3D%22discrete%22%20tableValues%3D%220%201%22%2F%3E%3CfeFuncB%20type%3D%22discrete%22%20tableValues%3D%220%201%22%2F%3E%3C%2FfeComponentTransfer%3E%3C%2Ffilter%3E%60%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20%22dither%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20mask(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20args.SPRITE2)%20return%20svg%3B%20%2F%2F%20do%20nothing%20if%20youre%20masking%20yourself%0A%20%20%20%20%20%20let%20svg2%3B%0A%20%20%20%20%20%20if%20(args.SPRITE2%20%3D%3D%3D%20%22_myself_%22)%20svg2%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg2%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE2)%20%3A%20await%20this.getSVG(args.SPRITE2)%3B%0A%20%20%20%20%20%20const%20multiply%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_canvas_%22%20%3F%20%5BScratch.renderer.canvas.width%20*%202%2C%20Scratch.renderer.canvas.height%20*%202%2C%0A%20%20%20%20%20%20%20%20vm.renderer.canvas.width%20%2F%20vm.runtime.stageWidth%5D%20%3A%20%5B100%2C%20100%2C%201%5D%3B%0A%20%20%20%20%20%20if%20(svg%20%26%26%20svg2)%20%7B%0A%20%20%20%20%20%20%20%20const%20name%20%3D%20args.TYPE%20%3D%3D%3D%20%22%20%22%20%3F%20%22maskOver%22%20%3A%20%22maskRemove%22%3B%0A%20%20%20%20%20%20%20%20const%20filterElement%20%3D%20%60%3Cfilter%20id%3D%22%24%7Bname%7D%22%3E%0A%20%20%20%20%20%20%20%20%09%3CfeImage%20xlink%3Ahref%3D%22%24%7B%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(svg2)%7D%60%7D%22%20x%3D%22%24%7BmaskOptions%5B0%5D%20*%20multiply%5B2%5D%7D%22%20y%3D%22%24%7BmaskOptions%5B1%5D%20*%20multiply%5B2%5D%7D%22%20width%3D%22%24%7BmaskOptions%5B2%5D%20*%20multiply%5B2%5D%7D%25%22%20height%3D%22%24%7BmaskOptions%5B2%5D%20*%20multiply%5B2%5D%7D%25%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%20crossOrigin%3D%22anonymous%22%20result%3D%22image1%22%2F%3E%0A%20%20%20%20%20%20%20%20%09%3CfeComposite%20in%3D%22%24%7Bargs.TYPE%20!%3D%3D%20%22%20%22%20%3F%20%22SourceGraphic%22%20%3A%20%22image1%22%7D%22%20in2%3D%22%24%7Bargs.TYPE%20!%3D%3D%20%22%20%22%20%3F%20%22image1%22%20%3A%20%22SourceGraphic%22%7D%22%20operator%3D%22%24%7Bargs.TYPE%7D%22%20x%3D%220%25%22%20y%3D%220%25%22%20width%3D%22%24%7Bmultiply%5B0%5D%7D%25%22%20height%3D%22%24%7Bmultiply%5B1%5D%7D%25%22%20result%3D%22composite1%22%2F%3E%3C%2Ffilter%3E%60%3B%0A%20%20%20%20%20%20%20%20return%20this.filterApplier(svg%2C%20filterElement%2C%20name)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20setATT(args%2C%20isImage%2C%20type%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20We%20Do%20Not%20Check%20if%20Translate%20Exists%20Since%20We%20Override%20it%0A%20%20%20%20%20%20%20%20let%20transform%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20const%20currentTranslate%20%3D%20%2Ftranslate%5C((%5B%5E%2C%5D%2B)%2C(%5B%5E)%5D%2B)%5C)%2F.exec(svg)%3B%0A%20%20%20%20%20%20%20%20const%20currentX%20%3D%20currentTranslate%20%3F%20parseFloat(currentTranslate%5B1%5D)%20%3A%200%3B%0A%20%20%20%20%20%20%20%20const%20currentY%20%3D%20currentTranslate%20%3F%20parseFloat(currentTranslate%5B2%5D)%20%3A%200%3B%0A%0A%20%20%20%20%20%20%20%20const%20widthMatch%20%3D%20%2Fwidth%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0A%20%20%20%20%20%20%20%20const%20heightMatch%20%3D%20%2Fheight%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0A%20%20%20%20%20%20%20%20const%20width%20%3D%20widthMatch%20%3F%20parseFloat(widthMatch%5B1%5D)%20%3A%200%3B%0A%20%20%20%20%20%20%20%20const%20height%20%3D%20heightMatch%20%3F%20parseFloat(heightMatch%5B1%5D)%20%3A%200%3B%0A%0A%20%20%20%20%20%20%20%20const%20x%20%3D%20Scratch.Cast.toNumber(args.x%20%3F%20args.x%20%3A%200)%20%2F%20100%3B%0A%20%20%20%20%20%20%20%20const%20y%20%3D%20Scratch.Cast.toNumber(args.y%20%3F%20args.y%20%3A%200)%20%2F%20100%3B%0A%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20newPos%20%3D%20%5BcurrentX%20%2B%20(x%20*%20100)%2C%20currentY%20%2B%20(y%20*%20-100)%5D%3B%0A%20%20%20%20%20%20%20%20%20%20return%20svg.replace(%2Ftranslate%5C(%5B%5E)%5D*%5C)%2F%2C%20%60translate(%24%7BnewPos%5B0%5D%7D%2C%24%7BnewPos%5B1%5D%7D)%60)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(type%20%3D%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(svg.includes(%22style%3D%5C%22transform-origin%3A%20center%3B%20transform%3A%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2F(style%3D%22%5B%5E%22%5D*transform%3A%5B%5E%22%5D*)%2F%2C%20%60%241%20rotate(%24%7BScratch.Cast.toNumber(args.DIR)%20-%2090%7Ddeg)%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%60width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%60%2C%20%60width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%20style%3D%22transform-origin%3A%20center%3B%20transform%3A%20rotate(%24%7BScratch.Cast.toNumber(args.DIR)%20-%2090%7Ddeg)%22%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(type%20%3D%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%60width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%60%2C%20%60width%3D%22%24%7Bwidth%20*%20Math.abs(x)%7D%22%20height%3D%22%24%7Bheight%20*%20Math.abs(y)%7D%22%60)%3B%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%60viewBox%3D%220%2C0%2C%24%7Bwidth%7D%2C%24%7Bheight%7D%22%60%2C%20%60viewBox%3D%220%2C0%2C%24%7Bwidth%20*%20Math.abs(x)%7D%2C%24%7Bheight%20*%20Math.abs(y)%7D%22%60)%3B%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%60(%24%7BcurrentX%7D%2C%60%2C%20%60(%24%7BcurrentX%20*%20(x)%20%2B%20(args.x%20%3C%200%20%3F%20width%20*%20Math.abs(x)%20%3A%200)%7D%2C%60)%3B%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%60%2C%24%7BcurrentY%7D)%60%2C%20%60%2C%24%7BcurrentY%20*%20(y)%20%2B%20(args.y%20%3C%200%20%3F%20height%20*%20Math.abs(y)%20%3A%200)%7D)%60)%3B%0A%20%20%20%20%20%20%20%20%20%20transform%20%3D%20%60scale(%24%7Bx%7D%2C%20%24%7By%7D)%60%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(svg.includes(%22style%3D%5C%22transform-origin%3A%20center%3B%20transform%3A%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2F(style%3D%22%5B%5E%22%5D*transform%3A%5B%5E%22%5D*)%2F%2C%20%60%241%20skew(%24%7Bargs.x%7Ddeg%2C%20%24%7Bargs.y%7Ddeg)%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%60width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%60%2C%20%60width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%20style%3D%22transform-origin%3A%20center%3B%20transform%3A%20skew(%24%7Bargs.x%7Ddeg%2C%20%24%7Bargs.y%7Ddeg)%22%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20currentTransform%20%3D%20%2Ftransform%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0A%20%20%20%20%20%20%20%20const%20existingTransform%20%3D%20currentTransform%20%3F%20currentTransform%5B1%5D%20%3A%20%22%22%3B%0A%20%20%20%20%20%20%20%20const%20newTransform%20%3D%20existingTransform%20%3F%20%60%24%7BexistingTransform%7D%20%24%7Btransform%7D%60%20%3A%20transform%3B%0A%20%20%20%20%20%20%20%20return%20svg.replace(%2Ftransform%3D%22(%5B%5E%22%5D*)%22%2F%2C%20%60transform%3D%22%24%7BnewTransform%7D%22%60)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20updateView(args%2C%20isImage%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20svg%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20svg%20%3D%20await%20this.findAsset(util)%3B%0A%20%20%20%20%20%20else%20svg%20%3D%20isImage%20%3F%20await%20this.getImage(args.SPRITE)%20%3A%20await%20this.getSVG(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20let%20values%3B%0A%20%20%20%20%20%20%20%20const%20viewBoxMatch%20%3D%20svg.match(%2FviewBox%3D%22(%5B%5E%22%5D%2B)%22%2F)%3B%0A%20%20%20%20%20%20%20%20let%20viewBoxValues%20%3D%20-1%3B%0A%20%20%20%20%20%20%20%20if%20(viewBoxMatch)%20viewBoxValues%20%3D%20viewBoxMatch%5B1%5D.split(%2F%5Cs*%2C%5Cs*%2F).map(parseFloat)%3B%0A%0A%20%20%20%20%20%20%20%20const%20translateMatch%20%3D%20svg.match(%2F%3Cg%20transform%3D%22translate%5C((-%3F%5B%5Cd.%5D%2B)%2C(-%3F%5B%5Cd.%5D%2B)%5C)%2F)%3B%0A%20%20%20%20%20%20%20%20let%20translateValues%20%3D%20-1%3B%0A%20%20%20%20%20%20%20%20if%20(translateMatch)%20translateValues%20%3D%20%5BparseFloat(translateMatch%5B1%5D)%2C%20parseFloat(translateMatch%5B2%5D)%5D%3B%0A%20%20%20%20%20%20%20%20values%20%3D%20%60%24%7BviewBoxValues%7D%2C%24%7BtranslateValues%7D%60%3B%0A%20%20%20%20%20%20%20%20values%20%3D%20values.split(%22%2C%22)%3B%0A%20%20%20%20%20%20%20%20values%20%3D%20values.map(item%20%3D%3E%20Scratch.Cast.toNumber(item))%3B%0A%20%20%20%20%20%20%20%20args.NUM%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0A%20%20%20%20%20%20%20%20if%20(values.length%20%3E%203)%20%7B%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2FviewBox%3D%22(%5B%5E%22%5D%2B)%22%2F%2C%20%60viewBox%3D%22%24%7Bvalues%5B0%5D%7D%2C%24%7Bvalues%5B1%5D%7D%2C%24%7Bvalues%5B2%5D%20%2B%20(args.NUM%20*%202)%7D%2C%24%7Bvalues%5B3%5D%20%2B%20(args.NUM%20*%202)%7D%22%60)%3B%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2Fwidth%3D%22(%5B%5E%22%5D%2B)%22%2F%2C%20%60width%3D%22%24%7Bvalues%5B2%5D%20%2B%20(args.NUM%20*%202)%7D%22%60)%3B%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2Fheight%3D%22(%5B%5E%22%5D%2B)%22%2F%2C%20%60height%3D%22%24%7Bvalues%5B3%5D%20%2B%20(args.NUM%20*%202)%7D%22%60)%3B%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2F%3Cg%20transform%3D%22(%5B%5E%22%5D%2B)%22%2F%2C%20%60%3Cg%20transform%3D%22translate(%24%7Bvalues%5B4%5D%20%2B%20args.NUM%7D%2C%24%7Bvalues%5B5%5D%20%2B%20args.NUM%7D)%22%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20addCanvasFilter(args)%20%7B%0A%20%20%20%20%20%20args.NAME%20%3D%20Scratch.Cast.toString(args.NAME).replaceAll(%22%20%22%2C%20%22_%22)%3B%0A%20%20%20%20%20%20const%20filter%20%3D%20args.FILTER%3B%0A%20%20%20%20%20%20const%20filterRegex%20%3D%20%2F%3Cfilter(%3F%3A%5Cs%5B%5E%3E%5D*)%3F%3E((%3F%3A.%7C%5Cn)*%3F)%3C%5C%2Ffilter%3E%2Fi%3B%0A%20%20%20%20%20%20const%20match%20%3D%20filter.match(filterRegex)%3B%0A%20%20%20%20%20%20if%20(match%20%26%26%20match%5B1%5D)%20%7B%0A%20%20%20%20%20%20%20%20const%20filterID%20%3D%20args.NAME%3B%0A%20%20%20%20%20%20%20%20const%20filterExists%20%3D%20document.getElementById(filterID)%3B%0A%20%20%20%20%20%20%20%20if%20(filterExists)%20%7B%0A%20%20%20%20%20%20%20%20%20%20filterExists.innerHTML%20%3D%20match%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20svgFilterOuter%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22svg%22)%3B%0A%20%20%20%20%20%20%20%20svgFilterOuter.id%20%3D%20%60SP-canvas-%24%7BfilterID%7D%60%3B%0A%20%20%20%20%20%20%20%20const%20svgFilter%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22filter%22)%3B%0A%20%20%20%20%20%20%20%20svgFilter.id%20%3D%20filterID%3B%0A%20%20%20%20%20%20%20%20svgFilter.innerHTML%20%3D%20match%5B1%5D%3B%0A%20%20%20%20%20%20%20%20svgFilterOuter.appendChild(svgFilter)%3B%0A%20%20%20%20%20%20%20%20document.body.appendChild(svgFilterOuter)%3B%0A%20%20%20%20%20%20%20%20allFilters.push(filterID)%3B%0A%20%20%20%20%20%20%20%20const%20existingFilter%20%3D%20canvas.style.filter%3B%0A%20%20%20%20%20%20%20%20const%20filterString%20%3D%20existingFilter%20%3F%20%60%24%7BexistingFilter%7D%20url(%23%24%7BfilterID%7D)%60%20%3A%20%60url(%23%24%7BfilterID%7D)%60%3B%0A%20%20%20%20%20%20%20%20canvas.style.filter%20%3D%20filterString%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%20console.error(%22Invalid%20Filter%2C%20Cancelled%20Application%22)%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20removeCanvasFilter(args)%20%7B%0A%20%20%20%20%20%20args.NAME%20%3D%20Scratch.Cast.toString(args.NAME).replaceAll(%22%20%22%2C%20%22_%22)%3B%0A%20%20%20%20%20%20if%20(canvas.style.filter.includes(%60url(%22%23%24%7Bargs.NAME%7D%22)%60))%20%7B%0A%20%20%20%20%20%20%20%20canvas.style.filter%20%3D%20canvas.style.filter.replace(%60url(%23%24%7Bargs.NAME%7D)%60%2C%20%22%22).trim()%3B%0A%20%20%20%20%20%20%20%20const%20array%20%3D%20canvas.style.filter.split(%22%20%22)%3B%0A%20%20%20%20%20%20%20%20if%20(array.length%20%3D%3D%3D%201%20%26%26%20canvas.style.filter.includes(args.NAME))%20canvas.style.filter%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20const%20filterSel%20%3D%20document.getElementById(%60SP-canvas-%24%7Bargs.NAME%7D%60)%3B%0A%20%20%20%20%20%20%20%20if%20(filterSel)%20%7B%0A%20%20%20%20%20%20%20%20%20%20document.body.removeChild(filterSel)%3B%0A%20%20%20%20%20%20%20%20%20%20allFilters.splice(allFilters.indexOf(args.NAME)%2C%201)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%20console.error(%22Filter%20not%20found%2C%20Cancelled%20Deletion%22)%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20removeAllFilters(args)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20allFilters.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20filterSel%20%3D%20document.getElementById(%60SP-canvas-%24%7BallFilters%5Bi%5D%7D%60)%3B%0A%20%20%20%20%20%20%20%20if%20(filterSel)%20document.body.removeChild(filterSel)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Sometimes%20the%20allFilters%20array%20will%20lose%20filters%20because%20of%20the%20GUI%2C%20this%20fixes%20it%0A%20%20%20%20%20%20const%20guiFilters%20%3D%20document.querySelectorAll(%60%5Bid%5E%3D%22SP-canvas-filter-%22%5D%60)%3B%0A%20%20%20%20%20%20if%20(guiFilters.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20guiFilters.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20document.body.removeChild(guiFilters%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20canvas.style.filter%20%3D%20%22%22%3B%0A%20%20%20%20%20%20allFilters%20%3D%20%5B%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20getSVG(targetArgs)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20targetArgs%20%3D%3D%3D%20%22_stage_%22%20%3F%20runtime.getTargetForStage()%20%3A%20runtime.getSpriteTargetByName(targetArgs)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20%22%3C%3E%22%3B%0A%20%20%20%20%20%20if%20(!requireNonPackagedRuntime())%20return%20%22%3C%3E%22%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20target.getCostumes()%5Btarget.currentCostume%5D%3B%0A%20%20%20%20%20%20%2F%2Fif%20bitmap%2C%20convert%20to%20svg%0A%20%20%20%20%20%20if%20(costume.dataFormat%20%3D%3D%3D%20%22png%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20await%20this.getImage(costume.asset.encodeDataURI())%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%20return%20costume.asset.decodeText()%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20getImage(image)%20%7B%0A%20%20%20%20%20%20if%20(image.startsWith(%22data%3Aimage%2F%22))%20%7B%0A%20%20%20%20%20%20%20%20return%20await%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20eslint-disable-next-line%0A%20%20%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0A%20%20%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20width%20%3D%20img.width%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20height%20%3D%20img.height%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20svg%20%3D%20%60%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3D%22%24%7Bwidth%20%2F%202%7D%22%20height%3D%22%24%7B(height%20%2F%202)%20%2B%200.001%7D%22%20viewBox%3D%220%2C0%2C%24%7Bwidth%20%2F%202%7D%2C%24%7B(height%20%2F%202)%20%2B%200.001%7D%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20transform%3D%22translate(%24%7Bimg.offsetLeft%20%2F%20-2%7D%2C%24%7Bimg.offsetTop%20%2F%20-2%7D)%22%3E%3Cg%20data-paper-data%3D%22%7B%26quot%3BisPaintingLayer%26quot%3B%3Atrue%7D%22%20fill%3D%22none%22%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fill-rule%3D%22nonzero%22%20stroke%3D%22none%22%20stroke-width%3D%220.5%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20stroke-miterlimit%3D%2210%22%20stroke-dasharray%3D%22%22%20stroke-dashoffset%3D%220%22%20style%3D%22mix-blend-mode%3A%20normal%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cimage%20x%3D%220%22%20y%3D%220%22%20transform%3D%22scale(0.5%2C0.5)%22%20width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%20%2B%200.002%7D%22%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xlink%3Ahref%3D%22%24%7Bimg.src%7D%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve(svg)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20img.onerror%20%3D%20reject%3B%0A%20%20%20%20%20%20%20%20%20%20img.src%20%3D%20image%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20image%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20findAsset(util)%20%7B%0A%20%20%20%20%20%20if%20(!requireNonPackagedRuntime())%20return%20%22%3C%3E%22%3B%0A%20%20%20%20%20%20const%20currentCostume%20%3D%20util.target.currentCostume%3B%0A%20%20%20%20%20%20let%20myAsset%20%3D%20util.target.sprite.costumes%3B%0A%20%20%20%20%20%20myAsset%20%3D%20myAsset%5BcurrentCostume%5D%3B%0A%20%20%20%20%20%20%2F%2Fif%20bitmap%2C%20convert%20to%20svg%0A%20%20%20%20%20%20if%20(myAsset.dataFormat%20%3D%3D%3D%20%22png%22)%20return%20await%20this.getImage(myAsset.asset.encodeDataURI())%3B%0A%20%20%20%20%20%20else%20return%20myAsset.asset.decodeText()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20svgToBitmap(svg%2C%20width%2C%20height)%20%7B%0A%20%20%20%20%20%20return%20await%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20eslint-disable-next-line%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20width%3B%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20height%3B%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200%2C%20width%2C%20height)%3B%0A%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20img.onerror%20%3D%20(error)%20%3D%3E%20%7B%20resolve(%22Invalid%20Image%22)%20%7D%3B%0A%20%20%20%20%20%20%20%20img.src%20%3D%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(svg)%7D%60%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTargets(includeCanvas)%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20spriteNames.push(%7B%20text%20%3A%20%22myself%22%2C%20value%3A%20%22_myself_%22%20%7D)%3B%0A%20%20%20%20%20%20if%20(includeCanvas)%20spriteNames.push(%7B%20text%20%3A%20%22Canvas%22%2C%20value%3A%20%22_canvas_%22%20%7D)%3B%0A%20%20%20%20%20%20spriteNames.push(%7B%20text%20%3A%20%22Stage%22%2C%20value%3A%20%22_stage_%22%20%7D)%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20spriteNames.push(%7B%20text%20%3A%20target.getName()%2C%20value%20%3A%20target.getName()%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20spriteNames.length%20%3E%200%20%3F%20spriteNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20hexToRgb(hex)%20%7B%0A%20%20%20%20%20%20hex%20%3D%20hex.replace(%2F%5E%23%2F%2C%20%22%22)%3B%0A%20%20%20%20%20%20const%20bigint%20%3D%20parseInt(hex%2C%2016)%3B%0A%20%20%20%20%20%20return%20%7B%22r%22%20%3A%20(bigint%20%3E%3E%2016)%20%26%20255%2C%20%22g%22%20%3A(bigint%20%3E%3E%208)%20%26%20255%2C%20%22b%22%20%3A%20bigint%20%26%20255%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20hexMap(hex)%20%7B%0A%20%20%20%20%20%20hex%20%3D%20hex.replace(%2F%5E%23%2F%2C%20%22%22)%3B%0A%20%20%20%20%20%20const%20r%20%3D%20parseInt(hex.slice(0%2C%202)%2C%2016)%3B%0A%20%20%20%20%20%20const%20g%20%3D%20parseInt(hex.slice(2%2C%204)%2C%2016)%3B%0A%20%20%20%20%20%20const%20b%20%3D%20parseInt(hex.slice(4%2C%206)%2C%2016)%3B%0A%20%20%20%20%20%20const%20filterMatrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%20r%20%2F%20255%2C%200%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%20g%20%2F%20255%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%20b%20%2F%20255%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%20%20%5D.join(%22%20%22)%3B%0A%20%20%20%20%20%20return%20filterMatrix%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20filterApplier(svg%2C%20filter%2C%20name)%20%7B%0A%20%20%20%20%20%20nameOffset%2B%2B%3B%0A%20%20%20%20%20%20if%20(nameOffset%20%3E%20100)%20nameOffset%20%3D%200%3B%0A%20%20%20%20%20%20let%20svgTag%20%3D%20svg.indexOf(%22%3E%22)%3B%0A%20%20%20%20%20%20if%20(svgTag%20%3E%20-1)%20%7B%0A%20%20%20%20%20%20%20%20let%20url%20%3D%20%60filter%3D%22url(%23%24%7Bname%7D)%22%60%3B%0A%20%20%20%20%20%20%20%20if%20(svg.includes(%22filter%3D%5C%22url(%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20regex%20%3D%20%2Ffilter%3D%22url%5C(%5B%5E%22%5D%2B%5C)%22%2Fg%3B%0A%20%20%20%20%20%20%20%20%20%20const%20existingFilters%20%3D%20svg.match(regex)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(existingFilters)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20filterString%20%3D%20existingFilters.join(%22%20%22).slice(0%2C%20-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3D%20%60%24%7BfilterString%7D%20url(%23%24%7Bname%7D)%22%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(regex%2C%20%22%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20svgTag%20%3D%20svg.indexOf(%22%3E%22)%3B%0A%20%20%20%20%20%20%20%20let%20appliedSVG%20%3D%20%60%24%7Bsvg.substring(0%2C%20svgTag)%7D%20%24%7Burl%7D%3E%24%7Bfilter.slice(0%2C%20-1)%7D%24%7Bsvg.slice(svgTag)%7D%60%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20replace%20needs%20to%20be%20repeated%20twice%20to%20avoid%20the%20new%20name%20being%20used%20in%20other%20namespaces%0A%20%20%20%20%20%20%20%20return%20appliedSVG.replace(%60%23%24%7Bname%7D)%60%2C%20%60%23%24%7Bname%7D%24%7BnameOffset%7D)%60).replace(%60%22%24%7Bname%7D%22%60%2C%20%60%22%24%7Bname%7D%24%7BnameOffset%7D%22%60)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20getSources()%20%7B%0A%20%20%20%20%20%20%2F%2F%20we%20shouldnt%20ask%20for%20permission%20since%20its%20for%20a%20trusted%2C%20static%20function%0A%20%20%20%20%20%20%2F%2F%20I%20could%20hardcode%20this%20in%2C%20but%20Id%20rather%20not%20have%20it%20take%20up%20file%20space%20%3A%2F%0A%20%20%20%20%20%20const%20link%20%3D%20%22https%3A%2F%2Fraw.githubusercontent.com%2FSharkPool-SP%2FSharkPools-Extensions%2Fmain%2Fextension-sourceFeed%2F%22%3B%0A%20%20%20%20%20%20%2F*%20eslint-disable%20*%2F%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20displacementSrCs%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20await%20(await%20fetch(link%20%2B%20%22SE-bulge.txt%22)).text()%2C%0A%20%20%20%20%20%20%20%20%20%20await%20(await%20fetch(link%20%2B%20%22SE-whirl.txt%22)).text()%2C%0A%20%20%20%20%20%20%20%20%20%20await%20(await%20fetch(link%20%2B%20%22SE-ripple.txt%22)).text()%2C%0A%20%20%20%20%20%20%20%20%20%20await%20(await%20fetch(link%20%2B%20%22SE-shock.txt%22)).text()%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%20console.error(%22Error%20fetching%20resources%3A%20%22%2C%20error)%20%7D%0A%20%20%20%20%20%20%2F*%20eslint-enable%20*%2F%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20SPspriteEffects())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Image%20Effects%0D%0A%2F%2F%20ID%3A%20imgEffectsSP%0D%0A%2F%2F%20Description%3A%20Apply%20a%20variety%20of%20new%20effects%20to%20the%20data%20URI%20of%20Images%20or%20Costumes.%0D%0A%2F%2F%20By%3A%20SharkPool%0D%0A%0D%0A%2F%2F%20Version%20V.2.3.2%0D%0A%0D%0A(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Image%20Effects%20must%20run%20unsandboxed%22)%3B%0D%0A%0D%0A%20%20const%20menuIconURI%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMzUuNzMwNjQiIGhlaWdodD0iMTM1LjczMDY0IiB2aWV3Qm94PSIwLDAsMTM1LjczMDY0LDEzNS43MzA2NCI%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3Mi4xMzQ2OCwtMTEyLjEzNDY4KSI%2BPGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsPSIjOTk2NmZmIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMTc1Ljg4NDY4LDE4MGMwLC0zNS40MDk5MSAyOC43MDU0MSwtNjQuMTE1MzIgNjQuMTE1MzIsLTY0LjExNTMyYzM1LjQwOTkxLDAgNjQuMTE1MzIsMjguNzA1NDEgNjQuMTE1MzIsNjQuMTE1MzJjMCwzNS40MDk5MSAtMjguNzA1NDEsNjQuMTE1MzIgLTY0LjExNTMyLDY0LjExNTMyYy0zNS40MDk5MSwwIC02NC4xMTUzMiwtMjguNzA1NDEgLTY0LjExNTMyLC02NC4xMTUzMnoiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBzdHJva2U9IiM3NzRkY2IiIHN0cm9rZS13aWR0aD0iNy41Ii8%2BPHBhdGggZD0iTTI0MC40NDQ3MSwxNzMuMjY3NjJjNC4wOTQ5MiwtMS42NzM4NiA5LjMwMjQ5LC0xLjE5MDEgMTIuMTM5MDIsLTUuMDU1MzljMi45NDAxOSwtNC4wMDY1NSAzLjgyMTg1LC0xMi4zNTQ5MyA0LjQ0ODA0LC0xNy4yNTg2MWMwLjYxMDA3LC00Ljc3NzQ5IDEuNzYyMTIsLTQuNjEwOTMgMi42MzYyMywwLjI0MTA0YzAuOTI1MDIsNS4xMzQ1MyAyLjAzNDk4LDEzLjY3Njk1IDQuNjU0MTcsMTcuMjQ2MDhjMi45OTI4OSw0LjA3ODM3IDguOTIyODMsMy44NDQ2MiAxMy4zMDU3Miw1LjUyMjUyYzMuMDc3MjksMS4xNzgwNyAyLjgwMzA3LDEuODUyNzYgLTAuNTU3NTMsMi41NjMxOGMtNC4zMTUyNSwwLjkxMjIyIC05LjkwMjk2LDEuNjU3MSAtMTIuOTE1ODksNS43NjI3N2MtMy4xNzkwMyw0LjMzMjAyIC00LjI2MTk4LDE0LjY4OTEyIC01LjAwNjEyLDIwLjg0MjU5Yy0wLjUxMDM2LDQuMjIwMjYgLTEuOTQ5MjEsMi40MjI2MiAtMi4yMTYzMiwwLjI3NjAxYy0wLjc3MDA3LC02LjE4ODY3IC0xLjk2NjQ1LC0xNi44MzA3NiAtNS41MjIxNiwtMjEuNjc2MDdjLTIuNTE2NjgsLTMuNDI5NDQgLTYuNjk2MjksLTQuMDQ3ODUgLTEwLjExNzcyLC01LjAwMDM5Yy00LjYxNjIsLTEuMjg1MTggLTUuMTMyNDYsLTEuNzEyMTUgLTAuODQ3NDUsLTMuNDYzNzJ6IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjE1Ii8%2BPHBhdGggZD0iTTI1Mi41ODM3MywxNjguMjEyMjNjMi45NDAxOSwtNC4wMDY1NSAyLjgyMTg1LC0xMi4zNTQ5MiAzLjQ0ODA0LC0xNy4yNTg2YzAuNjEwMDcsLTQuNzc3NDkgMy44NzMyMywtNC42MTA5MyA0Ljc0NzM0LDAuMjQxMDRjMC45MjUwMiw1LjEzNDUzIDAuOTIzODcsMTMuNjc2OTUgMy41NDMwNiwxNy4yNDYwOGMyLjk5Mjg5LDQuMDc4MzcgOC4zNjcyNywyLjczMzUxIDEyLjc1MDE2LDQuNDExNGMzLjA3NzI5LDEuMTc4MDcgMy4zNTg2MywzLjg1Mjc2IC0wLjAwMTk3LDQuNTYzMThjLTQuMzE1MjUsMC45MTIyMiAtOS45MDI5NiwwLjc2ODIxIC0xMi45MTU4OSw0Ljg3Mzg4Yy0zLjE3OTAzLDQuMzMyMDIgLTMuNDg0MiwxNC45MTEzNCAtNC4yMjgzMywyMS4wNjQ4MWMtMC41MTAzNiw0LjIyMDI2IC0zLjcyNjk5LDIuMjAwNCAtMy45OTQxLDAuMDUzNzljLTAuNzcwMDcsLTYuMTg4NjcgLTAuOTY2NDUsLTE2LjgzMDc2IC00LjUyMjE2LC0yMS42NzYwN2MtMi41MTY2OCwtMy40Mjk0NCAtNy40NzQwNywtMy4zODExOCAtMTAuODk1NSwtNC4zMzM3MmMtNC42MTYyLC0xLjI4NTE4IC00LjM1NDY4LC0zLjI2NzcxIC0wLjA2OTY3LC01LjAxOTI4YzAsMCA5LjMwMjQ5LC0wLjMwMTIzIDEyLjEzOTAyLC00LjE2NjUxeiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aW5kZXgmcXVvdDs6bnVsbH0iIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTIxNC4xNjUzMSwxNTIuMzM0NzJjMS40OTI4MiwtMS42NDY2OSAxLjk0MDQ3LC01LjA3Nzg3IDIuMjU4NCwtNy4wOTMyOGMwLjMwOTc1LC0xLjk2MzU1IDAuODk0NjcsLTEuODk1MDkgMS4zMzg0OSwwLjA5OTA2YzAuNDY5NjYsMi4xMTAyOSAxLjAzMzIyLDUuNjIxMjMgMi4zNjMwNiw3LjA4ODE0YzEuNTE5NTgsMS42NzYyMSA0LjUzMDM3LDEuNTgwMTMgNi43NTU3LDIuMjY5NzVjMS41NjI0MywwLjQ4NDE4IDEuNDIzMiwwLjc2MTQ4IC0wLjI4MzA3LDEuMDUzNDZjLTIuMTkwOTgsMC4zNzQ5MiAtNS4wMjgwMSwwLjY4MTA3IC02LjU1Nzc2LDIuMzY4NWMtMS42MTQwOCwxLjc4MDQ2IC0yLjE2MzkzLDYuMDM3MjIgLTIuNTQxNzUsOC41NjYyOWMtMC4yNTkxMiwxLjczNDUyIC0wLjk4OTY3LDAuOTk1NyAtMS4xMjUyOSwwLjExMzQ0Yy0wLjM5MDk5LC0yLjU0MzU0IC0wLjk5ODQyLC02LjkxNzQ0IC0yLjgwMzc2LC04LjkwODg2Yy0xLjI3Nzc5LC0xLjQwOTUgLTMuMzk5OSwtMS42NjM2NyAtNS4xMzcwNiwtMi4wNTUxNmMtMi4zNDM3NywtMC41MjgyMSAtMi42MDU5LC0wLjcwMzcgLTAuNDMwMjcsLTEuNDIzNTljMCwwIDQuNzIzMTMsLTAuNDg5MTIgNi4xNjMzMSwtMi4wNzc3NXoiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMTAiLz48cGF0aCBkPSJNMjE0LjE2NTMxLDE1Mi4zMzQ3MmMxLjQ5MjgyLC0xLjY0NjY5IDEuMjczODEsLTQuOTY2NzYgMS41OTE3NCwtNi45ODIxN2MwLjMwOTc1LC0xLjk2MzU1IDIuMTE2ODksLTIuMDA2MiAyLjU2MDcsLTAuMDEyMDVjMC40Njk2NiwyLjExMDI5IDAuNDc3NjcsNS42MjEyMyAxLjgwNzUxLDcuMDg4MTRjMS41MTk1OCwxLjY3NjIxIDQuMzA4MTUsMC42MzU2OCA2LjUzMzQ4LDEuMzI1M2MxLjU2MjQzLDAuNDg0MTggMS42NDU0MiwyLjI2MTQ4IC0wLjA2MDg1LDIuNTUzNDZjLTIuMTkwOTgsMC4zNzQ5MiAtNS4wMjgwMSwwLjEyNTUyIC02LjU1Nzc2LDEuODEyOTVjLTEuNjE0MDgsMS43ODA0NiAtMS4xNjM5Myw2LjAzNzIyIC0xLjU0MTc1LDguNTY2MjljLTAuMjU5MTIsMS43MzQ1MiAtMi43Njc0NSwwLjk5NTcgLTIuOTAzMDcsMC4xMTM0NGMtMC4zOTA5OSwtMi41NDM1NCAtMC4yMjA2NCwtNi45MTc0NCAtMi4wMjU5OCwtOC45MDg4NmMtMS4yNzc3OSwtMS40MDk1IC00LjI4ODc5LC0wLjk5NyAtNi4wMjU5NSwtMS4zODg0OWMtMi4wMDQ1OCwtMC40NTE3NyAtMS4yNjQyMSwtMi4yMDEwOCAtMC4wMDA1MiwtMi42OTgwOWMwLjIxMzgyLC0wLjA4NDA5IDUuMTgyMjgsMC4xMTg3MSA2LjYyMjQ2LC0xLjQ2OTkyeiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aW5kZXgmcXVvdDs6bnVsbH0iIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTIyMC44NTY0LDIwNC44MDk1MWMxLjU2MTg4LC0xLjk1NjIgMi4wMzAyNSwtNi4wMzIyOSAyLjM2Mjg5LC04LjQyNjUyYzAuMzI0MDgsLTIuMzMyNjIgMC45MzYwNiwtMi4yNTEyOSAxLjQwMDQxLDAuMTE3NjhjMC40OTEzOSwyLjUwNjkzIDEuMDgxMDIsNi42Nzc3OSAyLjQ3MjM5LDguNDIwNDFjMS41ODk4OSwxLjk5MTI2IDQuNzM5OTgsMS44NzcxNCA3LjA2ODI1LDIuNjk2MzdjMS42MzQ3MiwwLjU3NTIgMS40ODkwNSwwLjkwNDYxIC0wLjI5NjE3LDEuMjUxNDdjLTIuMjkyMzUsMC40NDUzOCAtNS4yNjA2NCwwLjgwOTA4IC02Ljg2MTE2LDIuODEzNjhjLTEuNjg4NzUsMi4xMTUxMSAtMi4yNjQwNSw3LjE3MTk4IC0yLjY1OTM1LDEwLjE3NjQxYy0wLjI3MTExLDIuMDYwNTQgLTEuMDM1NDUsMS4xODI4NSAtMS4xNzczNSwwLjEzNDc2Yy0wLjQwOTA4LC0zLjAyMTYyIC0xLjA0NDYxLC04LjIxNzY0IC0yLjkzMzQ4LC0xMC41ODMzNmMtMS4zMzY5MSwtMS42NzQ0MiAtMy41NTcxOSwtMS45NzYzNyAtNS4zNzQ3MSwtMi40NDE0NWMtMi40NTIyLC0wLjYyNzQ5IC0yLjcyNjQ2LC0wLjgzNTk1IC0wLjQ1MDE5LC0xLjY5MTE2YzAsMCA0Ljk0MTY1LC0wLjU4MTA3IDYuNDQ4NDYsLTIuNDY4M3oiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2luZGV4JnF1b3Q7Om51bGx9IiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMTAiLz48cGF0aCBkPSJNMjIwLjg1NjQsMjA0LjgwOTUxYzEuNTYxODgsLTEuOTU2MiAxLjM2MzU4LC02LjAzMjI5IDEuNjk2MjIsLTguNDI2NTJjMC4zMjQwOCwtMi4zMzI2MiAyLjM4MDUsLTIuMjUxMjkgMi44NDQ4NiwwLjExNzY4YzAuNDkxMzksMi41MDY5MyAwLjMwMzI0LDYuNjc3NzkgMS42OTQ2LDguNDIwNDFjMS41ODk4OSwxLjk5MTI2IDQuMjk1NTMsMC45NDY1OCA2LjYyMzgxLDEuNzY1ODJjMS42MzQ3MiwwLjU3NTIgMS45MzM0OSwyLjM5MDcyIDAuMTQ4MjgsMi43Mzc1OGMtMi4yOTIzNSwwLjQ0NTM4IC01LjI2MDY0LDAuMjUzNTIgLTYuODYxMTYsMi4yNTgxM2MtMS42ODg3NSwyLjExNTExIC0xLjQ4NjI3LDcuMTcxOTggLTEuODgxNTYsMTAuMTc2NDFjLTAuMjcxMTEsMi4wNjA1NCAtMi41OTEwMSwxLjE4Mjg1IC0yLjczMjksMC4xMzQ3NmMtMC40MDkwOCwtMy4wMjE2MiAtMC4yNjY4MywtOC4yMTc2NCAtMi4xNTU3LC0xMC41ODMzNmMtMS4zMzY5MSwtMS42NzQ0MiAtNC4wMDE2NCwtMS41MzE5MyAtNS44MTkxNiwtMS45OTcwMWMtMi40NTIyLC0wLjYyNzQ5IC0yLjI4MjAxLC0xLjgzNTk1IC0wLjAwNTc0LC0yLjY5MTE2YzAsMCA0Ljk0MTY0LC0wLjAyNTUyIDYuNDQ4NDUsLTEuOTEyNzV6IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjAiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0D%0A%0D%0A%20%20function%20hexToRgb(hex)%20%7B%0D%0A%20%20%20%20const%20r%20%3D%20parseInt(hex.slice(1%2C%203)%2C%2016)%3B%0D%0A%20%20%20%20const%20g%20%3D%20parseInt(hex.slice(3%2C%205)%2C%2016)%3B%0D%0A%20%20%20%20const%20b%20%3D%20parseInt(hex.slice(5%2C%207)%2C%2016)%3B%0D%0A%20%20%20%20const%20a%20%3D%20hex.length%20%3D%3D%3D%209%20%3F%20parseInt(hex.slice(7%2C%209)%2C%2016)%20%2F%20255%20%3A%20255%3B%0D%0A%20%20%20%20return%20%5Br%2C%20g%2C%20b%2C%20a%5D%3B%0D%0A%20%20%7D%0D%0A%20%20function%20rgbaToHex(r%2C%20g%2C%20b%2C%20a)%20%7B%0D%0A%20%20%20%20const%20alpha%20%3D%20a%20!%3D%3D%20undefined%20%3F%20Math.round(a).toString(16).padStart(2%2C%20%220%22)%20%3A%20%22%22%3B%0D%0A%20%20%20%20return%20%60%23%24%7B(1%20%3C%3C%2024%20%7C%20r%20%3C%3C%2016%20%7C%20g%20%3C%3C%208%20%7C%20b).toString(16).slice(1)%7D%24%7Balpha%7D%60%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20class%20imgEffectsSP%20%7B%0D%0A%20%20%20%20constructor()%20%7B%0D%0A%20%20%20%20%20%20this.cutPos%20%3D%20%5B0%2C%200%5D%3B%0D%0A%20%20%20%20%20%20this.scale%20%3D%20%5B100%2C%20100%5D%3B%0D%0A%20%20%20%20%20%20this.cutoutDirection%20%3D%2090%3B%0D%0A%20%20%20%20%20%20this.softness%20%3D%2010%3B%0D%0A%20%20%20%20%20%20this.allShards%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22imgEffectsSP%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20%22Image%20Effects%22%2C%0D%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20%22%239966FF%22%2C%0D%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23774DCB%22%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Effects%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22convertHexToRGB%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22convert%20%5BHEX%5D%20to%20%5BCHANNEL%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%20%2F%2F%20depreciated%20block%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20HEX%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CHANNEL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CHANNELS%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyHueEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22apply%20hue%20%5BCOLOR%5D%20to%20URI%20%5BSVG%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteColor%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22remove%20color%20%5BCOLOR%5D%20from%20%5BDATA_URI%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DATA_URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceColor%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20color%20%5BCOLOR%5D%20with%20%5BREPLACE%5D%20from%20%5BDATA_URI%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%2300ff00%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DATA_URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSoftness%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20softness%20of%20color%20detection%20to%20%5BAMT%5D%25%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AMT%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BEFFECT%5D%20effect%20of%20URI%20%5BSVG%5D%20to%20%5BPERCENTAGE%5D%25%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EFFECTS%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PERCENTAGE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyBulgeEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20bulge%20effect%20of%20URI%20%5BSVG%5D%20to%20%5BSTRENGTH%5D%25%20at%20x%20%5BCENTER_X%5D%20y%20%5BCENTER_Y%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRENGTH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CENTER_X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CENTER_Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyWaveEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20wave%20effect%20of%20URI%20%5BSVG%5D%20to%20amplitude%20x%20%5BAMPX%5D%20y%20%5BAMPY%5D%20and%20frequency%20x%20%5BFREQX%5D%20y%20%5BFREQY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AMPX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AMPY%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FREQX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FREQY%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyLineGlitchEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20line%20glitch%20of%20URI%20%5BSVG%5D%20to%20%5BPERCENTAGE%5D%25%20on%20%5BDIRECT%5D%20axis%20and%20line%20width%20%5BWIDTH%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PERCENTAGE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITIONS%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyAbberationEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20abberation%20of%20URI%20%5BSVG%5D%20to%20colors%20%5BCOLOR1%5D%20and%20%5BCOLOR2%5D%20at%20%5BPERCENTAGE%5D%25%20on%20%5BDIRECT%5D%20axis%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PERCENTAGE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR2%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%2300f7ff%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITIONS%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22removeTransparencyEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22remove%20pixels%20from%20URI%20%5BSVG%5D%20%5BREMOVE%5D%20%5BTHRESHOLD%5D%25%20transparency%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20THRESHOLD%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REMOVE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22REMOVAL%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyEdgeOutlineEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22add%20outline%20to%20URI%20%5BSVG%5D%20with%20thickness%20%5BTHICKNESS%5D%20and%20color%20%5BCOLOR%5D%20opacity%20%5BA%5D%25%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20THICKNESS%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Clipping%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clipImage%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clip%20%5BCUTOUT%5D%20from%20%5BMAIN%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MAIN%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22source-here%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CUTOUT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22cutout-here%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22overlayImage%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clip%20%5BCUTOUT%5D%20onto%20%5BMAIN%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MAIN%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22source-here%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CUTOUT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22cutout-here%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCutout%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20clipping%20position%20to%20x%20%5BX%5D%20y%20%5BY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeCutout%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20clipping%20position%20by%20x%20%5BX%5D%20y%20%5BY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22currentCut%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clipping%20%5BPOS%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITIONS%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setScale%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20clipping%20size%20to%20x%20%5BSIZE%5D%20y%20%5BY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeScale%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20clipping%20size%20by%20x%20%5BSIZE%5D%20y%20%5BY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22currentScale%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clipping%20size%20%5BPOS%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITIONS%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDirection%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20clipping%20direction%20to%20%5BANGLE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%20type%3A%20Scratch.ArgumentType.ANGLE%2C%20defaultValue%3A%2090%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeDirection%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20clipping%20direction%20by%20%5BANGLE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%20type%3A%20Scratch.ArgumentType.ANGLE%2C%20defaultValue%3A%2015%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22currentDir%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clipping%20direction%22%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22crackImage%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22crack%20%5BURI%5D%20into%20%5BSHARDS%5D%20shards%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SHARDS%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getShard%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20shard%20%23%5BSHARD%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SHARD%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Pixels%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22numPixels%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22number%20of%20pixels%20%5BTYPE%5D%20in%20%5BURI%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22PIXELTYPE%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getPixel%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20hex%20of%20pixel%20%23%5BNUM%5D%20in%20%5BURI%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPixel%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20color%20of%20pixel%20%23%5BNUM%5D%20to%20%5BCOLOR%5D%20in%20%5BURI%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPixels%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20color%20of%20pixels%20from%20%23%5BNUM%5D%20to%20%5BNUM2%5D%20to%20%5BCOLOR%5D%20in%20%5BURI%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%2C%20defaultValue%3A%20%22%23ff0000%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Image%20Conversions%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22svgToBitmap%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22convert%20svg%20content%20%5BSVG%5D%20to%20bitmap%20with%20width%20%5BWIDTH%5D%20height%20%5BHEIGHT%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%3Csvg%20%2F%3E%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20HEIGHT%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22convertImageToSVG%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22convert%20bitmap%20URI%20%5BURI%5D%20to%20svg%20%5BTYPE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22fileType%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22makeSVGimage%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22make%20new%20svg%20with%20image%20URI%20%5BURI%5D%20to%20svg%20%5BTYPE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22fileType%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22upscaleImage%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22upscale%20image%20URI%20%5BURI%5D%20by%20%5BNUM%5D%20%25%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stretchImg%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22stretch%20URI%20%5BURI%5D%20to%20width%20%5BW%5D%20height%20%5BH%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%20%22svg%2Fdata-uri%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20W%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20H%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22audioToImage%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22convert%20audio%20URI%20%5BAUDIO_URI%5D%20to%20PNG%20with%20width%20%5BW%5D%20height%20%5BH%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AUDIO_URI%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22audio_uri_here%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20W%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20H%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22skewSVG%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22skew%20SVG%20content%20%5BSVG%5D%20at%20x%20%5BY%5D%20y%20%5BX%5D%20as%20%5BTYPE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%3Csvg%3E%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22fileType%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22removeThorns%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22remove%20vector%20thorns%20from%20%5BSVG%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%3Csvg%3E%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20CHANNELS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22R%22%2C%20%22G%22%2C%20%22B%22%5D%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20POSITIONS%3A%20%5B%22X%22%2C%20%22Y%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20PIXELTYPE%3A%20%5B%22total%22%2C%20%22per%20line%22%2C%20%22per%20row%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20REMOVAL%3A%20%5B%22under%22%2C%20%22over%22%2C%20%22equal%20to%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20fileType%3A%20%5B%22content%22%2C%20%22dataURI%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20EFFECTS%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Saturation%22%2C%20%22Glitch%22%2C%20%22Chunk%20Glitch%22%2C%20%22Clip%20Glitch%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Vignette%22%2C%20%22Ripple%22%2C%20%22Displacement%22%2C%20%22Posterize%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Blur%22%2C%20%22Scanlines%22%2C%20%22Grain%22%2C%20%22Cubism%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setCutout(args)%20%7B%20this.cutPos%20%3D%20%5BScratch.Cast.toNumber(args.X)%2C%20Scratch.Cast.toNumber(args.Y)%5D%20%7D%0D%0A%20%20%20%20changeCutout(args)%20%7B%0D%0A%20%20%20%20%20%20this.cutPos%20%3D%20%5Bthis.cutPos%5B0%5D%20%2B%20Scratch.Cast.toNumber(args.X)%2C%0D%0A%20%20%20%20%20%20this.cutPos%5B1%5D%20%2B%20Scratch.Cast.toNumber(args.Y)%5D%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20currentCut(args)%20%7B%20return%20this.cutPos%5Bargs.POS%20%3D%3D%3D%20%22X%22%20%3F%200%20%3A%201%5D%20%7D%0D%0A%0D%0A%20%20%20%20setScale(args)%20%7B%20this.scale%20%3D%20%5BScratch.Cast.toNumber(args.SIZE)%2C%20Scratch.Cast.toNumber(args.Y)%5D%20%7D%0D%0A%20%20%20%20changeScale(args)%20%7B%0D%0A%20%20%20%20%20%20this.scale%20%3D%20%5Bthis.scale%5B0%5D%20%2B%20Scratch.Cast.toNumber(args.SIZE)%2C%0D%0A%20%20%20%20%20%20this.scale%5B1%5D%20%2B%20Scratch.Cast.toNumber(args.Y)%5D%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20currentScale(args)%20%7B%20return%20this.scale%5Bargs.POS%20%3D%3D%3D%20%22X%22%20%3F%200%20%3A%201%5D%20%7D%0D%0A%0D%0A%20%20%20%20setDirection(args)%20%7B%20this.cutoutDirection%20%3D%20Scratch.Cast.toNumber(args.ANGLE)%20%7D%0D%0A%20%20%20%20changeDirection(args)%20%7B%0D%0A%20%20%20%20%20%20let%20direction%20%3D%20this.cutoutDirection%20%2B%20Scratch.Cast.toNumber(args.ANGLE)%3B%0D%0A%20%20%20%20%20%20if%20(direction%20%3E%20180)%20%7B%20direction%20%3D%20-180%20%2B%20Scratch.Cast.toNumber(args.ANGLE)%20%7D%0D%0A%20%20%20%20%20%20if%20(direction%20%3C%20-180)%20%7B%20direction%20%3D%20180%20%2B%20Scratch.Cast.toNumber(args.ANGLE)%20%7D%0D%0A%20%20%20%20%20%20this.cutoutDirection%20%3D%20direction%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20currentDir()%20%7B%20return%20this.cutoutDirection%20%7D%0D%0A%0D%0A%20%20%20%20clipImage(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20mainImage%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20mainImage.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20cutoutImage%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20cutoutImage.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20mainImage.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20mainImage.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20context%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20scaledWidth%20%3D%20cutoutImage.width%20%2B%20this.scale%5B0%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20scaledHeight%20%3D%20cutoutImage.height%20%2B%20this.scale%5B1%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cutX%20%3D%20this.cutPos%5B0%5D%20%2B%20mainImage.width%20%2F%202%20-%20scaledWidth%20%2F%202%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cutY%20%3D%20this.cutPos%5B1%5D%20-%20mainImage.height%20%2F%202%20%2B%20scaledHeight%20%2F%202%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.drawImage(mainImage%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.globalCompositeOperation%20%3D%20%22destination-in%22%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rotationAngle%20%3D%20((this.cutoutDirection%20%2B%20270)%20*%20Math.PI)%20%2F%20180%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.translate(cutX%20%2B%20scaledWidth%20%2F%202%2C%20cutY%20*%20-1%20%2B%20scaledHeight%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.rotate(rotationAngle)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.drawImage(cutoutImage%2C%20-scaledWidth%20%2F%202%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-scaledHeight%20%2F%202%2C%20scaledWidth%2C%20scaledHeight%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.setTransform(1%2C%200%2C%200%2C%201%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.globalCompositeOperation%20%3D%20%22source-over%22%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL(%22image%2Fpng%22))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20cutoutImage.src%20%3D%20this.confirmAsset(args.CUTOUT%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20mainImage.src%20%3D%20this.confirmAsset(args.MAIN%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20overlayImage(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20mainImage%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20mainImage.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20cutoutImage%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20cutoutImage.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20Math.max(mainImage.width%2C%20cutoutImage.width)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20Math.max(mainImage.height%2C%20cutoutImage.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20context%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.drawImage(mainImage%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20scaledWidth%20%3D%20cutoutImage.width%20%2B%20this.scale%5B0%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20scaledHeight%20%3D%20cutoutImage.height%20%2B%20this.scale%5B1%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cutX%20%3D%20this.cutPos%5B0%5D%20%2B%20mainImage.width%20%2F%202%20-%20scaledWidth%20%2F%202%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cutY%20%3D%20this.cutPos%5B1%5D%20-%20mainImage.height%20%2F%202%20%2B%20scaledHeight%20%2F%202%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.translate(cutX%20%2B%20scaledWidth%20%2F%202%2C%20cutY%20*%20-1%20%2B%20scaledHeight%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.rotate(((this.cutoutDirection%20%2B%20270)%20*%20Math.PI)%20%2F%20180)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.drawImage(cutoutImage%2C%20-scaledWidth%20%2F%202%2C%20-scaledHeight%20%2F%202%2C%20scaledWidth%2C%20scaledHeight)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context.setTransform(1%2C%200%2C%200%2C%201%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL(%22image%2Fpng%22))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20cutoutImage.src%20%3D%20this.confirmAsset(args.CUTOUT%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20mainImage.src%20%3D%20this.confirmAsset(args.MAIN%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setSoftness(args)%20%7B%20this.softness%20%3D%20Scratch.Cast.toNumber(args.AMT)%20%7D%0D%0A%0D%0A%20%20%20%20convertHexToRGB(args)%20%7B%0D%0A%20%20%20%20%20%20const%20hexColor%20%3D%20args.HEX%3B%0D%0A%20%20%20%20%20%20const%20channelOffset%20%3D%20%7B%20R%3A%201%2C%20G%3A%203%2C%20B%3A%205%20%7D%5Bargs.CHANNEL%5D%3B%0D%0A%20%20%20%20%20%20return%20parseInt(hexColor.substring(channelOffset%2C%20channelOffset%20%2B%202)%2C%2016)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyHueEffect(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20color%20%3D%20hexToRgb(args.COLOR)%3B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20async%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20pixelData%20%3D%20this.printImg(img)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20await%20this.applyHue(pixelData%2C%20color%5B0%5D%2C%20color%5B1%5D%2C%20color%5B2%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(this.exportImg(img%2C%20pixelData))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.SVG%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20applyHue(pixelData%2C%20r%2C%20g%2C%20b)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20pixelData%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20data.length%3B%20i%20%2B%3D%204)%20%7B%0D%0A%20%20%20%20%20%20%20%20data%5Bi%5D%20%3D%20Math.min(255%2C%20(data%5Bi%5D%20*%20r)%20%2F%20255)%3B%0D%0A%20%20%20%20%20%20%20%20data%5Bi%20%2B%201%5D%20%3D%20Math.min(255%2C%20(data%5Bi%20%2B%201%5D%20*%20g)%20%2F%20255)%3B%0D%0A%20%20%20%20%20%20%20%20data%5Bi%20%2B%202%5D%20%3D%20Math.min(255%2C%20(data%5Bi%20%2B%202%5D%20*%20b)%20%2F%20255)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20deleteColor(args)%20%7B%0D%0A%20%20%20%20%20%20return%20this.replaceColor(%7B%0D%0A%20%20%20%20%20%20%20%20COLOR%20%3A%20args.COLOR%2C%20REPLACE%20%3A%20%22%2300000000%22%2C%20DATA_URI%20%3A%20args.DATA_URI%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20replaceColor(args)%20%7B%0D%0A%20%20%20%20%20%20const%20colRem%20%3D%20hexToRgb(args.COLOR)%3B%0D%0A%20%20%20%20%20%20const%20colRep%20%3D%20hexToRgb(args.REPLACE)%3B%0D%0A%20%20%20%20%20%20return%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20imageElement%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20imageElement.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20pixelData%20%3D%20this.printImg(imageElement)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20pixelData.length%3B%20i%20%2B%3D%204)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20%5Br%2C%20g%2C%20b%5D%20%3D%20pixelData.slice(i%2C%20i%20%2B%203)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20inRange%20%3D%20(val%2C%20target)%20%3D%3E%20val%20%3E%3D%20target%20-%20this.softness%20%26%26%20val%20%3C%3D%20target%20%2B%20this.softness%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(inRange(r%2C%20colRem%5B0%5D)%20%26%26%20inRange(g%2C%20colRem%5B1%5D)%20%26%26%20inRange(b%2C%20colRem%5B2%5D))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pixelData.set(colRep%2C%20i)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(this.exportImg(imageElement%2C%20pixelData))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20imageElement.src%20%3D%20this.confirmAsset(args.DATA_URI%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyEffect(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20percentage%20%3D%20Scratch.Cast.toNumber(args.PERCENTAGE)%20%2B%201%20%7C%7C%20101%3B%20%2F%2F%20let%200%20pass%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20async%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20let%20imageData%20%3D%20ctx.getImageData(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20effectFunction%20%3D%20this%5B%60apply%24%7BScratch.Cast.toString(args.EFFECT).replaceAll(%22%20%22%2C%20%22%22)%7D%60%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(effectFunction%20%26%26%20typeof%20effectFunction%20%3D%3D%3D%20%22function%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20await%20effectFunction(imageData%2C%20percentage%20-%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20this.applySaturation(imageData%2C%20percentage%20-%201)%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.SVG%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applySaturation(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20percent%20%3D%20Scratch.Cast.toNumber(percentage)%20%2F%20100%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20data.length%3B%20i%20%2B%3D%204)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20avg%20%3D%20(data%5Bi%5D%20%2B%20data%5Bi%20%2B%201%5D%20%2B%20data%5Bi%20%2B%202%5D)%20%2F%203%3B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%203%3B%20j%2B%2B)%20%7B%20data%5Bi%20%2B%20j%5D%20%3D%20avg%20%2B%20(data%5Bi%20%2B%20j%5D%20-%20avg)%20*%20percent%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyGlitch(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20percent%20%3D%20Scratch.Cast.toNumber(percentage)%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20data.length%3B%20i%20%2B%3D%204)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20*%20100%20%3C%3D%20percentage)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20rnd%20%3D%20()%20%3D%3E%20(Math.random()%20-%200.5)%20*%20percent%20*%203%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%203%3B%20j%2B%2B)%20%7B%20data%5Bi%20%2B%20j%5D%20%3D%20(data%5Bi%20%2B%20j%5D%20%2B%20rnd())%20%25%20256%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyVignette(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20let%20center%20%3D%20%5Bwidth%20%2F%202%2C%20height%20%2F%202%5D%3B%0D%0A%20%20%20%20%20%20const%20maxDistance%20%3D%20Math.sqrt(center%5B0%5D%20*%20center%5B0%5D%20%2B%20center%5B1%5D%20*%20center%5B1%5D)%3B%0D%0A%20%20%20%20%20%20const%20percent%20%3D%20Scratch.Cast.toNumber(percentage)%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20center%20%3D%20%5BMath.abs(x%20-%20center%5B0%5D)%2C%20Math.abs(y%20-%20center%5B1%5D)%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20distance%20%3D%20Math.sqrt(center%5B0%5D%20*%20center%5B0%5D%20%2B%20center%5B1%5D%20*%20center%5B1%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20vigAMT%20%3D%20(percent%20%3C%200)%20%3F%201%20-%20(distance%20%2F%20maxDistance)%20*%20(percent%20%2F%20100)%20%3A%20((maxDistance%20-%20distance)%20%2F%20maxDistance)%20*%20(percent%20%2F%20100)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20vigAMT%20%3D%20Math.max(0%2C%20Math.min(1%2C%20vigAMT))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%203%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%20%2B%20i%5D%20%3D%20Math.round(data%5Bindex%20%2B%20i%5D%20*%20vigAMT)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyRipple(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20centerX%20%3D%20width%20%2F%202%3B%0D%0A%20%20%20%20%20%20const%20centerY%20%3D%20height%20%2F%202%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20dx%20%3D%20x%20-%20centerX%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20dy%20%3D%20y%20-%20centerY%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20distance%20%3D%20Math.sqrt(dx%20*%20dx%20%2B%20dy%20*%20dy)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20offset%20%3D%20Math.sin(distance%20*%20(percentage%20%2F%20100))%20*%20(percentage%20%2F%20100)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20sourceX%20%3D%20Math.floor(x%20%2B%20offset)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20sourceY%20%3D%20Math.floor(y)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(sourceX%20%3E%3D%200%20%26%26%20sourceX%20%3C%20width%20%26%26%20sourceY%20%3E%3D%200%20%26%26%20sourceY%20%3C%20height)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20sourceIndex%20%3D%20(sourceY%20*%20width%20%2B%20sourceX)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(data%5BsourceIndex%20%2B%203%5D%20%3E%200)%20data.copyWithin(index%2C%20sourceIndex%2C%20sourceIndex%20%2B%204)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20data%5Bindex%20%2B%203%5D%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20data%5Bindex%20%2B%203%5D%20%3D%200%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyDisplacement(imageData%2C%20dispAmt)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20newData%20%3D%20new%20Uint8ClampedArray(data.length)%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcX%20%3D%20x%20%2B%20Math.floor(Math.random()%20*%20dispAmt%20*%202%20-%20dispAmt)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcY%20%3D%20y%20%2B%20Math.floor(Math.random()%20*%20dispAmt%20*%202%20-%20dispAmt)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(srcX%20%3E%3D%200%20%26%26%20srcX%20%3C%20width%20%26%26%20srcY%20%3E%3D%200%20%26%26%20srcY%20%3C%20height)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20srcIndex%20%3D%20(srcY%20*%20width%20%2B%20srcX)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20dstIndex%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newData.set(data.subarray(srcIndex%2C%20srcIndex%20%2B%204)%2C%20dstIndex)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20data.set(newData)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyPosterize(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20numLevels%20%3D%20Math.max(percentage%20%2F%2010%2C%201)%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20data.length%3B%20i%20%2B%3D%204)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%203%3B%20j%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20data%5Bi%20%2B%20j%5D%20%3D%20Math.round((data%5Bi%20%2B%20j%5D%20*%20(numLevels%20-%201))%20%2F%20255)%20*%20(255%20%2F%20(numLevels%20-%201))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyBulgeEffect(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20let%20centerX%20%3D%20Scratch.Cast.toNumber(args.CENTER_X)%20%2F%20100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20let%20centerY%20%3D%20Scratch.Cast.toNumber(args.CENTER_Y)%20%2F%20-100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20strength%20%3D%20Scratch.Cast.toNumber(args.STRENGTH)%20%2F%20100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20centerX%20%3D%20centerX%20%2B%20img.width%20%2F%20200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20centerY%20%3D%20centerY%20%2B%20img.height%20%2F%20200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20imageData%20%3D%20ctx.getImageData(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.applyBulge(imageData%2C%20centerX%2C%20centerY%2C%20strength)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.SVG%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20applyBulge(imageData%2C%20centerX%2C%20centerY%2C%20strength)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20newData%20%3D%20new%20Uint8ClampedArray(data.length)%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20dx%20%3D%20(x%20%2F%20width%20-%20centerX)%20*%202%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20dy%20%3D%20(y%20%2F%20height%20-%20centerY)%20*%202%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20distance%20%3D%20Math.sqrt(dx%20*%20dx%20%2B%20dy%20*%20dy)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20bulge%20%3D%20Math.pow(distance%2C%20strength)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcX%20%3D%20Math.floor(x%20%2B%20dx%20*%20bulge%20*%20width%20-%20dx%20*%20width)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcY%20%3D%20Math.floor(y%20%2B%20dy%20*%20bulge%20*%20height%20-%20dy%20*%20height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(srcX%20%3E%3D%200%20%26%26%20srcX%20%3C%20width%20%26%26%20srcY%20%3E%3D%200%20%26%26%20srcY%20%3C%20height)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20srcIndex%20%3D%20(srcY%20*%20width%20%2B%20srcX)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20dstIndex%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newData.set(data.subarray(srcIndex%2C%20srcIndex%20%2B%204)%2C%20dstIndex)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20data.set(newData)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyWaveEffect(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20amplitudeX%20%3D%20Scratch.Cast.toNumber(args.AMPX)%20%2F%2010%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20amplitudeY%20%3D%20Scratch.Cast.toNumber(args.AMPY)%20%2F%2010%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20frequencyX%20%3D%20Scratch.Cast.toNumber(args.FREQX)%20%2F%20100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20frequencyY%20%3D%20Scratch.Cast.toNumber(args.FREQY)%20%2F%20100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20imageData%20%3D%20ctx.getImageData(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.applyWave(imageData%2C%20amplitudeX%2C%20amplitudeY%2C%20frequencyX%2C%20frequencyY)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.SVG%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20applyWave(imageData%2C%20amplitudeX%2C%20amplitudeY%2C%20frequencyX%2C%20frequencyY)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20newData%20%3D%20new%20Uint8ClampedArray(data.length)%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcX%20%3D%20Math.floor(x%20%2B%20amplitudeX%20*%20Math.sin(y%20*%20frequencyX))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcY%20%3D%20Math.floor(y%20%2B%20amplitudeY%20*%20Math.sin(x%20*%20frequencyY))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(srcX%20%3E%3D%200%20%26%26%20srcX%20%3C%20width%20%26%26%20srcY%20%3E%3D%200%20%26%26%20srcY%20%3C%20height)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20srcIndex%20%3D%20(srcY%20*%20width%20%2B%20srcX)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20dstIndex%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newData.set(data.subarray(srcIndex%2C%20srcIndex%20%2B%204)%2C%20dstIndex)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20data.set(newData)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyBlur(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20radius%20%3D%20Math.floor((percentage%20%2F%20100)%20*%2010)%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20sum%20%3D%20%5B0%2C%200%2C%200%2C%200%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20count%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20ky%20%3D%20-radius%3B%20ky%20%3C%3D%20radius%3B%20ky%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20kx%20%3D%20-radius%3B%20kx%20%3C%3D%20radius%3B%20kx%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20offsetX%20%3D%20x%20%2B%20kx%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20offsetY%20%3D%20y%20%2B%20ky%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(offsetX%20%3E%3D%200%20%26%26%20offsetX%20%3C%20width%20%26%26%20offsetY%20%3E%3D%200%20%26%26%20offsetY%20%3C%20height)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pixelIndex%20%3D%20(offsetY%20*%20width%20%2B%20offsetX)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%204%3B%20i%2B%2B)%20%7B%20sum%5Bi%5D%20%2B%3D%20data%5BpixelIndex%20%2B%20i%5D%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20const%20pixelIndex%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(count%20%3E%200)%20for%20(let%20i%20%3D%200%3B%20i%20%3C%204%3B%20i%2B%2B)%20%7B%20data%5BpixelIndex%20%2B%20i%5D%20%3D%20sum%5Bi%5D%20%2F%20count%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyChunkGlitch(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20newWidth%20%3D%20percentage%20%2F%2010%3B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20imgWidth%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20imgHeight%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20numLines%20%3D%20Math.floor(imgWidth%20*%201)%3B%0D%0A%20%20%20%20%20%20for%20(let%20lineIndex%20%3D%200%3B%20lineIndex%20%3C%20numLines%3B%20lineIndex%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20linePos%20%3D%20Math.floor(Math.random()%20*%20imgHeight)%3B%0D%0A%20%20%20%20%20%20%20%20const%20lineStart%20%3D%20linePos%20-%20Math.floor(newWidth%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%20%20const%20lineEnd%20%3D%20lineStart%20%2B%20newWidth%3B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20imgHeight%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcIndex%20%3D%20(y%20*%20imgWidth%20%2B%20linePos)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(linePos%20%3E%3D%200%20%26%26%20linePos%20%3C%20imgWidth)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%20lineStart%3B%20x%20%3C%20lineEnd%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20dstIndex%20%3D%20(y%20*%20imgWidth%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data.copyWithin(dstIndex%2C%20srcIndex%2C%20srcIndex%20%2B%204)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20removeTransparencyEffect(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20threshold%20%3D%20Scratch.Cast.toNumber(args.THRESHOLD)%20%2F%20100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20removeUnder%20%3D%20args.REMOVE%3B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20imageData%20%3D%20ctx.getImageData(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.applyTransparencyRemoval(imageData%2C%20threshold%2C%20removeUnder)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.SVG%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20applyTransparencyRemoval(imageData%2C%20threshold%2C%20removeUnder)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20pixelCount%20%3D%20data.length%20%2F%204%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20pixelCount%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20alpha%20%3D%20data%5Bi%20*%204%20%2B%203%5D%20%2F%20255%3B%0D%0A%20%20%20%20%20%20%20%20if%20((removeUnder%20%3D%3D%3D%20%22under%22%20%26%26%20alpha%20%3C%20threshold)%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20%20%20(removeUnder%20%3D%3D%3D%20%22over%22%20%26%26%20alpha%20%3E%20threshold)%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20%20%20(removeUnder%20%3D%3D%3D%20%22equal%20to%22%20%26%26%20alpha%20%3E%20threshold%20-%200.01%20%26%26%0D%0A%20%20%20%20%20%20%20%20%20%20alpha%20%3C%20threshold%20%2B%200.01))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20data%5Bi%20*%204%20%2B%203%5D%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyLineGlitchEffect(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20percentage%20%3D%20Scratch.Cast.toNumber(args.PERCENTAGE)%20%2F%20100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20direction%20%3D%20args.DIRECT%3B%0D%0A%20%20%20%20%20%20%20%20const%20width%20%3D%20Scratch.Cast.toNumber(args.WIDTH)%20%2F%2050%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20imageData%20%3D%20ctx.getImageData(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.applyLineGlitch(imageData%2C%20percentage%2C%20direction%2C%20width)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.SVG%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20applyLineGlitch(imageData%2C%20percentage%2C%20direction%2C%20width)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20imgWidth%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20imgHeight%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20numLines%20%3D%20Math.floor(imgHeight%20*%20percentage)%3B%0D%0A%20%20%20%20%20%20for%20(let%20lineIndex%20%3D%200%3B%20lineIndex%20%3C%20numLines%3B%20lineIndex%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20linePosition%20%3D%20Math.floor(Math.random()%20*%20imgHeight)%3B%0D%0A%20%20%20%20%20%20%20%20const%20lineStart%20%3D%20linePosition%20-%20Math.floor(width%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%20%20const%20lineEnd%20%3D%20lineStart%20%2B%20width%3B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20y%20%3D%20(direction%20%3D%3D%3D%20%22Y%22%20%3F%200%20%3A%20lineStart)%3B%20y%20%3C%20(direction%20%3D%3D%3D%20%22Y%22%20%3F%20imgHeight%20%3A%20lineEnd)%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%20(direction%20%3D%3D%3D%20%22Y%22%20%3F%20lineStart%20%3A%200)%3B%20x%20%3C%20(direction%20%3D%3D%3D%20%22Y%22%20%3F%20lineEnd%20%3A%20imgWidth)%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20srcX%20%3D%20(direction%20%3D%3D%3D%20%22Y%22%20%3F%20x%20%3A%20linePosition)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20srcY%20%3D%20(direction%20%3D%3D%3D%20%22Y%22%20%3F%20linePosition%20%3A%20y)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(srcX%20%3E%3D%200%20%26%26%20srcX%20%3C%20imgWidth%20%26%26%20srcY%20%3E%3D%200%20%26%26%20srcY%20%3C%20imgHeight)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20srcIndex%20%3D%20(srcY%20*%20imgWidth%20%2B%20srcX)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20dstIndex%20%3D%20(y%20*%20imgWidth%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data.copyWithin(dstIndex%2C%20srcIndex%2C%20srcIndex%20%2B%204)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyEdgeOutlineEffect(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20thickness%20%3D%20Math.ceil(Scratch.Cast.toNumber(args.THICKNESS)%20%2F%204)%3B%0D%0A%20%20%20%20%20%20%20%20const%20color%20%3D%20hexToRgb(args.COLOR)%3B%0D%0A%20%20%20%20%20%20%20%20const%20a%20%3D%20Math.min(Math.max(args.A%2C%200)%2C%20100)%20*%202.55%3B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20imageData%20%3D%20ctx.getImageData(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.applyOutline(imageData%2C%20thickness%2C%20color%5B0%5D%2C%20color%5B1%5D%2C%20color%5B2%5D%2C%20a)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.SVG%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20applyOutline(imageData%2C%20thickness%2C%20r%2C%20g%2C%20b%2C%20a)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20copyData%20%3D%20new%20Uint8ClampedArray(data)%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(data%5Bindex%20%2B%203%5D%20%3C%20255)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20dy%20%3D%20-thickness%3B%20dy%20%3C%3D%20thickness%3B%20dy%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20dx%20%3D%20-thickness%3B%20dx%20%3C%3D%20thickness%3B%20dx%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20nx%20%3D%20x%20%2B%20dx%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20ny%20%3D%20y%20%2B%20dy%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(nx%20%3E%3D%200%20%26%26%20nx%20%3C%20width%20%26%26%20ny%20%3E%3D%200%20%26%26%20ny%20%3C%20height)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20neighborIndex%20%3D%20(ny%20*%20width%20%2B%20nx)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20neighborAlpha%20%3D%20copyData%5BneighborIndex%20%2B%203%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighborAlpha%20%3D%3D%3D%20255)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data.set(%5Br%2C%20g%2C%20b%2C%20a%5D%2C%20index)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyClipGlitch(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20percent%20%3D%20percentage%20%2F%20100%3B%0D%0A%20%20%20%20%20%20const%20numPixelsToEnlarge%20%3D%20Math.floor((percent%20%2F%20100)%20*%20(width%20*%20height))%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20numPixelsToEnlarge%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20x%20%3D%20Math.floor(Math.random()%20*%20width)%3B%0D%0A%20%20%20%20%20%20%20%20const%20y%20%3D%20Math.floor(Math.random()%20*%20height)%3B%0D%0A%20%20%20%20%20%20%20%20const%20index%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20const%20enlargeFactor%20%3D%201%20%2B%20Math.random()%20*%20(1.5%20%2B%20percent%20%2F%20200)%3B%0D%0A%20%20%20%20%20%20%20%20const%20blurRadius%20%3D%20Math.floor(enlargeFactor%20*%204)%3B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20offsetY%20%3D%20-blurRadius%3B%20offsetY%20%3C%3D%20blurRadius%3B%20offsetY%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20offsetX%20%3D%20-blurRadius%3B%20offsetX%20%3C%3D%20blurRadius%3B%20offsetX%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20newX%20%3D%20x%20%2B%20offsetX%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20newY%20%3D%20y%20%2B%20offsetY%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20bound%20%3D%20newX%20%3E%3D%200%20%26%26%20newX%20%3C%20width%20%26%26%20newY%20%3E%3D%200%20%26%26%20newY%20%3C%20height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(bound)%20data.copyWithin((newY%20*%20width%20%2B%20newX)%20*%204%2C%20index%2C%20index%20%2B%204)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyScanlines(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(Math.random()%20%3C%20percentage%20%2F%20100)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20scanBright%20%3D%20Math.random()%20*%20(percentage%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%5D%20%3D%20Math.min(data%5Bindex%5D%20%2B%20scanBright%2C%20255)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%20%2B%201%5D%20%3D%20Math.min(data%5Bindex%20%2B%201%5D%20%2B%20scanBright%2C%20255)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%20%2B%202%5D%20%3D%20Math.min(data%5Bindex%20%2B%202%5D%20%2B%20scanBright%2C%20255)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyGrain(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(Math.random()%20%3C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20grain%20%3D%20Math.floor(Math.random()%20*%20percentage)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%5D%20%2B%3D%20grain%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%20%2B%201%5D%20%2B%3D%20grain%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%20%2B%202%5D%20%2B%3D%20grain%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyCubism(imageData%2C%20percentage)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20const%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20percent%20%3D%20percentage%20%3D%3D%3D%200%20%7C%7C%20percentage%20%3D%3D%3D%20%22%22%20%3F%201%20%3A%20Math.abs(Scratch.Cast.toNumber(percentage))%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%20%2B%3D%20percent)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%20%2B%3D%20percent)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20endX%20%3D%20Math.min(x%20%2B%20percent%2C%20width)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20endY%20%3D%20Math.min(y%20%2B%20percent%2C%20height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20avgColor%20%3D%20%5B0%2C%200%2C%200%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%20y%3B%20j%20%3C%20endY%3B%20j%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20x%3B%20i%20%3C%20endX%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20(j%20*%20width%20%2B%20i)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20avgColor%5B0%5D%20%2B%3D%20data%5Bindex%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20avgColor%5B1%5D%20%2B%3D%20data%5Bindex%20%2B%201%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20avgColor%5B2%5D%20%2B%3D%20data%5Bindex%20%2B%202%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20const%20totalPixels%20%3D%20(endX%20-%20x)%20*%20(endY%20-%20y)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20avgColor%5B0%5D%20%2F%3D%20totalPixels%3B%0D%0A%20%20%20%20%20%20%20%20%20%20avgColor%5B1%5D%20%2F%3D%20totalPixels%3B%0D%0A%20%20%20%20%20%20%20%20%20%20avgColor%5B2%5D%20%2F%3D%20totalPixels%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%20y%3B%20j%20%3C%20endY%3B%20j%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20x%3B%20i%20%3C%20endX%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20(j%20*%20width%20%2B%20i)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%5D%20%3D%20avgColor%5B0%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%20%2B%201%5D%20%3D%20avgColor%5B1%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%5Bindex%20%2B%202%5D%20%3D%20avgColor%5B2%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20applyAbberationEffect(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20percentage%20%3D%20args.PERCENTAGE%3B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%20%2B%20Math.abs(percentage)%20*%205%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%20%2B%20Math.abs(percentage)%20*%205%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%20Math.abs(percentage)%20*%202.5%2C%20Math.abs(percentage)%20*%202.5)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20imageData%20%3D%20ctx.getImageData(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.applyChromAb(imageData%2C%20args.COLOR1%2C%20args.COLOR2%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20percentage%2C%20args.DIRECT)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.SVG%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20applyChromAb(imageData%2C%20color1%2C%20color2%2C%20percentage%2C%20direction)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20let%20width%20%3D%20imageData.width%3B%0D%0A%20%20%20%20%20%20let%20height%20%3D%20imageData.height%3B%0D%0A%20%20%20%20%20%20const%20copy1%20%3D%20new%20Uint8ClampedArray(data.length)%3B%0D%0A%20%20%20%20%20%20const%20copy2%20%3D%20new%20Uint8ClampedArray(data.length)%3B%0D%0A%20%20%20%20%20%20const%20rgb1%20%3D%20hexToRgb(color1)%3B%0D%0A%20%20%20%20%20%20const%20rgb2%20%3D%20hexToRgb(color2)%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcIndex%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20r%20%3D%20data%5BsrcIndex%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20g%20%3D%20data%5BsrcIndex%20%2B%201%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20b%20%3D%20data%5BsrcIndex%20%2B%202%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20a%20%3D%20data%5BsrcIndex%20%2B%203%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20newX1%2C%20newY1%2C%20newX2%2C%20newY2%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(direction%20%3D%3D%3D%20%22X%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newX1%20%3D%20x%20%2B%20Math.floor((width%20%2F%202)%20*%20(percentage%20%2F%20100))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newY1%20%3D%20y%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newX2%20%3D%20x%20-%20Math.floor((width%20%2F%202)%20*%20(percentage%20%2F%20100))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newY2%20%3D%20y%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newX1%20%3D%20x%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newY1%20%3D%20y%20%2B%20Math.floor((height%20%2F%202)%20*%20(percentage%20%2F%20100))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newX2%20%3D%20x%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newY2%20%3D%20y%20-%20Math.floor((height%20%2F%202)%20*%20(percentage%20%2F%20100))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20newX1%20%3D%20Math.max(0%2C%20Math.min(width%20-%201%2C%20newX1))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20newY1%20%3D%20Math.max(0%2C%20Math.min(height%20-%201%2C%20newY1))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20newX2%20%3D%20Math.max(0%2C%20Math.min(width%20-%201%2C%20newX2))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20newY2%20%3D%20Math.max(0%2C%20Math.min(height%20-%201%2C%20newY2))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20leftColor%20%3D%20%5B(rgb1%5B0%5D%20*%20r)%20%2F%20255%2C%20(rgb1%5B1%5D%20*%20g)%20%2F%20255%2C%20(rgb1%5B2%5D%20*%20b)%20%2F%20255%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20rightColor%20%3D%20%5B(rgb2%5B0%5D%20*%20r)%20%2F%20255%2C%20(rgb2%5B1%5D%20*%20g)%20%2F%20255%2C%20(rgb2%5B2%5D%20*%20b)%20%2F%20255%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20leftIndex%20%3D%20(newY1%20*%20width%20%2B%20newX1)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20rightIndex%20%3D%20(newY2%20*%20width%20%2B%20newX2)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%204%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20copy1%5BleftIndex%20%2B%20i%5D%20%3D%20leftColor%5Bi%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20copy2%5BrightIndex%20%2B%20i%5D%20%3D%20rightColor%5Bi%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20copy1%5BleftIndex%20%2B%203%5D%20%3D%20copy2%5BrightIndex%20%2B%203%5D%20%3D%20a%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20data.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20data%5Bi%5D%20%3D%20Math.max(0%2C%20Math.min(255%2C%20(data%5Bi%5D%20%2B%20copy1%5Bi%5D%20%2B%20copy2%5Bi%5D)%20%2F%202))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20stretch(src%2C%20w%2C%20h)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(this.exportImg(img%2C%20this.printImg(img%2C%20w%2C%20h)%2C%20w%2C%20h))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20src%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20svgToBitmap(args)%20%7B%0D%0A%20%20%20%20%20%20return%20this.stretch(this.confirmAsset(args.SVG%2C%20%22png%22)%2C%0D%0A%20%20%20%20%20%20%20%20Math.abs(Scratch.Cast.toNumber(args.WIDTH))%2C%20Math.abs(Scratch.Cast.toNumber(args.HEIGHT))%0D%0A%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20stretchImg(args)%20%7B%0D%0A%20%20%20%20%20%20return%20this.stretch(this.confirmAsset(args.URI%2C%20%22png%22)%2C%0D%0A%20%20%20%20%20%20%20%20Math.abs(Scratch.Cast.toNumber(args.W))%2C%20Math.abs(Scratch.Cast.toNumber(args.H))%0D%0A%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20convertImageToSVG(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.URI%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200%2C%20img.width%2C%20img.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20svg%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22svg%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20svg.setAttribute(%22version%22%2C%20%221.1%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20svg.setAttribute(%22xmlns%22%2C%20%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20svg.setAttribute(%22xmlns%3Axlink%22%2C%20%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20svg.setAttribute(%22width%22%2C%20img.width.toFixed(5))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20svg.setAttribute(%22height%22%2C%20img.height.toFixed(5))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20svg.setAttribute(%22viewBox%22%2C%20%600%2C0%2C%24%7Bimg.width.toFixed(5)%7D%2C%24%7Bimg.height.toFixed(5)%7D%60)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20mergedColors%20%3D%20new%20Map()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20img.height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20img.width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20colorData%20%3D%20ctx.getImageData(x%2C%20y%2C%201%2C%201).data%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20alpha%20%3D%20colorData%5B3%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%200)%20continue%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20color%20%3D%20%60rgb(%24%7BcolorData%5B0%5D%7D%2C%20%24%7BcolorData%5B1%5D%7D%2C%20%24%7BcolorData%5B2%5D%7D)%60%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20rightColorData%20%3D%20ctx.getImageData(x%20%2B%201%2C%20y%2C%201%2C%201).data%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20rightColor%20%3D%20%60rgb(%24%7BrightColorData%5B0%5D%7D%2C%20%24%7BrightColorData%5B1%5D%7D%2C%20%24%7BrightColorData%5B2%5D%7D)%60%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(color%20%3D%3D%3D%20rightColor)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20mergedPixel%20%3D%20mergedColors.get(color)%20%7C%7C%20%7Bx1%3A%20x%2C%20y1%3A%20y%2C%20x2%3A%20x%20%2B%201%2C%20y2%3A%20y%7D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mergedPixel.x2%2B%2B%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mergedColors.set(color%2C%20mergedPixel)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mergedColors.forEach((mergedPixel%2C%20colorKey)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20rect%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22rect%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rect.setAttribute(%22x%22%2C%20mergedPixel.x1.toFixed(5))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rect.setAttribute(%22y%22%2C%20mergedPixel.y1.toFixed(5))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rect.setAttribute(%22width%22%2C%20(mergedPixel.x2%20-%20mergedPixel.x1%20%2B%201).toFixed(5))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rect.setAttribute(%22height%22%2C%20(mergedPixel.y2%20-%20mergedPixel.y1%20%2B%201).toFixed(5))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rect.setAttribute(%22fill%22%2C%20colorKey)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20svg.appendChild(rect)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mergedColors.clear()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20let%20svgString%20%3D%20new%20XMLSerializer().serializeToString(svg)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22dataURI%22)%20svgString%20%3D%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(svgString)%7D%60%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(svgString)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20makeSVGimage(args)%20%7B%0D%0A%20%20%20%20%20%20if%20(args.URI.startsWith(%22data%3Aimage%2F%22))%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20await%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20eslint-disable-next-line%0D%0A%20%20%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20svg%20%3D%20%60%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3D%22%24%7Bwidth%20%2F%202%7D%22%20height%3D%22%24%7B(height%20%2F%202)%20%2B%200.001%7D%22%20viewBox%3D%220%2C0%2C%24%7Bwidth%20%2F%202%7D%2C%24%7B(height%20%2F%202)%20%2B%200.001%7D%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20transform%3D%22translate(%24%7Bimg.offsetLeft%20%2F%20-2%7D%2C%24%7Bimg.offsetTop%20%2F%20-2%7D)%22%3E%3Cg%20data-paper-data%3D%22%7B%26quot%3BisPaintingLayer%26quot%3B%3Atrue%7D%22%20fill%3D%22none%22%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fill-rule%3D%22nonzero%22%20stroke%3D%22none%22%20stroke-width%3D%220.5%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20stroke-miterlimit%3D%2210%22%20stroke-dasharray%3D%22%22%20stroke-dashoffset%3D%220%22%20style%3D%22mix-blend-mode%3A%20normal%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cimage%20x%3D%220%22%20y%3D%220%22%20transform%3D%22scale(0.5%2C0.5)%22%20width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%20%2B%200.002%7D%22%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xlink%3Ahref%3D%22%24%7Bimg.src%7D%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%60%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve(args.TYPE%20%3D%3D%3D%20%22dataURI%22%20%3F%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(svg)%7D%60%20%3A%20svg)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20img.onerror%20%3D%20reject%3B%0D%0A%20%20%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.URI%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%20return%20args.URI%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20upscaleImage(args)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20pixelData%20%3D%20this.printImg(img)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0D%0A%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(new%20ImageData(new%20Uint8ClampedArray(pixelData)%2C%20img.width%2C%20img.height)%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20percentage%20%3D%20args.NUM%20*%2010%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20factor%20%3D%20percentage%20%2F%20100%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20weights%20%3D%20%5B0%2C%20-factor%2C%200%2C%20-factor%2C%201%20%2B%204%20*%20factor%2C%20-factor%2C%200%2C%20-factor%2C%200%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.sharpen(ctx%2C%20img.width%2C%20img.height%2C%20weights%2C%2025)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(this.exportImg(img%2C%20ctx.getImageData(0%2C%200%2C%20img.width%2C%20img.height).data))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.URI%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20sharpen(ctx%2C%20width%2C%20height%2C%20weights%2C%20alphaThreshold)%20%7B%0D%0A%20%20%20%20%20%20const%20imageData%20%3D%20ctx.getImageData(0%2C%200%2C%20width%2C%20height)%3B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20imageData.data%3B%0D%0A%20%20%20%20%20%20const%20side%20%3D%20Math.round(Math.sqrt(weights.length))%3B%0D%0A%20%20%20%20%20%20const%20halfSide%20%3D%20Math.floor(side%20%2F%202)%3B%0D%0A%20%20%20%20%20%20const%20output%20%3D%20ctx.createImageData(width%2C%20height)%3B%0D%0A%20%20%20%20%20%20const%20outputData%20%3D%20output.data%3B%0D%0A%20%20%20%20%20%20for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20pixelIndex%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20r%20%3D%200%2C%20g%20%3D%200%2C%20b%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20ky%20%3D%200%3B%20ky%20%3C%20side%3B%20ky%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20kx%20%3D%200%3B%20kx%20%3C%20side%3B%20kx%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20weight%20%3D%20weights%5Bky%20*%20side%20%2B%20kx%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20neighborY%20%3D%20Math.min(height%20-%201%2C%20Math.max(0%2C%20y%20%2B%20ky%20-%20halfSide))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20neighborX%20%3D%20Math.min(width%20-%201%2C%20Math.max(0%2C%20x%20%2B%20kx%20-%20halfSide))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20neighborPixelIndex%20%3D%20(neighborY%20*%20width%20%2B%20neighborX)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%20%2B%3D%20data%5BneighborPixelIndex%5D%20*%20weight%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20g%20%2B%3D%20data%5BneighborPixelIndex%20%2B%201%5D%20*%20weight%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%20%2B%3D%20data%5BneighborPixelIndex%20%2B%202%5D%20*%20weight%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(data%5BpixelIndex%20%2B%203%5D%20%2F%20255%20%3E%20alphaThreshold%20%2F%2050)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20outputData%5BpixelIndex%5D%20%3D%20this.clamp(r%2C%200%2C%20255)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20outputData%5BpixelIndex%20%2B%201%5D%20%3D%20this.clamp(g%2C%200%2C%20255)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20outputData%5BpixelIndex%20%2B%202%5D%20%3D%20this.clamp(b%2C%200%2C%20255)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20outputData%5BpixelIndex%20%2B%203%5D%20%3D%20255%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20outputData%5BpixelIndex%20%2B%203%5D%20%3D%200%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20ctx.putImageData(output%2C%200%2C%200)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20clamp(value%2C%20min%2C%20max)%20%7B%20return%20Math.min(max%2C%20Math.max(min%2C%20value))%20%7D%0D%0A%0D%0A%20%20%20%20audioToImage(args)%20%7B%0D%0A%20%20%20%20%20%20const%20audioURI%20%3D%20args.AUDIO_URI%3B%0D%0A%20%20%20%20%20%20const%20imageWidth%20%3D%20Math.abs(Scratch.Cast.toString(args.W))%3B%0D%0A%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20canvas.width%20%3D%20imageWidth%3B%0D%0A%20%20%20%20%20%20canvas.height%20%3D%20Math.abs(Scratch.Cast.toString(args.H))%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20audioURI.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20charCode%20%3D%20audioURI.charCodeAt(i)%3B%0D%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%60rgb(%24%7B(charCode%20*%202)%20%25%20256%7D%2C%24%7B(charCode%20*%203)%20%25%20256%7D%2C%24%7B(charCode%20*%204)%20%25%20256%7D)%60%3B%0D%0A%20%20%20%20%20%20%20%20ctx.fillRect(i%20%25%20imageWidth%2C%20Math.floor(i%20%2F%20imageWidth)%2C%201%2C%201)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20canvas.toDataURL(%22image%2Fpng%22)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20skewSVG(args)%20%7B%0D%0A%20%20%20%20%20%20let%20svg%20%3D%20this.updateView(args.SVG%2C%20Math.abs(args.X)%20%2B%20Math.abs(args.Y))%3B%0D%0A%20%20%20%20%20%20const%20widthMatch%20%3D%20%2Fwidth%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0D%0A%20%20%20%20%20%20const%20heightMatch%20%3D%20%2Fheight%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0D%0A%20%20%20%20%20%20if%20(widthMatch%20%26%26%20heightMatch)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20width%20%3D%20parseFloat(widthMatch%5B1%5D)%3B%0D%0A%20%20%20%20%20%20%20%20const%20height%20%3D%20parseFloat(heightMatch%5B1%5D)%3B%0D%0A%20%20%20%20%20%20%20%20let%20transform%20%3D%20%22%22%3B%0D%0A%20%20%20%20%20%20%20%20if%20(svg.includes(%22style%3D%5C%22transform-origin%3A%20center%3B%20transform%3A%22))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2F(style%3D%22%5B%5E%22%5D*transform%3A%5B%5E%22%5D*)%2F%2C%20%60%241%20skew(%24%7Bargs.Y%7Ddeg%2C%20%24%7Bargs.X%7Ddeg)%60)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%60width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%60%2C%20%60width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%20style%3D%22transform-origin%3A%20center%3B%20transform%3A%20skew(%24%7Bargs.Y%7Ddeg%2C%20%24%7Bargs.X%7Ddeg)%22%60%0D%0A%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20const%20currentTransform%20%3D%20%2Ftransform%3D%22(%5B%5E%22%5D*)%22%2F.exec(svg)%3B%0D%0A%20%20%20%20%20%20%20%20const%20existingTransform%20%3D%20currentTransform%20%3F%20currentTransform%5B1%5D%20%3A%20%22%22%3B%0D%0A%20%20%20%20%20%20%20%20const%20newTransform%20%3D%20existingTransform%20%3F%20%60%24%7BexistingTransform%7D%20%24%7Btransform%7D%60%20%3A%20transform%3B%0D%0A%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2Ftransform%3D%22(%5B%5E%22%5D*)%22%2F%2C%20%60transform%3D%22%24%7BnewTransform%7D%22%60)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22dataURI%22)%20svg%20%3D%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(svg)%7D%60%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20svg%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20updateView(svg%2C%20amt)%20%7B%0D%0A%20%20%20%20%20%20let%20values%3B%0D%0A%20%20%20%20%20%20const%20viewBoxMatch%20%3D%20svg.match(%2FviewBox%3D%22(%5B%5E%22%5D%2B)%22%2F)%3B%0D%0A%20%20%20%20%20%20let%20viewBoxValues%20%3D%20-1%3B%0D%0A%20%20%20%20%20%20if%20(viewBoxMatch)%20viewBoxValues%20%3D%20viewBoxMatch%5B1%5D.split(%2F%5Cs*%2C%5Cs*%2F).map(parseFloat)%3B%0D%0A%20%20%20%20%20%20const%20translateMatch%20%3D%20svg.match(%2F%3Cg%20transform%3D%22translate%5C((-%3F%5B%5Cd.%5D%2B)%2C(-%3F%5B%5Cd.%5D%2B)%5C)%2F)%3B%0D%0A%20%20%20%20%20%20let%20translateValues%20%3D%20-1%3B%0D%0A%20%20%20%20%20%20if%20(translateMatch)%20translateValues%20%3D%20%5BparseFloat(translateMatch%5B1%5D)%2C%20parseFloat(translateMatch%5B2%5D)%5D%3B%0D%0A%20%20%20%20%20%20values%20%3D%20%60%24%7BviewBoxValues%7D%2C%24%7BtranslateValues%7D%60%3B%0D%0A%20%20%20%20%20%20values%20%3D%20values.split(%22%2C%22)%3B%0D%0A%20%20%20%20%20%20values%20%3D%20values.map(item%20%3D%3E%20Scratch.Cast.toNumber(item))%3B%0D%0A%20%20%20%20%20%20amt%20%3D%20Scratch.Cast.toNumber(amt)%3B%0D%0A%20%20%20%20%20%20if%20(values.length%20%3E%203)%20%7B%0D%0A%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2FviewBox%3D%22(%5B%5E%22%5D%2B)%22%2F%2C%20%60viewBox%3D%22%24%7Bvalues%5B0%5D%7D%2C%24%7Bvalues%5B1%5D%7D%2C%24%7Bvalues%5B2%5D%20%2B%20(amt%20*%202)%7D%2C%24%7Bvalues%5B3%5D%20%2B%20(amt%20*%202)%7D%22%60)%3B%0D%0A%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2Fwidth%3D%22(%5B%5E%22%5D%2B)%22%2F%2C%20%60width%3D%22%24%7Bvalues%5B2%5D%20%2B%20(amt%20*%202)%7D%22%60)%3B%0D%0A%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2Fheight%3D%22(%5B%5E%22%5D%2B)%22%2F%2C%20%60height%3D%22%24%7Bvalues%5B3%5D%20%2B%20(amt%20*%202)%7D%22%60)%3B%0D%0A%20%20%20%20%20%20%20%20svg%20%3D%20svg.replace(%2F%3Cg%20transform%3D%22(%5B%5E%22%5D%2B)%22%2F%2C%20%60%3Cg%20transform%3D%22translate(%24%7Bvalues%5B4%5D%20%2B%20amt%7D%2C%24%7Bvalues%5B5%5D%20%2B%20amt%7D)%22%60)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20svg%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20removeThorns(args)%20%7B%20return%20args.SVG.replaceAll(%22linejoin%3D%5C%22miter%5C%22%22%2C%20%22linejoin%3D%5C%22round%5C%22%22)%20%7D%0D%0A%0D%0A%20%20%20%20numPixels(args)%20%7B%0D%0A%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.URI%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20pixelData%20%3D%20this.printImg(img)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(args.TYPE%20%3D%3D%3D%20%22total%22%20%3F%20pixelData.length%20%2F%204%20%3A%20args.TYPE%20%3D%3D%3D%20%22per%20line%22%20%3F%20img.width%20%3A%20img.height)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setPixel(args)%20%7B%20return%20this.setPixels(args)%20%7D%0D%0A%20%20%20%20setPixels(args)%20%7B%0D%0A%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.URI%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20startNum%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20endNum%20%3D%20Scratch.Cast.toNumber(args.NUM2)%20%7C%7C%20startNum%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20pixelData%20%3D%20this.printImg(img)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20num%20%3D%20startNum%3B%20num%20%3C%3D%20endNum%20%26%26%20num%20%3C%3D%20pixelData.length%20%2F%204%3B%20num%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rgb%20%3D%20hexToRgb(args.COLOR)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%204%3B%20i%2B%2B)%20%7B%20pixelData%5B((num%20-%201)%20*%204)%20%2B%20i%5D%20%3D%20rgb%5Bi%5D%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20resolve(this.exportImg(img%2C%20pixelData))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20getPixel(args)%20%7B%0D%0A%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.URI%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20targetPixel%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20pixelData%20%3D%20this.printImg(img)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(targetPixel%20%3E%3D%201%20%26%26%20targetPixel%20%3C%3D%20pixelData.length%20%2F%204)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20pixelIndex%20%3D%20(targetPixel%20-%201)%20*%204%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rgba%20%3D%20pixelData.slice(pixelIndex%2C%20pixelIndex%20%2B%204)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve(rgbaToHex(rgba%5B0%5D%2C%20rgba%5B1%5D%2C%20rgba%5B2%5D%2C%20rgba%5B3%5D))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20resolve(%22%2300000000%22)%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20crackImage(args)%20%7B%0D%0A%20%20%20%20%20%20const%20cracks%20%3D%20Math.max(2%2C%20args.SHARDS)%3B%0D%0A%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0D%0A%20%20%20%20%20%20img.src%20%3D%20this.confirmAsset(args.URI%2C%20%22png%22)%3B%0D%0A%20%20%20%20%20%20const%20newWidth%20%3D%20img.width%20*%204%3B%0D%0A%20%20%20%20%20%20const%20newHeight%20%3D%20img.height%20*%204%3B%0D%0A%20%20%20%20%20%20this.allShards%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20cracks%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.allShards.length%20%3E%3D%20args.SHARDS)%20break%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20cracks%3B%20j%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.allShards.length%20%3E%3D%20args.SHARDS)%20break%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20shardCanvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20shardWidth%20%3D%20newWidth%20%2F%20cracks%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20shardHeight%20%3D%20newHeight%20%2F%20cracks%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20shardCanvas.width%20%3D%20shardWidth%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20shardCanvas.height%20%3D%20shardHeight%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20shardCanvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.clearRect(0%2C%200%2C%20shardWidth%2C%20shardHeight)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.beginPath()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.moveTo(Math.random()%20*%20shardWidth%2C%20Math.random()%20*%20shardHeight)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20k%20%3D%200%3B%20k%20%3C%20Math.random()%20*%2010%20%2B%203%3B%20k%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.lineTo(Math.random()%20*%20shardWidth%2C%20Math.random()%20*%20shardHeight)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.closePath()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.clip()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20offsetX%20%3D%20Math.random()%20*%20(newWidth%20-%20shardWidth)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20offsetY%20%3D%20Math.random()%20*%20(newHeight%20-%20shardHeight)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%20-offsetX%2C%20-offsetY%2C%20newWidth%2C%20newHeight)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pixelData%20%3D%20this.printImg(shardCanvas)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.allShards.push(this.exportImg(shardCanvas%2C%20pixelData))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getShard(args)%20%7B%20return%20this.allShards%5Bargs.SHARD%20-%201%5D%20%7C%7C%20%22%22%20%7D%0D%0A%0D%0A%20%20%20%20printImg(img%2C%20forceWid%2C%20forceHei)%20%7B%0D%0A%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20canvas.width%20%3D%20forceWid%20%7C%7C%20img.width%3B%0D%0A%20%20%20%20%20%20canvas.height%20%3D%20forceHei%20%7C%7C%20img.height%3B%0D%0A%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20return%20ctx.getImageData(0%2C%200%2C%20canvas.width%2C%20canvas.height).data%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20exportImg(img%2C%20pixelData%2C%20forceWid%2C%20forceHei)%20%7B%0D%0A%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20canvas.width%20%3D%20forceWid%20%7C%7C%20img.width%3B%0D%0A%20%20%20%20%20%20canvas.height%20%3D%20forceHei%20%7C%7C%20img.height%3B%0D%0A%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20ctx.putImageData(new%20ImageData(new%20Uint8ClampedArray(pixelData)%2C%20canvas.width%2C%20canvas.height)%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20return%20canvas.toDataURL()%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20confirmAsset(input%2C%20type)%20%7B%0D%0A%20%20%20%20%20%20if%20(!input%20%7C%7C%20!(input.startsWith(%22data%3Aimage%2F%22)%20%7C%7C%20input.startsWith(%22%3Csvg%22)))%20return%20menuIconURI%3B%0D%0A%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22png%22)%20return%20input.startsWith(%22data%3Aimage%2F%22)%20%3F%20input%20%3A%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(input)%7D%60%3B%0D%0A%20%20%20%20%20%20else%20return%20input.startsWith(%22data%3Aimage%2F%22)%20%3F%20this.makeSVGimage(%7B%20URI%20%3A%20input%2C%20TYPE%20%3A%20%22content%22%20%7D)%20%3A%20input%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20imgEffectsSP())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Added%20Motion%0D%0A%2F%2F%20ID%3A%20SPaddedmotion%0D%0A%2F%2F%20Description%3A%20New%20Motion%20related%20Blocks!%0D%0A%2F%2F%20By%3A%20SharkPool%0D%0A%0D%0A%2F%2F%20%20Version%201.4.0%0D%0A%0D%0A(function(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%0D%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Added%20Motion%20must%20run%20unsandboxed%22)%3B%0D%0A%0D%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0D%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0D%0A%0D%0A%20%20const%20menuIconURI%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxODYuMTkwNjEiIGhlaWdodD0iMTg2LjE5MDYxIiB2aWV3Qm94PSIwLDAsMTg2LjE5MDYxLDE4Ni4xOTA2MSI%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE0Ny4yNDMxMywtODcuMjQ0MTIpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0xNDcuMjQzMTMsMTgwLjMzOTQzYzAsLTUxLjQxNTEyIDQxLjY4MDE4LC05My4wOTUzIDkzLjA5NTMxLC05My4wOTUzYzUxLjQxNTEyLDAgOTMuMDk1MzEsNDEuNjgwMTggOTMuMDk1MzEsOTMuMDk1MzFjMCw1MS40MTUxMiAtNDEuNjgwMTgsOTMuMDk1MzEgLTkzLjA5NTMsOTMuMDk1MzFjLTUxLjQxNTEyLDAgLTkzLjA5NTMsLTQxLjY4MDE4IC05My4wOTUzLC05My4wOTUzeiIgZmlsbD0iIzRjOTdmZiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAiLz48cGF0aCBkPSJNMjQwLjMzODQ0LDI1Ny4wMzAyMmMtOS42OTA1MywwIC0xNy41NDYyNywtMzQuMzM1NjQgLTE3LjU0NjI3LC03Ni42OTA3OWMwLC00Mi4zNTUxNSA3Ljg1NTc0LC03Ni42OTA3OSAxNy41NDYyNywtNzYuNjkwNzljOS42OTA1MywwIDE3LjU0NjI3LDM0LjMzNTY0IDE3LjU0NjI3LDc2LjY5MDc5YzAsNDIuMzU1MTUgLTcuODU1NzQsNzYuNjkwNzkgLTE3LjU0NjI3LDc2LjY5MDc5eiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjUiLz48cGF0aCBkPSJNMzIxLjMzODQ2LDE4MC4zMzk0M2MwLDguNTQwMzMgLTM2LjI2NDk1LDE1LjQ2MzY0IC04MS4wMDAwMiwxNS40NjM2NGMtNDQuNzM1MDcsMCAtODEuMDAwMDIsLTYuOTIzMzEgLTgxLjAwMDAyLC0xNS40NjM2NGMwLC04LjU0MDMzIDM2LjI2NDk1LC0xNS40NjM2NCA4MS4wMDAwMiwtMTUuNDYzNjRjNDQuNzM1MDcsMCA4MS4wMDAwMiw2LjkyMzMxIDgxLjAwMDAyLDE1LjQ2MzY0eiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjUiLz48cGF0aCBkPSJNMjgwLjc2MTM2LDIyNC4wMDE0MmMtMC44Mjg0OSwwIC0xLjY1Njk4LC0wLjMxNjYxIC0yLjI5MDIxLC0wLjk0NzIxbC04MC44NDU4NCwtODAuODQ4NDhjLTEuMjYzODQsLTEuMjYzODQgLTEuMjYzODQsLTMuMzE2NTcgMCwtNC41ODA0MWMxLjI2Mzg0LC0xLjI2Mzg0IDMuMzE2NTcsLTEuMjYzODQgNC41ODA0MSwwbDgwLjg0NTg0LDgwLjg0NTg0YzEuMjYzODQsMS4yNjM4NCAxLjI2Mzg0LDMuMzE2NTcgMCw0LjU4MDQxYy0wLjYzMzI0LDAuNjMwNiAtMS40NjE3MywwLjk0OTg1IC0yLjI5MDIxLDAuOTQ5ODV6IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMTAiLz48cGF0aCBkPSJNMjMxLjYzMDEyLDE1My44MTUwNmMwLDkuODM4OTIgLTcuOTc2MTQsMTcuODE1MDYgLTE3LjgxNTA2LDE3LjgxNTA2Yy05LjgzODkyLDAgLTE3LjgxNTA2LC03Ljk3NjE0IC0xNy44MTUwNiwtMTcuODE1MDZjMCwtOS44Mzg5MiA3Ljk3NjE0LC0xNy44MTUwNiAxNy44MTUwNiwtMTcuODE1MDZjOS44Mzg5MiwwIDE3LjgxNTA2LDcuOTc2MTQgMTcuODE1MDYsMTcuODE1MDZ6IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMTAiLz48cGF0aCBkPSJNMjI5LjE2MDcsMTkwLjU5MzU5Yy05LjU3NTY1LC0yLjI2MTExIC0xNS41MDUyNCwtMTEuODU2NzEgLTEzLjI0NDEyLC0yMS40MzIzNWMyLjI2MTExLC05LjU3NTY1IDExLjg1NjcxLC0xNS41MDUyNCAyMS40MzIzNSwtMTMuMjQ0MTJjOS41NzU2NSwyLjI2MTExIDE1LjUwNTI0LDExLjg1NjcxIDEzLjI0NDEyLDIxLjQzMjM1Yy0yLjI2MTExLDkuNTc1NjUgLTExLjg1NjcxLDE1LjUwNTI0IC0yMS40MzIzNSwxMy4yNDQxMnoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxMCIvPjxwYXRoIGQ9Ik0yNzAuNTAyOTMsMTkyLjY4NTI0YzAsOS44Mzg5MiAtNy45Nzg3OCwxNy44MTc2OSAtMTcuODE3NjksMTcuODE3NjljLTkuODM4OTIsMCAtMTcuODE1MDYsLTcuOTc4NzggLTE3LjgxNTA2LC0xNy44MTc2OWMwLC05LjgzODkyIDcuOTc2MTQsLTE3LjgxNTA2IDE3LjgxNTA2LC0xNy44MTUwNmM5LjgzODkyLDAgMTcuODE3NjksNy45Nzg3OCAxNy44MTc2OSwxNy44MTUwNnoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxMCIvPjxwYXRoIGQ9Ik0yODAuNzYxMzYsMjI0LjAwMTQyYy0wLjgyODQ5LDAgLTEuNjU2OTgsLTAuMzE2NjEgLTIuMjkwMjEsLTAuOTQ3MjFsLTE5Ljg0MTQxLC0xOS44NDE0MWMtMS4yNjY0OCwtMS4yNjM4NCAtMS4yNjY0OCwtMy4zMTY1NyAwLC00LjU4MDQxYzEuMjY2NDgsLTEuMjYzODQgMy4zMTM5MywtMS4yNjM4NCA0LjU4MDQxLDBsMTkuODQxNDEsMTkuODQxNDFjMS4yNjM4NCwxLjI2Mzg0IDEuMjYzODQsMy4zMTY1NyAwLDQuNTgwNDFjLTAuNjMzMjQsMC42Mjc5NiAtMS40NjE3MywwLjk0NzIxIC0yLjI5MDIxLDAuOTQ3MjF6IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMTAiLz48cGF0aCBkPSJNMjgwLjc2MTM2LDIyNC4wMDE0MmMtMC44Mjg0OSwwIC0xLjY1Njk4LC0wLjMxNjYxIC0yLjI5MDIxLC0wLjk0NzIxbC04MC44NDU4NCwtODAuODQ4NDhjLTEuMjYzODQsLTEuMjYzODQgLTEuMjYzODQsLTMuMzE2NTcgMCwtNC41ODA0MWMxLjI2Mzg0LC0xLjI2Mzg0IDMuMzE2NTcsLTEuMjYzODQgNC41ODA0MSwwbDgwLjg0NTg0LDgwLjg0NTg0YzEuMjYzODQsMS4yNjM4NCAxLjI2Mzg0LDMuMzE2NTcgMCw0LjU4MDQxYy0wLjYzMzI0LDAuNjMwNiAtMS40NjE3MywwLjk0OTg1IC0yLjI5MDIxLDAuOTQ5ODV6IiBmaWxsPSIjNGM5N2ZmIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoIGQ9Ik0yMzEuNjMwMTIsMTUzLjgxNTA2YzAsOS44Mzg5MiAtNy45NzYxNCwxNy44MTUwNiAtMTcuODE1MDYsMTcuODE1MDZjLTkuODM4OTIsMCAtMTcuODE1MDYsLTcuOTc2MTQgLTE3LjgxNTA2LC0xNy44MTUwNmMwLC05LjgzODkyIDcuOTc2MTQsLTE3LjgxNTA2IDE3LjgxNTA2LC0xNy44MTUwNmM5LjgzODkyLDAgMTcuODE1MDYsNy45NzYxNCAxNy44MTUwNiwxNy44MTUwNnoiIGZpbGw9IiM0Yzk3ZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPHBhdGggZD0iTTIyOS4xNjA3LDE5MC41OTM1OWMtOS41NzU2NSwtMi4yNjExMSAtMTUuNTA1MjQsLTExLjg1NjcxIC0xMy4yNDQxMiwtMjEuNDMyMzVjMi4yNjExMSwtOS41NzU2NSAxMS44NTY3MSwtMTUuNTA1MjQgMjEuNDMyMzUsLTEzLjI0NDEyYzkuNTc1NjUsMi4yNjExMSAxNS41MDUyNCwxMS44NTY3MSAxMy4yNDQxMiwyMS40MzIzNWMtMi4yNjExMSw5LjU3NTY1IC0xMS44NTY3MSwxNS41MDUyNCAtMjEuNDMyMzUsMTMuMjQ0MTJ6IiBmaWxsPSIjNGM5N2ZmIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoIGQ9Ik0yNzAuNTAyOTMsMTkyLjY4NTI0YzAsOS44Mzg5MiAtNy45Nzg3OCwxNy44MTc2OSAtMTcuODE3NjksMTcuODE3NjljLTkuODM4OTIsMCAtMTcuODE1MDYsLTcuOTc4NzggLTE3LjgxNTA2LC0xNy44MTc2OWMwLC05LjgzODkyIDcuOTc2MTQsLTE3LjgxNTA2IDE3LjgxNTA2LC0xNy44MTUwNmM5LjgzODkyLDAgMTcuODE3NjksNy45Nzg3OCAxNy44MTc2OSwxNy44MTUwNnoiIGZpbGw9IiM0Yzk3ZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPHBhdGggZD0iTTI3OC40NzExNSwyMjMuMDU0MjFsLTE5Ljg0MTQxLC0xOS44NDE0MWMtMS4yNjY0OCwtMS4yNjM4NCAtMS4yNjY0OCwtMy4zMTY1NyAwLC00LjU4MDQxYzEuMjY2NDgsLTEuMjYzODQgMy4zMTM5MywtMS4yNjM4NCA0LjU4MDQxLDBsMTkuODQxNDEsMTkuODQxNDFjMS4yNjM4NCwxLjI2Mzg0IDEuMjYzODQsMy4zMTY1NyAwLDQuNTgwNDFjLTAuNjMzMjQsMC42Mjc5NiAtMS40NjE3MywwLjk0NzIxIC0yLjI5MDIxLDAuOTQ3MjFjMCwwIC0xLjY1Njk3LC0wLjMxNjYxIC0yLjI5MDIsLTAuOTQ3MjF6IiBmaWxsPSIjNGM5N2ZmIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoIGQ9Ik0yNTMuNTAzNzMsMTM5LjgwMjY0YzEuODUwNDcsMTEuNDYwMDMgMi45Mzc0NSwyNS40NDM1OSAyLjkzNzQ1LDQwLjUzNjc5YzAsMTMuMDUyMTEgLTAuODEyODcsMjUuMjc0NDEgLTIuMjI5NDEsMzUuNzUyNTMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI1Ii8%2BPHBhdGggZD0iTTI5My4xNjIwNCwxOTIuMDYyNzFjLTE0LjE4MjE1LDIuMzMxMTUgLTMyLjY0MDg0LDMuNzQwMzYgLTUyLjgyMzYxLDMuNzQwMzZjLTE1LjgwNzQ4LDAgLTMwLjU1NzM3LC0wLjg2NDQ1IC00My4wMjMzMiwtMi4zNTkyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjUiLz48cGF0aCBkPSJNMTc1Ljk1NTEsMTkwLjg0Nzk1YzAsLTcuMDA5ODUgNS42ODI2MiwtMTIuNjkyNDcgMTIuNjkyNDcsLTEyLjY5MjQ3YzcuMDA5ODUsMCAxMi42OTI0Nyw1LjY4MjYxIDEyLjY5MjQ3LDEyLjY5MjQ3YzAsNy4wMDk4NSAtNS42ODI2MSwxMi42OTI0NiAtMTIuNjkyNDcsMTIuNjkyNDZjLTcuMDA5ODUsMCAtMTIuNjkyNDcsLTUuNjgyNjEgLTEyLjY5MjQ3LC0xMi42OTI0NnoiIGZpbGw9IiM0Yzk3ZmYiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI1Ii8%2BPHBhdGggZD0iTTI0MS4yNDYwMywxMzIuMjcyNDhjMCwtNy4wMDk4NiA1LjY4MjYyLC0xMi42OTI0NyAxMi42OTI0NywtMTIuNjkyNDdjNy4wMDk4NSwwIDEyLjY5MjQ3LDUuNjgyNjEgMTIuNjkyNDcsMTIuNjkyNDdjMCw3LjAwOTg1IC01LjY4MjYxLDEyLjY5MjQ3IC0xMi42OTI0NywxMi42OTI0N2MtNy4wMDk4NSwwIC0xMi42OTI0NywtNS42ODI2MiAtMTIuNjkyNDcsLTEyLjY5MjQ3eiIgZmlsbD0iIzRjOTdmZiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjUiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%0D%0A%0D%0A%20%20class%20SPAddedMotion%20%7B%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22SPaddedmotion%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20%22Added%20Motion%22%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20%22%234c97ff%22%2C%0D%0A%20%20%20%20%20%20%20%20color2%3A%20%22%233373cc%22%2C%0D%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveinangledirection%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22move%20%5BNAME%5D%20%5BSTEPS%5D%20steps%20towards%20direction%20%5BDIRECTION%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STEPS%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2090%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS2%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateStyle%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22rotation%20style%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22randomcoordinate%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22random%20%5BCOORDINATE%5D%20with%20max%20change%20%5BMAXCHANGE%5D%20in%20%5BSTAGE%5D%20stage%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COORDINATE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22COORDINATE%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MAXCHANGE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STAGE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22STAGE%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Sprite%20Controlling%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveSprite%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BNAME%5D%20position%20to%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveSprite2%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20%5BNAME%5D%20position%20by%20x%20%5Bx%5D%20y%20%5By%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22betterGlide%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22glide%20%5BNAME%5D%20%5BSECS%5D%20secs%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SECS%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS2%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whileGlide%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22while%20gliding%20%5BNAME%5D%20%5BSECS%5D%20secs%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20run%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SECS%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS2%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22directSprite%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BNAME%5D%20direction%20to%20%5BANGLE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2090%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22directSprite2%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20%5BNAME%5D%20direction%20by%20%5BANGLE%5D%20degrees%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2015%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22sizeSprite%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BNAME%5D%20size%20to%20%5BSIZE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22sizeSprite2%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20%5BNAME%5D%20size%20by%20%5BSIZE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20COORDINATE%3A%20%5B%22x%22%2C%20%22y%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20STAGE%3A%20%5B%22freeroam%22%2C%20%22boxed%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20TARGETS%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20this._getTargets(false)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20TARGETS2%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20this._getTargets(true)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20moveSprite(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20x%20%3D%20Scratch.Cast.toNumber(args.x)%3B%0D%0A%20%20%20%20%20%20const%20y%20%3D%20Scratch.Cast.toNumber(args.y)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getSpriteTargetByName(args.NAME)%3B%0D%0A%20%20%20%20%20%20target.setXY(x%2C%20y)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20moveSprite2(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20x%20%3D%20Scratch.Cast.toNumber(args.x)%3B%0D%0A%20%20%20%20%20%20const%20y%20%3D%20Scratch.Cast.toNumber(args.y)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getSpriteTargetByName(args.NAME)%3B%0D%0A%20%20%20%20%20%20target.setXY(target.x%20%2B%20x%2C%20target.y%20%2B%20y)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20directSprite(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20angle%20%3D%20Scratch.Cast.toNumber(args.ANGLE)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getSpriteTargetByName(args.NAME)%3B%0D%0A%20%20%20%20%20%20target.setDirection(angle)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20directSprite2(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20angle%20%3D%20Scratch.Cast.toNumber(args.ANGLE)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getSpriteTargetByName(args.NAME)%3B%0D%0A%20%20%20%20%20%20target.setDirection(target.direction%20%2B%20angle)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20sizeSprite(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20size%20%3D%20Scratch.Cast.toNumber(args.SIZE)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getSpriteTargetByName(args.NAME)%3B%0D%0A%20%20%20%20%20%20target.setSize(size)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20sizeSprite2(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20size%20%3D%20Scratch.Cast.toNumber(args.SIZE)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getSpriteTargetByName(args.NAME)%3B%0D%0A%20%20%20%20%20%20target.setSize(target.size%20%2B%20size)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20moveinangledirection(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20steps%20%3D%20-Scratch.Cast.toNumber(args.STEPS)%3B%0D%0A%20%20%20%20%20%20const%20direction%20%3D%20Scratch.Cast.toNumber(args.DIRECTION)%3B%0D%0A%20%20%20%20%20%20const%20radians%20%3D%20(Math.PI%20%2F%20180)%20*%20((direction%20%2B%2090)%20*%20-1)%3B%0D%0A%20%20%20%20%20%20const%20deltaX%20%3D%20steps%20*%20Math.cos(radians)%3B%0D%0A%20%20%20%20%20%20const%20deltaY%20%3D%20steps%20*%20Math.sin(radians)%3B%0D%0A%20%20%20%20%20%20if%20(args.NAME%20%3D%3D%3D%20%22_myself_%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setXY(util.target.x%20%2B%20deltaX%2C%20util.target.y%20%2B%20deltaY)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20runtime.getSpriteTargetByName(args.NAME)%3B%0D%0A%20%20%20%20%20%20%20%20target.setXY(target.x%20%2B%20deltaX%2C%20target.y%20%2B%20deltaY)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20randomcoordinate(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20maxChange%20%3D%20Scratch.Cast.toNumber(args.MAXCHANGE)%3B%0D%0A%20%20%20%20%20%20let%20coordinateValue%20%3D%20util.target%5Bargs.COORDINATE%5D%3B%0D%0A%20%20%20%20%20%20const%20randomChange%20%3D%20Math.floor(Math.random()%20*%20(maxChange%20%2B%201))%3B%0D%0A%20%20%20%20%20%20const%20sign%20%3D%20Math.random()%20%3C%200.5%20%3F%20-1%20%3A%201%3B%0D%0A%20%20%20%20%20%20if%20(args.STAGE%20%3D%3D%3D%20%22freeroam%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20coordinateValue%20%2B%3D%20sign%20*%20randomChange%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.STAGE%20%3D%3D%3D%20%22boxed%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20canvasWidth%20%3D%20parseFloat(Scratch.renderer.canvas.style.width)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%20%20const%20canvasHeight%20%3D%20parseFloat(Scratch.renderer.canvas.style.height)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%20%20coordinateValue%20%2B%3D%20sign%20*%20randomChange%3B%0D%0A%20%20%20%20%20%20%20%20coordinateValue%20%3D%20Math.min(args.COORDINATE%20%3D%3D%3D%20%22x%22%20%3F%20canvasWidth%20%3A%20canvasHeight%2C%20Math.abs(coordinateValue))%20*%20sign%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20coordinateValue%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20rotateStyle(_%2C%20util)%20%7B%20return%20util.target.rotationStyle%20%7D%0D%0A%0D%0A%20%20%20%20betterGlide(args%2C%20util%2C%20loop)%20%7B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20args.NAME%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20runtime.getSpriteTargetByName(args.NAME)%3B%0D%0A%20%20%20%20%20%20if%20(!util.stackFrame.startTime)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.startTime%20%3D%20new%20Date().getTime()%3B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.duration%20%3D%20Scratch.Cast.toNumber(args.SECS)%3B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.startX%20%3D%20target.x%3B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.startY%20%3D%20target.y%3B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.endX%20%3D%20Scratch.Cast.toNumber(args.X)%3B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.endY%20%3D%20Scratch.Cast.toNumber(args.Y)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(util.stackFrame.duration%20%3C%3D%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20target.setXY(util.stackFrame.endX%2C%20util.stackFrame.endY)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20if%20(loop%20%3D%3D%3D%20%22on%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20util.startBranch(1%2C%20true)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20currentTime%20%3D%20new%20Date().getTime()%3B%0D%0A%20%20%20%20%20%20%20%20const%20timeElapsed%20%3D%20currentTime%20-%20util.stackFrame.startTime%3B%0D%0A%20%20%20%20%20%20%20%20if%20(timeElapsed%20%3C%20util.stackFrame.duration%20*%201000)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20frac%20%3D%20timeElapsed%20%2F%20(util.stackFrame.duration%20*%201000)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20dx%20%3D%20frac%20*%20(util.stackFrame.endX%20-%20util.stackFrame.startX)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20dy%20%3D%20frac%20*%20(util.stackFrame.endY%20-%20util.stackFrame.startY)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20target.setXY(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.stackFrame.startX%20%2B%20dx%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.stackFrame.startY%20%2B%20dy%0D%0A%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(loop%20%3D%3D%3D%20%22on%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.startBranch(1%2C%20true)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20target.setXY(util.stackFrame.endX%2C%20util.stackFrame.endY)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20whileGlide(args%2C%20util)%20%7B%20this.betterGlide(args%2C%20util%2C%20%22on%22)%20%7D%0D%0A%0D%0A%20%20%20%20_getTargets(enable)%20%7B%0D%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20if%20(enable)%20spriteNames.push(%7B%20text%3A%20%22myself%22%2C%20value%3A%20%22_myself_%22%20%7D)%3B%0D%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0D%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0D%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20targetName%20%3D%20target.getName()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20targetName%2C%20value%3A%20targetName%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20spriteNames.length%20%3E%200%20%3F%20spriteNames%20%3A%20%5B%22%22%5D%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20SPAddedMotion())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Sharktilities%0A%2F%2F%20ID%3A%20SharkPoolSharktilities%0A%2F%2F%20Description%3A%20Various%20Utility%20Blocks%20for%20Various%20Operations%0A%2F%2F%20By%3A%20SharkPool%0A%0A%2F%2F%20Version%20V.3.4.0%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Sharktilities%20must%20run%20unsandboxed%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMzUuMzYzIiBoZWlnaHQ9IjEzNS4zNjMiIHZpZXdCb3g9IjAsMCwxMzUuMzYzLDEzNS4zNjMiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzIuMzE4NSwtMTEyLjMxODUpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTE3Mi4zMTg1LDE4MGMwLC0zNy4zNzk0NiAzMC4zMDIwNCwtNjcuNjgxNSA2Ny42ODE1LC02Ny42ODE1YzM3LjM3OTQ2LDAgNjcuNjgxNSwzMC4zMDIwNCA2Ny42ODE1LDY3LjY4MTVjMCwzNy4zNzk0NiAtMzAuMzAyMDQsNjcuNjgxNSAtNjcuNjgxNSw2Ny42ODE1Yy0zNy4zNzk0NiwwIC02Ny42ODE1LC0zMC4zMDIwNCAtNjcuNjgxNSwtNjcuNjgxNXoiIGZpbGw9IiMzM2I2ZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yMDQuNjY2OTcsMjA3LjMwMzE4YzAsMCAxMi41NTgyMSw2LjQxMzE5IDE1LjM0ODYsLTguNDQ2OTVjNC4wNTQ1OSwtMjEuNTkyNTkgLTIuNTcyNTgsLTQwLjMzNDY2IC02LjM0Mzk3LC00OC43MDgwMmMtMS4zNDgxMSwtMi45OTMxMiAtMC4wMDIwNSwtNC4yNTgwNCAzLjY1MDg0LC0zLjQwNDE5YzkuMjI5MDQsMi4xNTcyNSAyNi45MDcwMSw3LjE5MDMgMzYuODE1NTEsMTUuODYwNDFjMTUuMjEzNTIsMTMuMzEyMDkgMTUuNTQ0NjksMzQuMDY5NDMgMTguNTExOTIsMzkuOTY3MjFjMi40MjcwOSw0LjgyNDE4IDkuNTk0MjYsMi42MTk4IDkuNTk0MjYsMi42MTk4IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iNy41IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20var%20lastValues%20%3D%20%7B%7D%3B%0A%20%20const%20regeneratedReporters%20%3D%20%5B%22SharkPoolSharktilities_changeV%22%5D%3B%0A%0A%20%20%2F%2F%20This%20function%20was%20taken%20from%20Looks%20Plus%20by%20Lily%0A%20%20const%20packageTest%20%3D%20(blockName)%20%3D%3E%20%7B%0A%20%20%20%20if%20(Scratch.vm.runtime.isPackaged)%20%7B%0A%20%20%20%20%20%20alert(%60For%20SharkTilities%20to%20work%2C%20the%20creator%20of%20the%20packaged%20project%20must%20uncheck%20%22Remove%20raw%20asset%20data%20after%20loading%20to%20save%20RAM%22%20under%20advanced%20settings%20in%20the%20packager.%60)%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%3B%0A%20%20%7D%3B%0A%0A%20%20function%20rgbToHsl(r%2C%20g%2C%20b)%20%7B%0A%20%20%20%20r%20%2F%3D%20255%3B%20g%20%2F%3D%20255%3B%20b%20%2F%3D%20255%3B%0A%20%20%20%20const%20max%20%3D%20Math.max(r%2C%20g%2C%20b)%3B%0A%20%20%20%20const%20min%20%3D%20Math.min(r%2C%20g%2C%20b)%3B%0A%20%20%20%20const%20diff%20%3D%20max%20-%20min%3B%0A%20%20%20%20let%20h%2C%20s%2C%20l%20%3D%20(max%20%2B%20min)%20%2F%202%3B%0A%20%20%20%20if%20(diff%20%3D%3D%3D%200)%20h%20%3D%20s%20%3D%200%3B%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20s%20%3D%20l%20%3E%200.5%20%3F%20diff%20%2F%20(2%20-%20max%20-%20min)%20%3A%20diff%20%2F%20(max%20%2B%20min)%3B%0A%20%20%20%20%20%20switch%20(max)%20%7B%0A%20%20%20%20%20%20%20%20case%20r%3A%20h%20%3D%20(g%20-%20b)%20%2F%20diff%20%2B%20(g%20%3C%20b%20%3F%206%20%3A%200)%3B%20break%3B%0A%20%20%20%20%20%20%20%20case%20g%3A%20h%20%3D%20(b%20-%20r)%20%2F%20diff%20%2B%202%3B%20break%3B%0A%20%20%20%20%20%20%20%20case%20b%3A%20h%20%3D%20(r%20-%20g)%20%2F%20diff%20%2B%204%3B%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20h%20%2F%3D%206%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5Bh%2C%20s%2C%20l%5D%3B%0A%20%20%7D%0A%20%20function%20hslToRgb(h%2C%20s%2C%20l)%20%7B%0A%20%20%20%20let%20r%2C%20g%2C%20b%3B%0A%20%20%20%20if%20(s%20%3D%3D%3D%200)%20r%20%3D%20g%20%3D%20b%20%3D%20l%3B%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20const%20hue2rgb%20%3D%20(p%2C%20q%2C%20t)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(t%20%3C%200)%20t%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20if%20(t%20%3E%201)%20t%20-%3D%201%3B%0A%20%20%20%20%20%20%20%20if%20(t%20%3C%201%20%2F%206)%20return%20p%20%2B%20(q%20-%20p)%20*%206%20*%20t%3B%0A%20%20%20%20%20%20%20%20if%20(t%20%3C%201%20%2F%202)%20return%20q%3B%0A%20%20%20%20%20%20%20%20if%20(t%20%3C%202%20%2F%203)%20return%20p%20%2B%20(q%20-%20p)%20*%20(2%20%2F%203%20-%20t)%20*%206%3B%0A%20%20%20%20%20%20%20%20return%20p%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20const%20q%20%3D%20l%20%3C%200.5%20%3F%20l%20*%20(1%20%2B%20s)%20%3A%20l%20%2B%20s%20-%20l%20*%20s%3B%0A%20%20%20%20%20%20const%20p%20%3D%202%20*%20l%20-%20q%3B%0A%20%20%20%20%20%20r%20%3D%20hue2rgb(p%2C%20q%2C%20h%20%2B%201%20%2F%203)%3B%0A%20%20%20%20%20%20g%20%3D%20hue2rgb(p%2C%20q%2C%20h)%3B%0A%20%20%20%20%20%20b%20%3D%20hue2rgb(p%2C%20q%2C%20h%20-%201%20%2F%203)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5BMath.round(r%20*%20255)%2C%20Math.round(g%20*%20255)%2C%20Math.round(b%20*%20255)%5D%3B%0A%20%20%7D%0A%20%20function%20componentToHex(c)%20%7B%0A%20%20%20%20const%20hex%20%3D%20c.toString(16)%3B%0A%20%20%20%20return%20hex.length%20%3D%3D%3D%201%20%3F%20%220%22%20%2B%20hex%20%3A%20hex%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Inspired%20by%20LilyMakesThings%20%3C3%0A%20%20vm.on(%22EXTENSION_ADDED%22%2C%20tryUseScratchBlocks)%3B%0A%20%20vm.on(%22BLOCKSINFO_UPDATE%22%2C%20tryUseScratchBlocks)%3B%0A%20%20vm.runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%20vm.runtime.startHats(%22SharkPoolSharktilities_whenChanged%22)%20%7D)%3B%0A%0A%20%20tryUseScratchBlocks()%3B%0A%20%20function%20tryUseScratchBlocks()%20%7B%0A%20%20%20%20if%20(!window.ScratchBlocks)%20return%3B%0A%20%20%20%20vm.removeListener(%22EXTENSION_ADDED%22%2C%20tryUseScratchBlocks)%3B%0A%20%20%20%20vm.removeListener(%22BLOCKSINFO_UPDATE%22%2C%20tryUseScratchBlocks)%3B%0A%20%20%20%20const%20originalCheck%20%3D%20ScratchBlocks.scratchBlocksUtils.isShadowArgumentReporter%3B%0A%20%20%20%20ScratchBlocks.scratchBlocksUtils.isShadowArgumentReporter%20%3D%20function%20(block)%20%7B%0A%20%20%20%20%20%20const%20result%20%3D%20originalCheck(block)%3B%0A%20%20%20%20%20%20if%20(result)%20return%20true%3B%0A%20%20%20%20%20%20return%20block.isShadow()%20%26%26%20regeneratedReporters.includes(block.type)%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20class%20Sharktilities%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SharkPoolSharktilities%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Sharktilities%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%2333B6FF%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Management%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22penLayer%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20pen%20layer%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getText%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22what%20is%20%5BSPRITE%5D%20saying%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS2%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22costumeCnt%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%23%20of%20costumes%20in%20%5BSPRITE%5D%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22costumeInfo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BINFO%5D%20of%20costume%20%23%5BNUM%5D%20in%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INFO%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22cosInfo%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTargetCostume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20costume%20of%20%5BSPRITE%5D%20to%20%5BNUM%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%201%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cloudCode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%E2%98%81%20cloud%20%5BCODE%5D%20string%20%5BTEXT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CODE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22encoder%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22SharkPool%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.XML%2C%20xml%3A%20%60%3Cblock%20type%3D%22SharkPoolSharktilities_whenChanged%22%3E%3Cvalue%20name%3D%22CHANGE%22%3E%3Cshadow%20type%3D%22SharkPoolSharktilities_changeV%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E%60%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenChanged%22%2C%20blockType%3A%20Scratch.BlockType.HAT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22when%20%5BINPUT%5D%20is%20changed%20%5BCHANGE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20INPUT%3A%20%7B%20type%3A%20null%20%7D%2C%20CHANGE%3A%20%7B%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeV%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%20text%3A%20%22old%20value%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isChanged%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22when%20%5BINPUT%5D%20is%20changed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%20type%3A%20null%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22repeatForUntil%22%2C%20text%3A%20%22repeat%20%5BNUM%5D%20or%20until%20%5BCON%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%2010%20%7D%2C%20CON%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spayedCondition%22%2C%20blockType%3A%20Scratch.BlockType.LOOP%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%5B%22if%20%5BCON1%5D%20start%20loop%22%2C%20%22repeat%20until%20%5BCON2%5D%22%5D%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20CON1%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%2C%20CON2%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22broadcastRun%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22broadcast%20%5BMSG%5D%20and%20repeat%20while%20waiting%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MSG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22message1%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22roundToNearest%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22round%20%5BNUMBER%5D%20to%20nearest%20%5BROUND_TYPE%5D%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20NUMBER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%203.1415%20%7D%2C%20ROUND_TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ROUND_MENU%22%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22randomLetter%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pick%20random%20%5BLETTER_TYPE%5D%20letter%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20LETTER_TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22LETTER_TYPE_MENU%22%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22randomCharRange%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pick%20random%20character%20%5BONE%5D%20to%20%5BTWO%5D%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20ONE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22a%22%20%7D%2C%20TWO%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22c%22%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Color%20and%20Effects%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSpriteEffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BEFFECT%5D%20to%20%5BVALUE%5D%20of%20%5BSPRITE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EFFECT_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22hexBrightness%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20brightness%20of%20%5BCOLOR%5D%20by%20%5BCHANGE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CHANGE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22removeThorns%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22remove%20vector%20thorns%20from%20%5BSVG%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%3Csvg%3E%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22genShape%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22make%20%5BTYPE%5D%20shape%20with%20points%20%5BPOINTS%5D%20filled%20%5BCOLOR%5D%20width%20%5BWIDTH%5D%20height%20%5BHEIGHT%5D%20x%20%5BX%5D%20y%20%5BY%5D%20curve%20%5BLINE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POINTS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%2C0%20200%2C0%20100%2C%20200%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20HEIGHT%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LINE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22RETURN%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unboundSound%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BEFFECT%5D%20of%20%5BSPRITE%5D%20to%20%5BVALUE%5D%20unclamped%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22SOUND%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Math%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22randomSingleInteger%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pick%20random%20single%20integer%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tripleOperator%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BNUM1%5D%20%5BOPERATOR1%5D%20%5BNUM2%5D%20%5BOPERATOR2%5D%20%5BNUM3%5D%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%20OPERATOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%20OPERATOR2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%20NUM3%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22quadrupleOperator%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BNUM1%5D%20%5BOPERATOR1%5D%20%5BNUM2%5D%20%5BOPERATOR2%5D%20%5BNUM3%5D%20%5BOPERATOR3%5D%20%5BNUM4%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%20OPERATOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%20OPERATOR2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM3%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%20OPERATOR3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%20NUM4%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22negaAbs%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22nega-abs%20of%20%5BNUMBER%5D%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20NUMBER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22simplifyFrac%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22simplify%20fraction%20%5BNUM%5D%20%2F%20%5BDENOM%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%204%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DENOM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%208%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22smoothing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22smooth%20%5BMATH%5D%20at%20speed%20%5BSPEED%5D%20and%20limit%20%5BLIMIT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MATH%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22mathMenu%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPEED%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LIMIT%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2025%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22smoothing2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22smooth%20%5BMATH%5D%20%5BNUM%5D%20at%20speed%20%5BSPEED%5D%20and%20limit%20%5BLIMIT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MATH%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22mathMenu%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPEED%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LIMIT%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2025%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Strings%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rndString%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pick%20random%20%5BSTRING1%5D%20or%20%5BSTRING2%5D%20with%20%5BCHANCE%5D%25%20chance%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22foo%22%20%7D%2C%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22bar%22%20%7D%2C%20CHANCE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22typeString%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BSTRING1%5D%20%5BTYPE%5D%20%5BSTRING2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22value%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22STRING%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22noContain%22%2C%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BSTRING1%5D%20not%20contains%20%5BSTRING2%5D%3F%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22SharkPool%22%20%7D%2C%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22shark%22%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceKey%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20%5BKEY%5D%20%23%5BORDER%5D%20of%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22SharkPool%20is%20cool.%20SharkPool%20is%20great.%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22is%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ORDER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%202%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22isnt%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceKeys%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20%5BKEY%5D%20%23%5BORDER%5D%20to%20%23%5BORDER2%5D%20of%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22SharkPool%20is%20cool.%20SharkPool%20is%20great.%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22is%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ORDER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ORDER2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%202%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22isnt%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22shuffleArray%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22organize%20array%20%5BWORDS%5D%20by%20%5BSHUFFLE_OPTION%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WORDS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B%5C%22word1%5C%22%2C%20%5C%22word2%5C%22%2C%20%5C%22word3%5C%22%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SHUFFLE_OPTION%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22shuffleOption%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tripleJoin%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22join%20%5BSTRING1%5D%20%5BSTRING2%5D%20%5BSTRING3%5D%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20STRING3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22quadrupleJoin%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22join%20%5BSTRING1%5D%20%5BSTRING2%5D%20%5BSTRING3%5D%20%5BSTRING4%5D%22%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20STRING3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20STRING4%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22fiveJoin%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22join%20%5BSTRING1%5D%20%5BSTRING2%5D%20%5BSTRING3%5D%20%5BSTRING4%5D%20%5BSTRING5%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20STRING3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING4%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20STRING5%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Experimental%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stepInter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22step%20interpolation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22refresh%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22refresh%20extensions%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isTerminal%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22request%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22request%20%5BTHING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20THING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22reqMenu%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20TARGETS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this._getTargets(true)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TARGETS2%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this._getTargets(false)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20ROUND_MENU%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22whole%20number%22%2C%20%22tenths%22%2C%20%22hundredths%22%2C%20%22thousandths%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20LETTER_TYPE_MENU%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22lowercase%22%2C%20%22uppercase%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20reqMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22redraw%22%2C%20%22project%20step%22%2C%20%22toolbox%20update%22%2C%20%22block%20refresh%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20EFFECT_MENU%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22color%22%2C%20%22fisheye%22%2C%20%22whirl%22%2C%20%22pixelate%22%2C%20%22mosaic%22%2C%20%22brightness%22%2C%20%22ghost%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20mathMenu%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22sin%22%2C%20%22cos%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20OPERATOR_MENU%3A%20%5B%22%2B%22%2C%20%22-%22%2C%20%22*%22%2C%20%22%2F%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20OPERATORS%3A%20%5B%22%3E%22%2C%20%22%3C%22%2C%20%22%3D%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20STRING%3A%20%5B%22%7C%7C%22%2C%20%22%3F%3F%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20SOUND%3A%20%5B%22volume%22%2C%20%22pitch%22%2C%20%22pan%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20RETURN%3A%20%5B%22svg%22%2C%20%22encoded%20svg%22%2C%20%22png%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20encoder%3A%20%5B%22encode%22%2C%20%22decode%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20cosInfo%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%2C%20%22width%22%2C%20%22height%22%2C%20%22type%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22rotation%20center%20x%22%2C%20%22rotation%20center%20y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22content%22%2C%20%22data.uri%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20shuffleOption%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22random%22%2C%20%22ascending%22%2C%20%22descending%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22ascending%20by%20length%22%2C%20%22descending%20by%20length%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getTargets(ind)%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20%22myself%22%2C%20value%3A%20%22_myself_%22%20%7D)%3B%0A%20%20%20%20%20%20if%20(ind)%20spriteNames.push(%7B%20text%3A%20%22Stage%22%2C%20value%3A%20%22_stage_%22%20%7D)%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20spriteNames.push(%7B%20text%3A%20target.getName()%2C%20value%3A%20target.getName()%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20spriteNames.length%20%3E%200%20%3F%20spriteNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20whenChanged(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20util.thread.sharktilsPars%20%3D%3D%3D%20%22undefined%22)%20util.thread.stackFrames%5B0%5D.sharktilsPars%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20const%20blockId%20%3D%20util.thread.peekStack()%3B%0A%20%20%20%20%20%20const%20input%20%3D%20Scratch.Cast.toString(args.INPUT)%3B%0A%20%20%20%20%20%20if%20(!lastValues%5BblockId%5D)%20lastValues%5BblockId%5D%20%3D%20input%3B%0A%20%20%20%20%20%20if%20(lastValues%5BblockId%5D%20!%3D%3D%20input)%20%7B%0A%20%20%20%20%20%20%20%20util.thread.stackFrames%5B0%5D.sharktilsPars.diff%20%3D%20lastValues%5BblockId%5D%3B%0A%20%20%20%20%20%20%20%20lastValues%5BblockId%5D%20%3D%20input%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeV(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20stack%20%3D%20util.thread.stackFrames%3B%0A%20%20%20%20%20%20if%20(typeof%20stack%20%3D%3D%3D%20%22undefined%22)%20return%20%22%22%3B%0A%20%20%20%20%20%20const%20params%20%3D%20stack%5B0%5D.sharktilsPars%3B%0A%20%20%20%20%20%20if%20(typeof%20params%20%3D%3D%3D%20%22undefined%22)%20return%20%22%22%3B%0A%20%20%20%20%20%20return%20params.diff%20%7C%7C%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isChanged(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20blockId%20%3D%20util.thread.isCompiled%20%3F%20util.thread.peekStack()%20%3A%20util.thread.peekStackFrame().op.id%3B%0A%20%20%20%20%20%20const%20input%20%3D%20Scratch.Cast.toString(args.INPUT)%3B%0A%20%20%20%20%20%20if%20(!lastValues%5BblockId%5D)%20lastValues%5BblockId%5D%20%3D%20input%3B%0A%20%20%20%20%20%20if%20(lastValues%5BblockId%5D%20!%3D%3D%20input)%20%7B%0A%20%20%20%20%20%20%20%20lastValues%5BblockId%5D%20%3D%20input%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20randomSingleInteger()%20%7B%20return%20Math.random()%20%3C%200.5%20%3F%20-1%20%3A%201%20%7D%0A%0A%20%20%20%20setSpriteEffect(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20target%20%3D%20args.SPRITE%3B%0A%20%20%20%20%20%20target%20%3D%20target%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20target%20%3D%3D%3D%20%22_stage_%22%20%3F%20vm.runtime.getTargetForStage()%20%3A%20vm.runtime.getSpriteTargetByName(target)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%20%20%20%20%20%20target.setEffect(args.EFFECT%2C%20Scratch.Cast.toNumber(args.VALUE))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20shuffleArray(args)%20%7B%0A%20%20%20%20%20%20let%20words%20%3D%20args.WORDS%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20words%20%3D%20JSON.parse(words)%3B%0A%20%20%20%20%20%20%7D%20catch%20%7B%20return%20%22Invalid%20Array%22%20%7D%0A%20%20%20%20%20%20if%20(!Array.isArray(words))%20return%20%22Invalid%20Array%22%3B%0A%20%20%20%20%20%20switch%20(args.SHUFFLE_OPTION)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22ascending%22%3A%20return%20JSON.stringify(words.sort((a%2C%20b)%20%3D%3E%20a%20-%20b))%3B%0A%20%20%20%20%20%20%20%20case%20%22descending%22%3A%20return%20JSON.stringify(words.sort((a%2C%20b)%20%3D%3E%20b%20-%20a).reverse())%3B%0A%20%20%20%20%20%20%20%20case%20%22descending%20by%20length%22%3A%20return%20JSON.stringify(words.sort((a%2C%20b)%20%3D%3E%20b.length%20-%20a.length))%3B%0A%20%20%20%20%20%20%20%20case%20%22ascending%20by%20length%22%3A%20return%20JSON.stringify(words.sort((a%2C%20b)%20%3D%3E%20a.length%20-%20b.length))%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20words.length%20-%201%3B%20i%20%3E%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20j%20%3D%20Math.floor(Math.random()%20*%20(i%20%2B%201))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Bwords%5Bi%5D%2C%20words%5Bj%5D%5D%20%3D%20%5Bwords%5Bj%5D%2C%20words%5Bi%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(words)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20hexBrightness(args)%20%7B%0A%20%20%20%20%20%20const%20%5Br%2C%20g%2C%20b%5D%20%3D%20args.COLOR.replace(%2F%5E%23%2F%2C%20%22%22).match(%2F.%7B1%2C2%7D%2Fg).map(channel%20%3D%3E%20parseInt(channel%2C%2016))%3B%0A%20%20%20%20%20%20const%20hslColor%20%3D%20rgbToHsl(r%2C%20g%2C%20b)%3B%0A%20%20%20%20%20%20const%20newLightness%20%3D%20Math.min(1%2C%20Math.max(0%2C%20hslColor%5B2%5D%20%2B%20(args.CHANGE%20%2F%20100)))%3B%0A%20%20%20%20%20%20const%20newRgbColor%20%3D%20hslToRgb(hslColor%5B0%5D%2C%20hslColor%5B1%5D%2C%20newLightness)%3B%0A%20%20%20%20%20%20return%20%60%23%24%7BnewRgbColor.map(channel%20%3D%3E%20componentToHex(channel)).join(%22%22)%7D%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20smooth(spd%2C%20lim%2C%20type%2C%20num)%20%7B%0A%20%20%20%20%20%20const%20speed%20%3D%20Scratch.Cast.toNumber(spd)%20%2F%2010%3B%0A%20%20%20%20%20%20const%20limit%20%3D%20Scratch.Cast.toNumber(lim)%3B%0A%20%20%20%20%20%20return%20Math%5Btype%5D(num%20*%20speed)%20*%20limit%20%7C%7C%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20smoothing(args%2C%20util)%20%7B%20return%20this.smooth(args.SPEED%2C%20args.LIMIT%2C%20args.MATH%2C%20util.ioQuery(%22clock%22%2C%20%22projectTimer%22))%20%7D%0A%20%20%20%20smoothing2(args)%20%7B%20return%20this.smooth(args.SPEED%2C%20args.LIMIT%2C%20args.MATH%2C%20Scratch.Cast.toNumber(args.NUM))%20%7D%0A%0A%20%20%20%20refresh()%20%7B%20vm.extensionManager.refreshBlocks()%20%7D%0A%20%20%20%20async%20request(args)%20%7B%0A%20%20%20%20%20%20if%20(args.THING%20%3D%3D%3D%20%22redraw%22)%20Scratch.vm.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20else%20if%20(args.THING%20%3D%3D%3D%20%22block%20refresh%22)%20Scratch.vm.extensionManager.refreshBlocks()%3B%0A%20%20%20%20%20%20else%20if%20(args.THING%20%3D%3D%3D%20%22project%20step%22)%20await%20this.ignoreError(vm.runtime._step())%3B%0A%20%20%20%20%20%20else%20Scratch.vm.runtime.requestToolboxExtensionsUpdate()%3B%0A%20%20%20%20%7D%0A%20%20%20%20async%20stepInter()%20%7B%20await%20this.ignoreError(vm.runtime.frameLoop.stepCallback())%20%7D%0A%20%20%20%20ignoreError(call)%20%7B%0A%20%20%20%20%20%20return%20new%20Promise(async%20(resolve%2C%20reject)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20call()%3B%0A%20%20%20%20%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20setTimeout(resolve%2C%201))%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20%7B%20reject()%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20costumeCnt(args)%20%7B%20return%20this.costumeInfo(%7B%20SPRITE%20%3A%20args.SPRITE%2C%20OVERRIDE%20%3A%20true%7D)%20%7D%0A%20%20%20%20costumeInfo(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20target%20%3D%20args.SPRITE%3B%0A%20%20%20%20%20%20target%20%3D%20target%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20target%20%3D%3D%3D%20%22_stage_%22%20%3F%20vm.runtime.getTargetForStage()%20%3A%20vm.runtime.getSpriteTargetByName(target)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20%22%22%3B%0A%20%20%20%20%20%20const%20targetInfo%20%3D%20target.getCostumes()%3B%0A%20%20%20%20%20%20if%20(args.OVERRIDE%20!%3D%3D%20undefined)%20return%20target.sprite.costumes.length%3B%0A%20%20%20%20%20%20let%20index%20%3D%20Math.round(Math.abs(Scratch.Cast.toString(args.NUM)))%20-%201%3B%0A%20%20%20%20%20%20if%20(!index%20%7C%7C%20Scratch.Cast.toString(index).includes(%22Infinity%22))%20index%20%3D%200%3B%0A%20%20%20%20%20%20if%20(index%20%3E%20target.sprite.costumes.length%20-%201)%20index%20%3D%20target.sprite.costumes.length%20-%201%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20targetInfo%5Bindex%5D%3B%0A%20%20%20%20%20%20switch%20(args.INFO)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22name%22%3A%20return%20costume.name%3B%0A%20%20%20%20%20%20%20%20case%20%22width%22%3A%20return%20costume.size%5B0%5D%3B%0A%20%20%20%20%20%20%20%20case%20%22height%22%3A%20return%20costume.size%5B1%5D%3B%0A%20%20%20%20%20%20%20%20case%20%22type%22%3A%20return%20packageTest(%22costume%20format%22)%20%3F%20%22unknown%22%20%3A%20costume.dataFormat%3B%0A%20%20%20%20%20%20%20%20case%20%22rotation%20center%20x%22%3A%20return%20costume.rotationCenterX%3B%0A%20%20%20%20%20%20%20%20case%20%22rotation%20center%20y%22%3A%20return%20costume.rotationCenterY%3B%0A%20%20%20%20%20%20%20%20case%20%22content%22%3A%20return%20packageTest(%22costume%20content%22)%20%3F%20%22%22%20%3A%20costume.asset.decodeText()%3B%0A%20%20%20%20%20%20%20%20case%20%22data.uri%22%3A%20return%20packageTest(%22costume%20content%22)%20%3F%20%22%22%20%3A%20costume.asset.encodeDataURI()%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getText(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20vm.runtime.getSpriteTargetByName(args.SPRITE)%3B%0A%20%20%20%20%20%20if%20(!target%20%7C%7C%20!target._customState%5B%22Scratch.looks%22%5D)%20return%20%22%22%3B%0A%20%20%20%20%20%20return%20target._customState%5B%22Scratch.looks%22%5D.text%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20cloudCode(args)%20%7B%20return%20args.CODE%20%3D%3D%3D%20%22encode%22%20%3F%20this.encodeText(args.TEXT)%20%3A%20this.decodeText(args.TEXT)%20%7D%0A%20%20%20%20encodeText(txt)%20%7B%20return%20txt.split(%22%22).map(char%20%3D%3E%20char.charCodeAt(0)).map(value%20%3D%3E%20value.toString().padStart(3%2C%20%220%22)).join(%22%22)%20%7D%0A%20%20%20%20decodeText(txt)%20%7B%0A%20%20%20%20%20%20const%20decodedString%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20txt.length%3B%20i%20%2B%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20const%20charCode%20%3D%20parseInt(txt.slice(i%2C%20i%20%2B%203)%2C%2010)%3B%0A%20%20%20%20%20%20%20%20decodedString.push(String.fromCharCode(charCode))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20decodedString.join(%22%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTargetCostume(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_stage_%22)%20vm.runtime.ext_scratch3_looks._setBackdrop(vm.runtime.getTargetForStage()%2C%20args.NUM)%3B%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20vm.runtime.getSpriteTargetByName(args.SPRITE)%3B%0A%20%20%20%20%20%20%20%20if%20(target)%20vm.runtime.ext_scratch3_looks._setCostume(target%2C%20args.NUM)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20removeThorns(args)%20%7B%20return%20args.SVG.replaceAll(%22linejoin%3D%5C%22miter%5C%22%22%2C%20%22linejoin%3D%5C%22round%5C%22%22)%20%7D%0A%0A%20%20%20%20penLayer()%20%7B%0A%20%20%20%20%20%20const%20penID%20%3D%20vm.runtime.ext_pen%3F._penDrawableId%3B%0A%20%20%20%20%20%20if%20(!penID)%20return%20%22%22%3B%0A%20%20%20%20%20%20const%20imageData%20%3D%20vm.runtime.renderer.extractDrawableScreenSpace(penID).imageData%3B%0A%20%20%20%20%20%20var%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20canvas.width%20%3D%20imageData.width%3B%0A%20%20%20%20%20%20canvas.height%20%3D%20imageData.height%3B%0A%20%20%20%20%20%20canvas.getContext(%222d%22).putImageData(imageData%2C%200%2C%200)%3B%0A%20%20%20%20%20%20return%20canvas.toDataURL(%22image%2Fpng%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20broadcastRun(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!util.stackFrame.broadcastVar)%20util.stackFrame.broadcastVar%20%3D%20vm.runtime.getTargetForStage().lookupBroadcastByInputValue(args.MSG)%0A%20%20%20%20%20%20if%20(util.stackFrame.broadcastVar)%20%7B%0A%20%20%20%20%20%20%20%20const%20opt%20%3D%20util.stackFrame.broadcastVar.name%3B%0A%20%20%20%20%20%20%20%20if%20(!util.stackFrame.startedThreads)%20%7B%0A%20%20%20%20%20%20%20%20%20%20util.stackFrame.startedThreads%20%3D%20util.startHats(%22event_whenbroadcastreceived%22%2C%20%7B%20BROADCAST_OPTION%3A%20opt%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(util.stackFrame.startedThreads.length%20%3D%3D%3D%200)%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20waiting%20%3D%20util.stackFrame.startedThreads.some(thread%20%3D%3E%20vm.runtime.threads.indexOf(thread)%20!%3D%3D%20-1)%3B%0A%20%20%20%20%20%20%20%20if%20(waiting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(util.stackFrame.startedThreads.every(thread%20%3D%3E%20vm.runtime.isWaitingThread(thread)))%20util.yieldTick()%3B%0A%20%20%20%20%20%20%20%20%20%20else%20util.startBranch(1%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20genShape(args)%20%7B%0A%20%20%20%20%20%20const%20width%20%3D%20Scratch.Cast.toString(args.WIDTH)%3B%20const%20height%20%3D%20Scratch.Cast.toString(args.HEIGHT)%3B%0A%20%20%20%20%20%20const%20x%20%3D%20Scratch.Cast.toString(args.X)%3B%20const%20y%20%3D%20Scratch.Cast.toString(args.Y)%20*%20-1%3B%0A%20%20%20%20%20%20const%20curNoise%20%3D%0A%20%20%20%20%20%20%20%20%60%3Csvg%20width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cg%20transform%3D%22translate(%24%7Bx%7D%2C%24%7By%7D)%22%3E%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cpolygon%20points%3D%22%24%7Bargs.POINTS.replace(%2F%5B%5E0-9%2C%20%5D%2Fg%2C%20%22%22)%7D%22%20fill%3D%22%24%7Bargs.COLOR%7D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20stroke%3D%22%24%7Bargs.COLOR%7D%22%20stroke-width%3D%22%24%7Bargs.LINE%7D%22%20stroke-linejoin%3D%22round%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3C%2Fsvg%3E%60%3B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22encoded%20svg%22)%20return%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(curNoise)%7D%60%3B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22png%22)%20%7B%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20new%20Image()%3B%0A%20%20%20%20%20%20%20%20img.src%20%3D%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(curNoise)%7D%60%3B%0A%20%20%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20img.onload%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20img.width%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20img.height%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.drawImage(img%2C%200%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve(canvas.toDataURL())%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20curNoise.trim()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20unboundSound(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20target%20%3D%20args.SPRITE%3B%0A%20%20%20%20%20%20target%20%3D%20target%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20target%20%3D%3D%3D%20%22_stage_%22%20%3F%20vm.runtime.getTargetForStage()%20%3A%20vm.runtime.getSpriteTargetByName(target)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%20%20%20%20%20%20if%20(args.EFFECT%20%3D%3D%3D%20%22volume%22)%20return%20this._updateVolume(Scratch.Cast.toNumber(args.VALUE)%2C%20target)%3B%0A%20%20%20%20%20%20else%20return%20this._updateEffect(args%2C%20target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20_updateEffect(args%2C%20target)%20%7B%0A%20%20%20%20%20%20const%20effect%20%3D%20args.EFFECT.toLowerCase()%3B%0A%20%20%20%20%20%20const%20soundState%20%3D%20vm.runtime.ext_scratch3_sound._getSoundState(target)%3B%0A%20%20%20%20%20%20if%20(!Object.prototype.hasOwnProperty.call(soundState.effects%2C%20effect))%20return%3B%0A%20%20%20%20%20%20soundState.effects%5Beffect%5D%20%3D%20args.VALUE%3B%0A%20%20%20%20%20%20vm.runtime.ext_scratch3_sound._syncEffectsForTarget(target)%3B%0A%20%20%20%20%20%20if%20(vm.runtime.runtimeOptions.miscLimits)%20return%20Promise.resolve()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20_updateVolume(volume%2C%20target)%20%7B%0A%20%20%20%20%20%20target.volume%20%3D%20volume%3B%0A%20%20%20%20%20%20vm.runtime.ext_scratch3_sound._syncEffectsForTarget(target)%3B%0A%20%20%20%20%20%20if%20(vm.runtime.runtimeOptions.miscLimits)%20return%20Promise.resolve()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Deprecated%20Blocks%0A%20%20%20%20%2F%2F%20Found%20in%20More%20Operators%0A%20%20%20%20replaceKey(args)%20%7B%0A%20%20%20%20%20%20const%20regex%20%3D%20new%20RegExp(args.KEY%2C%20%22g%22)%3B%0A%20%20%20%20%20%20let%20index%20%3D%200%3B%0A%20%20%20%20%20%20return%20Scratch.Cast.toString(args.STRING).replace(regex%2C%20(match)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20index%2B%2B%3B%20return%20index%20%3D%3D%3D%20Scratch.Cast.toNumber(args.ORDER)%20%3F%20args.REPLACE%20%3A%20match%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20replaceKeys(args)%20%7B%0A%20%20%20%20%20%20const%20regex%20%3D%20new%20RegExp(args.KEY%2C%20%22g%22)%3B%0A%20%20%20%20%20%20let%20index%20%3D%200%3B%0A%20%20%20%20%20%20const%20ord1%20%3D%20Scratch.Cast.toNumber(args.ORDER)%3B%20const%20ord2%20%3D%20Scratch.Cast.toNumber(args.ORDER2)%3B%0A%20%20%20%20%20%20const%20order2%20%3D%20ord1%20%3E%20ord2%20%3F%20ord1%20%3A%20ord2%3B%0A%20%20%20%20%20%20return%20Scratch.Cast.toString(args.STRING).replace(regex%2C%20(match)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20index%2B%2B%3B%20return%20index%20%3E%3D%20ord1%20%26%26%20index%20%3C%3D%20order2%20%3F%20args.REPLACE%20%3A%20match%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20randomCharRange(args)%20%7B%20%0A%20%20%20%20%20%20let%20ONE%20%3D%20args.ONE.charCodeAt(0)%3B%20let%20TWO%20%3D%20args.TWO.charCodeAt(0)%3B%0A%20%20%20%20%20%20return%20String.fromCharCode(Math.floor(Math.random()%20*%20(TWO%20-%20ONE%20%2B%201)%20%2B%20ONE))%3B%0A%20%20%20%20%7D%0A%20%20%20%20noContain(args)%20%7B%20return%20!vm.runtime.ext_scratch3_operators.contains(args)%20%7D%0A%20%20%20%20tripleJoin(%7B%20STRING1%2C%20STRING2%2C%20STRING3%20%7D)%20%7B%20return%20%60%24%7BSTRING1%7D%24%7BSTRING2%7D%24%7BSTRING3%7D%60%20%7D%0A%20%20%20%20quadrupleJoin(%7B%20STRING1%2C%20STRING2%2C%20STRING3%2C%20STRING4%20%7D)%20%7B%20return%20%60%24%7BSTRING1%7D%24%7BSTRING2%7D%24%7BSTRING3%7D%24%7BSTRING4%7D%60%20%7D%0A%20%20%20%20fiveJoin(%7B%20STRING1%2C%20STRING2%2C%20STRING3%2C%20STRING4%2C%20STRING5%20%7D)%20%7B%20return%20%60%24%7BSTRING1%7D%24%7BSTRING2%7D%24%7BSTRING3%7D%24%7BSTRING4%7D%24%7BSTRING5%7D%60%20%7D%0A%20%20%20%20tripleOperator(args)%20%7B%0A%20%20%20%20%20%20const%20nums%20%3D%20%5BScratch.Cast.toNumber(args.NUM1)%2C%20Scratch.Cast.toNumber(args.NUM2)%2C%20Scratch.Cast.toNumber(args.NUM3)%5D%3B%0A%20%20%20%20%20%20return%20eval(%60%24%7Bnums%5B0%5D%7D%20%24%7Bargs.OPERATOR1%7D%20%24%7Bnums%5B1%5D%7D%20%24%7Bargs.OPERATOR2%7D%20%24%7Bnums%5B2%5D%7D%60)%3B%0A%20%20%20%20%7D%0A%20%20%20%20quadrupleOperator(args)%20%7B%0A%20%20%20%20%20%20const%20nums%20%3D%20%5BScratch.Cast.toNumber(args.NUM1)%2C%20Scratch.Cast.toNumber(args.NUM2)%2C%20Scratch.Cast.toNumber(args.NUM3)%2C%20Scratch.Cast.toNumber(args.NUM4)%5D%3B%0A%20%20%20%20%20%20return%20eval(%60%24%7Bnums%5B0%5D%7D%20%24%7Bargs.OPERATOR1%7D%20%24%7Bnums%5B1%5D%7D%20%24%7Bargs.OPERATOR2%7D%20%24%7Bnums%5B2%5D%7D%20%24%7Bargs.OPERATOR3%7D%20%24%7Bnums%5B3%5D%7D%60)%3B%0A%20%20%20%20%7D%0A%20%20%20%20simplifyFrac(args)%20%7B%0A%20%20%20%20%20%20const%20numerator%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%20const%20denominator%20%3D%20Scratch.Cast.toNumber(args.DENOM)%3B%0A%20%20%20%20%20%20const%20gcd%20%3D%20(a%2C%20b)%20%3D%3E%20(b%20%3F%20gcd(b%2C%20a%20%25%20b)%20%3A%20a)%3B%0A%20%20%20%20%20%20const%20gcdValue%20%3D%20gcd(numerator%2C%20denominator)%3B%0A%20%20%20%20%20%20const%20result%20%3D%20JSON.stringify(%5Bnumerator%20%2F%20gcdValue%2C%20denominator%20%2F%20gcdValue%5D)%3B%0A%20%20%20%20%20%20return%20result.includes(%22null%22)%20%3F%20%22%5Bundefined%5D%22%20%3A%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20negaAbs(%7B%20NUMBER%20%7D)%20%7B%20return%20-Math.abs(Scratch.Cast.toNumber(NUMBER))%20%7D%0A%20%20%20%20roundToNearest(%7B%20NUMBER%2C%20ROUND_TYPE%20%7D)%20%7B%0A%20%20%20%20%20%20const%20precision%20%3D%20%7B%22whole%20number%22%3A%200%2C%20%22tenths%22%3A%201%2C%20%22hundredths%22%3A%202%2C%20%22thousandths%22%3A%203%7D%5BROUND_TYPE%5D%20%7C%7C%20Math.max(0%2C%20Math.round(Scratch.Cast.toNumber(ROUND_TYPE)))%3B%0A%20%20%20%20%20%20const%20multiplier%20%3D%20Math.pow(10%2C%20precision)%3B%0A%20%20%20%20%20%20return%20Math.round(NUMBER%20*%20multiplier)%20%2F%20multiplier%3B%0A%20%20%20%20%7D%0A%20%20%20%20randomLetter(%7B%20LETTER_TYPE%20%7D)%20%7B%0A%20%20%20%20%20%20let%20letters%20%3D%20%22abcdefghijklmnopqrstuvwxyz%22%3B%0A%20%20%20%20%20%20if%20(LETTER_TYPE%20%3D%3D%3D%20%22uppercase%22)%20letters%20%3D%20letters.toUpperCase()%3B%0A%20%20%20%20%20%20return%20letters.charAt(Math.floor(Math.random()%20*%20letters.length))%3B%0A%20%20%20%20%7D%0A%20%20%20%20rndString(args)%20%7B%20return%20Math.random()%20%3E%20args.CHANCE%20%2F%20100%20%3F%20args.STRING2%20%3A%20args.STRING1%20%7D%0A%20%20%20%20typeString(args)%20%7B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22%7C%7C%22)%20return%20args.STRING1%20%7C%7C%20args.STRING2%3B%0A%20%20%20%20%20%20else%20return%20args.STRING1%20%3D%3D%3D%20%22undefined%22%20%7C%7C%20args.STRING1%20%3D%3D%3D%20%22null%22%20%3F%20args.STRING2%20%3A%20args.STRING1%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Found%20in%20Extra%20Control%0A%20%20%20%20repeatForUntil(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20util.stackFrame.loopCounter%20%3D%3D%3D%20%22undefined%22)%20util.stackFrame.loopCounter%20%3D%20Math.round(Scratch.Cast.toNumber(args.NUM))%3B%0A%20%20%20%20%20%20util.stackFrame.loopCounter--%3B%0A%20%20%20%20%20%20if%20(!Scratch.Cast.toBoolean(args.CON)%20%26%26%20util.stackFrame.loopCounter%20%3E%3D%200)%20util.startBranch(1%2C%20true)%3B%0A%20%20%20%20%7D%0A%20%20%20%20spayedCondition(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20util.stackFrame.index%20%3D%3D%3D%20%22undefined%22)%20util.stackFrame.index%20%3D%20true%3B%0A%20%20%20%20%20%20if%20(!Scratch.Cast.toBoolean(args.CON1)%20%26%26%20util.stackFrame.index)%20return%3B%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(!Scratch.Cast.toBoolean(args.CON2))%20%7B%20util.stackFrame.index%20%3D%20false%3B%20util.startBranch(1%2C%20true)%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%20util.stackFrame.index%20%3D%20true%3B%20return%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Sharktilities())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20More%20Operators%0A%2F%2F%20ID%3A%20SPmoreOPs%0A%2F%2F%20Description%3A%20More%20Powerful%20Operator%20Blocks%0A%2F%2F%20By%3A%20SharkPool%0A%0A%2F%2F%20Version%20V.1.0.1%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22More%20Operators%20must%20run%20unsandboxed%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI3Ny4yMjIwMiIgaGVpZ2h0PSI3Ny4yMjIwMiIgdmlld0JveD0iMCwwLDc3LjIyMjAyLDc3LjIyMjAyIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjAxLjM4ODk5LC0xNDEuMzg4OTkpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0yMDMuMzg4OTksMTgwYzAsLTIwLjIxOTcgMTYuMzkxMzEsLTM2LjYxMTAxIDM2LjYxMTAxLC0zNi42MTEwMWMyMC4yMTk3LDAgMzYuNjExMDEsMTYuMzkxMzEgMzYuNjExMDEsMzYuNjExMDFjMCwyMC4yMTk3IC0xNi4zOTEzMSwzNi42MTEwMSAtMzYuNjExMDEsMzYuNjExMDFjLTIwLjIxOTcsMCAtMzYuNjExMDEsLTE2LjM5MTMxIC0zNi42MTEwMSwtMzYuNjExMDF6IiBmaWxsPSIjNTljMDU5IiBzdHJva2U9IiM0NzlhNDciIHN0cm9rZS13aWR0aD0iNCIvPjxwYXRoIGQ9Ik0yMDIuMzg4OTksMTQyLjM4ODk5aDc0LjIyMjAxdjc0LjIyMjAxaC03NC4yMjIwMXoiIGZpbGwtb3BhY2l0eT0iMCIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNMjQ1Ljc0NSwxNTYuODM0MmMtMy4yOTE0NiwtMC4yOTkyMyAtNi4xOTM5MywyLjEyNDQ4IC02LjQ5MzE1LDUuNDQ1ODdsLTAuNzQ4MDYsOC42NDc1Nmg4LjQzODExdjUuOTg0NDdoLTguOTc2NzFsLTEuMzE2NTksMTUuMTcwNjRjLTAuMjcwNTMsMy4xNjE0MiAtMS43ODk1OSw2LjA4NDcyIC00LjIyMTE1LDguMTIzMTljLTIuNDMxNTYsMi4wMzg0NiAtNS41NzUxMiwzLjAyNDAyIC04LjczNTIzLDIuNzM4NjNjLTMuNzYyOTcsLTAuMzE5MDkgLTcuMTU1NywtMi4zOTI0MyAtOS4xNTYyNSwtNS41OTU0OGw0LjQ4ODM2LC00LjQ4ODM2YzAuNzE4MTQsMi4yMTQyNSAyLjY5MzAyLDMuOTE5ODIgNS4xNzY1Nyw0LjEyOTI5YzMuMjkxNDYsMC4yOTkyMyA2LjE5MzkzLC0yLjEyNDQ4IDYuNDkzMTUsLTUuNDQ1ODdsMS4yODY2NiwtMTQuNjMyMDNoLTguOTc2NzF2LTUuOTg0NDdoOS40ODUzOWwwLjgwNzkxLC05LjE4NjE2YzAuNTY4NTIsLTYuNTgyOTEgNi4zNzM0NiwtMTEuNDYwMjcgMTIuOTU2MzgsLTEwLjg2MTgyYzMuOTE5ODIsMC4zMjkxNCA3LjIxMTI5LDIuNTEzNDggOS4xNTYyNSw1LjU5NTQ4bC00LjQ4ODM2LDQuNDg4MzZjLTAuNzE4MTQsLTIuMjE0MjUgLTIuNjkzMDIsLTMuOTE5ODIgLTUuMTc2NTcsLTQuMTI5Mjl6IiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoIGQ9Ik0yNTMuODMzNzYsMjAyLjY5NDY4Yy0xLjQ1NzU2LDAgLTIuNjM5MTUsLTEuMTgxNTkgLTIuNjM5MTUsLTIuNjM5MTV2LTUuMzYyNGgtNS4zNjI0Yy0xLjQ1NzU2LDAgLTIuNjM5MTUsLTEuMTgxNTkgLTIuNjM5MTUsLTIuNjM5MTV2LTIuNDI2OWMwLC0xLjQ1NzU2IDEuMTgxNTksLTIuNjM5MTUgMi42MzkxNSwtMi42MzkxNWg1LjM2MjR2LTUuMzYyNGMwLC0xLjQ1NzU2IDEuMTgxNTksLTIuNjM5MTUgMi42MzkxNSwtMi42MzkxNWgyLjQyNjljMS40NTc1NiwwIDIuNjM5MTUsMS4xODE1OSAyLjYzOTE1LDIuNjM5MTV2NS4zNjI0aDUuMzYyNGMxLjQ1NzU2LDAgMi42MzkxNSwxLjE4MTU5IDIuNjM5MTUsMi42MzkxNXYyLjQyNjljMCwxLjQ1NzU2IC0xLjE4MTU5LDIuNjM5MTUgLTIuNjM5MTUsMi42MzkxNWgtNS4zNjI0djUuMzYyNGMwLDEuNDU3NTYgLTEuMTgxNTksMi42MzkxNSAtMi42MzkxNSwyLjYzOTE1eiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20regeneratedReporters%20%3D%20%5B%22SPmoreOPs_getLetter%22%5D%3B%0A%0A%20%20%2F%2F%20Thank%20you%20LilyMakesThings%20%3C3%0A%20%20vm.on(%22EXTENSION_ADDED%22%2C%20tryUseScratchBlocks)%3B%0A%20%20vm.on(%22BLOCKSINFO_UPDATE%22%2C%20tryUseScratchBlocks)%3B%0A%0A%20%20tryUseScratchBlocks()%3B%0A%20%20function%20tryUseScratchBlocks()%20%7B%0A%20%20%20%20if%20(!window.ScratchBlocks)%20return%3B%0A%20%20%20%20vm.removeListener(%22EXTENSION_ADDED%22%2C%20tryUseScratchBlocks)%3B%0A%20%20%20%20vm.removeListener(%22BLOCKSINFO_UPDATE%22%2C%20tryUseScratchBlocks)%3B%0A%20%20%20%20const%20originalCheck%20%3D%20ScratchBlocks.scratchBlocksUtils.isShadowArgumentReporter%3B%0A%20%20%20%20ScratchBlocks.scratchBlocksUtils.isShadowArgumentReporter%20%3D%20function%20(block)%20%7B%0A%20%20%20%20%20%20const%20result%20%3D%20originalCheck(block)%3B%0A%20%20%20%20%20%20if%20(result)%20return%20true%3B%0A%20%20%20%20%20%20return%20block.isShadow()%20%26%26%20regeneratedReporters.includes(block.type)%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Block%20requires%20a%20Library%2C%20Library%20is%20fetched%20once%20and%20saved%20to%20the%20project%0A%20%20let%20isSolverAdded%20%3D%20false%3B%0A%20%20let%20loadedLibrary%20%3D%20%5B%5D%3B%0A%0A%20%20class%20SPmoreOPs%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPmoreOPs%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22More%20Operators%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%2359C059%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%2350ad50%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23479a47%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22bitLogic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BCON1%5D%20%5BTYPE%5D%20%5BCON2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CON1%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22LOGIC%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CON2%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22with%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BSTRING1%5D%20%5BTYPE%5D%20with%20%5BSTRING2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22apple%20banana%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22WITHS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22apple%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22noContain%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BSTRING1%5D%20not%20contains%20%5BSTRING2%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22apple%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22banana%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22evenOdd%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20%5BNUM%5D%20%5BTYPE%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%202%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EVEN_ODD%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isPrime%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20%5BNUM%5D%20prime%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%202%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22typeString%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BSTRING1%5D%20%5BTYPE%5D%20%5BSTRING2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22STRING%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22value%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Math%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22tryAddSolve%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20isSolverAdded%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Import%20'eval'%20%26%20'solve%20for%20x'%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22evalNum%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!isSolverAdded%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22eval%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%20%3A%20%221%20%2B%201%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22solveFor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!isSolverAdded%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22solve%20for%20%5BVAR%5D%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22VARIABLES%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22x%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%20%3A%20%22x%20%2B%201%20%3D%202%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22root%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BN%5D%20%E2%88%9A%20%5BNUM%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20N%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%20%3A%202%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%20%3A%2025%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22exponent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BNUM%5D%20%5E%20%5BN%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20N%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%20%3A%202%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%20%3A%205%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22lcm%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22lcm%20of%20%5BNUM1%5D%20and%20%5BNUM2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22gcd%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22gcd%20of%20%5BNUM1%5D%20and%20%5BNUM2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22negaAbs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22nega-abs%20of%20%5BNUMBER%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUMBER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22simplifyFrac%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22simplify%20fraction%20%5BNUM%5D%20%2F%20%5BDENOM%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%204%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DENOM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%208%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22roundNear%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22round%20%5BNUMBER%5D%20to%20nearest%20%5BROUND_TYPE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUMBER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%203.1415%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ROUND_TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%203%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tripleOperator%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BNUM1%5D%20%5BOPERATOR1%5D%20%5BNUM2%5D%20%5BOPERATOR2%5D%20%5BNUM3%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERATOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERATOR2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM3%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22quadrupleOperator%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BNUM1%5D%20%5BOPERATOR1%5D%20%5BNUM2%5D%20%5BOPERATOR2%5D%20%5BNUM3%5D%20%5BOPERATOR3%5D%20%5BNUM4%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERATOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERATOR2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM3%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERATOR3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OPERATOR_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM4%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Strings%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22trim%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22trim%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22apple%20%20%20%20%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22insertString%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22insert%20%5BSTRING2%5D%20after%20letter%20%5BNUM%5D%20in%20%5BSTRING1%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22bana%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%203%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22an%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22padding%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pad%20%5BSTRING1%5D%20at%20%5BTYPE%5D%20with%20%5BSTRING2%5D%20at%20length%20%5BNUM%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22anana%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22PADS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22b%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22randomLetter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22random%20%5BLETTER_TYPE%5D%20letter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LETTER_TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22LETTER_TYPE_MENU%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22randomCharRange%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22random%20character%20%5BONE%5D%20to%20%5BTWO%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ONE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22a%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TWO%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22c%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rndString%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20allowDropAnywhere%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22random%20%5BSTRING1%5D%20or%20%5BSTRING2%5D%20with%20%5BCHANCE%5D%25%20chance%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22foo%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22bar%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CHANCE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceKey%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20%5BKEY%5D%20%23%5BORDER%5D%20of%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22apple%20banana%20banana%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22banana%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ORDER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%202%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22orange%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceKeys%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20%5BKEY%5D%20%23%5BORDER%5D%20to%20%23%5BORDER2%5D%20of%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22banana%20banana%20orange%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22banana%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ORDER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ORDER2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%202%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22orange%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tripleJoin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22join%20%5BSTRING1%5D%20%5BSTRING2%5D%20%5BSTRING3%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22quadrupleJoin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22join%20%5BSTRING1%5D%20%5BSTRING2%5D%20%5BSTRING3%5D%20%5BSTRING4%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING4%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22fiveJoin%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22join%20%5BSTRING1%5D%20%5BSTRING2%5D%20%5BSTRING3%5D%20%5BSTRING4%5D%20%5BSTRING5%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING4%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING5%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.XML%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xml%3A%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cblock%20type%3D%22SPmoreOPs_forLetter%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cvalue%20name%3D%22LETTER%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cshadow%20type%3D%22SPmoreOPs_getLetter%22%3E%3C%2Fshadow%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fvalue%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cvalue%20name%3D%22STRING%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cshadow%20type%3D%22text%22%3E%3Cfield%20name%3D%22TEXT%22%3Ebanana%3C%2Ffield%3E%3C%2Fshadow%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fvalue%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fblock%3E%60%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22forLetter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%20blockType%3A%20Scratch.BlockType.LOOP%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22for%20each%20%5BLETTER%5D%20in%20%5BSTRING%5D%22%2C%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20LETTER%3A%20%7B%7D%2C%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22banana%22%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getLetter%22%2C%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%20hideFromPalette%3A%20true%2C%20text%3A%20%22letter%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20LOGIC%3A%20%5B%22and%22%2C%20%22nand%22%2C%20%22or%22%2C%20%22nor%22%2C%20%22xor%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20WITHS%3A%20%5B%22starts%22%2C%20%22ends%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20EVEN_ODD%3A%20%5B%22even%22%2C%20%22odd%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20PADS%3A%20%5B%22start%22%2C%20%22end%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20LETTER_TYPE_MENU%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22lowercase%22%2C%20%22uppercase%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20OPERATOR_MENU%3A%20%5B%22%2B%22%2C%20%22-%22%2C%20%22*%22%2C%20%22%2F%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22%7C%7C%22%2C%20%22%3F%3F%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20VARIABLES%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22a%22%2C%22b%22%2C%22c%22%2C%22d%22%2C%22e%22%2C%22f%22%2C%22g%22%2C%22h%22%2C%22i%22%2C%22j%22%2C%22k%22%2C%22l%22%2C%22m%22%2C%22n%22%2C%22o%22%2C%22p%22%2C%22q%22%2C%22r%22%2C%22s%22%2C%22t%22%2C%22u%22%2C%22v%22%2C%22w%22%2C%22x%22%2C%22y%22%2C%22z%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22A%22%2C%22B%22%2C%22C%22%2C%22D%22%2C%22E%22%2C%22F%22%2C%22G%22%2C%22H%22%2C%22I%22%2C%22J%22%2C%22K%22%2C%22L%22%2C%22M%22%2C%22N%22%2C%22O%22%2C%22P%22%2C%22Q%22%2C%22R%22%2C%22S%22%2C%22T%22%2C%22U%22%2C%22V%22%2C%22W%22%2C%22X%22%2C%22Y%22%2C%22Z%22%0A%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20tryAddSolve()%20%7B%0A%20%20%20%20%20%20if%20(navigator.onLine)%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20window.alert(%22These%20Blocks%20require%20a%20Math%20Library%20to%20work.%20Dont%20worry%2C%20this%20Library%20is%20loaded%20Once%20(editor)%20and%20is%20Saved%20to%20the%20Project%22)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20links%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fnerdamer%40latest%2Fnerdamer.core.js%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fnerdamer%40latest%2FAlgebra.js%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fnerdamer%40latest%2FCalculus.js%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fnerdamer%40latest%2FSolve.js%22%0A%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20texts%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20links.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20Scratch.fetch(links%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!response.ok)%20throw%20new%20Error(%22Fetch%20failed%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20scriptText%20%3D%20await%20response.text()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20scriptElement%20%3D%20document.createElement(%22script%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20scriptElement.textContent%20%3D%20scriptText%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20texts.push(scriptText)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.body.appendChild(scriptElement)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20isSolverAdded%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20vm.extensionManager.refreshBlocks()%3B%0A%20%20%20%20%20%20%20%20%20%20loadedLibrary%20%3D%20texts%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!Scratch.extensions.isPenguinMod)%20vm.runtime.extensionStorage%5B%22SPmoreOPs%22%5D%20%3D%20%7B%20loaded%20%3A%20true%2C%20library%20%3A%20texts%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20%7B%20alert(%22Fetch%20Failed%2C%20Unable%20to%20Import%20this%20Block%22)%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%20alert(%22You%20Must%20be%20Online%20to%20Import%20this%20Block%22)%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20bitLogic(args)%20%7B%0A%20%20%20%20%20%20const%20con1%20%3D%20Scratch.Cast.toBoolean(args.CON1)%3B%0A%20%20%20%20%20%20const%20con2%20%3D%20Scratch.Cast.toBoolean(args.CON2)%3B%0A%20%20%20%20%20%20switch%20(args.TYPE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22and%22%20%3A%20return%20con1%20%26%26%20con2%3B%0A%20%20%20%20%20%20%20%20case%20%22nand%22%3A%20return%20!(con1%20%26%26%20con2)%3B%0A%20%20%20%20%20%20%20%20case%20%22or%22%20%3A%20return%20con1%20%7C%7C%20con2%3B%0A%20%20%20%20%20%20%20%20case%20%22nor%22%3A%20return%20!(con1%20%7C%7C%20con2)%3B%0A%20%20%20%20%20%20%20%20case%20%22xor%22%3A%20return%20con1%20!%3D%3D%20con2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20with(args)%20%7B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22starts%22)%20return%20args.STRING1.startsWith(args.STRING2)%3B%0A%20%20%20%20%20%20else%20return%20args.STRING1.endsWith(args.STRING2)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20noContain(args)%20%7B%20return%20!vm.runtime.ext_scratch3_operators.contains(args)%20%7D%0A%0A%20%20%20%20typeString(args)%20%7B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22%7C%7C%22)%20return%20args.STRING1%20%7C%7C%20args.STRING2%3B%0A%20%20%20%20%20%20else%20return%20args.STRING1%20%3D%3D%3D%20%22undefined%22%20%7C%7C%20args.STRING1%20%3D%3D%3D%20%22null%22%20%3F%20args.STRING2%20%3A%20args.STRING1%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20evenOdd(args)%20%7B%0A%20%20%20%20%20%20const%20n%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22even%22)%20return%20n%20%25%202%20%3D%3D%3D%200%0A%20%20%20%20%20%20else%20return%20n%20%25%202%20!%3D%3D%200%0A%20%20%20%20%7D%0A%0A%20%20%20%20isPrime(args)%20%7B%0A%20%20%20%20%20%20const%20n%20%3D%20Math.abs(Scratch.Cast.toNumber(args.NUM))%3B%0A%20%20%20%20%20%20if%20(n%20%3C%3D%201)%20return%20false%3B%0A%20%20%20%20%20%20if%20(n%20%3C%3D%203)%20return%20true%3B%0A%20%20%20%20%20%20if%20(n%20%25%202%20%3D%3D%3D%200%20%7C%7C%20n%20%25%203%20%3D%3D%3D%200)%20return%20false%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%205%3B%20i%20*%20i%20%3C%3D%20n%3B%20i%20%2B%3D%206)%20%7B%0A%20%20%20%20%20%20%20%20if%20(n%20%25%20i%20%3D%3D%3D%200%20%7C%7C%20n%20%25%20(i%20%2B%202)%20%3D%3D%3D%200)%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20requires%20loading%20library%20first%0A%20%20%20%20evalNum(args)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20node%20%3D%20args.STRING.replace(%2F%5Cs%2B%2Fg%2C%20%22%22)%3B%0A%20%20%20%20%20%20%20%20const%20variableName%20%3D%20this.getUnusedVar(node)%3B%0A%20%20%20%20%20%20%20%20if%20(variableName%20%3D%3D%3D%20undefined)%20return%20%22No%20solution%20found%22%3B%0A%20%20%20%20%20%20%20%20const%20solution%20%3D%20nerdamer.solve(%60%24%7Bnode%7D%3D%24%7BvariableName%7D%60%2C%20variableName)%3B%0A%20%20%20%20%20%20%20%20return%20solution%20%3F%20this.fixSolution(solution.toString())%20%3A%20%22No%20solution%20found%22%3B%0A%20%20%20%20%20%20%7D%20catch%20%7B%20return%20%22undefined%22%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20solveFor(args)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20node%20%3D%20args.STRING.replace(%2F%5Cs%2B%2Fg%2C%20%22%22)%3B%0A%20%20%20%20%20%20%20%20const%20solution%20%3D%20nerdamer.solve(node%2C%20args.VAR)%3B%0A%20%20%20%20%20%20%20%20return%20solution%20%3F%20this.fixSolution(solution.toString())%20%3A%20%22No%20solution%20found%22%3B%0A%20%20%20%20%20%20%7D%20catch%20%7B%20return%20%22undefined%22%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20fixSolution(sol)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Sometimes%20the%20Solution%20doesnt%20fully%20solve%20ex%3A%20returns%2012%2F5%0A%20%20%20%20%20%20%2F%2F%20we%20cant%20solve%20for%20variables%2C%20return%20them%0A%20%20%20%20%20%20const%20hasVars%20%3D%20%2F%5Ba-zA-Z%5D%2F.test(sol)%3B%0A%20%20%20%20%20%20const%20sols%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20(hasVars)%20return%20sol%3B%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20sol%20%3D%20sol.replace(%22%5B%22%2C%20%22%5B%5C%22%22).replace(%22%5D%22%2C%20%22%5C%22%5D%22).replace(%22%2C%22%2C%20%22%5C%22%2C%5C%22%22)%3B%0A%20%20%20%20%20%20%20%20sol%20%3D%20JSON.parse(sol)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20sol.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20sols.push(eval(sol%5Bi%5D))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(sols)%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20root(args)%20%7B%20return%20Math.pow(Scratch.Cast.toNumber(args.NUM)%2C%201%20%2F%20Scratch.Cast.toNumber(args.N))%20%7D%0A%0A%20%20%20%20exponent(args)%20%7B%20return%20Math.pow(Scratch.Cast.toNumber(args.NUM)%2C%20Scratch.Cast.toNumber(args.N))%20%7D%0A%0A%20%20%20%20simplifyFrac(args)%20%7B%0A%20%20%20%20%20%20const%20numerator%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0A%20%20%20%20%20%20const%20denominator%20%3D%20Scratch.Cast.toNumber(args.DENOM)%3B%0A%20%20%20%20%20%20const%20gcd%20%3D%20(a%2C%20b)%20%3D%3E%20(b%20%3F%20gcd(b%2C%20a%20%25%20b)%20%3A%20a)%3B%0A%20%20%20%20%20%20const%20gcdValue%20%3D%20gcd(numerator%2C%20denominator)%3B%0A%20%20%20%20%20%20const%20result%20%3D%20JSON.stringify(%5Bnumerator%20%2F%20gcdValue%2C%20denominator%20%2F%20gcdValue%5D)%3B%0A%20%20%20%20%20%20return%20result.includes(%22null%22)%20%3F%20%22%5Bundefined%5D%22%20%3A%20result%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gcd(args)%20%7B%0A%20%20%20%20%20%20let%20num1%20%3D%20Scratch.Cast.toNumber(args.NUM1)%3B%0A%20%20%20%20%20%20let%20num2%20%3D%20Scratch.Cast.toNumber(args.NUM2)%3B%0A%20%20%20%20%20%20while%20(num2%20!%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20let%20t%20%3D%20num2%3B%0A%20%20%20%20%20%20%20%20num2%20%3D%20num1%20%25%20num2%3B%0A%20%20%20%20%20%20%20%20num1%20%3D%20t%3B%0A%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20num1%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20lcm(args)%20%7B%0A%20%20%20%20%20%20const%20num1%20%3D%20Scratch.Cast.toNumber(args.NUM1)%3B%0A%20%20%20%20%20%20const%20num2%20%3D%20Scratch.Cast.toNumber(args.NUM2)%3B%0A%20%20%20%20%20%20return%20Math.abs(num1%20*%20num2)%20%2F%20this.gcd(%7B%20NUM1%20%3A%20num1%2C%20NUM2%20%3A%20num2%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20negaAbs(%7B%20NUMBER%20%7D)%20%7B%20return%20-Math.abs(Scratch.Cast.toNumber(NUMBER))%20%7D%0A%0A%20%20%20%20roundNear(args)%20%7B%0A%20%20%20%20%20%20const%20precision%20%3D%20Math.max(0%2C%20Math.round(Scratch.Cast.toNumber(args.ROUND_TYPE)))%3B%0A%20%20%20%20%20%20const%20multiplier%20%3D%20Math.pow(10%2C%20precision)%3B%0A%20%20%20%20%20%20return%20Math.round(args.NUMBER%20*%20multiplier)%20%2F%20multiplier%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20tripleOperator(args)%20%7B%0A%20%20%20%20%20%20const%20nums%20%3D%20%5BScratch.Cast.toNumber(args.NUM1)%2C%20Scratch.Cast.toNumber(args.NUM2)%2C%20Scratch.Cast.toNumber(args.NUM3)%5D%3B%0A%20%20%20%20%20%20return%20eval(%60%24%7Bnums%5B0%5D%7D%20%24%7Bargs.OPERATOR1%7D%20%24%7Bnums%5B1%5D%7D%20%24%7Bargs.OPERATOR2%7D%20%24%7Bnums%5B2%5D%7D%60)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20quadrupleOperator(args)%20%7B%0A%20%20%20%20%20%20const%20nums%20%3D%20%5BScratch.Cast.toNumber(args.NUM1)%2C%20Scratch.Cast.toNumber(args.NUM2)%2C%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(args.NUM3)%2C%20Scratch.Cast.toNumber(args.NUM4)%5D%3B%0A%20%20%20%20%20%20return%20eval(%60%24%7Bnums%5B0%5D%7D%20%24%7Bargs.OPERATOR1%7D%20%24%7Bnums%5B1%5D%7D%20%24%7Bargs.OPERATOR2%7D%20%24%7Bnums%5B2%5D%7D%20%24%7Bargs.OPERATOR3%7D%20%24%7Bnums%5B3%5D%7D%60)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20trim(args)%20%7B%20return%20Scratch.Cast.toString(args.STRING).trim()%20%7D%0A%0A%20%20%20%20padding(args)%20%7B%0A%20%20%20%20%20%20const%20length%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22start%22)%20return%20args.STRING1.padStart(length%2C%20args.STRING2)%3B%0A%20%20%20%20%20%20else%20return%20args.STRING1.padEnd(length%2C%20args.STRING2)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20insertString(args)%20%7B%0A%20%20%20%20%20%20const%20string1%20%3D%20Scratch.Cast.toString(args.STRING1)%3B%0A%20%20%20%20%20%20const%20string2%20%3D%20Scratch.Cast.toString(args.STRING2)%3B%0A%20%20%20%20%20%20const%20n%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0A%20%20%20%20%20%20const%20string1Array%20%3D%20string1.split(%22%22)%3B%0A%20%20%20%20%20%20string1Array.splice(n%2C%200%2C%20...string2.split(%22%22))%3B%0A%20%20%20%20%20%20return%20string1Array.join(%22%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20randomLetter(args)%20%7B%0A%20%20%20%20%20%20let%20letters%20%3D%20%22abcdefghijklmnopqrstuvwxyz%22%3B%0A%20%20%20%20%20%20if%20(args.LETTER_TYPE%20%3D%3D%3D%20%22uppercase%22)%20letters%20%3D%20letters.toUpperCase()%3B%0A%20%20%20%20%20%20return%20letters.charAt(Math.floor(Math.random()%20*%20letters.length))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceKey(args)%20%7B%0A%20%20%20%20%20%20const%20regex%20%3D%20new%20RegExp(args.KEY%2C%20%22g%22)%3B%0A%20%20%20%20%20%20let%20index%20%3D%200%3B%0A%20%20%20%20%20%20return%20Scratch.Cast.toString(args.STRING).replace(regex%2C%20(match)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20index%2B%2B%3B%0A%20%20%20%20%20%20%20%20return%20index%20%3D%3D%3D%20Scratch.Cast.toNumber(args.ORDER)%20%3F%20args.REPLACE%20%3A%20match%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceKeys(args)%20%7B%0A%20%20%20%20%20%20const%20regex%20%3D%20new%20RegExp(args.KEY%2C%20%22g%22)%3B%0A%20%20%20%20%20%20let%20index%20%3D%200%3B%0A%20%20%20%20%20%20const%20ord1%20%3D%20Scratch.Cast.toNumber(args.ORDER)%3B%0A%20%20%20%20%20%20const%20ord2%20%3D%20Scratch.Cast.toNumber(args.ORDER2)%3B%0A%20%20%20%20%20%20const%20order2%20%3D%20ord1%20%3E%20ord2%20%3F%20ord1%20%3A%20ord2%3B%0A%20%20%20%20%20%20return%20Scratch.Cast.toString(args.STRING).replace(regex%2C%20(match)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20index%2B%2B%3B%0A%20%20%20%20%20%20%20%20return%20index%20%3E%3D%20ord1%20%26%26%20index%20%3C%3D%20order2%20%3F%20args.REPLACE%20%3A%20match%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20randomCharRange(args)%20%7B%20%0A%20%20%20%20%20%20let%20ONE%20%3D%20args.ONE.charCodeAt(0)%3B%0A%20%20%20%20%20%20let%20TWO%20%3D%20args.TWO.charCodeAt(0)%3B%0A%20%20%20%20%20%20return%20String.fromCharCode(Math.floor(Math.random()%20*%20(TWO%20-%20ONE%20%2B%201)%20%2B%20ONE))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rndString(args)%20%7B%20return%20Math.random()%20%3E%20args.CHANCE%20%2F%20100%20%3F%20args.STRING2%20%3A%20args.STRING1%20%7D%0A%0A%20%20%20%20tripleJoin(%7B%20STRING1%2C%20STRING2%2C%20STRING3%20%7D)%20%7B%20return%20%60%24%7BSTRING1%7D%24%7BSTRING2%7D%24%7BSTRING3%7D%60%20%7D%0A%20%20%20%20quadrupleJoin(%7B%20STRING1%2C%20STRING2%2C%20STRING3%2C%20STRING4%20%7D)%20%7B%20return%20%60%24%7BSTRING1%7D%24%7BSTRING2%7D%24%7BSTRING3%7D%24%7BSTRING4%7D%60%20%7D%0A%20%20%20%20fiveJoin(%7B%20STRING1%2C%20STRING2%2C%20STRING3%2C%20STRING4%2C%20STRING5%20%7D)%20%7B%20return%20%60%24%7BSTRING1%7D%24%7BSTRING2%7D%24%7BSTRING3%7D%24%7BSTRING4%7D%24%7BSTRING5%7D%60%20%7D%0A%0A%20%20%20%20forLetter(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20if%20(util.stackFrame.index%20%3D%3D%3D%20undefined)%20util.stackFrame.index%20%3D%200%3B%0A%20%20%20%20%20%20if%20(util.thread.stackFrames%5B0%5D.SPletter%20%3D%3D%3D%20undefined)%20util.thread.stackFrames%5B0%5D.SPletter%20%3D%20%22%22%3B%0A%20%20%20%20%20%20if%20(util.stackFrame.index%20%3C%20string.length)%20%7B%0A%20%20%20%20%20%20%20%20util.thread.stackFrames%5B0%5D.SPletter%20%3D%20string%5Butil.stackFrame.index%5D%3B%0A%20%20%20%20%20%20%20%20util.stackFrame.index%2B%2B%3B%0A%20%20%20%20%20%20%20%20util.startBranch(1%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20getLetter(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20stack%20%3D%20util.thread.stackFrames%3B%0A%20%20%20%20%20%20if%20(stack%20%3D%3D%3D%20undefined)%20return%20%22%22%3B%0A%20%20%20%20%20%20const%20params%20%3D%20stack%5B0%5D.SPletter%3B%0A%20%20%20%20%20%20return%20params%20!%3D%3D%20undefined%20%3F%20params%20%3A%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helper%20Functions%0A%20%20%20%20getUnusedVar(expression)%20%7B%0A%20%20%20%20%20%20const%20avoidList%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%22a%22%2C%22b%22%2C%22c%22%2C%22d%22%2C%22e%22%2C%22f%22%2C%22g%22%2C%22h%22%2C%22i%22%2C%22j%22%2C%22k%22%2C%22l%22%2C%22m%22%2C%22n%22%2C%22o%22%2C%22p%22%2C%22q%22%2C%22r%22%2C%22s%22%2C%22t%22%2C%22u%22%2C%22v%22%2C%22w%22%2C%22x%22%2C%22y%22%2C%22z%22%2C%0A%20%20%20%20%20%20%20%20%22A%22%2C%22B%22%2C%22C%22%2C%22D%22%2C%22E%22%2C%22F%22%2C%22G%22%2C%22H%22%2C%22I%22%2C%22J%22%2C%22K%22%2C%22L%22%2C%22M%22%2C%22N%22%2C%22O%22%2C%22P%22%2C%22Q%22%2C%22R%22%2C%22S%22%2C%22T%22%2C%22U%22%2C%22V%22%2C%22W%22%2C%22X%22%2C%22Y%22%2C%22Z%22%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20const%20usedVariables%20%3D%20expression.split(%22%22).filter(char%20%3D%3E%20%2F%5Ba-zA-Z%5D%2F.test(char))%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20avoidList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!usedVariables.includes(avoidList%5Bi%5D))%20return%20avoidList%5Bi%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20If%20all%20avoid%20list%20variables%20are%20used%2C%20default%20to%20unsolvable%20(overflow)%0A%20%20%20%20%20%20return%20undefined%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20PenguinMod%20Storage%0A%20%20%20%20serialize()%20%7B%0A%20%20%20%20%20%20return%20%7B%20SPmoreOPs%20%3A%20%7B%20loaded%20%3A%20isSolverAdded%2C%20library%20%3A%20loadedLibrary%20%7D%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20deserialize(data)%20%7B%0A%20%20%20%20%20%20if%20(data.SPmoreOPs%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20isSolverAdded%20%3D%20data.SPmoreOPs.loaded%3B%0A%20%20%20%20%20%20%20%20loadedLibrary%20%3D%20data.SPmoreOPs.library%3B%0A%20%20%20%20%20%20%20%20if%20(loadedLibrary.length%20%3D%3D%3D%200)%20return%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20loadedLibrary.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20scriptElement%20%3D%20document.createElement(%22script%22)%3B%0A%20%20%20%20%20%20%20%20%20%20scriptElement.textContent%20%3D%20loadedLibrary%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20document.body.appendChild(scriptElement)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20SPmoreOPs())%3B%0A%20%20if%20(!Scratch.extensions.isPenguinMod)%20%7B%0A%20%20%20%20const%20storage%20%3D%20vm.runtime.extensionStorage%5B%22SPmoreOPs%22%5D%3B%0A%20%20%20%20if%20(storage%20%3D%3D%3D%20undefined)%20return%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20storage.library.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20scriptElement%20%3D%20document.createElement(%22script%22)%3B%0A%20%20%20%20%20%20scriptElement.textContent%20%3D%20storage.library%5Bi%5D%3B%0A%20%20%20%20%20%20document.body.appendChild(scriptElement)%3B%0A%20%20%20%20%7D%0A%20%20%20%20isSolverAdded%20%3D%20true%3B%0A%20%20%20%20loadedLibrary%20%3D%20storage.library%3B%0A%20%20%20%20vm.extensionManager.refreshBlocks()%3B%0A%20%20%7D%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Extra%20Controls%0D%0A%2F%2F%20ID%3A%20SPadvControl%0D%0A%2F%2F%20Description%3A%20New%20Advanced%20Control%20Blocks%0D%0A%2F%2F%20By%3A%20SharkPool%0D%0A%0D%0A%2F%2F%20Version%20V.1.4.8%0D%0A%0D%0A(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Extra%20Controls%20must%20run%20unsandboxed%22)%3B%0D%0A%0D%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0D%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0D%0A%20%20const%20regeneratedReporters%20%3D%20%5B%22SPadvControl_threadArgs%22%5D%3B%0D%0A%0D%0A%20%20const%20menuIconURI%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2OS41NjUyMyIgaGVpZ2h0PSI2OS41NjUyMyIgdmlld0JveD0iMCwwLDY5LjU2NTIzLDY5LjU2NTIzIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjA1LjIxNzM4LC0xNDUuMjE3MzgpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTIwNy4yMTczOSwxODBjMCwtMTguMTA1MzMgMTQuNjc3MjgsLTMyLjc4MjYxIDMyLjc4MjYxLC0zMi43ODI2MWMxOC4xMDUzNCwwIDMyLjc4MjYyLDE0LjY3NzI4IDMyLjc4MjYyLDMyLjc4MjYxYzAsMTguMTA1MzMgLTE0LjY3NzI4LDMyLjc4MjYxIC0zMi43ODI2MiwzMi43ODI2MWMtMTguMTA1MzMsMCAtMzIuNzgyNjEsLTE0LjY3NzI4IC0zMi43ODI2MSwtMzIuNzgyNjF6IiBmaWxsPSIjZmZhYjE5IiBzdHJva2U9IiNjZjhiMTciIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjYwLjE2NjY3LDE4MGgtNDAuMzMzMzMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjYwLjE2NjY3LDE2Ny4zOTU4NGgtNDAuMzMzMzMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjYwLjE2NjY3LDE5Mi42MDQxN2gtNDAuMzMzMzMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjIzLjgzMzM0LDE4MC4xNjY2N2MwLC0zLjQwNTc1IDIuNzYwOTEsLTYuMTY2NjYgNi4xNjY2NiwtNi4xNjY2NmMzLjQwNTc1LDAgNi4xNjY2NiwyLjc2MDkxIDYuMTY2NjYsNi4xNjY2NmMwLDMuNDA1NzUgLTIuNzYwOTEsNi4xNjY2NyAtNi4xNjY2Niw2LjE2NjY3Yy0zLjQwNTc1LDAgLTYuMTY2NjYsLTIuNzYwOTIgLTYuMTY2NjYsLTYuMTY2Njd6IiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiNmZmFiMTkiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjQzLjgzMzM0LDE2Ny41YzAsLTMuNDA1NzUgMi43NjA5MSwtNi4xNjY2NiA2LjE2NjY2LC02LjE2NjY2YzMuNDA1NzUsMCA2LjE2NjY3LDIuNzYwOTEgNi4xNjY2Nyw2LjE2NjY2YzAsMy40MDU3NSAtMi43NjA5MSw2LjE2NjY2IC02LjE2NjY3LDYuMTY2NjZjLTMuNDA1NzUsMCAtNi4xNjY2NiwtMi43NjA5MSAtNi4xNjY2NiwtNi4xNjY2NnoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmYWIxOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yNDAuNjY2NjcsMTkyLjY2NjY3YzAsLTMuNDA1NzUgMi43NjA5MSwtNi4xNjY2NiA2LjE2NjY2LC02LjE2NjY2YzMuNDA1NzUsMCA2LjE2NjY2LDIuNzYwOTEgNi4xNjY2Niw2LjE2NjY2YzAsMy40MDU3NSAtMi43NjA5MSw2LjE2NjY2IC02LjE2NjY2LDYuMTY2NjZjLTMuNDA1NzUsMCAtNi4xNjY2NiwtMi43NjA5MSAtNi4xNjY2NiwtNi4xNjY2NnoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmYWIxOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yMjMuODMzMzQsMTgwLjE2NjY3YzAsLTMuNDA1NzUgMi43NjA5MSwtNi4xNjY2NiA2LjE2NjY2LC02LjE2NjY2YzMuNDA1NzUsMCA2LjE2NjY2LDIuNzYwOTEgNi4xNjY2Niw2LjE2NjY2YzAsMy40MDU3NSAtMi43NjA5MSw2LjE2NjY3IC02LjE2NjY2LDYuMTY2NjdjLTMuNDA1NzUsMCAtNi4xNjY2NiwtMi43NjA5MiAtNi4xNjY2NiwtNi4xNjY2N3oiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmYWIxOSIgc3Ryb2tlLXdpZHRoPSIwIiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yNDMuODMzMzQsMTY3LjVjMCwtMy40MDU3NSAyLjc2MDkxLC02LjE2NjY2IDYuMTY2NjYsLTYuMTY2NjZjMy40MDU3NSwwIDYuMTY2NjcsMi43NjA5MSA2LjE2NjY3LDYuMTY2NjZjMCwzLjQwNTc1IC0yLjc2MDkxLDYuMTY2NjYgLTYuMTY2NjcsNi4xNjY2NmMtMy40MDU3NSwwIC02LjE2NjY2LC0yLjc2MDkxIC02LjE2NjY2LC02LjE2NjY2eiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZmZhYjE5IiBzdHJva2Utd2lkdGg9IjAiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8%2BPHBhdGggZD0iTTI0MC42NjY2NywxOTIuNjY2NjdjMCwtMy40MDU3NSAyLjc2MDkxLC02LjE2NjY2IDYuMTY2NjYsLTYuMTY2NjZjMy40MDU3NSwwIDYuMTY2NjYsMi43NjA5MSA2LjE2NjY2LDYuMTY2NjZjMCwzLjQwNTc1IC0yLjc2MDkxLDYuMTY2NjYgLTYuMTY2NjYsNi4xNjY2NmMtMy40MDU3NSwwIC02LjE2NjY2LC0yLjc2MDkxIC02LjE2NjY2LC02LjE2NjY2eiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZmZhYjE5IiBzdHJva2Utd2lkdGg9IjAiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8%2BPC9nPjwvZz48L3N2Zz4%3D%22%3B%0D%0A%0D%0A%20%20const%20breakIcon%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NS43OTU1MSIgaGVpZ2h0PSI2MC4wNzQ5MiIgdmlld0JveD0iMCwwLDY1Ljc5NTUxLDYwLjA3NDkyIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjA3LjEwMjI1LC0xNDkuOTYyNTQpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSJub25lIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTIyOS4xNzQzNSwxNTQuNDM0MjJjMCwxLjIgMC41LDIuNCAxLjEsMi42YzAuOSwwLjMgMC45LDEuNSAwLjMsNC4zYy0wLjcsMyAtMS42LDQuMSAtMy45LDQuOGMtMS43LDAuNSAtNC44LDIuMyAtNi45LDMuOGMtNC44LDMuNSAtNy4yLDMuNiAtMTAuMywwLjdjLTMuNywtMy41IC0zLjEsLTcuOCAyLC0xM2MyLjMsLTIuNCA1LjgsLTUuMSA3LjcsLTZjNi4xLC0zIDEwLC0xLjkgMTAsMi44ek0yMjAuNjc0MzUsMTU1LjczNDIyYy00LjgsMyAtOS44LDguOCAtOS4yLDEwLjVjMC45LDIuMyAzLjEsMiA4LjQsLTEuNGMyLjYsLTEuNyA1LjMsLTMgNiwtM2MwLjcsMCAxLjMsLTAuNSAxLjMsLTFjMCwtMC42IC0wLjYsLTEgLTEuNCwtMWMtMS45LDAgLTIuOSwtMyAtMS41LC00LjZjMS42LC0yIC0wLjEsLTEuNyAtMy42LDAuNXoiIGZpbGwtb3BhY2l0eT0iMC4xNTY4NiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPHBhdGggZD0iTTIyNC4zMDc2NSwxNTUuMTk2OTJjLTEuNCwxLjYgLTAuMzgzODUsNC42Mjk4NyAxLjUxNjE1LDQuNjI5ODdjMC44LDAgMS40MDA1NSwwLjQwNzYgMS40MDA1NSwxLjAwNzZjMCwwLjUgLTAuNjAwNiwxLjAwNzU1IC0xLjMwMDYsMS4wMDc1NWMtMC43LDAgLTMuNDQyMzQsMS4zNDE3OCAtNi4wNDIzNCwzLjA0MTc4Yy01LjMsMy40IC03LjU0ODE1LDMuNjc5IC04LjQ0ODE1LDEuMzc5Yy0wLjYsLTEuNyA0LjQ1NDE2LC03LjU3Njc1IDkuMjU0MTYsLTEwLjU3Njc1YzMuNSwtMi4yIDUuMjIwMjIsLTIuNDg5MDQgMy42MjAyMiwtMC40ODkwNHoiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O25vSG92ZXImcXVvdDs6ZmFsc2UsJnF1b3Q7b3JpZ0l0ZW0mcXVvdDs6WyZxdW90O1BhdGgmcXVvdDsseyZxdW90O2FwcGx5TWF0cml4JnF1b3Q7OnRydWUsJnF1b3Q7c2VnbWVudHMmcXVvdDs6W1tbMjIwLjY3NDM0LDE1NS43MzQyMl0sWzMuNSwtMi4yXSxbLTQuOCwzXV0sW1syMTEuNDc0MzQsMTY2LjIzNDIyXSxbLTAuNiwtMS43XSxbMC45LDIuM11dLFtbMjE5Ljg3NDM0LDE2NC44MzQyMl0sWy01LjMsMy40XSxbMi42LC0xLjddXSxbWzIyNS44NzQzNCwxNjEuODM0MjJdLFstMC43LDBdLFswLjcsMF1dLFtbMjI3LjE3NDM0LDE2MC44MzQyMl0sWzAsMC41XSxbMCwtMC42XV0sW1syMjUuNzc0MzQsMTU5LjgzNDIyXSxbMC44LDBdLFstMS45LDBdXSxbWzIyNC4yNzQzNCwxNTUuMjM0MjJdLFstMS40LDEuNl0sWzEuNiwtMl1dXSwmcXVvdDtjbG9zZWQmcXVvdDs6dHJ1ZSwmcXVvdDtmaWxsQ29sb3ImcXVvdDs6WzAsMCwwXX1dfSIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48cGF0aCBkPSJNMjQxLjQ3NDM1LDE1MC41MzQyMmw2LjEsMC42YzYuOSwwLjcgMTQsMi45IDE3LjQsNS41YzIuMSwxLjYgMi4yLDIuMiAxLjMsNi4yYy0xLjgsOC4yIC05LjYsMTIuOSAtMTUsOS4xYy0xLjYsLTEuMiAtMy40LC0yLjEgLTQsLTIuMWMtMS45LDAgLTEwLjEsLTguMiAtMTAuMSwtMTAuMWMwLC0xIDEsLTMuNCAyLjIsLTUuNXpNMjQyLjY3NDM1LDE1Ny4yMzQyMmMtMS41LDIuMiAtMS40LDIuNiAwLjgsNWMxLjMsMS40IDIuOCwyLjYgMy4yLDIuNmMwLjUsMCAyLjgsMC45IDUuMiwyLjFjNCwxLjkgNC41LDIgNi43LDAuNWMxLjQsLTAuOCAyLjcsLTMgMy4xLC00LjdjMC45LC00IC0wLjYsLTUuMyAtNy43LC02LjhjLTcuNCwtMS42IC05LjYsLTEuNCAtMTEuMywxLjN6IiBmaWxsLW9wYWNpdHk9IjAuMTU2ODYiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoIGQ9Ik0yNTMuOTkyMDksMTU1Ljg4NzQ3YzcuMSwxLjUgOC42MzE5OSwyLjg1MTk3IDcuNzMxOTksNi44NTE5N2MtMC40LDEuNyAtMS43MTE1NSwzLjkyNzA2IC0zLjExMTU1LDQuNzI3MDZjLTIuMiwxLjUgLTIuNzM3MzUsMS40MTc3MSAtNi43MzczNSwtMC40ODIyOWMtMi40LC0xLjIgLTQuNzQzNDQsLTIuMTIzODQgLTUuMjQzNDQsLTIuMTIzODRjLTAuNCwwIC0xLjkwNzI4LC0xLjIyMjkyIC0zLjIwNzI4LC0yLjYyMjkyYy0yLjIsLTIuNCAtMi4yOTUwMSwtMi44MjUyMiAtMC43OTUwMSwtNS4wMjUyMmMxLjcsLTIuNyAzLjk2MjY1LC0yLjkyNDc2IDExLjM2MjY1LC0xLjMyNDc2eiIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7bm9Ib3ZlciZxdW90OzpmYWxzZSwmcXVvdDtvcmlnSXRlbSZxdW90OzpbJnF1b3Q7UGF0aCZxdW90Oyx7JnF1b3Q7YXBwbHlNYXRyaXgmcXVvdDs6dHJ1ZSwmcXVvdDtzZWdtZW50cyZxdW90OzpbW1syNDIuNjc0MzQsMTU3LjIzNDIyXSxbMS43LC0yLjddLFstMS41LDIuMl1dLFtbMjQzLjQ3NDM0LDE2Mi4yMzQyMl0sWy0yLjIsLTIuNF0sWzEuMywxLjRdXSxbWzI0Ni42NzQzNCwxNjQuODM0MjJdLFstMC40LDBdLFswLjUsMF1dLFtbMjUxLjg3NDM0LDE2Ni45MzQyMl0sWy0yLjQsLTEuMl0sWzQsMS45XV0sW1syNTguNTc0MzQsMTY3LjQzNDIyXSxbLTIuMiwxLjVdLFsxLjQsLTAuOF1dLFtbMjYxLjY3NDM0LDE2Mi43MzQyMl0sWy0wLjQsMS43XSxbMC45LC00XV0sW1syNTMuOTc0MzQsMTU1LjkzNDIyXSxbNy4xLDEuNV0sWy03LjQsLTEuNl1dXSwmcXVvdDtjbG9zZWQmcXVvdDs6dHJ1ZSwmcXVvdDtmaWxsQ29sb3ImcXVvdDs6WzAsMCwwXX1dfSIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48cGF0aCBkPSJNMjQ3LjM3NDM1LDE3NC45MzQyMmw0LjQsMi4xYzQuMywyLjEgNC4zLDIuMSA3LjksMC4yYzUuMywtMi44IDcsLTEuMyA3LDYuNmMwLjEsNS43IDAuMyw2LjMgMi44LDcuNmMzLjQsMS44IDQuNCw1LjYgMi40LDguOGMtMS4yLDEuOCAtNC44LDMuNSAtMTQuMSw2LjZjLTE2LjYsNS41IC0xNi41LDUuNiAtMjIuNSwtMTMuNGMtMy4yLC05LjkgLTMuMiwtMTAgLTEuMywtMTIuNWMyLC0yLjcgNi42LC0zLjQgMTAuNCwtMS43YzEuMywwLjYgMS45LDAuMiAyLjQsLTEuOHpNMjUyLjI3NDM1LDE4MS44MzQyMmMtMS40LC0wLjcgLTIuMSwtMC40IC0zLjEsMS41bC0xLjMsMi4zbC00LjMsLTIuMWMtNywtMy4zIC03LjMsLTEuOCAtMi45LDExLjNjMi4xLDYuMSA0LjIsMTEuMyA0LjUsMTEuNWMxLDAuNiAyMC44LC02LjEgMjIuNiwtNy42YzIuMiwtMS44IDEuNywtMi44IC0zLC01LjFsLTQuNCwtMi4xbDEuNCwtMy4zYzAuOCwtMS44IDEuNCwtNC4zIDEuNCwtNS40YzAsLTIuMSAtMS40LC0yLjcgLTIuNSwtMWMtMC4zLDAuNSAtMiwxIC0zLjYsMWMtMS43LDAgLTMuOCwtMC40IC00LjgsLTF6IiBmaWxsLW9wYWNpdHk9IjAuMTU2ODYiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoIGQ9Ik0yNTcuMDkwNDksMTgyLjc4NjljMS42LDAgMy4zMTAxNCwtMC40OTUyMSAzLjYxMDE0LC0wLjk5NTIxYzEuMSwtMS43IDIuNTA3MzEsLTEuMDk0NSAyLjUwNzMxLDEuMDA1NWMwLDEuMSAtMC41OTE1MiwzLjYxMDAzIC0xLjM5MTUyLDUuNDEwMDNsLTEuMzk0MTYsMy4zMTI3NWw0LjQwMjA4LDIuMTE0MzZjNC43LDIuMyA1LjE5NzEsMy4zMTY2OCAyLjk5NzEsNS4xMTY2OGMtMS44LDEuNSAtMjEuNjc0MjQsOC4yMjUyMSAtMjIuNjc0MjQsNy42MjUyMWMtMC4zLC0wLjIgLTIuNDIyNjMsLTUuNDM3MiAtNC41MjI2MywtMTEuNTM3MmMtNC40LC0xMy4xIC00LjA4NTE0LC0xNC42NDA1OSAyLjkxNDg2LC0xMS4zNDA1OWw0LjMwNjQ0LDIuMDk0N2wxLjMwOTQ2LC0yLjMwNTE0YzEsLTEuOSAxLjcxNDI2LC0yLjIwMzUzIDMuMTE0MjYsLTEuNTAzNTNjMSwwLjYgMy4xMjA4OSwxLjAwMjQ1IDQuODIwODksMS4wMDI0NXoiIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O25vSG92ZXImcXVvdDs6ZmFsc2UsJnF1b3Q7b3JpZ0l0ZW0mcXVvdDs6WyZxdW90O1BhdGgmcXVvdDsseyZxdW90O2FwcGx5TWF0cml4JnF1b3Q7OnRydWUsJnF1b3Q7c2VnbWVudHMmcXVvdDs6W1tbMjUyLjI3NDM0LDE4MS44MzQyMl0sWzEsMC42XSxbLTEuNCwtMC43XV0sW1syNDkuMTc0MzQsMTgzLjMzNDIyXSxbMSwtMS45XSxbMCwwXV0sWzI0Ny44NzQzNCwxODUuNjM0MjJdLFtbMjQzLjU3NDM0LDE4My41MzQyMl0sWzAsMF0sWy03LC0zLjNdXSxbWzI0MC42NzQzNCwxOTQuODM0MjJdLFstNC40LC0xMy4xXSxbMi4xLDYuMV1dLFtbMjQ1LjE3NDM0LDIwNi4zMzQyMl0sWy0wLjMsLTAuMl0sWzEsMC42XV0sW1syNjcuNzc0MzQsMTk4LjczNDIyXSxbLTEuOCwxLjVdLFsyLjIsLTEuOF1dLFtbMjY0Ljc3NDM0LDE5My42MzQyMl0sWzQuNywyLjNdLFswLDBdXSxbMjYwLjM3NDM0LDE5MS41MzQyMl0sW1syNjEuNzc0MzQsMTg4LjIzNDIyXSxbMCwwXSxbMC44LC0xLjhdXSxbWzI2My4xNzQzNCwxODIuODM0MjJdLFswLDEuMV0sWzAsLTIuMV1dLFtbMjYwLjY3NDM0LDE4MS44MzQyMl0sWzEuMSwtMS43XSxbLTAuMywwLjVdXSxbWzI1Ny4wNzQzNCwxODIuODM0MjJdLFsxLjYsMF0sWy0xLjcsMF1dXSwmcXVvdDtjbG9zZWQmcXVvdDs6dHJ1ZSwmcXVvdDtmaWxsQ29sb3ImcXVvdDs6WzAsMCwwXX1dfSIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0D%0A%20%20const%20newThread%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMS4zMzMzMyIgaGVpZ2h0PSIyMS4zMzMzMyIgdmlld0JveD0iMCwwLDIxLjMzMzMzLDIxLjMzMzMzIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5LjMzMzMzLC0xNjkuMzMzMzMpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMjQ0LjM0NzY4LDE3Ni41OTA5OGgtMi4xMDY5NGwtMC4yODAyLDIuMTc0MTlsLTMuOTczMzUsMC4wMDYxMWwtMC4yNzQ5NSwtMi4xODAzaC0yLjA1Nzk3Yy0wLjU4NjQxLDAgLTAuODY5MjEsLTAuNzMyNjUgLTAuNDYzOTksLTEuMTU2ODJsNC4zNDQ4NywtNC41NzU4N2MwLjI1NzA5LC0wLjI1NzA3IDAuNjc0NTYsLTAuMjU3MDcgMC45MTgxOCwwbDQuMzU5NTYsNC41NzU4N2MwLjQwNDAxLDAuNDI0MTcgMC4xMTAxOSwxLjE1NjgyIC0wLjQ2NTIyLDEuMTU2ODIiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLW9wYWNpdHk9IjAuMiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjIuNSIvPjxwYXRoIGQ9Ik0yNDQuMzQ3NjgsMTgzLjQwOTAzYzAuNTc1NCwwIDAuODY5MjIsMC43MzI2NSAwLjQ2NTIyLDEuMTU2ODJsLTQuMzU5NTYsNC41NzU4N2MtMC4yNDM2MywwLjI1NzA3IC0wLjY2MTA5LDAuMjU3MDcgLTAuOTE4MTgsMGwtNC4zNDQ4NywtNC41NzU4N2MtMC40MDUyMywtMC40MjQxNyAtMC4xMjI0MiwtMS4xNTY4MiAwLjQ2Mzk5LC0xLjE1NjgyaDIuMDU3OTdsMC4yNTI2LC0yLjE0ODZsMy45ODA2MiwwLjAyMzE2bDAuMjk1MjgsMi4xMjU0NGgyLjEwNjk0IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2Utb3BhY2l0eT0iMC4yIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMi41Ii8%2BPHBhdGggZD0iTTI0NC4zNDc2OCwxNzYuNTkwOThoLTIuMTA2OTRsLTAuOTA0NzIsNi44MzgxYy0wLjA5Nzk0LDAuNzg0MDcgLTAuNzk1NzYsMS4zMzY3NyAtMS41NTQ4LDEuMjIxMDljLTAuNjEyMTIsLTAuMDg5OTggLTEuMDg5NTgsLTAuNjA0MTIgLTEuMTY0MjYsLTEuMjIxMDlsLTAuOTA0NzIsLTYuODM4MWgtMi4wNTc5N2MtMC41ODY0MSwwIC0wLjg2OTIxLC0wLjczMjY1IC0wLjQ2Mzk5LC0xLjE1NjgybDQuMzQ0ODcsLTQuNTc1ODdjMC4yNTcwOSwtMC4yNTcwNyAwLjY3NDU2LC0wLjI1NzA3IDAuOTE4MTgsMGw0LjM1OTU2LDQuNTc1ODdjMC40MDQwMSwwLjQyNDE3IDAuMTEwMTksMS4xNTY4MiAtMC40NjUyMiwxLjE1NjgyIiBmaWxsPSIjZmZmZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPHBhdGggZD0iTTI0NC4zNDc2OCwxODMuNDA5MDNjMC41NzU0LDAgMC44NjkyMiwwLjczMjY1IDAuNDY1MjIsMS4xNTY4MmwtNC4zNTk1Niw0LjU3NTg3Yy0wLjI0MzYzLDAuMjU3MDcgLTAuNjYxMDksMC4yNTcwNyAtMC45MTgxOCwwbC00LjM0NDg3LC00LjU3NTg3Yy0wLjQwNTIzLC0wLjQyNDE3IC0wLjEyMjQyLC0xLjE1NjgyIDAuNDYzOTksLTEuMTU2ODJoMi4wNTc5N2wwLjkwNDcyLC02LjgzODExYzAuMDc0NjgsLTAuNjE2OTcgMC41NTIxNCwtMS4xMzExMSAxLjE2NDI2LC0xLjIyMTA5YzAuNzU5MDQsLTAuMTE1NjggMS40NTY4NiwwLjQzNzAyIDEuNTU0OCwxLjIyMTA5bDAuOTA0NzIsNi44MzgxMWgyLjEwNjk0IiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpbmRleCZxdW90OzpudWxsfSIgZmlsbD0iI2ZmZmZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoIGQ9Ik0yMjkuMzMzMzMsMTkwLjY2NjY3di0yMS4zMzMzM2gyMS4zMzMzM3YyMS4zMzMzM3oiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0D%0A%20%20const%20timeIcon%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxOC40MTAyNSIgaGVpZ2h0PSIxOC40MTAyNSIgdmlld0JveD0iMCwwLDE4LjQxMDI1LDE4LjQxMDI1Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMwLjc5NDg4LC0xNzAuNzk0OSkiPjxnIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2lzUGFpbnRpbmdMYXllciZxdW90Ozp0cnVlfSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTIzMi45MjMxLDE4MC42NzQyM2MwLC0yLjUzOTI3IDEuMzM3MzYsLTQuNzY2MTggMy4zNDYxNSwtNi4wMTQ4di0wLjY3ODM2YzAsLTAuOTU2NjQgMC43NzU1MSwtMS43MzIxNSAxLjczMjE1LC0xLjczMjE1aDMuOTk3MjVjMC45NTY2NCwwIDEuNzMyMTUsMC43NzU1MSAxLjczMjE1LDEuNzMyMTV2MC42NzgzNmMyLjAwODc5LDEuMjQ4NjMgMy4zNDYxNiwzLjQ3NTU0IDMuMzQ2MTYsNi4wMTQ4YzAsMy45MDg0OCAtMy4xNjg0NSw3LjA3NjkyIC03LjA3NjkzLDcuMDc2OTJjLTMuOTA4NDgsMCAtNy4wNzY5MiwtMy4xNjg0NCAtNy4wNzY5MiwtNy4wNzY5MnpNMjQxLjYyNTU4LDE3Ny44OTQ4N2MwLjIyMzM3LDAgMC4zMzc0MiwtMC4yODQ0MSAwLjE4MDU5LC0wLjQ0OTA3bC0xLjY5MjM1LC0xLjc3NjMzYy0wLjA5NDU3LC0wLjA5OTggLTAuMjU2NjMsLTAuMDk5OCAtMC4zNTY0MywwbC0xLjY4NjY1LDEuNzc2MzNjLTAuMTU3MzEsMC4xNjQ2NiAtMC4wNDc1MiwwLjQ0OTA3IDAuMTgwMTIsMC40NDkwN2gwLjc5ODg5bDAuMzQzOTIsMi41OTk0M2MtMC4yMSwwLjE1OTgzIC0wLjM0NTU3LDAuNDEyNDQgLTAuMzQ1NTcsMC42OTY3MmMwLDAuNDgzMjUgMC4zOTE3NSwwLjg3NSAwLjg3NSwwLjg3NWMwLjAxMTM1LDAgMC4wMjI2NiwtMC4wMDAyMSAwLjAzMzksLTAuMDAwNjRsMS44OTY0OSwxLjY5ODgybC0xLjAzODU4LDAuNzIyOGMtMC4xNjA5NywwLjE2MDk3IC0wLjAzNzQ5LDAuNDM5NzEgMC4xOTAxOCwwLjQ0NDlsMi40NDg3LDAuMDYzNDFjMC4xNDExMywwIDAuMjU1NzIsLTAuMTE0NiAwLjI1MjAzLC0wLjI1MjA0bC0wLjA1OTM4LC0yLjQ1MjczYy0wLjAwNTU0LC0wLjIyNzMzIC0wLjI4NzI5LC0wLjM0Nzc4IC0wLjQ0NTIzLC0wLjE4OTgzbC0wLjU3ODM0LDAuNTc4MzRsLTEuODI4OTcsLTEuNDAxNTdjMC4wMDI3OSwtMC4wMjg0NCAwLjAwNDIxLC0wLjA1NzI4IDAuMDA0MjEsLTAuMDg2NDZjMCwtMC4yNzk2NSAtMC4xMzExOSwtMC41Mjg2NiAtMC4zMzUzOCwtMC42ODg4NGwtMC4wMjM0NSwtMi44MTc4NHoiIGZpbGw9Im5vbmUiIHN0cm9rZS1vcGFjaXR5PSIwLjIiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxLjc1Ii8%2BPHBhdGggZD0iTTIzMC43OTQ4OSwxODkuMjA1MTZ2LTE4LjQxMDI1aDE4LjQxMDI1djE4LjQxMDI1eiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiLz48cGF0aCBkPSJNMjMyLjkyMzEsMTgwLjY3NDIzYzAsLTIuNTM5MjcgMS4zMzczNiwtNC43NjYxOCAzLjM0NjE1LC02LjAxNDh2LTAuNjc4MzZjMCwtMC45NTY2NCAwLjc3NTUxLC0xLjczMjE1IDEuNzMyMTUsLTEuNzMyMTVoMy45OTcyNWMwLjk1NjY0LDAgMS43MzIxNSwwLjc3NTUxIDEuNzMyMTUsMS43MzIxNXYwLjY3ODM2YzIuMDA4NzksMS4yNDg2MyAzLjM0NjE1LDMuNDc1NTQgMy4zNDYxNSw2LjAxNDhjMCwzLjkwODQ4IC0zLjE2ODQ1LDcuMDc2OTIgLTcuMDc2OTIsNy4wNzY5MmMtMy45MDg0OCwwIC03LjA3NjkyLC0zLjE2ODQ0IC03LjA3NjkyLC03LjA3Njkyek0yNDEuNjI1NTgsMTc3Ljg5NDg3YzAuMjIzMzcsMCAwLjMzNzQzLC0wLjI4NDQxIDAuMTgwNiwtMC40NDkwN2wtMS42OTIzNSwtMS43NzYzMmMtMC4wOTQ1NywtMC4wOTk4IC0wLjI1NjYzLC0wLjA5OTggLTAuMzU2NDMsMGwtMS42ODY2NSwxLjc3NjMyYy0wLjE1NzMxLDAuMTY0NjYgLTAuMDQ3NTIsMC40NDkwNyAwLjE4MDEyLDAuNDQ5MDdoMC43OTg4OWwwLjM0MzkyLDIuNTk5NDNjLTAuMjEsMC4xNTk4MyAtMC4zNDU1NywwLjQxMjQ0IC0wLjM0NTU3LDAuNjk2NzFjMCwwLjQ4MzI1IDAuMzkxNzUsMC44NzUgMC44NzUsMC44NzVjMC4wMTEzNSwwIDAuMDIyNjUsLTAuMDAwMjEgMC4wMzM5LC0wLjAwMDY0bDEuNDIyODEsMS44NTY3MWwtMC41NjQ5LDAuNTY0OTFjLTAuMTYwOTcsMC4xNjA5NyAtMC4wMzc0OSwwLjQzOTcxIDAuMTkwMTcsMC40NDQ5bDIuNDQ4NywwLjA2MzQxYzAuMTQxMTMsMCAwLjI1NTczLC0wLjExNDYgMC4yNTIwNCwtMC4yNTIwNGwtMC4wNTkzOCwtMi40NTI3MmMtMC4wMDU1NCwtMC4yMjczMyAtMC4yODcyOSwtMC4zNDc3OCAtMC40NDUyMywtMC4xODk4NGwtMC41NzgzNCwwLjU3ODM0bC0xLjgyODk4LC0xLjQwMTU3YzAuMDAyNzksLTAuMDI4NDQgMC4wMDQyMiwtMC4wNTcyOCAwLjAwNDIyLC0wLjA4NjQ2YzAsLTAuMjc5NjUgLTAuMTMxMTksLTAuNTI4NjYgLTAuMzM1MzgsLTAuNjg4ODRsMC4zNDQ5NywtMi42MDczMXoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZS1vcGFjaXR5PSIwLjIiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPC9nPjwvZz48L3N2Zz4%3D%22%3B%0D%0A%20%20const%20startFlag%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNi42MyAxNy41Ij48ZGVmcz48c3R5bGU%2BLmNscy0xLC5jbHMtMntmaWxsOiM0Y2JmNTY7c3Ryb2tlOiM0NTk5M2Q7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO30uY2xzLTJ7c3Ryb2tlLXdpZHRoOjEuNXB4O308L3N0eWxlPjwvZGVmcz48dGl0bGU%2BaWNvbi0tZ3JlZW4tZmxhZzwvdGl0bGU%2BPHBhdGggY2xhc3M9ImNscy0xIiBkPSJNLjc1LDJBNi40NCw2LjQ0LDAsMCwxLDguNDQsMmgwYTYuNDQsNi40NCwwLDAsMCw3LjY5LDBWMTIuNGE2LjQ0LDYuNDQsMCwwLDEtNy42OSwwaDBhNi40NCw2LjQ0LDAsMCwwLTcuNjksMCIvPjxsaW5lIGNsYXNzPSJjbHMtMiIgeDE9IjAuNzUiIHkxPSIxNi43NSIgeDI9IjAuNzUiIHkyPSIwLjc1Ii8%2BPC9zdmc%2B%22%3B%0D%0A%0D%0A%20%20const%20keysMenu%20%3D%20%5B%0D%0A%20%20%20%20%7B%20text%3A%20%22space%22%2C%20value%3A%20%22space%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22up%20arrow%22%2C%20value%3A%20%22up%20arrow%22%20%7D%2C%20%7B%20text%3A%20%22down%20arrow%22%2C%20value%3A%20%22down%20arrow%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22right%20arrow%22%2C%20value%3A%20%22right%20arrow%22%20%7D%2C%20%7B%20text%3A%20%22left%20arrow%22%2C%20value%3A%20%22left%20arrow%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22a%22%2C%20value%3A%20%22a%22%20%7D%2C%20%7B%20text%3A%20%22b%22%2C%20value%3A%20%22b%22%20%7D%2C%20%7B%20text%3A%20%22c%22%2C%20value%3A%20%22c%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22d%22%2C%20value%3A%20%22d%22%20%7D%2C%20%7B%20text%3A%20%22e%22%2C%20value%3A%20%22e%22%20%7D%2C%20%7B%20text%3A%20%22f%22%2C%20value%3A%20%22f%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22g%22%2C%20value%3A%20%22g%22%20%7D%2C%20%7B%20text%3A%20%22h%22%2C%20value%3A%20%22h%22%20%7D%2C%20%7B%20text%3A%20%22i%22%2C%20value%3A%20%22i%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22j%22%2C%20value%3A%20%22j%22%20%7D%2C%20%7B%20text%3A%20%22k%22%2C%20value%3A%20%22k%22%20%7D%2C%20%7B%20text%3A%20%22l%22%2C%20value%3A%20%22l%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22m%22%2C%20value%3A%20%22m%22%20%7D%2C%20%7B%20text%3A%20%22n%22%2C%20value%3A%20%22n%22%20%7D%2C%20%7B%20text%3A%20%22o%22%2C%20value%3A%20%22o%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22p%22%2C%20value%3A%20%22p%22%20%7D%2C%20%7B%20text%3A%20%22q%22%2C%20value%3A%20%22q%22%20%7D%2C%20%7B%20text%3A%20%22r%22%2C%20value%3A%20%22r%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22s%22%2C%20value%3A%20%22s%22%20%7D%2C%20%7B%20text%3A%20%22t%22%2C%20value%3A%20%22t%22%20%7D%2C%20%7B%20text%3A%20%22u%22%2C%20value%3A%20%22u%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22v%22%2C%20value%3A%20%22v%22%20%7D%2C%20%7B%20text%3A%20%22w%22%2C%20value%3A%20%22w%22%20%7D%2C%20%7B%20text%3A%20%22x%22%2C%20value%3A%20%22x%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22y%22%2C%20value%3A%20%22y%22%20%7D%2C%20%7B%20text%3A%20%22z%22%2C%20value%3A%20%22z%22%20%7D%2C%20%7B%20text%3A%20%220%22%2C%20value%3A%20%220%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%221%22%2C%20value%3A%20%221%22%20%7D%2C%20%7B%20text%3A%20%222%22%2C%20value%3A%20%222%22%20%7D%2C%20%7B%20text%3A%20%223%22%2C%20value%3A%20%223%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%224%22%2C%20value%3A%20%224%22%20%7D%2C%20%7B%20text%3A%20%225%22%2C%20value%3A%20%225%22%20%7D%2C%20%7B%20text%3A%20%226%22%2C%20value%3A%20%226%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%227%22%2C%20value%3A%20%227%22%20%7D%2C%20%7B%20text%3A%20%228%22%2C%20value%3A%20%228%22%20%7D%2C%20%7B%20text%3A%20%229%22%2C%20value%3A%20%229%22%20%7D%0D%0A%20%20%5D%3B%0D%0A%0D%0A%20%20let%20conditionStorage%20%3D%20%7B%7D%3B%0D%0A%20%20let%20keybinds%20%3D%20%7B%7D%3B%0D%0A%20%20let%20issueTimes%20%3D%20%5B%5D%3B%0D%0A%20%20let%20hats%20%3D%20%7B%20...runtime._hats%20%7D%3B%0D%0A%20%20runtime.on(%22KEY_PRESSED%22%2C%20key%20%3D%3E%20%7B%0D%0A%20%20%20%20key%20%3D%20key.toLowerCase()%3B%0D%0A%20%20%20%20%2F%2F%20Use%20this%20for%20compatibility%20with%20other%20extensions%0D%0A%20%20%20%20if%20(keybinds%5Bkey%5D%20!%3D%3D%20undefined)%20keybinds%5Bkey%5D.keyV.forEach(item%20%3D%3E%20%7B%20postData(item%2C%20true)%20%7D)%3B%0D%0A%20%20%7D)%3B%0D%0A%20%20runtime.on(%22AFTER_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20const%20keys%20%3D%20runtime.ioDevices.keyboard._keysPressed%3B%0D%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20Object.keys(keybinds).length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20const%20keyName%20%3D%20Object.keys(keybinds)%5Bi%5D%3B%0D%0A%20%20%20%20%20%20const%20key%20%3D%20keybinds%5BkeyName%5D%3B%0D%0A%20%20%20%20%20%20if%20(keys.indexOf(keyName.toLowerCase())%20%3D%3D%3D%20-1)%20key.keyV.forEach(item%20%3D%3E%20%7B%20postData(item%2C%20false)%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D)%3B%0D%0A%20%20function%20postData(key%2C%20down)%20%7B%0D%0A%20%20%20%20if%20(key%20%3D%3D%3D%20%22space%22)%20key%20%3D%20%22%20%22%3B%0D%0A%20%20%20%20if%20(key.includes(%22arrow%22))%20key%20%3D%20key.charAt(0).toUpperCase()%20%2B%20key.slice(1).replace(%22%20arrow%22%2C%20%22%22)%3B%0D%0A%20%20%20%20runtime.ioDevices.keyboard.postData(%7B%20key%2C%20isDown%3A%20down%20%7D)%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%20conditionStorage%20%3D%20%7B%7D%3B%20issueTimes%20%3D%20%5B%5D%20%7D)%3B%0D%0A%20%20runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%20conditionStorage%20%3D%20%7B%7D%3B%20issueTimes%20%3D%20%5B%5D%20%7D)%3B%0D%0A%0D%0A%20%20vm.on(%22EXTENSION_ADDED%22%2C%20tryUseScratchBlocks)%3B%0D%0A%20%20vm.on(%22BLOCKSINFO_UPDATE%22%2C%20tryUseScratchBlocks)%3B%0D%0A%20%20tryUseScratchBlocks()%3B%0D%0A%20%20function%20tryUseScratchBlocks()%20%7B%0D%0A%20%20%20%20if%20(!window.ScratchBlocks)%20return%3B%0D%0A%20%20%20%20vm.removeListener(%22EXTENSION_ADDED%22%2C%20tryUseScratchBlocks)%3B%0D%0A%20%20%20%20vm.removeListener(%22BLOCKSINFO_UPDATE%22%2C%20tryUseScratchBlocks)%3B%0D%0A%20%20%20%20const%20originalCheck%20%3D%20ScratchBlocks.scratchBlocksUtils.isShadowArgumentReporter%3B%0D%0A%20%20%20%20ScratchBlocks.scratchBlocksUtils.isShadowArgumentReporter%20%3D%20function%20(block)%20%7B%0D%0A%20%20%20%20%20%20const%20result%20%3D%20originalCheck(block)%3B%0D%0A%20%20%20%20%20%20if%20(result)%20return%20true%3B%0D%0A%20%20%20%20%20%20return%20block.isShadow()%20%26%26%20regeneratedReporters.includes(block.type)%3B%0D%0A%20%20%20%20%7D%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20%2F%2F%20Thank%20you%20so%20much%20to%20%40FurryR%20for%20the%20help%20%3C3%0D%0A%20%20function%20getCompiler()%20%7B%0D%0A%20%20%20%20if%20(vm.exports.JSGenerator%20%26%26%20vm.exports.ScriptTreeGenerator)%20return%20vm.exports%3B%0D%0A%20%20%20%20else%20if%20(vm.exports.i_will_not_ask_for_help_when_these_break)%20return%20vm.exports.i_will_not_ask_for_help_when_these_break()%3B%0D%0A%20%20%7D%0D%0A%20%20const%20compiler%20%3D%20getCompiler()%3B%0D%0A%20%20if%20(compiler)%20%7B%0D%0A%20%20%20%20const%20%7B%20JSGenerator%2C%20ScriptTreeGenerator%20%7D%20%3D%20compiler%3B%0D%0A%20%20%20%20const%20_IRdescendStackedBlock%20%3D%20ScriptTreeGenerator.prototype.descendStackedBlock%3B%0D%0A%20%20%20%20ScriptTreeGenerator.prototype.descendStackedBlock%20%3D%20function%20(block)%20%7B%0D%0A%20%20%20%20%20%20if%20(block.opcode%20%3D%3D%3D%20%22SPadvControl_breakLoop%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20confirm%20if%20inside%20loop%0D%0A%20%20%20%20%20%20%20%20if%20(check4CBlock(block.id%2C%20this.blocks))%20return%20%7B%20kind%3A%20%22SPadvControl.break%22%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20else%20return%20_IRdescendStackedBlock.call(this%2C%20block)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20return%20_IRdescendStackedBlock.call(this%2C%20block)%3B%0D%0A%20%20%20%20%7D%3B%0D%0A%20%20%20%20const%20_JSdescendStackedBlock%20%3D%20JSGenerator.prototype.descendStackedBlock%3B%0D%0A%20%20%20%20JSGenerator.prototype.descendStackedBlock%20%3D%20function%20(node)%20%7B%0D%0A%20%20%20%20%20%20if%20(node.kind%20%3D%3D%3D%20%22SPadvControl.break%22)%20this.source%20%2B%3D%20%22break%3B%5Cn%22%3B%0D%0A%20%20%20%20%20%20else%20return%20_JSdescendStackedBlock.call(this%2C%20node)%3B%0D%0A%20%20%20%20%7D%3B%0D%0A%20%20%7D%0D%0A%20%20function%20check4CBlock(id%2C%20container)%20%7B%0D%0A%20%20%20%20let%20newID%20%3D%20container.getBlock(id)%3B%0D%0A%20%20%20%20let%20con%20%3D%20true%3B%0D%0A%20%20%20%20if%20(!newID)%20return%20false%3B%0D%0A%20%20%20%20while%20(con)%20%7B%0D%0A%20%20%20%20%20%20if%20(newID.parent%20!%3D%3D%20null)%20%7B%0D%0A%20%20%20%20%20%20%20%20newID%20%3D%20container.getBlock(newID.parent)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(container.getBranch(newID.id)%20!%3D%3D%20null)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20newID%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20%20%20con%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20newID%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20con%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20return%20newID%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20class%20SPadvControl%20%7B%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22SPadvControl%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20%22Extra%20Controls%22%2C%0D%0A%20%20%20%20%20%20%20%20docsURI%3A%20%22https%3A%2F%2Fextensions.penguinmod.com%2Fdocs%2FExtra-Control%22%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23FFAB19%22%2C%0D%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23EC9C13%22%2C%0D%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23CF8B17%22%2C%0D%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22forceHat%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22force%20hat%20%5BHAT%5D%20to%20%5BTYPE%5D%20on%20activate%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20HAT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22HAT_MENU%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ACTIVATE%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetHats%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22reset%20forced%20hats%22%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22keybind%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22bind%20key%20%5BKEY2%5D%20to%20%5BKEY1%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22keys%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22keys%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getKeybind%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22binds%20of%20%5BKEY%5D%20key%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22keys%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetKey%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22unbind%20all%20keybinds%20of%20%5BKEY%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22keys%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetBinds%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22reset%20keybinds%22%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22repeatForUntil%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22repeat%20%5BNUM%5D%20or%20until%20%5BCON%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%2010%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CON%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22repeatSecUntil%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22repeat%20for%20%5BNUM%5D%20secs%20or%20until%20%5BCON%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%201%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CON%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spayedCondition%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%5B%22if%20%5BCON1%5D%20start%20loop%22%2C%20%22repeat%20until%20%5BCON2%5D%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchIconURI%3A%20%22%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CON1%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CON2%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22breakLoop%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22break%20out%20loop%20%5BICON%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isTerminal%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ICON%3A%20%7B%20type%3A%20Scratch.ArgumentType.IMAGE%2C%20dataURI%3A%20breakIcon%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22waitChanged%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchCount%3A%20-1%2C%20branchIconURI%3A%20%22%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22wait%20until%20%5BTHING%5D%20changes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20THING%3A%20%7B%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22runFlag%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22run%20%5BFLAG%5D%20and%20continue%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAG%3A%20%7B%20type%3A%20Scratch.ArgumentType.IMAGE%2C%20dataURI%3A%20startFlag%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22simuRun%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22simultaneously%20run%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchCount%3A%202%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22runType%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22run%20%5BTYPE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22runTypes%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22asyncCode%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchIconURI%3A%20%22%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BICON%5D%20async%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ICON%3A%20%7B%20type%3A%20Scratch.ArgumentType.IMAGE%2C%20dataURI%3A%20timeIcon%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tryCatch%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%5B%22try%22%2C%20%22catch%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchCount%3A%202%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.XML%2C%20xml%3A%20%60%3Cblock%20type%3D%22SPadvControl_newThreadAdv%22%3E%3Cvalue%20name%3D%22ARGS%22%3E%3Cshadow%20type%3D%22text%22%3E%3Cfield%20name%3D%22TEXT%22%3E%7B%20info%20%3A%201%20%7D%3C%2Ffield%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22FRAME%22%3E%3Cshadow%20type%3D%22SPadvControl_threadArgs%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E%60%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22newThreadAdv%22%2C%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22start%20new%20thread%20with%20%5BFRAME%5D%20set%20to%20%5BARGS%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%20branchIconURI%3A%20newThread%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ARGS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%7B%20info%20%3A%201%20%7D%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FRAME%3A%20%7B%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22threadArgs%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%20hideFromPalette%3A%20true%2C%20text%3A%20%22argument%22%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ifRunBlock%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22step%20through%20blocks%20while%20%5BCON%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchCount%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CON%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ifPart%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%5B%22if%20%5BCON%5D%22%2C%20%22my%20ID%20%5BID%5D%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchCount%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CON%3A%20%7B%20type%3A%20Scratch.ArgumentType.BOOLEAN%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22my-block1%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22elsePart%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%5B%22else%22%2C%20%22my%20ID%20%5BID%5D%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchCount%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22my-block1%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ifElseVal%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22if%20with%20ID%20%5BID%5D%20true%3F%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22my-block1%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22onCall%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22on%20call%20%5BCALL%5D%20run%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20branchCount%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CALL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22branch1%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22runBranch%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22call%20%5BID%5D%20to%20run%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22branch1%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22runBranchWait%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22call%20%5BID%5D%20to%20run%20and%20wait%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22branch1%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22runInSprite%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%5B%22as%20%5BSPRITE%5D%20do%22%2C%20%22then%20%5BTYPE%5D%20to%20finish%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22targets3%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22contType%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getInSprite%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20%5BTHING%5D%20from%20%5BSPRITE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22targets%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20THING%3A%20%7B%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22asClone%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22as%20clones%20of%20%5BSPRITE%5D%20with%20%5BVAR%5D%20set%20to%20%5BVAL%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22targets2%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22my%20variable%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getInClone%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20%5BTHING%5D%20from%20clone%20%5BID%5D%20of%20%5BSPRITE%5D%20with%20%5BVAR%5D%20set%20to%20%5BVAL%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22targets2%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20THING%3A%20%7B%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22my%20variable%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteRun%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22delete%20this%20clone%20and%20tell%20main%20sprite%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isTerminal%3A%20true%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20ACTIVATE%3A%20%5B%22finish%22%2C%20%22restart%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20HAT_MENU%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%22organizeHats%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20targets%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this.getTargets(false%2C%20false)%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20targets2%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this.getTargets(true%2C%20false)%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20targets3%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this.getTargets(false%2C%20true)%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20runTypes%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22forward%22%2C%20%22reversed%22%2C%20%22forward%20and%20reversed%22%2C%20%22randomized%22%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20contType%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B%22wait%22%2C%20%22dont%20wait%22%5D%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20keys%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20keysMenu%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F%2F%20Helper%20Functions%0D%0A%20%20%20%20getTargets(myself%2C%20all)%20%7B%0D%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20if%20(myself)%20spriteNames.push(%7B%20text%3A%20%22myself%22%2C%20value%3A%20%22_myself_%22%20%7D)%3B%0D%0A%20%20%20%20%20%20if%20(!myself)%20spriteNames.push(%7B%20text%3A%20%22Stage%22%2C%20value%3A%20%22_stage_%22%20%7D)%3B%0D%0A%20%20%20%20%20%20if%20(all)%20%7B%0D%0A%20%20%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20%22All%20Sprites%22%2C%20value%3A%20%22_all_%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20%22All%20Main%20Sprites%22%2C%20value%3A%20%22_all_2%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20%22All%20Clones%22%2C%20value%3A%20%22_all_3%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%20%20%0D%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0D%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0D%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20spriteNames.push(%7B%20text%3A%20target.getName()%2C%20value%3A%20target.getName()%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20spriteNames.length%20%3E%200%20%3F%20spriteNames%20%3A%20%5B%22%22%5D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20organizeHats()%20%7B%0D%0A%20%20%20%20%20%20const%20allHats%20%3D%20runtime._hats%3B%0D%0A%20%20%20%20%20%20const%20vanillaHats%20%3D%20%5B%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20I%20start%20as%20clone%22%2C%20value%3A%20%22control_start_as_clone%22%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20green%20flag%20clicked%22%2C%20value%3A%20%22event_whenflagclicked%22%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20key%20pressed%22%2C%20value%3A%20%22event_whenkeypressed%22%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20sprite%20clicked%22%2C%20value%3A%20%22event_whenthisspriteclicked%22%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20stage%20clicked%22%2C%20value%3A%20%22event_whenstageclicked%22%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20backdrop%20switches%22%2C%20value%3A%20%22event_whenbackdropswitchesto%22%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20touching%20object%22%2C%20value%3A%20%22event_whentouchingobject%22%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20value%20greater%20than%22%2C%20value%3A%20%22event_whengreaterthan%22%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7Btext%3A%20%22when%20broadcast%20received%22%2C%20value%3A%20%22event_whenbroadcastreceived%22%7D%0D%0A%20%20%20%20%20%20%5D%3B%0D%0A%20%20%20%20%20%20const%20startIndex%20%3D%20Object.keys(allHats).findIndex(key%20%3D%3E%20key%20%3D%3D%3D%20%22event_whenbroadcastreceived%22)%3B%0D%0A%20%20%20%20%20%20const%20filteredHats%20%3D%20Object.keys(allHats)%0D%0A%20%20%20%20%20%20%20%20.filter((key%2C%20index)%20%3D%3E%20index%20%3E%20startIndex)%0D%0A%20%20%20%20%20%20%20%20.map(key%20%3D%3E%20(%7B%20text%3A%20key%2C%20value%3A%20key%20%7D))%3B%0D%0A%20%20%20%20%20%20return%20%5B...vanillaHats%2C%20...filteredHats%5D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20addMissKeys(sourceObj%2C%20checkedObj)%20%7B%0D%0A%20%20%20%20%20%20Object.keys(sourceObj).forEach(key%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(!(key%20in%20checkedObj))%20checkedObj%5Bkey%5D%20%3D%20sourceObj%5Bkey%5D%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20Object.keys(sourceObj.stackFrames%5B0%5D).forEach(key%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(!(key%20in%20checkedObj.stackFrames%5B0%5D))%20checkedObj.stackFrames%5B0%5D%5Bkey%5D%20%3D%20sourceObj.stackFrames%5B0%5D%5Bkey%5D%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20return%20checkedObj%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20getTargetVal(newTarget%2C%20block%2C%20ogTarget)%20%7B%0D%0A%20%20%20%20%20%20const%20oldVal%20%3D%20runtime.compilerOptions.enabled%3B%0D%0A%20%20%20%20%20%20runtime.compilerOptions.enabled%20%3D%20false%3B%0D%0A%20%20%20%20%20%20if%20(block.block%20%3D%3D%3D%20null)%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20const%20thread%20%3D%20runtime._pushThread(block.block%2C%20ogTarget)%3B%0D%0A%20%20%20%20%20%20runtime.compilerOptions.enabled%20%3D%20oldVal%3B%0D%0A%20%20%20%20%20%20thread.isCompiled%20%3D%20false%3B%0D%0A%20%20%20%20%20%20thread.target%20%3D%20newTarget%3B%0D%0A%20%20%20%20%20%20return%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20interval%20%3D%20setInterval(()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20reported%20%3D%20Scratch.Cast.toString(thread.justReported)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(reported%20!%3D%3D%20%22null%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(interval)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve(reported)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%2C%200)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20pushThreadTarget(id%2C%20newT%2C%20oldT)%20%7B%0D%0A%20%20%20%20%20%20const%20thread%20%3D%20runtime._pushThread(id%2C%20oldT%2C%20%7B%20stackClick%3A%20false%20%7D)%3B%0D%0A%20%20%20%20%20%20thread.target%20%3D%20newT%0D%0A%20%20%20%20%20%20thread.ogTarget%20%3D%20oldT%0D%0A%20%20%20%20%20%20if%20(runtime.compilerOptions.enabled)%20thread.tryCompile()%3B%0D%0A%20%20%20%20%20%20return%20thread%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F%2FBlock%20Functions%0D%0A%20%20%20%20forceHat(args)%20%7B%0D%0A%20%20%20%20%20%20const%20thisHat%20%3D%20runtime._hats%5Bargs.HAT%5D%3B%0D%0A%20%20%20%20%20%20if%20(thisHat)%20thisHat.restartExistingThreads%20%3D%20args.TYPE%20%3D%3D%3D%20%22restart%22%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20resetHats(args)%20%7B%0D%0A%20%20%20%20%20%20const%20currentHats%20%3D%20runtime._hats%3B%0D%0A%20%20%20%20%20%20for%20(const%20key%20in%20hats)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentHats%5Bkey%5D.restartExistingThreads%20%3D%20hats%5Bkey%5D.restartExistingThreads%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20hats%20%3D%20%7B%20...runtime._hats%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20keybind(args)%20%7B%0D%0A%20%20%20%20%20%20const%20key1%20%3D%20Scratch.Cast.toString(args.KEY1)%3B%0D%0A%20%20%20%20%20%20const%20key2%20%3D%20Scratch.Cast.toString(args.KEY2)%3B%0D%0A%20%20%20%20%20%20if%20(key1%20%3D%3D%3D%20key2)%20return%3B%0D%0A%20%20%20%20%20%20if%20(keybinds%5Bkey1%5D)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(keybinds%5Bkey1%5D.keyV.indexOf(key2)%20%3D%3D%3D%20-1)%20keybinds%5Bkey1%5D.keyV.push(key2)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%20keybinds%5Bkey1%5D%20%3D%20%7B%20keyV%20%3A%20%5Bkey2%5D%20%7D%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getKeybind(args)%20%7B%0D%0A%20%20%20%20%20%20const%20key%20%3D%20keybinds%5BScratch.Cast.toString(args.KEY)%5D%3B%0D%0A%20%20%20%20%20%20return%20key%20%3F%20JSON.stringify(key.keyV)%20%3A%20%60%5B%22%24%7Bargs.KEY%7D%22%5D%60%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20resetKey(args)%20%7B%20delete%20keybinds%5BScratch.Cast.toString(args.KEY)%5D%20%7D%0D%0A%0D%0A%20%20%20%20resetBinds()%20%7B%20keybinds%20%3D%20%7B%7D%20%7D%0D%0A%0D%0A%20%20%20%20runFlag(_%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thisThread%20%3D%20util.thread.topBlock%3B%0D%0A%20%20%20%20%20%20runtime.emit(%22PROJECT_START_BEFORE_RESET%22)%3B%0D%0A%20%20%20%20%20%20runtime.threads%0D%0A%20%20%20%20%20%20%20%20.filter(thread%20%3D%3E%20thread.topBlock%20!%3D%3D%20thisThread).forEach(thread%20%3D%3E%20thread.stopThisScript())%3B%0D%0A%20%20%20%20%20%20%2F%2F%20green%20flag%20behaviour%0D%0A%20%20%20%20%20%20runtime.emit(%22PROJECT_START%22)%3B%0D%0A%20%20%20%20%20%20runtime.updateCurrentMSecs()%3B%0D%0A%20%20%20%20%20%20runtime.ioDevices.clock.resetProjectTimer()%3B%0D%0A%20%20%20%20%20%20runtime.targets.forEach(target%20%3D%3E%20target.clearEdgeActivatedValues())%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%20runtime.targets.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20thisTarget%20%3D%20runtime.targets%5Bi%5D%3B%0D%0A%20%20%20%20%20%20%20%20thisTarget.onGreenFlag()%3B%0D%0A%20%20%20%20%20%20%20%20if%20(!thisTarget.isOriginal)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20runtime.disposeTarget(thisTarget)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20runtime.stopForTarget(thisTarget)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20runtime.startHats(%22event_whenflagclicked%22)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20repeatForUntil(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20condition%20%3D%20Scratch.Cast.toBoolean(args.CON)%3B%0D%0A%20%20%20%20%20%20if%20(typeof%20util.stackFrame.loopCounter%20%3D%3D%3D%20%22undefined%22)%20util.stackFrame.loopCounter%20%3D%20Math.round(Scratch.Cast.toNumber(args.NUM))%3B%0D%0A%20%20%20%20%20%20util.stackFrame.loopCounter--%3B%0D%0A%20%20%20%20%20%20if%20(!condition%20%26%26%20util.stackFrame.loopCounter%20%3E%3D%200)%20util.startBranch(1%2C%20true)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20repeatSecUntil(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20condition%20%3D%20Scratch.Cast.toBoolean(args.CON)%3B%0D%0A%20%20%20%20%20%20if%20(condition)%20return%3B%20%2F%2F%20Dont%20run%20once%0D%0A%20%20%20%20%20%20if%20(util.stackTimerNeedsInit())%20%7B%0D%0A%20%20%20%20%20%20%20%20args.NUM%20%3D%20Math.max(0%2C%201000%20*%20args.NUM)%3B%0D%0A%20%20%20%20%20%20%20%20util.startStackTimer(args.NUM)%3B%0D%0A%20%20%20%20%20%20%20%20Scratch.vm.runtime.requestRedraw()%3B%0D%0A%20%20%20%20%20%20%20%20util.startBranch(1%2C%20true)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(!util.stackTimerFinished()%20%26%26%20!condition)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.startBranch(1%2C%20true)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20spayedCondition(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20if%20(typeof%20util.stackFrame.index%20%3D%3D%3D%20%22undefined%22)%20util.stackFrame.index%20%3D%20true%3B%0D%0A%20%20%20%20%20%20if%20(!Scratch.Cast.toBoolean(args.CON1)%20%26%26%20util.stackFrame.index)%20return%3B%0D%0A%20%20%20%20%20%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(!Scratch.Cast.toBoolean(args.CON2))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20util.stackFrame.index%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20%20%20util.startBranch(1%2C%20true)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20util.stackFrame.index%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20simuRun(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20branches%20%3D%20%5B%0D%0A%20%20%20%20%20%20%20%20util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%201)%2C%0D%0A%20%20%20%20%20%20%20%20util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%202)%0D%0A%20%20%20%20%20%20%5D%3B%0D%0A%20%20%20%20%20%20if%20(branches%5B0%5D%20%26%26%20branches%5B1%5D)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0D%0A%20%20%20%20%20%20%20%20const%20run%20%3D%20util.sequencer.runtime%3B%0D%0A%20%20%20%20%20%20%20%20const%20ogThread%20%3D%20util.thread%3B%0D%0A%20%20%20%20%20%20%20%20%2F%2Fminimize%20push%20time%0D%0A%20%20%20%20%20%20%20%20const%20thread1%20%3D%20run._pushThread(branches%5B0%5D%2C%20target%2C%20%7B%20stackClick%3A%20false%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20thread1.status%20%3D%201%3B%0D%0A%20%20%20%20%20%20%20%20this.addMissKeys(ogThread%2C%20thread1)%3B%0D%0A%20%20%20%20%20%20%20%20const%20thread2%20%3D%20run._pushThread(branches%5B1%5D%2C%20target%2C%20%7B%20stackClick%3A%20false%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20this.addMissKeys(ogThread%2C%20thread2)%3B%0D%0A%20%20%20%20%20%20%20%20thread1.status%20%3D%200%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20runType(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20branch%20%3D%20util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%201)%3B%0D%0A%20%20%20%20%20%20if%20(branch)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22forward%22)%20runtime._pushThread(branch%2C%20util.target)%3B%0D%0A%20%20%20%20%20%20%20%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22reversed%22%20%7C%7C%20args.TYPE%20%3D%3D%3D%20%22randomized%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20container%20%3D%20util.target.blocks%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20blockOrder%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20let%20ID%20%3D%20branch%3B%0D%0A%20%20%20%20%20%20%20%20%20%20while%20(ID%20!%3D%3D%20null)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockOrder.push(ID)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20blockInfo%20%3D%20container.getBlock(ID)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20ID%20%3D%20blockInfo.next%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22reversed%22)%20blockOrder%20%3D%20blockOrder.reverse()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20else%20blockOrder%20%3D%20blockOrder.sort(()%20%3D%3E%20Math.random()%20-%200.5)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20blockOrder.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20ID%20%3D%20blockOrder%5Bi%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20blockInfo%20%3D%20container.getBlock(ID)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20oldInfo%20%3D%20%5BblockInfo.parent%2C%20blockInfo.next%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockInfo.parent%20%3D%20null%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockInfo.next%20%3D%20null%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20thread%20%3D%20runtime._pushThread(ID%2C%20util.target%2C%20%7BstackClick%3A%20true%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20thread.stack%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20thread.pushStack(ID)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(vm.runtime.compilerOptions.enabled)%20thread.tryCompile()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20interval%20%3D%20setInterval(()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!vm.runtime.isActiveThread(thread))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(interval)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockInfo.parent%20%3D%20oldInfo%5B0%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockInfo.next%20%3D%20oldInfo%5B1%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20thread%20%3D%20runtime._pushThread(branch%2C%20util.target)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20checkThread%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!vm.runtime.isActiveThread(thread))%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20setTimeout(checkThread%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20checkThread()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20await%20this.runType(%7B%20...args%2C%20TYPE%3A%20%22reversed%22%20%7D%2C%20util)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20onCall()%20%7B%20%2F*%20ignore%20initially%20running%20*%2F%20%7D%0D%0A%0D%0A%20%20%20%20runBranch(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20callID%20%3D%20Scratch.Cast.toString(args.ID)%3B%0D%0A%20%20%20%20%20%20const%20promises%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20const%20threads2Wait%20%3D%20%5B%5D%3B%20%2F%2F%20used%20for%20%22run%20and%20wait%22%0D%0A%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20blocks%20%3D%20target.blocks%3B%0D%0A%20%20%20%20%20%20%20%20for%20(const%20key%20of%20Object.keys(blocks._blocks))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20block%20%3D%20blocks._blocks%5Bkey%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(block.opcode%20%3D%3D%3D%20%22SPadvControl_onCall%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20input%20%3D%20blocks.getBlock(block.inputs.CALL.block)%3F.fields%3F.TEXT%3F.value%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20isText%20%3D%20Scratch.Cast.toBoolean(input)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20user%20simply%20inputs%20%22false%22%20or%20%22true%22%2C%20we%20should%20prevent%20that%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Scratch.Cast.toString(isText)%20%3D%3D%3D%20input)%20isText%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(input%20%3D%3D%3D%20undefined%20%26%26%20!isText)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20promises.push(this.getTargetVal(target%2C%20block.inputs%3F.CALL%2C%20target)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.then(output%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20input%20%3D%20output%20%3D%3D%3D%20callID%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(block.opcode%20%3D%3D%3D%20%22SPadvControl_onCall%22%20%26%26%20input)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20branch%20%3D%20blocks.getBranch(blocks._blocks%5Bkey%5D.id%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(branch)%20threads2Wait.push(util.sequencer.runtime._pushThread(branch%2C%20target))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(isText%20%26%26%20input%20%3D%3D%3D%20callID)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20blockID%20%3D%20blocks._blocks%5Bkey%5D.id%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20branch%20%3D%20blocks.getBranch(blockID%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(branch)%20threads2Wait.push(util.sequencer.runtime._pushThread(branch%2C%20target))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20if%20(promises.length%20%3D%3D%3D%200)%20return%20threads2Wait%3B%0D%0A%20%20%20%20%20%20else%20return%20Promise.all(promises).then(()%20%3D%3E%20threads2Wait)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20runBranchWait(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20let%20threads2Wait%20%3D%20await%20this.runBranch(args%2C%20util)%3B%0D%0A%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20interval%20%3D%20setInterval(()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20threads2Wait.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!vm.runtime.isActiveThread(threads2Wait%5Bi%5D))%20threads2Wait.splice(i%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(threads2Wait.length%20%3D%3D%3D%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(interval)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%2C%201)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20tryCatch(_%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20branch%20%3D%20util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%201)%3B%0D%0A%20%20%20%20%20%20if%20(branch)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20thread%20%3D%20runtime._pushThread(branch%2C%20util.target%2C%20%7B%20stackClick%3A%20false%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20this.addMissKeys(util.thread%2C%20thread)%3B%0D%0A%20%20%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20checkThread%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20thread.pushTime%20%3D%20Math.floor(Date.now()%20%2F%20200)%20*%20200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!vm.runtime.isActiveThread(thread))%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(issueTimes.indexOf(thread.pushTime)%20!%3D%3D%20-1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20thread.stopThisScript()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20setTimeout(checkThread%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20checkThread()%3B%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(issueTimes.indexOf(thread.pushTime)%20!%3D%3D%20-1)%20util.startBranch(2%2C%20false)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20asyncCode(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0D%0A%20%20%20%20%20%20const%20container%20%3D%20target.blocks%3B%0D%0A%20%20%20%20%20%20if%20(util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%201))%20%7B%0D%0A%20%20%20%20%20%20%20%20let%20ID%20%3D%20util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20while%20(ID%20!%3D%3D%20null)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20var%20blockInfo%20%3D%20container.getBlock(ID)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20var%20oldInfo%20%3D%20%5BblockInfo.parent%2C%20blockInfo.next%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20blockInfo.parent%20%3D%20null%3B%0D%0A%20%20%20%20%20%20%20%20%20%20blockInfo.next%20%3D%20null%3B%0D%0A%20%20%20%20%20%20%20%20%20%20var%20thread%20%3D%20runtime._pushThread(ID%2C%20target%2C%20%7BstackClick%3A%20true%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.addMissKeys(util.thread%2C%20thread)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20thread.stack%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20thread.pushStack(ID)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(vm.runtime.compilerOptions.enabled)%20thread.tryCompile()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20interval%20%3D%20setInterval(()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!vm.runtime.isActiveThread(thread))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(interval)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%2010)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20blockInfo.parent%20%3D%20oldInfo%5B0%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20blockInfo.next%20%3D%20oldInfo%5B1%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ID%20%3D%20blockInfo.next%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20ifRunBlock(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20branch%20%3D%20util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%201)%3B%0D%0A%20%20%20%20%20%20const%20con%20%3D%20Scratch.Cast.toBoolean(args.CON)%3B%0D%0A%20%20%20%20%20%20if%20(branch)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(con)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(util.stackFrame.SPctrlThread%20%3D%3D%3D%20undefined)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.stackFrame.SPctrlThread%20%3D%20runtime._pushThread(branch%2C%20util.target%2C%20%7B%20stackClick%3A%20false%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.addMissKeys(util.thread%2C%20util.stackFrame.SPctrlThread)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(runtime.isActiveThread(util.stackFrame.SPctrlThread))%20util.startBranch(2%2C%20true)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(util.stackFrame.SPctrlThread%20!%3D%3D%20undefined)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20thread%20%3D%20util.stackFrame.SPctrlThread%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(runtime.isActiveThread(thread))%20thread.stopThisScript()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20ifPart(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20con%20%3D%20Scratch.Cast.toBoolean(args.CON)%3B%0D%0A%20%20%20%20%20%20conditionStorage%5BScratch.Cast.toString(args.ID)%5D%20%3D%20con%3B%0D%0A%20%20%20%20%20%20if%20(con)%20util.startBranch(1%2C%20false)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20elsePart(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20ID%20%3D%20Scratch.Cast.toString(args.ID)%3B%0D%0A%20%20%20%20%20%20if%20(conditionStorage%5BID%5D%20!%3D%3D%20undefined%20%26%26%20conditionStorage%5BID%5D%20%3D%3D%3D%20false)%20util.startBranch(1%2C%20false)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20ifElseVal(args)%20%7B%0D%0A%20%20%20%20%20%20return%20Scratch.Cast.toBoolean(conditionStorage%5BScratch.Cast.toString(args.ID)%5D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20runInSprite(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thisSprite%20%3D%20util.thread.ogTarget%20!%3D%3D%20undefined%20%3F%20util.thread.ogTarget%20%3A%20util.target%3B%0D%0A%20%20%20%20%20%20const%20branch%20%3D%20util.thread.ogTarget%20!%3D%3D%20undefined%20%3F%20util.thread.ogTarget.blocks.getBranch(util.thread.peekStack()%2C%201)%20%3A%0D%0A%20%20%20%20%20%20%20%20util.target.blocks.getBranch(util.thread.peekStack()%2C%201)%3B%0D%0A%20%20%20%20%20%20let%20newTarget%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_stage_%22%20%3F%20runtime.getTargetForStage()%20%3A%20runtime.getSpriteTargetByName(args.SPRITE)%3B%0D%0A%20%20%20%20%20%20let%20targets%20%3D%20runtime.targets%3B%0D%0A%20%20%20%20%20%20if%20(!branch)%20return%3B%0D%0A%20%20%20%20%20%20if%20(Scratch.Cast.toString(args.SPRITE).startsWith(%22_all_%22))%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(args.SPRITE.includes(%222%22))%20targets%20%3D%20targets.filter(target%20%3D%3E%20target.isOriginal)%3B%20%2F%2F%20Main%20Sprites%0D%0A%20%20%20%20%20%20%20%20if%20(args.SPRITE.includes(%223%22))%20targets%20%3D%20targets.filter(target%20%3D%3E%20!target.isOriginal)%3B%20%2F%2F%20Clones%0D%0A%20%20%20%20%20%20%20%20newTarget%20%3D%20targets%5B0%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20if%20(newTarget)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20thread%20%3D%20this.pushThreadTarget(branch%2C%20newTarget%2C%20thisSprite)%3B%0D%0A%20%20%20%20%20%20%20%20this.addMissKeys(util.thread%2C%20thread)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20if%20(Scratch.Cast.toString(args.SPRITE).startsWith(%22_all_%22))%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20targets.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20newThread%20%3D%20this.pushThreadTarget(branch%2C%20targets%5Bi%5D%2C%20thisSprite)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.addMissKeys(util.thread%2C%20newThread)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%2F%2F%20Branch%20is%20the%20same%2C%20no%20need%20to%20wait%20for%20all%20threads%20to%20finish%20when%20they%20are%20the%20same%0D%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22wait%22%20%26%26%20thread)%20%7B%0D%0A%20%20%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20interval%20%3D%20setInterval(()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!vm.runtime.isActiveThread(thread))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(interval)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20getInSprite(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20container%20%3D%20util.thread.blockContainer%3B%0D%0A%20%20%20%20%20%20let%20branch%20%3D%20container.getBlock(util.thread.isCompiled%20%3F%20util.thread.peekStack()%20%3A%20util.thread.peekStackFrame().op.id)%3B%0D%0A%20%20%20%20%20%20if%20(!branch)%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20branch%20%3D%20branch.inputs.THING%3B%0D%0A%20%20%20%20%20%20const%20newTarget%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_stage_%22%20%3F%20runtime.getTargetForStage()%20%3A%20runtime.getSpriteTargetByName(args.SPRITE)%3B%0D%0A%20%20%20%20%20%20if%20(branch%20!%3D%3D%20undefined%20%26%26%20newTarget)%20return%20await%20this.getTargetVal(newTarget%2C%20branch%2C%20util.target)%3B%0D%0A%20%20%20%20%20%20return%20%22%22%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20asClone(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thisSprite%20%3D%20util.thread.ogTarget%20!%3D%3D%20undefined%20%3F%20util.thread.ogTarget%20%3A%20util.target%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_myself_%22%20%3F%20thisSprite%20%3A%20runtime.getSpriteTargetByName(args.SPRITE)%3B%0D%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0D%0A%20%20%20%20%20%20const%20clones%20%3D%20target.sprite.clones%3B%0D%0A%20%20%20%20%20%20const%20branch%20%3D%20util.thread.ogTarget%20!%3D%3D%20undefined%20%3F%20util.thread.ogTarget.blocks.getBranch(util.thread.peekStack()%2C%201)%20%3A%0D%0A%20%20%20%20%20%20%20%20util.target.blocks.getBranch(util.thread.peekStack()%2C%201)%3B%0D%0A%20%20%20%20%20%20if%20(branch)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20clones.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(clones%5Bi%5D)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20variable%20%3D%20clones%5Bi%5D.lookupVariableByNameAndType(args.VAR%2C%20%22%22%2C%20clones%5Bi%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20value%20%3D%20Scratch.Cast.toString(args.VAL)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20thread%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(variable%20%26%26%20Scratch.Cast.toString(variable.value)%20%3D%3D%3D%20value)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20thread%20%3D%20runtime._pushThread(branch%2C%20clones%5Bi%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20thread%20%3D%20this.pushThreadTarget(branch%2C%20clones%5Bi%5D%2C%20thisSprite)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.addMissKeys(util.thread%2C%20thread)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20getInClone(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20args.SPRITE%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20runtime.getSpriteTargetByName(args.SPRITE)%3B%0D%0A%20%20%20%20%20%20const%20container%20%3D%20util.thread.blockContainer%3B%0D%0A%20%20%20%20%20%20let%20branch%20%3D%20container.getBlock(util.thread.isCompiled%20%3F%20util.thread.peekStack()%20%3A%20util.thread.peekStackFrame().op.id)%3B%0D%0A%20%20%20%20%20%20if%20(!branch%20%7C%7C%20!target)%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20branch%20%3D%20branch.inputs.THING%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20clones%20%3D%20target.sprite.clones%3B%0D%0A%20%20%20%20%20%20let%20newTarget%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20clones.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(clones%5Bi%5D)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20variable%20%3D%20clones%5Bi%5D.lookupVariableByNameAndType(args.VAR%2C%20%22%22%2C%20clones%5Bi%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20value%20%3D%20Scratch.Cast.toString(args.VAL)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(variable%20%26%26%20Scratch.Cast.toString(variable.value)%20%3D%3D%3D%20value)%20newTarget.push(clones%5Bi%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20newTarget%20%3D%20newTarget%5BScratch.Cast.toNumber(args.ID)%20-%201%5D%3B%0D%0A%20%20%20%20%20%20if%20(branch%20!%3D%3D%20undefined%20%26%26%20newTarget)%20return%20await%20this.getTargetVal(newTarget%2C%20branch%2C%20util.target)%3B%0D%0A%20%20%20%20%20%20return%20%22%22%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20deleteRun(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0D%0A%20%20%20%20%20%20if%20(target.isOriginal)%20return%3B%0D%0A%20%20%20%20%20%20const%20branch%20%3D%20util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%201)%3B%0D%0A%20%20%20%20%20%20runtime.disposeTarget(target)%3B%0D%0A%20%20%20%20%20%20runtime.stopForTarget(target)%3B%0D%0A%20%20%20%20%20%20if%20(branch)%20this.addMissKeys(util.thread%2C%20runtime._pushThread(branch%2C%20target.sprite.clones%5B0%5D))%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20newThreadAdv(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20branch%20%3D%20util.thread.target.blocks.getBranch(util.thread.peekStack()%2C%200)%3B%0D%0A%20%20%20%20%20%20if%20(branch)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20thread%20%3D%20util.sequencer.runtime._pushThread(branch%2C%20util.target)%3B%0D%0A%20%20%20%20%20%20%20%20this.addMissKeys(util.thread%2C%20thread)%3B%0D%0A%20%20%20%20%20%20%20%20const%20params%20%3D%20thread.SPadvCtrl%3B%0D%0A%20%20%20%20%20%20%20%20if%20(typeof%20params%20%3D%3D%3D%20%22undefined%22)%20thread.stackFrames%5B0%5D.SPadvCtrl%20%3D%20%7B%7D%3B%0D%0A%20%20%20%20%20%20%20%20thread.stackFrames%5B0%5D.SPadvCtrl.arg%20%3D%20Scratch.Cast.toString(args.ARGS)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20threadArgs(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20stack%20%3D%20util.thread.stackFrames%3B%0D%0A%20%20%20%20%20%20if%20(typeof%20stack%20%3D%3D%3D%20%22undefined%22)%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20const%20params%20%3D%20stack%5B0%5D.SPadvCtrl%3B%0D%0A%20%20%20%20%20%20if%20(typeof%20params%20%3D%3D%3D%20%22undefined%22)%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20return%20params.arg%20%7C%7C%20%22%22%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20waitChanged(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20input%20%3D%20Scratch.Cast.toString(args.THING)%3B%0D%0A%20%20%20%20%20%20if%20(util.stackFrame.SPwaitChange%20%3D%3D%3D%20undefined)%20util.stackFrame.SPwaitChange%20%3D%20input%3B%0D%0A%20%20%20%20%20%20if%20(Scratch.Cast.compare(util.stackFrame.SPwaitChange%2C%20input)%20%3D%3D%3D%200)%20util.startBranch(1%2C%20true)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F%2F%20Will%20work%20like%20a%20normal%20Break%20Loop%20when%20compiler%20is%20on%2C%20otherwise%20will%20run%20this%3A%0D%0A%20%20%20%20breakLoop(_%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20return%20new%20Promise(resolve%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20container%20%3D%20util.thread.blockContainer%3B%0D%0A%20%20%20%20%20%20%20%20const%20myID%20%3D%20container.getBlock(util.thread.isCompiled%20%3F%20util.thread.peekStack()%20%3A%20util.thread.peekStackFrame().op.id)%3B%0D%0A%20%20%20%20%20%20%20%20let%20newID%20%3D%20myID%3B%0D%0A%20%20%20%20%20%20%20%20let%20con%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20if%20(!runtime.compilerOptions.enabled)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20console.warn(%22For%20this%20'Break%20Out%20Loop'%20block%20to%20work%20properly%2C%20please%20Enable%20the%20Compiler%22)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20if%20(!newID)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20while%20(con)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(newID.parent%20!%3D%3D%20null)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newID%20%3D%20container.getBlock(newID.parent)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20check%20if%20block%20is%20IN%20or%20UNDER%20this%20Loop%20Block%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(container.getBranch(newID.id)%20!%3D%3D%20null%20%26%26%20this.isInLoop(container%2C%20myID.id%2C%20newID.id))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20con%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20newID%20%3D%20null%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20con%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20if%20(!newID)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20newID%20%3D%20newID.next%20%7C%7C%20this.getOuterNext(container%2C%20newID)%3B%0D%0A%20%20%20%20%20%20%20%20util.stopThisScript()%3B%0D%0A%20%20%20%20%20%20%20%20if%20(newID)%20this.addMissKeys(util.thread%2C%20runtime._pushThread(newID%2C%20util.target))%3B%0D%0A%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20isInLoop(container%2C%20myID%2C%20loopBlock)%20%7B%0D%0A%20%20%20%20%20%20let%20value%20%3D%20false%3B%0D%0A%20%20%20%20%20%20let%20ID%20%3D%20container.getBranch(loopBlock%2C%201)%3B%0D%0A%20%20%20%20%20%20if%20(ID)%20%7B%0D%0A%20%20%20%20%20%20%20%20while%20(ID%20!%3D%3D%20null)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20var%20blockInfo%20%3D%20container.getBlock(ID)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(ID%20%3D%3D%3D%20myID)%20value%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ID%20%3D%20blockInfo.next%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20value%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20getOuterNext(container%2C%20block)%20%7B%0D%0A%20%20%20%20%20%20let%20value%20%3D%20null%3B%0D%0A%20%20%20%20%20%20let%20ID%20%3D%20block%3B%0D%0A%20%20%20%20%20%20while%20(ID%20!%3D%3D%20null)%20%7B%0D%0A%20%20%20%20%20%20%20%20ID%20%3D%20container.getBlock(ID.parent)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(ID)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(container.getBranch(ID.id)%20!%3D%3D%20null%20%26%26%20ID.next)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20ID.next%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20ID%20%3D%20null%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%20ID%20%3D%20null%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20value%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%20%20window.onerror%20%3D%20function()%20%7B%20issueTimes.push(Math.floor(Date.now()%20%2F%20200)%20*%20200)%20%7D%3B%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20SPadvControl())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Better%20Comments%0A%2F%2F%20ID%3A%20SPcomments%0A%2F%2F%20Description%3A%20Better%20Comments%20with%20More%20Customization%0A%2F%2F%20By%3A%20SharkPool%0A%0A%2F%2F%20Version%20V.1.0.0%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Better%20Comments%20Extension%20must%20run%20unsandboxed!%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI5MC4yOTUwMiIgaGVpZ2h0PSI5MC4yOTUwMiIgdmlld0JveD0iMCwwLDkwLjI5NTAyLDkwLjI5NTAyIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTk0Ljg1MjQ5LC0xMzQuODUyNDkpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTE5Ni44NTI0OSwxODBjMCwtMjMuODI5NzEgMTkuMzE3OCwtNDMuMTQ3NTEgNDMuMTQ3NTEsLTQzLjE0NzUxYzIzLjgyOTcxLDAgNDMuMTQ3NTEsMTkuMzE3OCA0My4xNDc1MSw0My4xNDc1MWMwLDIzLjgyOTcxIC0xOS4zMTc4LDQzLjE0NzUxIC00My4xNDc1MSw0My4xNDc1MWMtMjMuODI5NzEsMCAtNDMuMTQ3NTEsLTE5LjMxNzggLTQzLjE0NzUxLC00My4xNDc1MXoiIGZpbGw9IiM5YjkyNWQiIHN0cm9rZT0iIzVkNTgzOCIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yMTQuMTYxOTcsMTk5LjgzNzI4YzAsLTEwLjg2NzAzIDAsLTMyLjg0MjU2IDAsLTM5LjAwMDhjMCwtMy4xNDE3MSAzLjE2NjY3LC02LjUwMDEzIDYuMTc1MTMsLTYuNTAwMTNjNi4xNDU3LDAgMjguODEwNjMsMCAzOS42NTA4MSwwYzMuNTY0MjUsMCA1Ljg1MDEyLDMuMzU4NDMgNS44NTAxMiw2LjUwMDE0YzAsNi4xNTgyNCAwLDI4LjEzMzc4IDAsMzkuMDAwOGMwLDMuNzQ4NCAtMi45NzY3LDYuMTc1MTMgLTUuODUwMTIsNi4xNzUxM2MtNC41MjIzNiwwIC0yOC42Njc4LDAgLTM5Ljk3NTgyLDBjLTMuNTYxOTIsMCAtNS44NTAxMiwtMi40MjY3MyAtNS44NTAxMiwtNi4xNzUxM3oiIGZpbGw9Im5vbmUiIHN0cm9rZS1vcGFjaXR5PSIwLjQ3NDUxIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjE0LjE2MTk3LDE5OS44MzcyOGMwLC0xMC44NjcwMyAwLC0zMi44NDI1NiAwLC0zOS4wMDA4YzAsLTMuMTQxNzEgMy4xNjY2NywtNi41MDAxMyA2LjE3NTEzLC02LjUwMDEzYzYuMTQ1NywwIDI4LjgxMDYzLDAgMzkuNjUwODEsMGMzLjU2NDI1LDAgNS44NTAxMiwzLjM1ODQzIDUuODUwMTIsNi41MDAxNGMwLDYuMTU4MjQgMCwyOC4xMzM3OCAwLDM5LjAwMDhjMCwzLjc0ODQgLTIuOTc2Nyw2LjE3NTEzIC01Ljg1MDEyLDYuMTc1MTNjLTQuNTIyMzYsMCAtMjguNjY3OCwwIC0zOS45NzU4MiwwYy0zLjU2MTkyLDAgLTUuODUwMTIsLTIuNDI2NzMgLTUuODUwMTIsLTYuMTc1MTN6IiBmaWxsPSIjZmZmMDk5IiBzdHJva2Utb3BhY2l0eT0iMC40NzQ1MSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8%2BPHBhdGggZD0iTTIxNC4xNjE5NywxNjcuMDc5NmMwLDAgMCwtNS4yNzQyNiAwLC02LjI0MzEzYzAsLTMuMTQxNzEgMy4xNjY2NywtNi41MDAxMyA2LjE3NTEzLC02LjUwMDEzYzYuMTQ1NywwIDI4LjgxMDYzLDAgMzkuNjUwODEsMGMzLjU2NDI1LDAgNS44NTAxMiwzLjM1ODQzIDUuODUwMTIsNi41MDAxNGMwLDAuMTY4MzcgMCw2LjI0MzEzIDAsNi4yNDMxM3oiIGZpbGw9IiNjY2JmN2EiIHN0cm9rZS1vcGFjaXR5PSIwLjQ3NDUxIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMCIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjE0LjA5NTYzLDE2Ny4wMjI5N2g1MS44MzMzM3oiIGZpbGw9Im5vbmUiIHN0cm9rZS1vcGFjaXR5PSIwLjUwMTk2IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSIiIGZpbGw9Im5vbmUiIHN0cm9rZS1vcGFjaXR5PSIwLjUwMTk2IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9IiIgZmlsbD0ibm9uZSIgc3Ryb2tlLW9wYWNpdHk9IjAuNTAxOTYiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8%2BPHBhdGggZD0iIiBmaWxsPSJub25lIiBzdHJva2Utb3BhY2l0eT0iMC41MDE5NiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48ZyBmaWxsPSJub25lIiBzdHJva2Utb3BhY2l0eT0iMC41MDE5NiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxwYXRoIGQ9IiIvPjxwYXRoIGQ9IiIvPjwvZz48cGF0aCBkPSJNMjM2LjcsMTk0LjR2LTQuNWgtNC41Yy0yLjIwOTE0LDAgLTQsLTEuNDc3NDYgLTQsLTMuM2MwLC0xLjgyMjU0IDEuNzkwODYsLTMuMyA0LC0zLjNoNC41di00LjVjMCwtMi4yMDkxNCAxLjQ3NzQ2LC00IDMuMywtNGMxLjgyMjU0LDAgMy4zLDEuNzkwODYgMy4zLDR2NC41aDQuNWMyLjIwOTE0LDAgNCwxLjQ3NzQ2IDQsMy4zYzAsMS44MjI1NCAtMS43OTA4NiwzLjMgLTQsMy4zaC00LjV2NC41YzAsMi4yMDkxNCAtMS40Nzc0Niw0IC0zLjMsNGMtMS44MjI1NCwwIC0zLjMsLTEuNzkwODYgLTMuMywtNHoiIGZpbGw9Im5vbmUiIHN0cm9rZS1vcGFjaXR5PSIwLjUwMTk2IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjM2LjcsMTk0LjR2LTQuNWgtNC41Yy0yLjIwOTE0LDAgLTQsLTEuNDc3NDYgLTQsLTMuM2MwLC0xLjgyMjU0IDEuNzkwODYsLTMuMyA0LC0zLjNoNC41di00LjVjMCwtMi4yMDkxNCAxLjQ3NzQ2LC00IDMuMywtNGMxLjgyMjU0LDAgMy4zLDEuNzkwODYgMy4zLDR2NC41aDQuNWMyLjIwOTE0LDAgNCwxLjQ3NzQ2IDQsMy4zYzAsMS44MjI1NCAtMS43OTA4NiwzLjMgLTQsMy4zaC00LjV2NC41YzAsMi4yMDkxNCAtMS40Nzc0Niw0IC0zLjMsNGMtMS44MjI1NCwwIC0zLjMsLTEuNzkwODYgLTMuMywtNHoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjwvZz48L2c%2BPC9zdmc%2B%22%3B%0A%0A%20%20const%20colorIcon%20%3D%20%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyMCAyMCIgaGVpZ2h0PSIyMHB4IiB3aWR0aD0iMjBweCI%2BCiAgICAKICAgIDx0aXRsZT5maWxsPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM%2BPC9kZWZzPgogICAgPGcgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZT0ibm9uZSIgaWQ9IlBhZ2UtMSI%2BCiAgICAgICAgPGcgZmlsbD0iIzU3NUU3NSIgaWQ9ImZpbGwiPgogICAgICAgICAgICA8cGF0aCBpZD0iRmlsbC0xIiBkPSJNMTQuMDQ1MDk2OSw5LjY5MzQ5NTA0IEwxNC4wMzA2ODE4LDkuNjc5MTYyMDcgQzEzLjQzOTY2MjksOS4zNjM4MzY4MiAxMi41MTcwOTY4LDguNjkwMTg3NDMgMTEuNDIxNTQ5Niw3LjYwMDg4MjAzIEMxMS4wOTAwMDI0LDcuMjcxMjIzODEgMTAuNzg3Mjg1NCw2Ljk1NTg5ODU3IDEwLjU0MjIyODgsNi42NTQ5MDYyOCBDMTAuNzE1MjEsNi40Mzk5MTE4IDEwLjg4ODE5MTEsNi4yMjQ5MTczMSAxMS4wNjExNzIyLDYuMDA5OTIyODIgQzExLjM3ODMwNDMsNi4yNjc5MTYyMSAxMS43MjQyNjY2LDYuNTgzMjQxNDYgMTIuMDg0NjQ0LDYuOTQxNTY1NiBDMTIuMzE1Mjg1NSw3LjE3MDg5MzA1IDEyLjUwMjY4MTcsNy4zNzE1NTQ1OCAxMi42OTAwNzgsNy41NzIyMTYxIEMxMi43MTg5MDgxLDcuNjE1MjE0OTkgMTIuNzYyMTUzNCw3LjY1ODIxMzg5IDEyLjgxOTgxMzgsNy43MDEyMTI3OSBDMTMuNjI3MDU5MSw4LjYxODUyMjYgMTQuMTAyNzU3Myw5LjM2MzgzNjgyIDE0LjMxODk4MzcsOS43OTM4MjU4IEMxNC4zMTg5ODM3LDkuODA4MTU4NzcgMTQuMzMzMzk4OCw5LjgyMjQ5MTczIDE0LjMzMzM5ODgsOS44MzY4MjQ3IEMxNC4yNDY5MDgyLDkuNzkzODI1OCAxNC4xNDYwMDI1LDkuNzUwODI2OSAxNC4wNDUwOTY5LDkuNjkzNDk1MDQgTTEwLjU5OTg4OTIsMTAuMDY2MTUyMSBDOS43MzQ5ODM1LDEwLjUzOTE0IDguOTEzMzIzMDksMTAuOTgzNDYyIDcuNjE1OTY0NTUsMTAuNjgyNDY5NyBDNi4xNzQ0NTUwNiwxMC4zNTI4MTE1IDUuNDgyNTMwNSw5Ljc2NTE1OTg3IDUuMTk0MjI4NjEsOS40MjExNjg2OSBMOC4zMDc4ODkxLDUuNDA3OTM4MjYgQzguNTI0MTE1NTMsNS44Mzc5MjcyMyA4Ljg0MTI0NzYyLDYuMjgyMjQ5MTcgOS4xNzI3OTQ4LDYuNjk3OTA1MTggQzguODI2ODMyNTIsNy4yMTM4OTE5NSA4LjU1Mjk0NTcyLDcuNjQzODgwOTMgOC40MjMyMDk4Niw3Ljg0NDU0MjQ1IEM4LjI3OTA1ODkxLDguMDg4MjAyODcgOC4zNTExMzQzOSw4LjQxNzg2MTA4IDguNjEwNjA2MSw4LjU3NTUyMzcgQzguNjk3MDk2NjcsOC42MzI4NTU1NyA4Ljc5ODAwMjMzLDguNjYxNTIxNSA4Ljg4NDQ5MjksOC42NjE1MjE1IEM5LjA3MTg4OTEzLDguNjYxNTIxNSA5LjI0NDg3MDI3LDguNTYxMTkwNzQgOS4zNDU3NzU5NCw4LjQwMzUyODExIEM5LjUwNDM0MTk4LDguMTMxMjAxNzYgOS42OTE3MzgyMSw3Ljg0NDU0MjQ1IDkuODkzNTQ5NTQsNy41NTc4ODMxMyBDMTAuMTk2MjY2NSw3LjkwMTg3NDMxIDEwLjQ3MDE1MzMsOC4xNzQyMDA2NiAxMC42NTc1NDk2LDguMzYwNTI5MjIgQzExLjA3NTU4NzMsOC43NzYxODUyMyAxMS40OTM2MjUxLDkuMTQ4ODQyMzQgMTEuODk3MjQ3Nyw5LjQ3ODUwMDU1IEMxMS40MjE1NDk2LDkuNjA3NDk3MjQgMTEuMDAzNTExOSw5Ljg1MTE1NzY2IDEwLjU5OTg4OTIsMTAuMDY2MTUyMSBNMTAuMjEwNjgxNiw1LjMzNjI3MzQzIEMxMC4wOTUzNjA5LDUuNDkzOTM2MDUgOS45NjU2MjUwMiw1LjY1MTU5ODY4IDkuODUwMzA0MjYsNS43OTQ5MjgzNCBDOS41MDQzNDE5OCw1LjMzNjI3MzQzIDkuMjg4MTE1NTYsNC45NjM2MTYzMiA5LjE3Mjc5NDgsNC43MDU2MjI5MyBDOS40MTc4NTE0MSw0LjgwNTk1MzY5IDkuNzYzODEzNjksNS4wMjA5NDgxOCAxMC4yMTA2ODE2LDUuMzM2MjczNDMgTTEzLjUxMTczODQsNC4wNzQ5NzI0NCBDMTMuNjcwMzA0NCw0LjA3NDk3MjQ0IDEzLjg0MzI4NTUsNC4xMDM2MzgzNyAxMy44NzIxMTU3LDQuMTc1MzAzMiBDMTQuMDQ1MDk2OSw0LjQ5MDYyODQ1IDEzLjYyNzA1OTEsNS40OTM5MzYwNSAxMy4wNjQ4NzA0LDYuMzk2OTEyOSBMMTIuODQ4NjQ0LDYuMTgxOTE4NDEgQzEyLjYxODAwMjUsNS45NTI1OTA5NiAxMi4yMjg3OTQ5LDUuNTk0MjY2ODEgMTEuNzgxOTI3LDUuMjA3Mjc2NzQgQzEyLjQ0NTAyMTMsNC41MzM2MjczNCAxMy4wNTA0NTUzLDQuMDc0OTcyNDQgMTMuNTExNzM4NCw0LjA3NDk3MjQ0IE0xNi41NTMzMjM0LDEyLjE1ODc2NTIgQzE2LjMzNzA5NywxMS41OTk3Nzk1IDE1Ljk5MTEzNDcsMTEuMDk4MTI1NyAxNS41ODc1MTIsMTAuNjY4MTM2NyBDMTUuNTQ0MjY2NywxMC42MTA4MDQ5IDE1LjQ4NjYwNjQsMTAuNTY3ODA2IDE1LjQyODk0NiwxMC41MjQ4MDcxIEMxNS42NzQwMDI2LDkuOTk0NDg3MzIgMTUuMjcwMzc5OSw5LjIzNDg0MDEzIDE0LjkyNDQxNzcsOC42OTAxODc0MyBDMTQuNjUwNTMwOSw4LjI0NTg2NTQ5IDE0LjI3NTczODQsNy43NDQyMTE2OSAxMy44Mjg4NzA1LDcuMjQyNTU3ODggQzE0LjM5MTA1OTIsNi4zODI1Nzk5MyAxNS4zNTY4NzA1LDQuNjc2OTU3IDE0LjgzNzkyNzEsMy42NzM2NDkzOSBDMTQuNjc5MzYxLDMuMzcyNjU3MTEgMTQuMzE4OTgzNywzIDEzLjUxMTczODQsMyBMMTMuNDk3MzIzMywzIEMxMi42NzU2NjI5LDMgMTEuNzY3NTExOSwzLjY1OTMxNjQzIDEwLjk0NTg1MTUsNC41MTkyOTQzOCBDMTAuMDIzMjg1NCwzLjg0NTY0NDk4IDkuMDE0MjI4NzUsMy4zMTUzMjUyNSA4LjQwODc5NDc3LDMuNjU5MzE2NDMgQzguMzUxMTM0MzksMy42ODc5ODIzNiA4LjI3OTA1ODkxLDMuNzE2NjQ4MjkgOC4yMzU4MTM2MywzLjc3Mzk4MDE1IEM4LjIyMTM5ODUzLDMuNzg4MzEzMTIgOC4xOTI1NjgzNSwzLjgwMjY0NjA5IDguMTc4MTUzMjUsMy44MzEzMTIwMiBDOC4xNjM3MzgxNiwzLjg0NTY0NDk4IDguMTQ5MzIzMDYsMy44NTk5Nzc5NSA4LjEzNDkwNzk3LDMuODg4NjQzODggTDguMTIwNDkyODcsMy45MTczMDk4MSBMNC4xMjc1MTE1OCw5LjA0ODUxMTU4IEM0LjExMzA5NjQ5LDkuMDQ4NTExNTggNC4xMTMwOTY0OSw5LjA0ODUxMTU4IDQuMDk4NjgxMzksOS4wNjI4NDQ1NCBMMy4yMDQ5NDU1MSwxMC4yMjM4MTQ4IEwzLjE2MTcwMDIzLDEwLjI2NjgxMzcgQzMuMTE4NDU0OTQsMTAuMzA5ODEyNiAzLjA4OTYyNDc1LDEwLjM2NzE0NDQgMy4wNzUyMDk2NiwxMC40MTAxNDMzIEwzLjA3NTIwOTY2LDEwLjQyNDQ3NjMgQzIuNjI4MzQxNzEsMTEuMzQxNzg2MSA0LjI4NjA3NzYzLDEzLjEzMzQwNjggNS4wNjQ0OTI3NSwxMy45MjE3MiBDNS43NTY0MTczMSwxNC42MDk3MDIzIDcuMjg0NDE3MzcsMTYgOC4yMzU4MTM2MywxNiBDOC40Mzc2MjQ5NiwxNiA4LjU5NjE5MSwxNS45NDI2NjgxIDguNzQwMzQxOTUsMTUuODEzNjcxNCBMMTQuMjYxMzIzMywxMS41NTY3ODA2IEMxNC4yOTAxNTM1LDExLjU0MjQ0NzYgMTQuMzA0NTY4NiwxMS41MTM3ODE3IDE0LjMzMzM5ODgsMTEuNDg1MTE1OCBDMTQuMzYyMjI5LDExLjUxMzc4MTcgMTQuMzc2NjQ0MSwxMS41NTY3ODA2IDE0LjM5MTA1OTIsMTEuNTg1NDQ2NSBDMTQuNTY0MDQwMywxMS45Mjk0Mzc3IDE0LjY3OTM2MSwxMi4yODc3NjE5IDE0LjY5Mzc3NjEsMTIuNjc0NzUxOSBDMTQuNzM3MDIxNCwxMy4wNjE3NDIgMTQuNzA4MTkxMiwxMy40NjMwNjUgMTQuNjUwNTMwOSwxMy44NTAwNTUxIEwxNC42NTA1MzA5LDEzLjg2NDM4ODEgQzE0LjYzNjExNTgsMTMuOTc5MDUxOCAxNC42MzYxMTU4LDE0LjA3OTM4MjYgMTQuNjUwNTMwOSwxNC4xOTQwNDYzIEMxNC43NTE0MzY1LDE0LjgzOTAyOTggMTUuMzU2ODcwNSwxNS4yODMzNTE3IDE1Ljk5MTEzNDcsMTUuMTgzMDIwOSBDMTYuNjM5ODE0LDE1LjA4MjY5MDIgMTcuMDg2NjgxOSwxNC40ODA3MDU2IDE2Ljk4NTc3NjIsMTMuODM1NzIyMiBDMTYuODk5Mjg1NywxMy4yNzY3MzY1IDE2Ljc4Mzk2NDksMTIuNzAzNDE3OSAxNi41NTMzMjM0LDEyLjE1ODc2NTIiPjwvcGF0aD4KICAgICAgICA8L2c%2BCiAgICA8L2c%2BCjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20fontIcon%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIzMi4xNzM2IiBoZWlnaHQ9IjMyLjY2NTg0IiB2aWV3Qm94PSIwLDAsMzIuMTczNiwzMi42NjU4NCI%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyMy45MTMyLC0xNjMuNDIwOTYpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyOC4wMzQ1LDE3Ny42NDEpIHNjYWxlKDAuMzI2NzgsMC4zMjY3OCkiIGZvbnQtc2l6ZT0iNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiIGZpbGw9IiM1NzVlNzUiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgZm9udC1mYW1pbHk9IlNhbnMgU2VyaWYiIGZvbnQtd2VpZ2h0PSI0MDAiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjx0c3BhbiB4PSIwIiBkeT0iMCI%2BQTwvdHNwYW4%2BPC90ZXh0Pjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDIzNy4wMzQ1LDE4NC4xNDEpIHNjYWxlKDAuMjgzNDgsMC4yODM0OCkiIGZvbnQtc2l6ZT0iNDUiIHhtbDpzcGFjZT0icHJlc2VydmUiIGZpbGw9IiM1NzVlNzUiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEuNCIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgZm9udC1mYW1pbHk9IkNvbWljIFNhbnMgTXMiIGZvbnQtd2VpZ2h0PSI0MDAiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjx0c3BhbiB4PSIwIiBkeT0iMCI%2BQjwvdHNwYW4%2BPC90ZXh0Pjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0My41MzQ1LDE5MS4xNDEpIHNjYWxlKDAuMzIxODMsMC4zMjE4MykiIGZvbnQtc2l6ZT0iNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiIGZpbGw9IiM1NzVlNzUiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXdlaWdodD0iNDAwIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48dHNwYW4geD0iMCIgZHk9IjAiPkM8L3RzcGFuPjwvdGV4dD48cGF0aCBkPSJNMjIzLjkxMzIsMTk2LjA4Njh2LTMyLjE3MzZoMzIuMTczNnYzMi4xNzM2eiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20let%20SPcommentStorage%20%3D%20%7B%7D%3B%0A%0A%20%20%2F%2F%20Modals%0A%20%20function%20createModal(type%2C%20data)%20%7B%0A%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20modal%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20modal.classList.add(%22SPcommentModal%22)%3B%0A%20%20%20%20%20%20modal.style.width%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20modal.style.height%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20modal.style.backgroundColor%20%3D%20%22rgba(0%2C0%2C0%2C0.5)%22%3B%0A%20%20%20%20%20%20modal.style.display%20%3D%20%22flex%22%3B%0A%20%20%20%20%20%20modal.style.justifyContent%20%3D%20%22center%22%3B%0A%20%20%20%20%20%20modal.style.alignItems%20%3D%20%22center%22%3B%0A%20%20%20%20%20%20modal.style.fontFamily%20%3D%20%22Arial%22%3B%0A%20%20%20%20%20%20modal.style.padding%20%3D%20%2250px%22%3B%0A%20%20%20%20%20%20modal.style.color%20%3D%20%22white%22%3B%0A%20%20%20%20%20%20modal.style.position%20%3D%20%22fixed%22%3B%0A%20%20%20%20%20%20modal.style.zIndex%20%3D%20%229999%22%3B%0A%20%20%20%20%20%20modal.style.top%20%3D%20%2250%25%22%3B%0A%20%20%20%20%20%20modal.style.left%20%3D%20%2250%25%22%3B%0A%20%20%20%20%20%20modal.style.transform%20%3D%20%22translate(-50%25%2C%20-50%25)%22%3B%0A%20%20%0A%20%20%20%20%20%20const%20modalContent%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20modalContent.classList.add(%22modal-content%22)%3B%0A%20%20%20%20%20%20modalContent.style.width%20%3D%20%22350px%22%3B%0A%20%20%20%20%20%20modalContent.style.height%20%3D%20%22auto%22%3B%0A%20%20%20%20%20%20modalContent.style.backgroundColor%20%3D%20%22%23262626%22%3B%0A%20%20%20%20%20%20modalContent.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20%20%20modalContent.style.borderRadius%20%3D%20%2215px%22%3B%0A%20%20%20%20%20%20modalContent.style.boxShadow%20%3D%20%220px%200px%200px%205px%20rgba(125%2C125%2C125%2C0.5)%22%3B%0A%20%20%20%20%20%20modal.appendChild(modalContent)%3B%0A%20%20%0A%20%20%20%20%20%20const%20header%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20header.classList.add(%22header%22)%3B%0A%20%20%20%20%20%20header.style.borderRadius%20%3D%20%2215px%2015px%200px%200px%22%3B%0A%20%20%20%20%20%20header.style.backgroundColor%20%3D%20Scratch.extensions.isPenguinMod%20%3F%20%22%2300c3ff%22%20%3A%20document.documentElement.style.getPropertyValue(%22--looks-secondary%22)%20%7C%7C%20%22%23ff4c4c%22%3B%0A%20%20%20%20%20%20header.style.padding%20%3D%20%2215px%205px%22%3B%0A%20%20%20%20%20%20modalContent.appendChild(header)%3B%0A%20%20%20%20%20%20const%20h2%20%3D%20document.createElement(%22h2%22)%3B%0A%20%20%20%20%20%20h2.textContent%20%3D%20%22Comment%20Customization%22%3B%0A%20%20%20%20%20%20h2.style.margin%20%3D%20%220%22%3B%0A%20%20%20%20%20%20header.appendChild(h2)%3B%0A%20%20%0A%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22txt%22)%20%7B%0A%20%20%20%20%20%20%20%20const%20fontLabel%20%3D%20createInputLabel(%22font%22%2C%20%22Font%22)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(fontLabel)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(document.createElement(%22br%22))%3B%0A%20%20%20%20%20%20%20%20const%20fontInput%20%3D%20createInput(%22font%22%2C%20%22text%22%2C%20data.font)%3B%0A%20%20%20%20%20%20%20%20fontInput.addEventListener(%22input%22%2C%20function()%20%7B%20fontInput.style.fontFamily%20%3D%20fontInput.value%20%7D)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(fontInput)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(document.createElement(%22br%22))%3B%0A%20%20%20%20%20%20%20%20const%20formatDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20formatDiv.style.display%20%3D%20%22inline%22%3B%0A%0A%20%20%20%20%20%20%20%20const%20boldness%20%3D%20createInputLabel(%22bold%22%2C%20%22Bold%22)%3B%0A%20%20%20%20%20%20%20%20boldness.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20boldness.style.transform%20%3D%20%22translate(350%25%2C%200%25)%22%3B%0A%20%20%20%20%20%20%20%20formatDiv.appendChild(boldness)%3B%0A%20%20%20%20%20%20%20%20const%20boldInput%20%3D%20createInput(%22bold%22%2C%20%22checkbox%22%2C%20data.bold)%3B%0A%20%20%20%20%20%20%20%20boldInput.style.width%20%3D%20%2250px%22%3B%0A%20%20%20%20%20%20%20%20boldInput.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20boldInput.style.transform%20%3D%20%22translate(-175%25%2C%2095%25)%22%3B%0A%20%20%20%20%20%20%20%20formatDiv.appendChild(boldInput)%3B%0A%20%20%20%20%20%20%20%20const%20italic%20%3D%20createInputLabel(%22italic%22%2C%20%22Italic%22)%3B%0A%20%20%20%20%20%20%20%20italic.style.display%20%3D%20%22inline%22%3B%0A%20%20%20%20%20%20%20%20italic.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20italic.style.transform%20%3D%20%22translate(80%25%2C%200%25)%22%3B%0A%20%20%20%20%20%20%20%20formatDiv.appendChild(italic)%3B%0A%20%20%20%20%20%20%20%20const%20italInput%20%3D%20createInput(%22italic%22%2C%20%22checkbox%22%2C%20data.italic)%3B%0A%20%20%20%20%20%20%20%20italInput.style.width%20%3D%20%2250px%22%3B%0A%20%20%20%20%20%20%20%20italInput.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20italInput.style.transform%20%3D%20%22translate(-15%25%2C%2095%25)%22%3B%0A%20%20%20%20%20%20%20%20formatDiv.appendChild(italInput)%3B%0A%0A%20%20%20%20%20%20%20%20modalContent.appendChild(formatDiv)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(document.createElement(%22br%22))%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(document.createElement(%22br%22))%3B%0A%20%20%0A%20%20%20%20%20%20%20%20const%20alignmentLabel%20%3D%20createInputLabel(%22alignment%22%2C%20%22Text%20Alignment%22)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(alignmentLabel)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(document.createElement(%22br%22))%3B%0A%20%20%20%20%20%20%20%20const%20alignmentSelect%20%3D%20createSelect(%22alignment%22%2C%20%5B%22left%22%2C%20%22center%22%2C%20%22right%22%5D)%3B%0A%20%20%20%20%20%20%20%20alignmentSelect.style.marginBottom%20%3D%20%2290px%22%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(alignmentSelect)%3B%0A%0A%20%20%20%20%20%20%20%20const%20textDiv1%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20textDiv1.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20textDiv1.style.transform%20%3D%20%22translate(60%25%2C%20-130%25)%22%3B%0A%20%20%20%20%20%20%20%20const%20textDiv2%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20textDiv2.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20textDiv2.style.transform%20%3D%20%22translate(190%25%2C%20-127%25)%22%3B%0A%0A%20%20%20%20%20%20%20%20const%20fontSizeLabel%20%3D%20createInputLabel(%22fontSize%22%2C%20%22Font%20Size%22)%3B%0A%20%20%20%20%20%20%20%20textDiv1.appendChild(fontSizeLabel)%3B%0A%20%20%20%20%20%20%20%20textDiv1.appendChild(document.createElement(%22br%22))%3B%0A%20%20%20%20%20%20%20%20const%20fontSizeInput%20%3D%20createInput(%22fontSize%22%2C%20%22number%22%2C%20data.fontSize)%3B%0A%20%20%20%20%20%20%20%20fontSizeInput.setAttribute(%22min%22%2C%20%221%22)%3B%0A%20%20%20%20%20%20%20%20fontSizeInput.style.width%20%3D%20%22100px%22%3B%0A%20%20%20%20%20%20%20%20textDiv1.appendChild(fontSizeInput)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(textDiv1)%3B%0A%20%20%20%20%20%20%20%20const%20txtColorLabel%20%3D%20createInputLabel(%22txtColor%22%2C%20%22Text%20Color%22)%3B%0A%20%20%20%20%20%20%20%20textDiv2.appendChild(txtColorLabel)%3B%0A%20%20%20%20%20%20%20%20textDiv2.appendChild(document.createElement(%22br%22))%3B%0A%20%20%20%20%20%20%20%20const%20txtColorInput%20%3D%20createInput(%22txtColor%22%2C%20%22color%22%2C%20data.txtColor)%3B%0A%20%20%20%20%20%20%20%20txtColorInput.style.width%20%3D%20%22100px%22%3B%0A%20%20%20%20%20%20%20%20textDiv2.appendChild(txtColorInput)%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(textDiv2)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20colorDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20colorDiv.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20colorDiv.style.display%20%3D%20%22inline%22%3B%0A%20%20%20%20%20%20%20%20colorDiv.style.marginRight%20%3D%20%2220px%22%3B%0A%20%20%20%20%20%20%20%20colorDiv.style.marginTop%20%3D%20%2215px%22%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(colorDiv)%3B%0A%20%20%0A%20%20%20%20%20%20%20%20const%20hueDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20hueDiv.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20hueDiv.style.marginTop%20%3D%20%2240px%22%3B%0A%0A%20%20%20%20%20%20%20%20const%20colorLabel%20%3D%20createInputLabel(%22color%22%2C%20%22Color%22%2C%20true)%3B%0A%20%20%20%20%20%20%20%20colorLabel.style.transform%20%3D%20%22translate(-50%25%2C%20-50%25)%22%3B%0A%20%20%20%20%20%20%20%20hueDiv.appendChild(colorLabel)%3B%0A%20%20%20%20%20%20%20%20const%20colorInput%20%3D%20createInput(%22color%22%2C%20%22color%22%2C%20data.color%2C%20true)%3B%0A%20%20%20%20%20%20%20%20colorInput.value%20%3D%20data.color%3B%20%2F%2F%20have%20to%20hardcode%20it%20in%20for%20some%20reason%0A%20%20%20%20%20%20%20%20colorInput.style.width%20%3D%20%22100px%22%3B%0A%20%20%20%20%20%20%20%20colorInput.style.transform%20%3D%20%22translate(40%25%2C%20-130%25)%22%3B%0A%20%20%20%20%20%20%20%20colorInput.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20%20%20%20%20colorInput.style.borderRadius%20%3D%20%228px%22%3B%0A%20%20%20%20%20%20%20%20colorInput.addEventListener(%22input%22%2C%20updateDisplay)%3B%0A%20%20%20%20%20%20%20%20hueDiv.appendChild(colorInput)%3B%0A%20%20%20%20%20%20%20%20colorDiv.appendChild(hueDiv)%3B%0A%0A%20%20%20%20%20%20%20%20const%20opaDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20opaDiv.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20opaDiv.style.marginTop%20%3D%20%2280px%22%3B%0A%0A%20%20%20%20%20%20%20%20const%20opaLabel%20%3D%20createInputLabel(%22opacity%22%2C%20%22Opacity%22%2C%20true)%3B%0A%20%20%20%20%20%20%20%20opaLabel.style.transform%20%3D%20%22translate(-50%25%2C%20-50%25)%22%3B%0A%20%20%20%20%20%20%20%20opaDiv.appendChild(opaLabel)%3B%0A%20%20%20%20%20%20%20%20const%20opacityInput%20%3D%20createInput(%22opacity%22%2C%20%22range%22%2C%20data.opacity%2C%20true)%3B%0A%20%20%20%20%20%20%20%20opacityInput.setAttribute(%22max%22%2C%20%22100%22)%3B%0A%20%20%20%20%20%20%20%20opacityInput.setAttribute(%22min%22%2C%20%2210%22)%3B%0A%20%20%20%20%20%20%20%20opacityInput.style.width%20%3D%20%22100px%22%3B%0A%20%20%20%20%20%20%20%20opacityInput.style.transform%20%3D%20%22translate(40%25%2C%20-130%25)%22%3B%0A%20%20%20%20%20%20%20%20opacityInput.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20%20%20%20%20opacityInput.style.borderRadius%20%3D%20%228px%22%3B%0A%20%20%20%20%20%20%20%20opacityInput.addEventListener(%22input%22%2C%20updateDisplay)%3B%0A%20%20%20%20%20%20%20%20opaDiv.appendChild(opacityInput)%3B%0A%20%20%20%20%20%20%20%20colorDiv.appendChild(opaDiv)%3B%0A%0A%20%20%20%20%20%20%20%20const%20colorDisplayDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20colorDisplayDiv.style.display%20%3D%20%22block%22%3B%0A%20%20%20%20%20%20%20%20colorDisplayDiv.style.borderRadius%20%3D%20%2215px%22%3B%0A%20%20%20%20%20%20%20%20colorDisplayDiv.style.border%20%3D%20%227px%20solid%20%234f4f4f%22%3B%0A%20%20%20%20%20%20%20%20colorDisplayDiv.style.width%20%3D%20%2285px%22%3B%0A%20%20%20%20%20%20%20%20colorDisplayDiv.style.height%20%3D%20%2285px%22%3B%0A%20%20%20%20%20%20%20%20colorDisplayDiv.style.margin%20%3D%20%2225px%2010px%2010px%2030px%22%3B%0A%20%20%20%20%20%20%20%20modalContent.appendChild(colorDisplayDiv)%3B%0A%20%20%0A%20%20%20%20%20%20%20%20const%20colorDisplay%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20colorDisplay.classList.add(%22color-display%22)%3B%0A%20%20%20%20%20%20%20%20colorDisplay.style.display%20%3D%20%22block%22%3B%0A%20%20%20%20%20%20%20%20colorDisplay.style.borderRadius%20%3D%20%229px%22%3B%0A%20%20%20%20%20%20%20%20colorDisplay.style.width%20%3D%20%2285px%22%3B%0A%20%20%20%20%20%20%20%20colorDisplay.style.height%20%3D%20%2285px%22%3B%0A%20%20%20%20%20%20%20%20colorDisplayDiv.appendChild(colorDisplay)%3B%0A%20%20%20%20%20%20%20%20function%20updateDisplay()%20%7B%0A%20%20%20%20%20%20%20%20%20%20colorDisplay.style.backgroundColor%20%3D%20colorInput.value%3B%0A%20%20%20%20%20%20%20%20%20%20colorDisplay.style.opacity%20%3D%20opacityInput.value%20%2F%20100%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20updateDisplay()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20modalContent.appendChild(document.createElement(%22br%22))%3B%0A%20%20%20%20%20%20const%20cancelBtn%20%3D%20createButton(%22cancelBtn%22%2C%20%22Cancel%22)%3B%0A%20%20%20%20%20%20cancelBtn.style.marginRight%20%3D%20%2210px%22%3B%0A%20%20%20%20%20%20cancelBtn.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20document.body.removeChild(modal)%3B%0A%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20modalContent.appendChild(cancelBtn)%3B%0A%20%20%0A%20%20%20%20%20%20const%20okayBtn%20%3D%20createButton(%22okayBtn%22%2C%20%22Okay%22)%3B%0A%20%20%20%20%20%20okayBtn.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20inputs%20%3D%20modalContent.querySelectorAll(%22input%2C%20select%22)%3B%0A%20%20%20%20%20%20%20%20const%20values%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20inputs.forEach(input%20%3D%3E%20%7B%20values%5Binput.id%5D%20%3D%20input%5Binput.type%20%3D%3D%3D%20%22checkbox%22%20%3F%20%22checked%22%20%3A%20%22value%22%5D%20%7D)%3B%0A%20%20%20%20%20%20%20%20document.body.removeChild(modal)%3B%0A%20%20%20%20%20%20%20%20resolve(values)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20modalContent.appendChild(okayBtn)%3B%0A%20%20%20%20%20%20document.body.appendChild(modal)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20function%20createInputLabel(id%2C%20labelText%2C%20includeMargins)%20%7B%0A%20%20%20%20const%20label%20%3D%20document.createElement(%22label%22)%3B%0A%20%20%20%20label.setAttribute(%22for%22%2C%20id)%3B%0A%20%20%20%20label.textContent%20%3D%20labelText%3B%0A%20%20%20%20label.style.display%20%3D%20%22block%22%3B%0A%20%20%20%20if%20(!includeMargins)%20%7B%0A%20%20%20%20%20%20label.style.marginTop%20%3D%20%2210px%22%3B%0A%20%20%20%20%20%20label.style.marginBottom%20%3D%20%22-15px%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20label.style.fontWeight%20%3D%20%22700%22%3B%0A%20%20%20%20return%20label%3B%0A%20%20%7D%0A%0A%20%20function%20createInput(id%2C%20type%2C%20value%2C%20includePad)%20%7B%0A%20%20%20%20const%20input%20%3D%20document.createElement(%22input%22)%3B%0A%20%20%20%20input.setAttribute(%22type%22%2C%20type)%3B%0A%20%20%20%20input.setAttribute(%22id%22%2C%20id)%3B%0A%20%20%20%20input.setAttribute(%22name%22%2C%20id)%3B%0A%20%20%20%20input%5Btype%20%3D%3D%3D%20%22checkbox%22%20%3F%20%22checked%22%20%3A%20%22value%22%5D%20%3D%20value%3B%0A%20%20%20%20input.style.background%20%3D%20%22radial-gradient(%23ffffff%2050%25%2C%20%23b3b3b3)%22%3B%0A%20%20%20%20input.style.border%20%3D%20%222px%20solid%20white%22%3B%0A%20%20%20%20if%20(!includePad)%20input.style.padding%20%3D%20%222px%22%3B%0A%20%20%20%20input.style.width%20%3D%20%22150px%22%3B%0A%20%20%20%20input.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20input.style.borderRadius%20%3D%20%228px%22%3B%0A%20%20%20%20input.style.color%20%3D%20%22%23000000%22%3B%0A%20%20%20%20return%20input%3B%0A%20%20%7D%0A%0A%20%20function%20createSelect(id%2C%20options)%20%7B%0A%20%20%20%20const%20select%20%3D%20document.createElement(%22select%22)%3B%0A%20%20%20%20select.setAttribute(%22id%22%2C%20id)%3B%0A%20%20%20%20select.setAttribute(%22name%22%2C%20id)%3B%0A%20%20%20%20select.style.background%20%3D%20%22radial-gradient(%23ffffff%2050%25%2C%20%23b3b3b3)%22%3B%0A%20%20%20%20select.style.border%20%3D%20%222px%20solid%20white%22%3B%0A%20%20%20%20select.style.padding%20%3D%20%222px%22%3B%0A%20%20%20%20select.style.width%20%3D%20%22150px%22%3B%0A%20%20%20%20select.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20select.style.borderRadius%20%3D%20%228px%22%3B%0A%20%20%20%20select.style.color%20%3D%20%22%23000000%22%3B%0A%20%20%20%20options.forEach(optionText%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20option%20%3D%20document.createElement(%22option%22)%3B%0A%20%20%20%20%20%20option.setAttribute(%22value%22%2C%20optionText)%3B%0A%20%20%20%20%20%20option.textContent%20%3D%20optionText.charAt(0).toUpperCase()%20%2B%20optionText.slice(1)%3B%0A%20%20%20%20%20%20select.appendChild(option)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20return%20select%3B%0A%20%20%7D%0A%0A%20%20function%20createButton(id%2C%20buttonText)%20%7B%0A%20%20%20%20const%20button%20%3D%20document.createElement(%22button%22)%3B%0A%20%20%20%20button.setAttribute(%22id%22%2C%20id)%3B%0A%20%20%20%20button.textContent%20%3D%20buttonText%3B%0A%20%20%20%20button.style.fontSize%20%3D%20%2218px%22%3B%0A%20%20%20%20button.style.marginBottom%20%3D%20%2215px%22%3B%0A%20%20%20%20button.style.border%20%3D%20%22none%22%3B%0A%20%20%20%20button.style.padding%20%3D%20%2210px%2015px%22%3B%0A%20%20%20%20button.style.backgroundColor%20%3D%20%22%234f4f4f%22%3B%0A%20%20%20%20button.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20button.style.borderRadius%20%3D%20%2210px%22%3B%0A%20%20%20%20button.style.fontWeight%20%3D%20%22700%22%3B%0A%20%20%20%20button.style.color%20%3D%20%22%23fff%22%3B%0A%20%20%20%20return%20button%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Functions%0A%20%20async%20function%20colorListen(svg%2C%20ID)%20%7B%0A%20%20%20%20const%20values%20%3D%20await%20createModal(%22color%22%2C%20SPcommentStorage%5BID%5D)%3B%0A%20%20%20%20if%20(values%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20const%20color%20%3D%20values.color%3B%0A%20%20%20%20%20%20const%20color2%20%3D%20darkenColor(values.color%2C%2027.75)%3B%0A%20%20%20%20%20%20svg.style.backgroundColor%20%3D%20color%3B%0A%20%20%20%20%20%20const%20svgBar%20%3D%20svg.querySelector(%22rect.scratchWorkspaceCommentBorder%22)%20%3F%3F%20svg.querySelector(%22rect.scratchCommentRect%22)%3B%0A%20%20%20%20%20%20const%20svgText%20%3D%20svg.querySelector(%22body%22)%3B%0A%20%20%20%20%20%20const%20textArea%20%3D%20svg.querySelector(%22.scratchCommentTextarea.scratchCommentText%22)%3B%0A%20%20%20%20%20%20if%20(svgBar)%20%7B%0A%20%20%20%20%20%20%20%20svgBar.style.fill%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20svgBar.style.stroke%20%3D%20color2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(svgText)%20svgText.style.backgroundColor%20%3D%20color%3B%0A%20%20%20%20%20%20if%20(textArea)%20textArea.style.backgroundColor%20%3D%20color%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.color%20%3D%20color%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.color2%20%3D%20color2%3B%0A%0A%20%20%20%20%20%20const%20opacity%20%3D%20Scratch.Cast.toNumber(values.opacity)%3B%0A%20%20%20%20%20%20svg.setAttribute(%22opacity%22%2C%20opacity%20%2F%20100)%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.opacity%20%3D%20opacity%3B%0A%20%20%20%20%20%20if%20(!Scratch.extensions.isPenguinMod)%20vm.runtime.extensionStorage%5B%22SPcomments%22%5D%20%3D%20%7B%20storage%20%3A%20SPcommentStorage%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20async%20function%20txtListen(svg%2C%20ID)%20%7B%0A%20%20%20%20const%20values%20%3D%20await%20createModal(%22txt%22%2C%20SPcommentStorage%5BID%5D)%3B%0A%20%20%20%20if%20(values%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20svg.style.fontFamily%20%3D%20values.font%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.font%20%3D%20values.font%3B%0A%20%20%20%20%20%20svg.style.fontWeight%20%3D%20values.bold%20%3F%20%22bolder%22%20%3A%20%22normal%22%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.bold%20%3D%20values.bold%3B%0A%20%20%20%20%20%20svg.style.fontStyle%20%3D%20values.italic%20%3F%20%22italic%22%20%3A%20%22normal%22%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.italic%20%3D%20values.italic%3B%0A%0A%20%20%20%20%20%20svg.style.textAlign%20%3D%20values.alignment%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.textAlign%20%3D%20values.alignment%3B%0A%0A%20%20%20%20%20%20const%20fontSize%20%3D%20Math.max(Scratch.Cast.toNumber(values.fontSize)%2C%201)%0A%20%20%20%20%20%20svg.style.fontSize%20%3D%20%60%24%7BfontSize%7Dpx%60%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.fontSize%20%3D%20fontSize%3B%0A%20%20%20%20%20%20svg.style.color%20%3D%20values.txtColor%3B%0A%20%20%20%20%20%20SPcommentStorage%5BID%5D.txtColor%20%3D%20values.txtColor%3B%0A%20%20%20%20%20%20if%20(!Scratch.extensions.isPenguinMod)%20vm.runtime.extensionStorage%5B%22SPcomments%22%5D%20%3D%20%7B%20storage%20%3A%20SPcommentStorage%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20darkenColor(hex%2C%20amount)%20%7B%0A%20%20%20%20hex%20%3D%20hex.replace(%2F%5E%23%2F%2C%20%22%22)%3B%0A%20%20%20%20const%20r%20%3D%20parseInt(hex.substring(0%2C%202)%2C%2016)%3B%0A%20%20%20%20const%20g%20%3D%20parseInt(hex.substring(2%2C%204)%2C%2016)%3B%0A%20%20%20%20const%20b%20%3D%20parseInt(hex.substring(4%2C%206)%2C%2016)%3B%0A%20%20%20%20const%20darkenAmount%20%3D%20Math.round(255%20*%20(amount%20%2F%20100))%3B%0A%0A%20%20%20%20const%20newR%20%3D%20Math.max(0%2C%20r%20-%20darkenAmount)%3B%0A%20%20%20%20const%20newG%20%3D%20Math.max(0%2C%20g%20-%20darkenAmount)%3B%0A%20%20%20%20const%20newB%20%3D%20Math.max(0%2C%20b%20-%20darkenAmount)%3B%0A%20%20%20%20return%20%60%23%24%7B((1%20%3C%3C%2024)%20%2B%20(newR%20%3C%3C%2016)%20%2B%20(newG%20%3C%3C%208)%20%2B%20newB).toString(16).slice(1)%7D%60%3B%0A%20%20%7D%0A%0A%20%20function%20redoComment(comment)%20%7B%0A%20%20%20%20if%20(comment%20%26%26%20document.getElementById(comment.id)%20%3D%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%2F%2F%20color%0A%20%20%20%20%20%20const%20btn1%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22image%22)%3B%0A%20%20%20%20%20%20btn1.setAttribute(%22id%22%2C%20comment.id)%3B%0A%20%20%20%20%20%20btn1.setAttribute(%22x%22%2C%20%2225%22)%3B%0A%20%20%20%20%20%20btn1.setAttribute(%22y%22%2C%20%221%22)%3B%0A%20%20%20%20%20%20btn1.setAttribute(%22width%22%2C%20%2232%22)%3B%0A%20%20%20%20%20%20btn1.setAttribute(%22height%22%2C%20%2232%22)%3B%0A%20%20%20%20%20%20btn1.setAttribute(%22href%22%2C%20colorIcon)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20text%0A%20%20%20%20%20%20const%20btn2%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22image%22)%3B%0A%20%20%20%20%20%20btn2.setAttribute(%22x%22%2C%20%2260%22)%3B%0A%20%20%20%20%20%20btn2.setAttribute(%22y%22%2C%20%221%22)%3B%0A%20%20%20%20%20%20btn2.setAttribute(%22width%22%2C%20%2232%22)%3B%0A%20%20%20%20%20%20btn2.setAttribute(%22height%22%2C%20%2232%22)%3B%0A%20%20%20%20%20%20btn2.setAttribute(%22href%22%2C%20fontIcon)%3B%0A%0A%20%20%20%20%20%20let%20path%20%3D%20comment%3B%0A%20%20%20%20%20%20let%20path2%20%3D%20%22%22%3B%0A%20%20%20%20%20%20let%20commentSVG%20%3D%20%22%22%3B%0A%20%20%20%20%20%20if%20(comment.svgHandleTarget_%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20path%20%3D%20path.svgHandleTarget_.nextElementSibling%3B%0A%20%20%20%20%20%20%20%20path2%20%3D%20comment.minimizeArrow_%3B%0A%20%20%20%20%20%20%20%20commentSVG%20%3D%20comment.svgGroup_%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20weird%20bug%20thats%20avoided%3A%0A%20%20%20%20%20%20%20%20if%20(!path.bubble_)%20return%3B%0A%20%20%20%20%20%20%20%20path%20%3D%20path.bubble_.commentTopBar_.nextElementSibling%3B%0A%20%20%20%20%20%20%20%20path2%20%3D%20comment.bubble_.minimizeArrow_%3B%0A%20%20%20%20%20%20%20%20commentSVG%20%3D%20comment.bubble_.bubbleBack_.parentNode%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20path.insertAdjacentElement(%22beforebegin%22%2C%20btn1)%3B%0A%20%20%20%20%20%20path.insertAdjacentElement(%22beforebegin%22%2C%20btn2)%3B%0A%0A%20%20%20%20%20%20if%20(SPcommentStorage%5Bcomment.id%5D%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20SPcommentStorage%5Bcomment.id%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20ID%20%3A%20comment.id%2C%20XY%20%3A%20comment.getXY()%2C%0A%20%20%20%20%20%20%20%20%20%20colorBtn%20%3A%20btn1%2C%20textBtn%20%3A%20btn2%2C%20commentSVG%20%3A%20commentSVG%2C%0A%20%20%20%20%20%20%20%20%20%20color%20%3A%20%22%23fff099%22%2C%20color2%3A%20%22%23b8af37%22%2C%20opacity%20%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20txtColor%3A%20%22%23000000%22%2C%20font%20%3A%20%22Arial%22%2C%20textAlign%20%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20fontSize%20%3A%2016%2C%20bold%20%3A%20false%2C%20italic%20%3A%20false%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20path2.addEventListener(%22click%22%2C%20function()%20%7B%20minimizeListen(comment%2C%20%5Bbtn1%2C%20btn2%5D)%20%7D)%3B%0A%20%20%20%20%20%20btn1.addEventListener(%22click%22%2C%20function()%20%7B%20colorListen(commentSVG%2C%20comment.id)%20%7D)%3B%0A%20%20%20%20%20%20btn2.addEventListener(%22click%22%2C%20function()%20%7B%20txtListen(comment.textarea_%2C%20comment.id)%20%7D)%3B%0A%20%20%20%20%7D%20else%20if%20(comment)%20%7B%0A%20%20%20%20%20%20%2F%2F%20TODO%3A%20Need%20to%20Move%20this%20Somewhere%20else%20to%20Fix%20Auto%20Saving%0A%20%20%20%20%20%20SPcommentStorage%5Bcomment.id%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20...SPcommentStorage%5Bcomment.id%5D%2C%0A%20%20%20%20%20%20%20%20XY%20%3A%20comment.getXY()%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20minimizeListen(comment%2C%20btns)%20%7B%0A%20%20%20%20btns%5B0%5D.style.display%20%3D%20comment.isMinimized_%20%3F%20%22none%22%20%3A%20%22inline%22%3B%0A%20%20%20%20btns%5B1%5D.style.display%20%3D%20comment.isMinimized_%20%3F%20%22none%22%20%3A%20%22inline%22%3B%0A%20%20%7D%0A%0A%20%20function%20updateComment(comment)%20%7B%0A%20%20%20%20const%20data%20%3D%20SPcommentStorage%5Bcomment.id%5D%3B%0A%20%20%20%20if%20(data%20%3D%3D%3D%20undefined)%20return%3B%0A%20%20%20%20const%20svg%20%3D%20comment.svgHandleTarget_%20!%3D%3D%20undefined%20%3F%20comment.svgGroup_%20%3A%20comment.bubble_.bubbleBack_.parentNode%3B%0A%20%20%20%20const%20txt%20%3D%20comment.textarea_%3B%0A%20%20%20%20const%20svgBar%20%3D%20svg.querySelector(%22rect.scratchWorkspaceCommentBorder%22)%20%3F%3F%20svg.querySelector(%22rect.scratchCommentRect%22)%3B%0A%20%20%20%20const%20svgText%20%3D%20svg.querySelector(%22body%22)%3B%0A%20%20%20%20const%20textArea%20%3D%20svg.querySelector(%22.scratchCommentTextarea.scratchCommentText%22)%3B%0A%20%20%20%20svg.style.backgroundColor%20%3D%20data.color%3B%0A%20%20%20%20if%20(svgBar)%20%7B%0A%20%20%20%20%20%20svgBar.style.fill%20%3D%20data.color%3B%0A%20%20%20%20%20%20svgBar.style.stroke%20%3D%20data.color2%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(svgText)%20svgText.style.backgroundColor%20%3D%20data.color%3B%0A%20%20%20%20if%20(textArea)%20textArea.style.backgroundColor%20%3D%20data.color%3B%0A%20%20%20%20svg.setAttribute(%22opacity%22%2C%20data.opacity%20%2F%20100)%3B%0A%0A%20%20%20%20txt.style.fontFamily%20%3D%20data.font%20%7C%7C%20%22Arial%22%3B%0A%20%20%20%20txt.style.fontWeight%20%3D%20data.bold%20%3F%20%22bolder%22%20%3A%20%22normal%22%3B%0A%20%20%20%20txt.style.fontStyle%20%3D%20data.italic%20%3F%20%22italic%22%20%3A%20%22normal%22%3B%0A%20%20%20%20txt.style.textAlign%20%3D%20data.textAlign%3B%0A%20%20%20%20txt.style.fontSize%20%3D%20%60%24%7Bdata.fontSize%20%7C%7C%2016%7Dpx%60%3B%0A%20%20%20%20txt.style.color%20%3D%20data.txtColor%3B%0A%20%20%7D%0A%0A%20%20function%20fixStorage()%20%7B%0A%20%20%20%20const%20storedComments%20%3D%20SPcommentStorage%3B%0A%20%20%20%20const%20storedKeys%20%3D%20Object.keys(storedComments)%3B%0A%20%20%20%20const%20internalComments%20%3D%20ScratchBlocks.mainWorkspace.commentDB_%3B%0A%20%20%20%20const%20internalKeys%20%3D%20Object.keys(internalComments)%3B%0A%20%20%20%20if%20(internalKeys.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20internalKeys.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20intComm%20%3D%20internalComments%5BinternalKeys%5Bi%5D%5D%3B%0A%20%20%20%20%20%20%20%20const%20storComm%20%3D%20storedComments%5BstoredKeys%5Bi%5D%5D%3B%0A%20%20%20%20%20%20%20%20if%20(intComm%20!%3D%3D%20undefined%20%26%26%20storComm%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20storXY%20%3D%20%60%7B%22x%22%3A%24%7BMath.floor(storComm.XY.x)%7D%2C%22y%22%3A%24%7BMath.floor(storComm.XY.y)%7D%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(JSON.stringify(intComm.getXY())%20%3D%3D%3D%20storXY)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20SPcommentStorage%5BinternalKeys%5Bi%5D%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20...SPcommentStorage%5BstoredKeys%5Bi%5D%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%20%3A%20intComm.id%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20SPcommentStorage%5BstoredKeys%5Bi%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20updateAllComments()%20%7B%0A%20%20%20%20const%20allComments%20%3D%20ScratchBlocks.mainWorkspace.commentDB_%3B%0A%20%20%20%20Object.keys(allComments).forEach(key%20%3D%3E%20%7B%0A%20%20%20%20%20%20redoComment(allComments%5Bkey%5D)%3B%0A%20%20%20%20%20%20updateComment(allComments%5Bkey%5D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Listeners%0A%20%20function%20handleMutation(mutationsList)%20%7B%0A%20%20%20%20for(const%20mutation%20of%20mutationsList)%20%7B%0A%20%20%20%20%20%20if%20(mutation.type%20%3D%3D%3D%20%22childList%22%20%26%26%20typeof%20scaffolding%20%3D%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20const%20workspace%20%3D%20ScratchBlocks.mainWorkspace%3B%0A%20%20%20%20%20%20%20%20if%20(mutation.addedNodes%20%26%26%20mutation.addedNodes%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20comment%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20const%20allComments%20%3D%20workspace.commentDB_%3B%0A%20%20%20%20%20%20%20%20%20%20Object.keys(allComments).forEach(key%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(mutation.addedNodes%5B0%5D%20%3D%3D%3D%20allComments%5Bkey%5D.svgGroup_%20%7C%7C%20allComments%5Bkey%5D.iconGroup_)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20comment%20%3D%20allComments%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20redoComment(comment)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20vm.on(%22workspaceUpdate%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(typeof%20scaffolding%20!%3D%3D%20%22undefined%22)%20return%3B%0A%20%20%20%20setTimeout(function()%20%7B%20updateAllComments()%20%7D%2C%2010)%3B%20%2F%2F%20wait%20for%20Scratch%20to%20render%20its%20stupid%20Comments%0A%20%20%7D)%3B%0A%20%20vm.runtime.on(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(typeof%20scaffolding%20!%3D%3D%20%22undefined%22)%20return%3B%0A%20%20%20%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20fixStorage()%3B%20%2F%2F%20Comment%20IDs%20are%20different%20upon%20project%20load%0A%20%20%20%20%20%20updateAllComments()%3B%0A%20%20%20%20%7D%2C%20100)%3B%20%2F%2F%20wait%20for%20Scratch%20to%20render%20its%20stupid%20Comments%0A%20%20%7D)%3B%0A%0A%20%20class%20SPcomments%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPcomments%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Better%20Comments%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23b8af37%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20Scratch.extensions.isPenguinMod%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Place%20in%20your%20Project%20to%20Save%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22save%22%2C%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20Scratch.extensions.isPenguinMod%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22save%20comment%20settings%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20TW%20Storage%0A%20%20%20%20save()%20%7B%20return%20%7D%0A%0A%20%20%20%20%2F%2F%20PenguinMod%20Storage%0A%20%20%20%20serialize()%20%7B%20return%20%7B%20SPcomments%20%3A%20%7B%20storage%20%3A%20SPcommentStorage%20%7D%20%7D%20%7D%0A%20%20%20%20deserialize(data)%20%7B%0A%20%20%20%20%20%20if%20(data.SPcomments%20!%3D%3D%20undefined)%20SPcommentStorage%20%3D%20data.SPcomments.storage%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20if%20(!Scratch.extensions.isPenguinMod)%20%7B%0A%20%20%20%20const%20storage%20%3D%20vm.runtime.extensionStorage%5B%22SPcomments%22%5D%3B%0A%20%20%20%20if%20(storage%20!%3D%3D%20undefined)%20SPcommentStorage%20%3D%20storage.storage%3B%0A%20%20%7D%0A%20%20if%20(typeof%20scaffolding%20%3D%3D%3D%20%22undefined%22%20%26%26%20%0A%20%20%20%20%2F%2F%20Check%20if%20loaded%20manually%20or%20by%20project%20load%0A%20%20%20%20Math.round(vm.runtime.ioDevices.clock._projectTimer.startTime%20%2F%201000)%20*%201000%20!%3D%3D%0A%20%20%20%20Math.round(Date.now()%20%2F%201000)%20*%201000%0A%20%20)%20%7B%0A%20%20%20%20const%20observer%20%3D%20new%20MutationObserver(handleMutation)%3B%0A%20%20%20%20observer.observe(document%2C%20%7B%20childList%3A%20true%2C%20subtree%3A%20true%20%7D)%3B%0A%20%20%20%20updateAllComments()%3B%20%2F%2F%20update%20pre-existing%20comments%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20SPcomments())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Math%0A%2F%2F%20ID%3A%20truefantommath%0A%2F%2F%20Description%3A%20A%20lot%20of%20operators%20blocks%2C%20from%20exponentiation%20to%20trigonometric%20functions.%0A%2F%2F%20By%3A%20TrueFantom%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FTrueFantom%2F%3E%0A%2F%2F%20License%3A%20MIT%0A%0A((Scratch)%20%3D%3E%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20icon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMjUuMzU0OCIgaGVpZ2h0PSIyMjUuMzU0OCIgdmlld0JveD0iMCwwLDIyNS4zNTQ4LDIyNS4zNTQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjA3LjMyMjgsLTY3LjMyMjYpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0yMDcuMzIyODEsMTgwYzAsLTYyLjIzMDAxIDUwLjQ0NzM5LC0xMTIuNjc3NCAxMTIuNjc3NCwtMTEyLjY3NzRjNjIuMjMwMDEsMCAxMTIuNjc3NCw1MC40NDczOSAxMTIuNjc3NCwxMTIuNjc3NGMwLDYyLjIzMDAxIC01MC40NDczOSwxMTIuNjc3NCAtMTEyLjY3NzQsMTEyLjY3NzRjLTYyLjIzMDAxLDAgLTExMi42Nzc0LC01MC40NDczOSAtMTEyLjY3NzQsLTExMi42Nzc0eiIgZmlsbD0iIzU5YzA1OSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiLz48cGF0aCBkPSJNMzk0LjEzMDk3LDEzMi41MDkyN2wtMzUuMjQ3NTIsLTAuMDQ5MjNjLTAuOTQyMDgsNDEuNDQ4ODkgLTIxLjE1OTAxLDk0LjU5NzU0IDcuNDYwMzgsOTQuMjEzMzljMTAuNTAwMTgsLTAuNDQ4MTggMTEuMDYzNDgsLTE2LjA2MTEgMTAuODI1NjgsLTI2LjMwNTE4bDE5LjIyODE0LDEzLjM2NjY3YzAsMTIuNDIwOTQgLTEwLjE0MTgxLDM0Ljg1MjU0IC0zNS4xMTE3NCwzNC4wMjAyYy0xNS4xNzQwMywtMC4xMjgwNSAtMjkuNDQ4NjIsLTExLjI0NDA4IC0yOS44MzI3OCwtMzAuMTk1NjJjMC41MTIyLC0yOC40OTEzMyA2LjMwODAyLC01Ni4zMDg4OSA3Ljk3MjY3LC04NS4zNzY0NWwtMjYuMDA4NDUsLTAuNTY0MjhjLTcuNTU1LDgyLjQ2NDggLTEwLjI2NjU3LDExNS40OTYxIC0zNC41MzIyMiwxMTYuMzI4NDNjLTcuNjgzMDYsLTAuMzIwMTIgLTE0Ljc4OTg4LC01LjgyNjMyIC0xNS41NTgxOSwtMTQuNzg5ODhjLTIuMTEyODQsLTE1LjgxNDI5IDMwLjY5MjYxLC0yNS4xNTk4MSAzMS44NDUwNiwtMTAyLjI0NjQ3Yy0zMS42OTI2MSwtMy41MjE0IC0zMS44MDU0NSwxNS42ODQwMyAtMzcuMTgzNTgsMjEuNzY2NDVsLTE0LjM4NjA2LC0xLjU4NDE1YzE4Ljc2NTU4LC00NC45NDMyNiA5LjQ1ODI5LC0zOS4xMTU4NCAxNTAuNzY1MTIsLTM4LjQzMTM1eiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjNTljMDU5IiBzdHJva2Utd2lkdGg9IjIuNSIvPjwvZz48L2c%2BPC9zdmc%2BPCEtLXJvdGF0aW9uQ2VudGVyOjExMi42NzcxOTQ5OTk5OTk5ODoxMTIuNjc3NDA1LS0%2B%22%3B%0A%0A%20%20const%20cast%20%3D%20Scratch.Cast%3B%0A%0A%20%20const%20isNotActuallyZero%20%3D%20(val)%20%3D%3E%20%7B%0A%20%20%20%20if%20(typeof%20val%20!%3D%3D%20%22string%22)%20return%20false%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20val.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20code%20%3D%20val.charCodeAt(i)%3B%0A%20%20%20%20%20%20%2F%2F%20'0'.charCodeAt(0)%20%3D%3D%3D%2048%0A%20%20%20%20%20%20%2F%2F%20'%5Ct'.charCodeAt(0)%20%3D%3D%3D%209%0A%20%20%20%20%20%20%2F%2F%20We%20include%20tab%20for%20compatibility%20with%20scratch-www's%20broken%20trim()%20polyfill.%0A%20%20%20%20%20%20%2F%2F%20https%3A%2F%2Fgithub.com%2FTurboWarp%2Fscratch-vm%2Fissues%2F115%0A%20%20%20%20%20%20%2F%2F%20https%3A%2F%2Fscratch.mit.edu%2Fprojects%2F788261699%2F%0A%20%20%20%20%20%20if%20(code%20%3D%3D%3D%2048%20%7C%7C%20code%20%3D%3D%3D%209)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20true%3B%0A%20%20%7D%3B%0A%0A%20%20const%20exactlyCompare%20%3D%20(v1%2C%20v2)%20%3D%3E%20%7B%0A%20%20%20%20let%20n1%20%3D%20Number(v1)%3B%0A%20%20%20%20let%20n2%20%3D%20Number(v2)%3B%0A%20%20%20%20if%20(n1%20%3D%3D%3D%200%20%26%26%20isNotActuallyZero(v1))%20%7B%0A%20%20%20%20%20%20n1%20%3D%20NaN%3B%0A%20%20%20%20%7D%20else%20if%20(n2%20%3D%3D%3D%200%20%26%26%20isNotActuallyZero(v2))%20%7B%0A%20%20%20%20%20%20n2%20%3D%20NaN%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(isNaN(n1)%20%7C%7C%20isNaN(n2))%20%7B%0A%20%20%20%20%20%20%2F%2F%20At%20least%20one%20argument%20can't%20be%20converted%20to%20a%20number.%0A%20%20%20%20%20%20%2F%2F%20Scratch%20compares%20strings%20as%20case%20insensitive%2C%20but%20it%20shouldn't%20be%20here%0A%20%20%20%20%20%20const%20s1%20%3D%20String(v1)%3B%0A%20%20%20%20%20%20const%20s2%20%3D%20String(v2)%3B%0A%20%20%20%20%20%20if%20(s1%20%3C%20s2)%20%7B%0A%20%20%20%20%20%20%20%20return%20-1%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(s1%20%3E%20s2)%20%7B%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20Handle%20the%20special%20case%20of%20Infinity%0A%20%20%20%20if%20(%0A%20%20%20%20%20%20(n1%20%3D%3D%3D%20Infinity%20%26%26%20n2%20%3D%3D%3D%20Infinity)%20%7C%7C%0A%20%20%20%20%20%20(n1%20%3D%3D%3D%20-Infinity%20%26%26%20n2%20%3D%3D%3D%20-Infinity)%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20Compare%20as%20numbers.%0A%20%20%20%20return%20n1%20-%20n2%3B%0A%20%20%7D%3B%0A%0A%20%20const%20toNaNNumber%20%3D%20(value)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20If%20value%20is%20already%20a%20number%20we%20don't%20need%20to%20coerce%20it%20with%0A%20%20%20%20%2F%2F%20Number().%0A%20%20%20%20if%20(typeof%20value%20%3D%3D%3D%20%22number%22)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Scratch%20treats%20NaN%20as%200%2C%20when%20needed%20as%20a%20number%2C%20but%20it%20shouldn't%20be%20here%0A%20%20%20%20%20%20%2F%2F%20E.g.%2C%200%20%2B%20NaN%20-%3E%200.%0A%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20n%20%3D%20Number(value)%3B%0A%20%20%20%20%2F%2F%20Scratch%20treats%20NaN%20as%200%2C%20when%20needed%20as%20a%20number%2C%20but%20it%20shouldn't%20be%20here%0A%20%20%20%20%2F%2F%20E.g.%2C%200%20%2B%20NaN%20-%3E%200.%0A%20%20%20%20return%20n%3B%0A%20%20%7D%3B%0A%0A%20%20const%20isTrueInt%20%3D%20(val)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20Values%20that%20are%20already%20numbers.%0A%20%20%20%20if%20(typeof%20val%20%3D%3D%3D%20%22number%22)%20%7B%0A%20%20%20%20%20%20if%20(isNaN(val))%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20NaN%20is%20considered%20an%20integer.%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20True%20if%20it's%20%22round%22%20(e.g.%2C%202.0%20and%202).%0A%20%20%20%20%20%20return%20val%20%3D%3D%3D%20Math.floor(val)%3B%0A%20%20%20%20%7D%20else%20if%20(typeof%20val%20%3D%3D%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%60True%60%20and%20%60false%60%20always%20represent%20integer%20after%20Scratch%20cast.%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%20else%20if%20(typeof%20val%20%3D%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%2F%2F%20If%20it%20contains%20a%20decimal%20point%2C%20don't%20consider%20it%20an%20int%2C%20but%20it%20shouldn't%20be%20here%0A%20%20%20%20%20%20const%20n%20%3D%20Number(val)%3B%0A%20%20%20%20%20%20if%20(isNaN(n))%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20NaN%20is%20considered%20an%20integer.%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20True%20if%20it's%20%22round%22%20(e.g.%2C%202.0%20and%202).%0A%20%20%20%20%20%20return%20n%20%3D%3D%3D%20Math.floor(n)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%3B%0A%20%20%7D%3B%0A%0A%20%20class%20ScratchMath%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22truefantommath%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Math%22%2C%0A%0A%20%20%20%20%20%20%20%20color1%3A%20%22%2359c059%22%2C%0A%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20icon%2C%0A%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22exponent_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%5E%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22root_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%88%9A%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22negative_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22-%20%5BA%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22more_or_equal_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%89%A5%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22less_or_equal_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%89%A4%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22not_equal_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%89%A0%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22exactly_equal_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%89%A1%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22not_exactly_equal_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%89%A2%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22almost_equal_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%89%88%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22not_almost_equal_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%89%89%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22between_or_equal%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%E2%89%A4%20%5BB%5D%20%E2%89%A4%20%5BC%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2250%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20C%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22between%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%3C%20%5BB%5D%20%3C%20%5BC%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2250%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20C%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22nand_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20nand%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22nor_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20nor%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22xor_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20xor%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22xnor_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20xnor%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22exactly_cont_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20exactly%20contains%20%5BB%5D%20%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22a%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clamp_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clamp%20%5BA%5D%20between%20%5BB%5D%20and%20%5BC%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20C%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22scale_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22map%20%5BA%5D%20from%20range%20%5Bm1%5D%20-%20%5BM1%5D%20to%20range%20%5Bm2%5D%20-%20%5BM2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20m1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20M1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20m2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20M2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22trunc2_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22trunc%20of%20%5BA%5D%20with%20%5BB%5D%20digits%20after%20dot%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22trunc_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22trunc%20of%20%5BA%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22is_multiple_of_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20is%20multiple%20of%20%5BB%5D%20%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22log_with_base_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22log%20of%20%5BA%5D%20with%20base%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pi_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%F0%9D%9C%8B%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22e_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%F0%9D%98%A6%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22infinity_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%E2%88%9E%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22is_safe_number_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20safe%20number%20%5BA%5D%20%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22is_number_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20number%20%5BA%5D%20%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22is_int_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20int%20%5BA%5D%20%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22is_float_block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20float%20%5BA%5D%20%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_operators%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20exponent_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20Math.pow(cast.toNumber(A)%2C%20cast.toNumber(B))%3B%0A%20%20%20%20%7D%0A%20%20%20%20root_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20Math.pow(cast.toNumber(B)%2C%201%20%2F%20cast.toNumber(A))%3B%0A%20%20%20%20%7D%0A%20%20%20%20negative_block(%7B%20A%20%7D)%20%7B%0A%20%20%20%20%20%20return%200%20-%20cast.toNumber(A)%3B%0A%20%20%20%20%7D%0A%20%20%20%20more_or_equal_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.compare(A%2C%20B)%20%3E%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20less_or_equal_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.compare(A%2C%20B)%20%3C%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20not_equal_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.compare(A%2C%20B)%20!%3D%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20exactly_equal_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20exactlyCompare(A%2C%20B)%20%3D%3D%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20not_exactly_equal_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20exactlyCompare(A%2C%20B)%20!%3D%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20almost_equal_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20const%20c%20%3D%20cast.compare(A%2C%20B)%3B%0A%20%20%20%20%20%20return%20c%20%3C%3D%200.5%20%26%26%20c%20%3E%3D%20-0.5%3B%0A%20%20%20%20%7D%0A%20%20%20%20not_almost_equal_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20const%20c%20%3D%20cast.compare(A%2C%20B)%3B%0A%20%20%20%20%20%20return%20!(c%20%3C%3D%200.5%20%26%26%20c%20%3E%3D%20-0.5)%3B%0A%20%20%20%20%7D%0A%20%20%20%20nand_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20!(cast.toBoolean(A)%20%26%26%20cast.toBoolean(B))%3B%0A%20%20%20%20%7D%0A%20%20%20%20nor_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20!(cast.toBoolean(A)%20%7C%7C%20cast.toBoolean(B))%3B%0A%20%20%20%20%7D%0A%20%20%20%20xor_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.toBoolean(A)%20!%3D%3D%20cast.toBoolean(B)%3B%0A%20%20%20%20%7D%0A%20%20%20%20xnor_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.toBoolean(A)%20%3D%3D%3D%20cast.toBoolean(B)%3B%0A%20%20%20%20%7D%0A%20%20%20%20between_or_equal(%7B%20A%2C%20B%2C%20C%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.compare(A%2C%20B)%20%3C%3D%200%20%26%26%20cast.compare(B%2C%20C)%20%3C%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20between(%7B%20A%2C%20B%2C%20C%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.compare(A%2C%20B)%20%3C%200%20%26%26%20cast.compare(B%2C%20C)%20%3C%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20exactly_cont_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.toString(A).includes(cast.toString(B))%3B%0A%20%20%20%20%7D%0A%20%20%20%20clamp_block(%7B%20A%2C%20B%2C%20C%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(cast.compare(A%2C%20B)%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20B%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(cast.compare(A%2C%20C)%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20A%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20scale_block(%7B%20A%2C%20m1%2C%20M1%2C%20m2%2C%20M2%20%7D)%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20((cast.toNumber(A)%20-%20cast.toNumber(m1))%20*%0A%20%20%20%20%20%20%20%20%20%20(cast.toNumber(M2)%20-%20cast.toNumber(m2)))%20%2F%0A%20%20%20%20%20%20%20%20%20%20(cast.toNumber(M1)%20-%20cast.toNumber(m1))%20%2B%0A%20%20%20%20%20%20%20%20cast.toNumber(m2)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20trunc2_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20let%20n%20%3D%20Math.floor(cast.toNumber(B))%3B%0A%20%20%20%20%20%20if%20(n%20%3E%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20n%20%3D%2010%20**%20n%3B%0A%20%20%20%20%20%20%20%20if%20(n%20!%3D%3D%20Infinity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20Math.trunc(cast.toNumber(A)%20*%20n)%20%2F%20n%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20cast.toNumber(A)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Math.trunc(cast.toNumber(A))%3B%0A%20%20%20%20%7D%0A%20%20%20%20trunc_block(%7B%20A%20%7D)%20%7B%0A%20%20%20%20%20%20return%20Math.trunc(cast.toNumber(A))%3B%0A%20%20%20%20%7D%0A%20%20%20%20is_multiple_of_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20cast.toNumber(A)%20%25%20cast.toNumber(B)%20%3D%3D%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20log_with_base_block(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20Math.log(cast.toNumber(A))%20%2F%20Math.log(cast.toNumber(B))%3B%0A%20%20%20%20%7D%0A%20%20%20%20pi_block()%20%7B%0A%20%20%20%20%20%20return%20Math.PI%3B%0A%20%20%20%20%7D%0A%20%20%20%20e_block()%20%7B%0A%20%20%20%20%20%20return%20Math.E%3B%0A%20%20%20%20%7D%0A%20%20%20%20infinity_block()%20%7B%0A%20%20%20%20%20%20return%20Infinity%3B%0A%20%20%20%20%7D%0A%20%20%20%20is_safe_number_block(%7B%20A%20%7D)%20%7B%0A%20%20%20%20%20%20return%20Number.isSafeInteger(cast.toNumber(A))%3B%0A%20%20%20%20%7D%0A%20%20%20%20is_number_block(%7B%20A%20%7D)%20%7B%0A%20%20%20%20%20%20return%20!Number.isNaN(toNaNNumber(A))%3B%0A%20%20%20%20%7D%0A%20%20%20%20is_int_block(%7B%20A%20%7D)%20%7B%0A%20%20%20%20%20%20return%20isTrueInt(A)%20%26%26%20!Number.isNaN(toNaNNumber(A))%3B%0A%20%20%20%20%7D%0A%20%20%20%20is_float_block(%7B%20A%20%7D)%20%7B%0A%20%20%20%20%20%20return%20!isTrueInt(A)%20%26%26%20!Number.isNaN(toNaNNumber(A))%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20ScratchMath())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Tween%0D%0A%2F%2F%20ID%3A%20jeremygamerTweening%0D%0A%2F%2F%20Description%3A%20Easing%20methods%20for%20smooth%20animations.%0D%0A%2F%2F%20By%3A%20JeremyGamer13%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FJeremyGamer13%2F%3E%0D%0A%2F%2F%20License%3A%20MIT%0D%0A%0D%0A(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%0D%0A%20%20const%20BlockType%20%3D%20Scratch.BlockType%3B%0D%0A%20%20const%20ArgumentType%20%3D%20Scratch.ArgumentType%3B%0D%0A%20%20const%20Cast%20%3D%20Scratch.Cast%3B%0D%0A%0D%0A%20%20%2F**%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20time%20should%20be%200-1%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20a%20value%20at%200%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20b%20value%20at%201%0D%0A%20%20%20*%20%40returns%20%7Bnumber%7D%0D%0A%20%20%20*%2F%0D%0A%20%20const%20interpolate%20%3D%20(time%2C%20a%2C%20b)%20%3D%3E%20%7B%0D%0A%20%20%20%20%2F%2F%20don't%20restrict%20range%20of%20time%20as%20some%20easing%20functions%20are%20expected%20to%20go%20outside%20the%20range%0D%0A%20%20%20%20const%20multiplier%20%3D%20b%20-%20a%3B%0D%0A%20%20%20%20const%20result%20%3D%20time%20*%20multiplier%20%2B%20a%3B%0D%0A%20%20%20%20return%20result%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20linear%20%3D%20(x)%20%3D%3E%20x%3B%0D%0A%0D%0A%20%20const%20sine%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.cos((x%20*%20Math.PI)%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20Math.sin((x%20*%20Math.PI)%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20-(Math.cos(Math.PI%20*%20x)%20-%201)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quad%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20(1%20-%20x)%20*%20(1%20-%20x)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%202%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%202)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20cubic%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%203)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%204%20*%20x%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%203)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quart%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%204)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%208%20*%20x%20*%20x%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%204)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quint%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%205)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%2016%20*%20x%20*%20x%20*%20x%20*%20x%20*%20x%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%205)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20expo%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%20%3F%200%20%3A%20Math.pow(2%2C%2010%20*%20x%20-%2010)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%201%20%3F%201%20%3A%201%20-%20Math.pow(2%2C%20-10%20*%20x)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20Math.pow(2%2C%2020%20*%20x%20-%2010)%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20(2%20-%20Math.pow(2%2C%20-20%20*%20x%20%2B%2010))%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20circ%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.sqrt(1%20-%20Math.pow(x%2C%202))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(1%20-%20Math.pow(x%20-%201%2C%202))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(1%20-%20Math.sqrt(1%20-%20Math.pow(2%20*%20x%2C%202)))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(Math.sqrt(1%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%202))%20%2B%201)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20back%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c3%20%3D%20c1%20%2B%201%3B%0D%0A%20%20%20%20%20%20%20%20return%20c3%20*%20x%20*%20x%20*%20x%20-%20c1%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c3%20%3D%20c1%20%2B%201%3B%0D%0A%20%20%20%20%20%20%20%20return%201%20%2B%20c3%20*%20Math.pow(x%20-%201%2C%203)%20%2B%20c1%20*%20Math.pow(x%20-%201%2C%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c2%20%3D%20c1%20*%201.525%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(Math.pow(2%20*%20x%2C%202)%20*%20((c2%20%2B%201)%20*%202%20*%20x%20-%20c2))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(Math.pow(2%20*%20x%20-%202%2C%202)%20*%20((c2%20%2B%201)%20*%20(x%20*%202%20-%202)%20%2B%20c2)%20%2B%202)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20elastic%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c4%20%3D%20(2%20*%20Math.PI)%20%2F%203%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20-Math.pow(2%2C%2010%20*%20x%20-%2010)%20*%20Math.sin((x%20*%2010%20-%2010.75)%20*%20c4)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c4%20%3D%20(2%20*%20Math.PI)%20%2F%203%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Math.pow(2%2C%20-10%20*%20x)%20*%20Math.sin((x%20*%2010%20-%200.75)%20*%20c4)%20%2B%201%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c5%20%3D%20(2%20*%20Math.PI)%20%2F%204.5%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20-(Math.pow(2%2C%2020%20*%20x%20-%2010)%20*%20Math.sin((20%20*%20x%20-%2011.125)%20*%20c5))%20%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20(Math.pow(2%2C%20-20%20*%20x%20%2B%2010)%20*%20Math.sin((20%20*%20x%20-%2011.125)%20*%20c5))%20%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202%20%2B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20bounce%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20bounce(1%20-%20x%2C%20%22out%22)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20n1%20%3D%207.5625%3B%0D%0A%20%20%20%20%20%20%20%20const%20d1%20%3D%202.75%3B%0D%0A%20%20%20%20%20%20%20%20if%20(x%20%3C%201%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(x%20%3C%202%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%201.5%20%2F%20d1)%20*%20x%20%2B%200.75%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(x%20%3C%202.5%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%202.25%20%2F%20d1)%20*%20x%20%2B%200.9375%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%202.625%20%2F%20d1)%20*%20x%20%2B%200.984375%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(1%20-%20bounce(1%20-%202%20*%20x%2C%20%22out%22))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(1%20%2B%20bounce(2%20*%20x%20-%201%2C%20%22out%22))%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20EasingMethods%20%3D%20%7B%0D%0A%20%20%20%20linear%2C%0D%0A%20%20%20%20sine%2C%0D%0A%20%20%20%20quad%2C%0D%0A%20%20%20%20cubic%2C%0D%0A%20%20%20%20quart%2C%0D%0A%20%20%20%20quint%2C%0D%0A%20%20%20%20expo%2C%0D%0A%20%20%20%20circ%2C%0D%0A%20%20%20%20back%2C%0D%0A%20%20%20%20elastic%2C%0D%0A%20%20%20%20bounce%2C%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20now%20%3D%20()%20%3D%3E%20Scratch.vm.runtime.currentMSecs%3B%0D%0A%0D%0A%20%20class%20Tween%20%7B%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22jeremygamerTweening%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20%22Tweening%22%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenValue%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20START%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20END%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AMOUNT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenVariable%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22vars%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenXY%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROPERTY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22properties%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenProperty%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROPERTY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22properties%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20modes%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20Object.keys(EasingMethods)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20direction%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22in%22%2C%20%22out%22%2C%20%22in%20out%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20vars%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%20%2F%2F%20for%20Scratch%20parity%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getVariables%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20properties%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22x%20position%22%2C%20%22y%20position%22%2C%20%22direction%22%2C%20%22size%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getVariables()%20%7B%0D%0A%20%20%20%20%20%20const%20variables%20%3D%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0D%0A%20%20%20%20%20%20%20%20typeof%20Blockly%20%3D%3D%3D%20%22undefined%22%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20%5B%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20%2F%2F%20%40ts-expect-error%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20Blockly.getMainWorkspace()%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getVariableMap()%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getVariablesOfType(%22%22)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map((model)%20%3D%3E%20(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20model.name%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20model.getId()%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D))%3B%0D%0A%20%20%20%20%20%20if%20(variables.length%20%3E%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20variables%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20%5B%7B%20text%3A%20%22%22%2C%20value%3A%20%22%22%20%7D%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenValue(args)%20%7B%0D%0A%20%20%20%20%20%20const%20easeMethod%20%3D%20Cast.toString(args.MODE)%3B%0D%0A%20%20%20%20%20%20const%20easeDirection%20%3D%20Cast.toString(args.DIRECTION)%3B%0D%0A%20%20%20%20%20%20const%20start%20%3D%20Cast.toNumber(args.START)%3B%0D%0A%20%20%20%20%20%20const%20end%20%3D%20Cast.toNumber(args.END)%3B%0D%0A%20%20%20%20%20%20const%20progress%20%3D%20Cast.toNumber(args.AMOUNT)%20%2F%20100%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(!Object.prototype.hasOwnProperty.call(EasingMethods%2C%20easeMethod))%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Unknown%20method%0D%0A%20%20%20%20%20%20%20%20return%20start%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20const%20easingFunction%20%3D%20EasingMethods%5BeaseMethod%5D%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20tweened%20%3D%20easingFunction(progress%2C%20easeDirection)%3B%0D%0A%20%20%20%20%20%20return%20interpolate(tweened%2C%20start%2C%20end)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20_tweenValue(args%2C%20util%2C%20id%2C%20valueArgName%2C%20currentValue)%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20Only%20use%20args%20on%20first%20run.%20For%20later%20executions%20grab%20everything%20from%20stackframe.%0D%0A%20%20%20%20%20%20%2F%2F%20This%20ensures%20that%20if%20the%20arguments%20change%2C%20the%20tweening%20won't%20change.%20This%20matches%0D%0A%20%20%20%20%20%20%2F%2F%20the%20vanilla%20Scratch%20glide%20blocks.%0D%0A%20%20%20%20%20%20const%20state%20%3D%20util.stackFrame%5Bid%5D%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(!state)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20First%20run%2C%20need%20to%20start%20timer%0D%0A%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20durationMS%20%3D%20Cast.toNumber(args.SEC)%20*%201000%3B%0D%0A%20%20%20%20%20%20%20%20const%20easeMethod%20%3D%20Cast.toString(args.MODE)%3B%0D%0A%20%20%20%20%20%20%20%20const%20easeDirection%20%3D%20Cast.toString(args.DIRECTION)%3B%0D%0A%20%20%20%20%20%20%20%20const%20start%20%3D%20currentValue%3B%0D%0A%20%20%20%20%20%20%20%20const%20end%20%3D%20Cast.toNumber(args%5BvalueArgName%5D)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20let%20easingFunction%3B%0D%0A%20%20%20%20%20%20%20%20if%20(Object.prototype.hasOwnProperty.call(EasingMethods%2C%20easeMethod))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%20%3D%20EasingMethods%5BeaseMethod%5D%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%20%3D%20EasingMethods.linear%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20util.stackFrame%5Bid%5D%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20startTimeMS%3A%20now()%2C%0D%0A%20%20%20%20%20%20%20%20%20%20durationMS%2C%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%2C%0D%0A%20%20%20%20%20%20%20%20%20%20easeDirection%2C%0D%0A%20%20%20%20%20%20%20%20%20%20start%2C%0D%0A%20%20%20%20%20%20%20%20%20%20end%2C%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20return%20start%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(now()%20-%20state.startTimeMS%20%3E%3D%20state.durationMS)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Done%0D%0A%20%20%20%20%20%20%20%20return%20util.stackFrame%5Bid%5D.end%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Still%20running%0D%0A%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20progress%20%3D%20(now()%20-%20state.startTimeMS)%20%2F%20state.durationMS%3B%0D%0A%20%20%20%20%20%20%20%20const%20tweened%20%3D%20state.easingFunction(progress%2C%20state.easeDirection)%3B%0D%0A%20%20%20%20%20%20%20%20return%20interpolate(tweened%2C%20state.start%2C%20state.end)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenVariable(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20variable%20%3D%20util.target.lookupVariableById(args.VAR)%3B%0D%0A%20%20%20%20%20%20const%20value%20%3D%20this._tweenValue(args%2C%20util%2C%20%22%22%2C%20%22VALUE%22%2C%20variable.value)%3B%0D%0A%20%20%20%20%20%20if%20(variable%20%26%26%20variable.type%20%3D%3D%3D%20%22%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20variable.value%20%3D%20value%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenXY(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20x%20%3D%20this._tweenValue(args%2C%20util%2C%20%22x%22%2C%20%22X%22%2C%20util.target.x)%3B%0D%0A%20%20%20%20%20%20const%20y%20%3D%20this._tweenValue(args%2C%20util%2C%20%22y%22%2C%20%22Y%22%2C%20util.target.y)%3B%0D%0A%20%20%20%20%20%20util.target.setXY(x%2C%20y)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenProperty(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20let%20currentValue%20%3D%200%3B%0D%0A%20%20%20%20%20%20if%20(args.PROPERTY%20%3D%3D%3D%20%22x%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.x%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22y%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.y%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22direction%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.direction%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22size%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.size%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20value%20%3D%20this._tweenValue(args%2C%20util%2C%20%22%22%2C%20%22VALUE%22%2C%20currentValue)%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(args.PROPERTY%20%3D%3D%3D%20%22x%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setXY(value%2C%20util.target.y)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22y%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setXY(util.target.x%2C%20value)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22direction%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setDirection(value)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22size%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setSize(value)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20Tween())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Animated%20Text%0A%2F%2F%20ID%3A%20text%0A%2F%2F%20Description%3A%20An%20easy%20way%20to%20display%20and%20animate%20text.%20Compatible%20with%20Scratch%20Lab's%20Animated%20Text%20experiment.%0A%2F%2F%20By%3A%20LilyMakesThings%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_Animated%20Text%22%3A%22Animierter%20Text%22%7D%2C%22it%22%3A%7B%22_%23%20of%20lines%22%3A%22numero%20di%20righe%22%2C%22_Animated%20Text%22%3A%22Testo%20Animato%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Abilita%20blocchi%20non%20presenti%20in%20Scratch%20Lab%22%2C%22_Hello!%22%3A%22Ciao!%22%2C%22_Here%20we%20go!%22%3A%22Ecco%20fatto!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Non%20compatibili%20con%20Scratch%20Lab%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22Bevenuti%20nel%20mio%20progetto!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22durata%20%5BANIMATE%5D%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22testo%20%5BTEXT%5D%20con%20effetto%20%5BANIMATE%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22aggiugi%20riga%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22allinea%20il%20testo%20%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22inizia%20animazione%20%5BANIMATE%5D%20e%20attendi%20la%20fine%22%2C%22_center%22%3A%22centro%22%2C%22_displayed%20text%22%3A%22testo%20animato%22%2C%22_is%20animating%3F%22%3A%22animato%22%2C%22_is%20showing%20text%3F%22%3A%22testo%20visibile%22%2C%22_left%22%3A%22a%20sinistra%22%2C%22_rainbow%22%3A%22effetto%20arcobaleno%22%2C%22_random%20font%22%3A%22scelto%20a%20caso%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22resetta%20durata%20animazione%20%5BANIMATE%5D%22%2C%22_reset%20text%20width%22%3A%22resetta%20larghezza%20testo%22%2C%22_reset%20typing%20delay%22%3A%22resetta%20intervallo%20effetto%20digitazione%22%2C%22_right%22%3A%22a%20destra%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22imposta%20durata%20%5BANIMATE%5D%20a%20%5BNUM%5D%20secondi%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22usa%20carattere%20%5BFONT%5D%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22imposta%20colore%20del%20testo%20a%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22imposta%20intervallo%20effetto%20digitazione%20a%20%5BNUM%5D%20secondi%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22imposta%20larghezza%20a%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22imposta%20larghezza%20a%20%5BWIDTH%5D%20con%20allineamento%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22mostra%20sprite%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22mostra%20testo%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22inizia%20animazione%20%5BANIMATE%5D%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%5BATTRIBUTE%5D%20del%20testo%22%2C%22_type%22%3A%22effetto%20digitazione%22%2C%22_typing%20delay%22%3A%22intervallo%20effetto%20digitazione%22%2C%22_zoom%22%3A%22effetto%20zoom%22%7D%2C%22ja%22%3A%7B%22_%23%20of%20lines%22%3A%22%E8%A1%8C%E6%95%B0%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Scratch%20Lab%E4%BB%A5%E5%A4%96%E3%81%AE%E6%A9%9F%E8%83%BD%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_Hello!%22%3A%22%E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Scratch%20Lab%E3%81%A8%E3%81%AE%E4%BA%92%E6%8F%9B%E6%80%A7%E3%81%AA%E3%81%97%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%5BALIGN%5D%E5%AF%84%E3%82%8A%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_center%22%3A%22%E4%B8%AD%E5%A4%AE%22%2C%22_displayed%20text%22%3A%22%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%22%2C%22_left%22%3A%22%E5%B7%A6%22%2C%22_rainbow%22%3A%22%E3%83%AC%E3%82%A4%E3%83%B3%E3%83%9C%E3%83%BC%22%2C%22_random%20font%22%3A%22%E3%83%A9%E3%83%B3%E3%83%80%E3%83%A0%E3%81%AA%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%22%2C%22_right%22%3A%22%E5%8F%B3%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%82%92%5BFONT%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%AE%E8%89%B2%E3%82%92%5BCOLOR%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_show%20sprite%22%3A%22%E3%82%B9%E3%83%97%E3%83%A9%E3%82%A4%E3%83%88%E3%82%92%E8%A1%A8%E7%A4%BA%22%2C%22_zoom%22%3A%22%E3%82%BA%E3%83%BC%E3%83%A0%22%7D%2C%22nb%22%3A%7B%22_%23%20of%20lines%22%3A%22%23%20av%20linjer%22%2C%22_Animated%20Text%22%3A%22Animert%20Tekst%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Aktiver%20funksjoner%20som%20er%20ikke%20tilgjengelig%20i%20scratch%20lab%22%2C%22_Hello!%22%3A%22Hei!%22%2C%22_Here%20we%20go!%22%3A%22Her%20g%C3%A5r%20vi!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Inkompatibel%20med%20Scratch%20Lab.%22%2C%22_Welcome%20to%20my%20project!%22%3A%22Velkommen%20til%20mitt%20prosjekt!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%5BANIMATE%5D%20varighet%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20tekst%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22legg%20til%20linje%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22juster%20teksten%20til%20%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22animere%20%5BANIMATE%5D%20til%20ferdig%22%2C%22_center%22%3A%22senter%22%2C%22_displayed%20text%22%3A%22vist%20tekst%22%2C%22_is%20animating%3F%22%3A%22er%20animerer%3F%22%2C%22_is%20showing%20text%3F%22%3A%22viser%20teksten%3F%22%2C%22_left%22%3A%22venstre%22%2C%22_rainbow%22%3A%22regnbue%22%2C%22_random%20font%22%3A%22tilfeldig%20skrifttype%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22tilbakestill%20%5BANIMATE%5D%20varighet%22%2C%22_reset%20text%20width%22%3A%22tilbakestill%20tekstbredde%22%2C%22_reset%20typing%20delay%22%3A%22nullstill%20skriveforsinkelse%22%2C%22_right%22%3A%22riktig%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22sett%20%5BANIMATE%5D%20varighet%20til%20%5BNUM%5D%20sekunder%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22sett%20skrifttype%20til%20%5BFONT%5D%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22sett%20tekstfarge%20til%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22sett%20skriveforsinkelse%20til%20%5BNUM%5D%20sekunder%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22sett%20bredde%20til%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22sett%20bredde%20til%20%5BWIDTH%5D%20justert%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22vis%20sprite%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22vis%20tekst%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22start%20%5BANIMATE%5D%20animasjon%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22tekst%20%5BATTRIBUTE%5D%22%2C%22_typing%20delay%22%3A%22skriveforsinkelse%22%2C%22disableCompatibilityMode%22%3A%22Dette%20vil%20aktivere%20nye%20blokker%20og%20funksjoner%20som%20ikke%20vil%20fungere%20i%20den%20offisielle%20Scratch%20Lab.%5Cn%5Cn%C3%98nsker%20du%20%C3%A5%20fortsette%3F%22%7D%2C%22nl%22%3A%7B%22_%23%20of%20lines%22%3A%22aantal%20regels%22%2C%22_Animated%20Text%22%3A%22Geanimeerde%20tekst%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Niet-Scratch%20Lab%20Functies%20Inschakelen%22%2C%22_Hello!%22%3A%22Hallo!%22%2C%22_Here%20we%20go!%22%3A%22Daar%20gaan%20we!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Incompatibel%20met%20Scratch%20Lab%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22Welkom%20bij%20mijn%20project!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22duur%20van%20%5BANIMATE%5D%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20tekst%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22voeg%20regel%20%5BTEXT%5D%20toe%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22tekst%20%5BALIGN%5D%20uitlijnen%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22start%20animatie%20%5BANIMATE%5D%20en%20wacht%22%2C%22_center%22%3A%22midden%22%2C%22_displayed%20text%22%3A%22weergegeven%20tekst%22%2C%22_is%20animating%3F%22%3A%22animatie%20bezig%3F%22%2C%22_is%20showing%20text%3F%22%3A%22tekst%20aan%20het%20tonen%3F%22%2C%22_left%22%3A%22links%22%2C%22_rainbow%22%3A%22regenboog%22%2C%22_random%20font%22%3A%22willekeurig%20lettertype%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22reset%20duur%20van%20%5BANIMATE%5D%22%2C%22_reset%20text%20width%22%3A%22reset%20tekstbreedte%22%2C%22_reset%20typing%20delay%22%3A%22reset%20wachttijd%20van%20typ-animatie%22%2C%22_right%22%3A%22rechts%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22maak%20duur%20van%20%5BANIMATE%5D%20%5BNUM%5D%20seconden%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22maak%20lettertype%20%5BFONT%5D%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22maak%20tekstkleur%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22maak%20wachttijd%20van%20typ-animatie%20%5BNUM%5D%20seconden%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22maak%20breedte%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22maak%20breedte%20%5BWIDTH%5D%20%5BALIGN%5D%20uitgelijnd%22%2C%22_show%20sprite%22%3A%22toon%20sprite%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22toon%20tekst%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22start%20animatie%20%5BANIMATE%5D%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%5BATTRIBUTE%5D%20van%20tekst%22%2C%22_type%22%3A%22typen%22%2C%22_typing%20delay%22%3A%22wachttijd%20van%20typ-animatie%22%2C%22disableCompatibilityMode%22%3A%22Dit%20voegt%20nieuwe%20blokken%20en%20functies%20toe%20die%20NIET%20werken%20in%20het%20offici%C3%ABle%20Scratch%20Lab.%5Cn%5CnWil%20je%20verdergaan%3F%22%7D%2C%22ru%22%3A%7B%22_%23%20of%20lines%22%3A%22%D0%BA%D0%BE%D0%BB-%D0%B2%D0%BE%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%22%2C%22_Animated%20Text%22%3A%22%D0%90%D0%BD%D0%B8%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9%20%D0%A2%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%20%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8%20%D0%BD%D0%B5%20%D0%B8%D0%B7%20Scratch%20Lab%22%2C%22_Hello!%22%3A%22%D0%9F%D1%80%D0%B8%D0%B2%D0%B5%D1%82!%22%2C%22_Here%20we%20go!%22%3A%22%D0%9F%D0%BE%D0%B5%D1%85%D0%B0%D0%BB%D0%B8!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22%D0%9D%D0%B5%D1%81%D0%BE%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D0%BC%D0%BE%20%D1%81%D0%BE%20Scratch%20Lab%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22%D0%94%D0%BE%D0%B1%D1%80%D0%BE%20%D0%BF%D0%BE%D0%B6%D0%B0%D0%BB%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D0%B2%20%D0%BC%D0%BE%D0%B9%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%BB%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D0%B8%20%5BANIMATE%5D%20%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D1%83%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22%D0%B2%D1%8B%D1%80%D0%BE%D0%B2%D0%BD%D1%8F%D1%82%D1%8C%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%D0%BF%D0%BE%20%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%5BANIMATE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%D0%B4%D0%BE%20%D0%BA%D0%BE%D0%BD%D1%86%D0%B0%22%2C%22_center%22%3A%22%D1%86%D0%B5%D0%BD%D1%82%D1%80%D1%83%22%2C%22_displayed%20text%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_is%20animating%3F%22%3A%22%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%D1%80%D1%83%D0%B5%D1%82%D1%81%D1%8F%3F%22%2C%22_is%20showing%20text%3F%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D0%B5%D1%82%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%3F%22%2C%22_left%22%3A%22%D0%BB%D0%B5%D0%B2%D0%BE%D0%BC%D1%83%20%D0%BA%D1%80%D0%B0%D1%8E%22%2C%22_rainbow%22%3A%22%D1%80%D0%B0%D0%B4%D1%83%D0%B6%D0%BD%D1%8B%D0%B9%22%2C%22_random%20font%22%3A%22%D1%81%D0%BB%D1%83%D1%87%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9%20%D1%88%D1%80%D0%B8%D1%84%D1%82%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22%D1%81%D0%B1%D1%80%D0%BE%D1%81%D0%B8%D1%82%D1%8C%20%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%BB%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D0%B8%20%5BANIMATE%5D%22%2C%22_reset%20text%20width%22%3A%22%D1%81%D0%B1%D1%80%D0%BE%D1%81%D0%B8%D1%82%D1%8C%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%B0%22%2C%22_reset%20typing%20delay%22%3A%22%D1%81%D0%B1%D1%80%D0%BE%D1%81%D0%B8%D1%82%D1%8C%20%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D1%83%20%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%B0%D0%BD%D0%B8%D1%8F%22%2C%22_right%22%3A%22%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D0%BC%D1%83%20%D0%BA%D1%80%D0%B0%D1%8E%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%BB%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D0%B8%20%5BANIMATE%5D%20%D0%B2%20%5BNUM%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%88%D1%80%D0%B8%D1%84%D1%82%20%D0%B2%20%5BFONT%5D%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%86%D0%B2%D0%B5%D1%82%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%B0%20%D0%B2%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D1%83%20%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%B0%D0%BD%D0%B8%D1%8F%20%D0%B2%20%5BNUM%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%D0%B2%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%D0%B2%20%5BWIDTH%5D%20%D0%B2%D1%8B%D1%80%D0%BE%D0%B2%D0%BD%D0%B5%D0%BD%D0%BD%D1%83%D1%8E%20%D0%BF%D0%BE%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D1%8C%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D1%8C%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22%D0%BD%D0%B0%D1%87%D0%B0%D1%82%D1%8C%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D1%8E%20%5BANIMATE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%5BATTRIBUTE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%B0%22%2C%22_type%22%3A%22%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%B0%D1%8E%D1%89%D0%B8%D0%B9%D1%81%D1%8F%22%2C%22_typing%20delay%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0%20%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%B0%D0%BD%D0%B8%D1%8F%22%2C%22_zoom%22%3A%22%D0%B2%D1%8B%D1%80%D0%B0%D1%81%D1%82%D0%B0%D1%8E%D1%89%D0%B8%D0%B9%22%7D%2C%22zh-cn%22%3A%7B%22_%23%20of%20lines%22%3A%22%E6%96%87%E6%9C%AC%E8%A1%8C%E6%95%B0%22%2C%22_Animated%20Text%22%3A%22%E8%89%BA%E6%9C%AF%E5%AD%97%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22%E6%98%BE%E7%A4%BA%E4%B8%8EScratch%20Lab%E4%B8%8D%E5%85%BC%E5%AE%B9%E7%9A%84%E7%A7%AF%E6%9C%A8%22%2C%22_Hello!%22%3A%22%E4%BD%A0%E5%A5%BD%EF%BC%81%22%2C%22_Here%20we%20go!%22%3A%22%E7%8E%B0%E5%9C%A8%E5%87%BA%E5%8F%91%EF%BC%81%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22%E4%BB%A5%E4%B8%8B%E7%A7%AF%E6%9C%A8%E4%B8%8EScratch%20Lab%E4%B8%8D%E5%85%BC%E5%AE%B9%EF%BC%9A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22%E6%AC%A2%E8%BF%8E%E6%9D%A5%E5%88%B0%E6%88%91%E7%9A%84%E4%BD%9C%E5%93%81%EF%BC%81%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%E7%9A%84%E5%AE%8C%E6%88%90%E6%97%B6%E9%97%B4%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%E6%98%AF%5BANIMATE%5D%E7%9A%84%E6%96%87%E6%9C%AC%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22%E5%A2%9E%E5%8A%A0%E4%B8%80%E8%A1%8C%E6%96%87%E6%9C%AC%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E6%96%87%E6%9C%AC%E7%9A%84%E5%B1%95%E7%A4%BA%E6%A0%B7%E5%BC%8F%E4%B8%BA%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%E5%B9%B6%E7%AD%89%E5%BE%85%22%2C%22_center%22%3A%22%E5%B1%85%E4%B8%AD%22%2C%22_displayed%20text%22%3A%22%E6%98%BE%E7%A4%BA%E7%9A%84%E6%96%87%E6%9C%AC%22%2C%22_is%20animating%3F%22%3A%22%E6%AD%A3%E5%9C%A8%E6%98%BE%E7%A4%BA%E8%89%BA%E6%9C%AF%E5%AD%97%EF%BC%9F%22%2C%22_is%20showing%20text%3F%22%3A%22%E6%96%87%E6%9C%AC%E6%98%BE%E7%A4%BA%E4%BA%86%EF%BC%9F%22%2C%22_left%22%3A%22%E5%B1%85%E5%B7%A6%22%2C%22_rainbow%22%3A%22%E5%BD%A9%E8%99%B9%E8%89%B2%22%2C%22_random%20font%22%3A%22%E9%9A%8F%E6%9C%BA%E5%AD%97%E4%BD%93%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22%E9%87%8D%E7%BD%AE%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%E7%9A%84%E5%AE%8C%E6%88%90%E6%97%B6%E9%97%B4%22%2C%22_reset%20text%20width%22%3A%22%E9%87%8D%E7%BD%AE%E6%96%87%E6%9C%AC%E5%AE%BD%E5%BA%A6%22%2C%22_reset%20typing%20delay%22%3A%22%E9%87%8D%E7%BD%AE%E9%80%90%E5%AD%97%E6%98%BE%E7%A4%BA%E9%80%9F%E5%BA%A6%22%2C%22_right%22%3A%22%E5%B1%85%E5%8F%B3%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22%E8%AE%BE%E7%BD%AE%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%E7%9A%84%E5%AE%8C%E6%88%90%E6%97%B6%E9%97%B4%E6%98%AF%5BNUM%5D%E7%A7%92%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E6%96%87%E6%9C%AC%E7%9A%84%E5%AD%97%E4%BD%93%E4%B8%BA%5BFONT%5D%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E6%96%87%E6%9C%AC%E7%9A%84%E9%A2%9C%E8%89%B2%E4%B8%BA%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22%E8%AE%BE%E7%BD%AE%E9%80%90%E5%AD%97%E6%98%BE%E7%A4%BA%E9%80%9F%E5%BA%A6%E4%B8%BA%5BNUM%5D%E7%A7%92%2F%E5%AD%97%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E6%96%87%E6%9C%AC%E7%9A%84%E5%AE%BD%E5%BA%A6%E4%B8%BA%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22%E8%AE%BE%E7%BD%AE%5BALIGN%5D%E6%A0%B7%E5%BC%8F%E7%9A%84%E5%AE%BD%E5%BA%A6%E4%B8%BA%5BWIDTH%5D%22%2C%22_show%20sprite%22%3A%22%E6%98%BE%E7%A4%BA%E8%A7%92%E8%89%B2%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22%E6%98%BE%E7%A4%BA%E6%96%87%E6%9C%AC%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%E6%96%87%E6%9C%AC%E7%9A%84%5BATTRIBUTE%5D%22%2C%22_type%22%3A%22%E9%80%90%E5%AD%97%E6%98%BE%E7%A4%BA%22%2C%22_typing%20delay%22%3A%22%E9%80%90%E5%AD%97%E6%98%BE%E7%A4%BA%E9%80%9F%E5%BA%A6%22%2C%22_zoom%22%3A%22%E7%A7%BB%E5%8A%A8%E5%8A%A8%E7%94%BB%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20%2F%2F%20This%20extension%20was%20created%20by%20making%20projects%20with%20https%3A%2F%2Flab.scratch.mit.edu%2Ftext%2F%0A%20%20%2F%2F%20To%20determine%20block%20and%20argument%20IDs%2C%20we%20extracted%20project.json%20and%20examined%20the%20result.%0A%20%20%2F%2F%20To%20determine%20block%20behaviors%20we%20simply%20experiment%20with%20Scratch%20Lab%20and%20made%20sure%20our%0A%20%20%2F%2F%20blocks%20do%20the%20same%20things.%0A%20%20%2F%2F%20This%20extension's%20code%20is%20not%20based%20on%20the%20source%20code%20of%20Scratch%20Lab's.%0A%0A%20%20%2F%2F%20by%20%40LilyMakesThings%0A%20%20const%20blockIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3B%2C%253Csvg%2520xmlns%253D%2522http%253A%252F%252Fwww.w3.org%252F2000%252Fsvg%2522%2520width%253D%2522284.242%2522%2520height%253D%2522284.242%2522%253E%253Cg%2520fill-rule%253D%2522evenodd%2522%2520stroke-miterlimit%253D%252210%2522%2520data-paper-data%253D%2522%257B%2526quot%253BisPaintingLayer%2526quot%253B%253Atrue%257D%2522%2520style%253D%2522mix-blend-mode%253Anormal%2522%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.83%2520522.83%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.83%2520522.83%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ffa24d%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ff774d%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ff4c4c%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253C%252Fg%253E%253C%252Fsvg%253E%22%3B%0A%0A%20%20const%20CUSTOM_STATE_KEY%20%3D%20Symbol()%3B%0A%0A%20%20const%20ALIGN_LEFT%20%3D%200%3B%0A%20%20const%20ALIGN_RIGHT%20%3D%201%3B%0A%20%20const%20ALIGN_CENTER%20%3D%202%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20renderer%20%3D%20vm.renderer%3B%0A%20%20const%20gl%20%3D%20renderer.gl%3B%0A%0A%20%20let%20compatibilityMode%20%3D%20true%3B%0A%0A%20%20const%20FONTS%20%3D%20%5B%0A%20%20%20%20%22Sans%20Serif%22%2C%0A%20%20%20%20%22Serif%22%2C%0A%20%20%20%20%22Handwriting%22%2C%0A%20%20%20%20%22Marker%22%2C%0A%20%20%20%20%22Curly%22%2C%0A%20%20%20%20%22Pixel%22%2C%0A%20%20%20%20%22Scratch%22%2C%0A%20%20%5D%3B%0A%0A%20%20const%20DEFAULT_COLOR%20%3D%20%22%23575e75%22%3B%0A%20%20const%20DEFAULT_FONT%20%3D%20%22Handwriting%22%3B%0A%20%20const%20DEFAULT_ALIGN%20%3D%20ALIGN_CENTER%3B%0A%20%20const%20DEFAULT_FONT_SIZE%20%3D%2024%3B%0A%20%20const%20DEFAULT_OUTLINE_WIDTH%20%3D%200%3B%20%2F%2F%200%20%3D%20no%20outline%0A%20%20const%20DEFAULT_OUTLINE_COLOR%20%3D%20%22%23000000%22%3B%0A%0A%20%20const%20DEFAULT_TYPE_DELAY%20%3D%201000%20%2F%2015%3B%0A%0A%20%20const%20RAINBOW_TIME_PER%20%3D%201000%3B%0A%20%20const%20DEFAULT_RAINBOW_DURATION%20%3D%202000%3B%0A%0A%20%20const%20DEFAULT_ZOOM_DURATION%20%3D%20500%3B%0A%0A%20%20const%20DEFAULT_SHAKE_INTENSITY%20%3D%20100%3B%0A%20%20const%20DEFAULT_SHAKE_DURATION%20%3D%20500%3B%0A%0A%20%20let%20globalFrameTime%20%3D%200%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40typedef%20TextState%0A%20%20%20*%20%40property%20%7BTextCostumeSkin%7D%20skin%0A%20%20%20*%2F%0A%0A%20%20%2F%2F%20temporary%0A%20%20if%20(!renderer.exports%20%7C%7C%20!renderer.exports.Skin%20%7C%7C%20!vm.exports)%20%7B%0A%20%20%20%20alert(%22VM%20is%20too%20old%20for%20animated%20text%20extension%22)%3B%0A%20%20%20%20throw%20new%20Error(%22VM%20is%20too%20old%22)%3B%0A%20%20%7D%0A%0A%20%20const%20Skin%20%3D%20renderer.exports.Skin%3B%0A%20%20const%20CanvasMeasurementProvider%20%3D%20renderer.exports.CanvasMeasurementProvider%3B%0A%20%20const%20twgl%20%3D%20renderer.exports.twgl%3B%0A%20%20const%20RenderedTarget%20%3D%20vm.exports.RenderedTarget%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20c%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatComponent%20%3D%20(c)%20%3D%3E%20Math.round(c).toString(16).padStart(2%2C%20%220%22)%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B%5Bnumber%2C%20number%2C%20number%5D%7D%20color%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatColor%20%3D%20(color)%20%3D%3E%0A%20%20%20%20%60%23%24%7BformatComponent(color%5B0%5D)%7D%24%7BformatComponent(color%5B1%5D)%7D%24%7BformatComponent(%0A%20%20%20%20%20%20color%5B2%5D%0A%20%20%20%20)%7D%60%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20h%20hue%20from%200-1%0A%20%20%20*%20%40param%20%7Bnumber%7D%20s%20saturation%20from%200-1%0A%20%20%20*%20%40param%20%7Bnumber%7D%20v%20value%20from%200-1%0A%20%20%20*%20%40returns%20%7B%5Bnumber%2C%20number%2C%20number%5D%7D%20RGB%20channels%20from%200-255%0A%20%20%20*%2F%0A%20%20const%20hsvToRGB%20%3D%20(h%2C%20s%2C%20v)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FHSL_and_HSV%0A%20%20%20%20var%20r%2C%20g%2C%20b%3B%0A%20%20%20%20var%20i%20%3D%20Math.floor(h%20*%206)%3B%0A%20%20%20%20var%20f%20%3D%20h%20*%206%20-%20i%3B%0A%20%20%20%20var%20p%20%3D%20v%20*%20(1%20-%20s)%3B%0A%20%20%20%20var%20q%20%3D%20v%20*%20(1%20-%20f%20*%20s)%3B%0A%20%20%20%20var%20t%20%3D%20v%20*%20(1%20-%20(1%20-%20f)%20*%20s)%3B%0A%20%20%20%20switch%20(i%20%25%206)%20%7B%0A%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20(r%20%3D%20v)%2C%20(g%20%3D%20t)%2C%20(b%20%3D%20p)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20(r%20%3D%20q)%2C%20(g%20%3D%20v)%2C%20(b%20%3D%20p)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20(r%20%3D%20p)%2C%20(g%20%3D%20v)%2C%20(b%20%3D%20t)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20(r%20%3D%20p)%2C%20(g%20%3D%20q)%2C%20(b%20%3D%20v)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%204%3A%0A%20%20%20%20%20%20%20%20(r%20%3D%20t)%2C%20(g%20%3D%20p)%2C%20(b%20%3D%20v)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%205%3A%0A%20%20%20%20%20%20%20%20(r%20%3D%20v)%2C%20(g%20%3D%20p)%2C%20(b%20%3D%20q)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5B(r%20*%20255)%20%7C%200%2C%20(g%20*%20255)%20%7C%200%2C%20(b%20*%20255)%20%7C%200%5D%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BCanvasGradient%7D%20gradient%0A%20%20%20*%20%40param%20%7Bnumber%7D%20offset%20number%20of%20cycles%20to%20offset%20by%0A%20%20%20*%2F%0A%20%20const%20addRainbowStops%20%3D%20(gradient%2C%20offset)%20%3D%3E%20%7B%0A%20%20%20%20const%20NUMBER_STOPS%20%3D%2020%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20NUMBER_STOPS%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20exactPosition%20%3D%20i%20%2F%20NUMBER_STOPS%3B%0A%20%20%20%20%20%20let%20offsetPosition%20%3D%20(exactPosition%20-%20offset)%20%25%201%3B%0A%20%20%20%20%20%20if%20(offsetPosition%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20offsetPosition%20%2B%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20rgb%20%3D%20hsvToRGB(offsetPosition%2C%201%2C%201)%3B%0A%20%20%20%20%20%20gradient.addColorStop(exactPosition%2C%20formatColor(rgb))%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20class%20TextCostumeSkin%20extends%20Skin%20%7B%0A%20%20%20%20constructor(id%2C%20drawable)%20%7B%0A%20%20%20%20%20%20super(id%2C%20renderer)%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRenderWebGL.Drawable%7D%20*%2F%0A%20%20%20%20%20%20this.drawable%20%3D%20drawable%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7Bnumber%7D%20*%2F%0A%20%20%20%20%20%20this._previousDrawableXScale%20%3D%20100%3B%0A%0A%20%20%20%20%20%20this.canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20this.canvas.width%20%3D%200%3B%0A%20%20%20%20%20%20this.canvas.height%20%3D%200%3B%0A%20%20%20%20%20%20this.ctx%20%3D%20this.canvas.getContext(%222d%22)%3B%0A%0A%20%20%20%20%20%20this.text%20%3D%20%22%22%3B%0A%20%20%20%20%20%20this.color%20%3D%20DEFAULT_COLOR%3B%0A%20%20%20%20%20%20this.textWidth%20%3D%20vm.runtime.stageWidth%3B%0A%20%20%20%20%20%20this.fontFamily%20%3D%20DEFAULT_FONT%3B%0A%20%20%20%20%20%20this.baseFontSize%20%3D%20DEFAULT_FONT_SIZE%3B%0A%20%20%20%20%20%20this.align%20%3D%20DEFAULT_ALIGN%3B%0A%20%20%20%20%20%20this.outlineWidth%20%3D%20DEFAULT_OUTLINE_WIDTH%3B%0A%20%20%20%20%20%20this.outlineColor%20%3D%20DEFAULT_OUTLINE_COLOR%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7BArray%3C%7Btext%3A%20string%3B%20width%3A%20number%3B%7D%3E%7D%20*%2F%0A%20%20%20%20%20%20this.lines%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%20*%2F%0A%20%20%20%20%20%20this._size%20%3D%20%5B0%2C%200%5D%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%20*%2F%0A%20%20%20%20%20%20this._rotationCenter%20%3D%20%5B0%2C%200%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Updated%20in%20_updateFontDimensions%0A%20%20%20%20%20%20this.calculatedFontSize%20%3D%200%3B%0A%20%20%20%20%20%20this.lineHeight%20%3D%200%3B%0A%20%20%20%20%20%20this.verticalPadding%20%3D%200%3B%0A%20%20%20%20%20%20this.wrapWidth%20%3D%200%3B%0A%0A%20%20%20%20%20%20this._textDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._renderedAtScale%20%3D%201%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%200%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%200%3B%0A%0A%20%20%20%20%20%20this.isTyping%20%3D%20false%3B%0A%20%20%20%20%20%20this.typeAnimationInterval%20%3D%20null%3B%0A%20%20%20%20%20%20this.typeDelay%20%3D%20DEFAULT_TYPE_DELAY%3B%0A%0A%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20this.rainbowStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.rainbowTimeout%20%3D%20null%3B%0A%20%20%20%20%20%20this.rainbowDuration%20%3D%20DEFAULT_RAINBOW_DURATION%3B%0A%0A%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20this.zoomStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.zoomTimeout%20%3D%20null%3B%0A%20%20%20%20%20%20this.zoomDuration%20%3D%20DEFAULT_ZOOM_DURATION%3B%0A%0A%20%20%20%20%20%20this.isShaking%20%3D%20false%3B%0A%20%20%20%20%20%20this.shakeStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.shakeTimeout%20%3D%20null%3B%0A%20%20%20%20%20%20this.shakeDuration%20%3D%20DEFAULT_SHAKE_DURATION%3B%0A%20%20%20%20%20%20this.shakeIntensity%20%3D%20DEFAULT_SHAKE_INTENSITY%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7B(()%20%3D%3E%20void)%7Cnull%7D%20*%2F%0A%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20dispose()%20%7B%0A%20%20%20%20%20%20if%20(this._texture)%20%7B%0A%20%20%20%20%20%20%20%20gl.deleteTexture(this._texture)%3B%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.canvas%20%3D%20null%3B%0A%20%20%20%20%20%20this.ctx%20%3D%20null%3B%0A%20%20%20%20%20%20super.dispose()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20get%20size()%20%7B%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this._size%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20useNearest()%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_needsReflow()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20this._textDirty%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isZooming%20%26%26%20this._reflowTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isShaking%20%26%26%20this._reflowTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20this._previousDrawableXScale%20!%3D%3D%20Math.abs(this.drawable.scale%5B0%5D)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_updateFontDimensions()%20%7B%0A%20%20%20%20%20%20this.calculatedFontSize%20%3D%20this.baseFontSize%3B%0A%20%20%20%20%20%20if%20(this.isZooming)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20it%20looks%20like%20Scratch's%20animation%20always%20starts%20at%20least%20a%20little%20visible%0A%20%20%20%20%20%20%20%20const%20time%20%3D%20globalFrameTime%20-%20this.zoomStartTime%3B%0A%20%20%20%20%20%20%20%20const%20progress%20%3D%20Math.max(0%2C%20Math.min(1%2C%20time%20%2F%20this.zoomDuration))%3B%0A%20%20%20%20%20%20%20%20this.calculatedFontSize%20*%3D%20progress%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.lineHeight%20%3D%20(this.baseFontSize%20*%208)%20%2F%207%3B%0A%20%20%20%20%20%20%2F%2F%20Always%20use%20the%20base%20size%20for%20padding.%20This%20makes%20the%20zoom%20animation%20look%20better.%0A%20%20%20%20%20%20this.verticalPadding%20%3D%20this.baseFontSize%20%2F%207%3B%0A%20%20%20%20%20%20%2F%2F%20Only%20use%20horizontal%20scale%20for%20wrap%20width%20for%20compatibility%20with%20stretch%20extension.%0A%20%20%20%20%20%20this.wrapWidth%20%3D%0A%20%20%20%20%20%20%20%20this.textWidth%20%2F%20(Math.abs(this.drawable.scale%5B0%5D)%20%2F%20100)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getFontStyle()%20%7B%0A%20%20%20%20%20%20return%20%60%24%7Bthis.calculatedFontSize%7Dpx%20%24%7Bthis.fontFamily%7D%2C%20sans-serif%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_reflowText()%20%7B%0A%20%20%20%20%20%20this._textDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%20globalFrameTime%3B%0A%20%20%20%20%20%20this._previousDrawableXScale%20%3D%20Math.abs(this.drawable.scale%5B0%5D)%3B%0A%0A%20%20%20%20%20%20this._updateFontDimensions()%3B%0A%20%20%20%20%20%20this.ctx.font%20%3D%20this._getFontStyle()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20need%20to%20make%20new%20ones%20each%20time%20to%20avoid%20caching%20incorrectly%20across%20fonts%0A%20%20%20%20%20%20const%20measurementProvider%20%3D%20new%20CanvasMeasurementProvider(this.ctx)%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRenderWebGL.TextWrapper%7D%20*%2F%0A%20%20%20%20%20%20const%20textWrapper%20%3D%20renderer.createTextWrapper(measurementProvider)%3B%0A%0A%20%20%20%20%20%20const%20lines%20%3D%20textWrapper.wrapText(this.wrapWidth%2C%20this.text)%3B%0A%20%20%20%20%20%20this.lines%20%3D%20lines.map((line)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20trimmed%20%3D%20line.trimEnd()%3B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20trimmed%2C%0A%20%20%20%20%20%20%20%20%20%20width%3A%20measurementProvider.measureText(trimmed)%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20this._size%5B0%5D%20%3D%20this.wrapWidth%20%2B%202%20*%20this.outlineWidth%3B%0A%20%20%20%20%20%20this._size%5B1%5D%20%3D%0A%20%20%20%20%20%20%20%20this.lines.length%20*%20this.lineHeight%20%2B%0A%20%20%20%20%20%20%20%202%20*%20this.verticalPadding%20%2B%0A%20%20%20%20%20%20%20%202%20*%20this.outlineWidth%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Centered%20horizontally%0A%20%20%20%20%20%20this._rotationCenter%5B0%5D%20%3D%20this._size%5B0%5D%20%2F%202%3B%0A%20%20%20%20%20%20%2F%2F%20Vertical%20center%20is%20roughly%20below%20the%20first%20line%20of%20text%0A%20%20%20%20%20%20this._rotationCenter%5B1%5D%20%3D%0A%20%20%20%20%20%20%20%20this.calculatedFontSize%20*%200.9%20%2B%0A%20%20%20%20%20%20%20%20this.verticalPadding%20%2B%0A%20%20%20%20%20%20%20%20this.outlineWidth%3B%0A%0A%20%20%20%20%20%20if%20(this.isShaking)%20%7B%0A%20%20%20%20%20%20%20%20const%20padding%20%3D%20Math.max(0%2C%20this.shakeIntensity%20%2F%2020)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20offsets%20should%20be%20in%20range%20%5B-padding%2C%20%2Bpadding%5D%0A%20%20%20%20%20%20%20%20this._rotationCenter%5B0%5D%20%2B%3D%202%20*%20Math.random()%20*%20padding%20-%20padding%3B%0A%20%20%20%20%20%20%20%20this._rotationCenter%5B1%5D%20%2B%3D%202%20*%20Math.random()%20*%20padding%20-%20padding%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_renderAtScale(requestedScale)%20%7B%0A%20%20%20%20%20%20this._renderedAtScale%20%3D%20requestedScale%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%20globalFrameTime%3B%0A%0A%20%20%20%20%20%20const%20scratchWidth%20%3D%20this._size%5B0%5D%3B%0A%20%20%20%20%20%20const%20scratchHeight%20%3D%20this._size%5B1%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Renderer's%20requested%20scale%20is%20accounted%20for%20at%20this%20point.%20Do%20not%20touch%20%60requestedScale%60%0A%20%20%20%20%20%20%2F%2F%20ever%20after%20this%20point.%0A%20%20%20%20%20%20this.canvas.width%20%3D%20Math.ceil(scratchWidth%20*%20requestedScale)%3B%0A%20%20%20%20%20%20this.canvas.height%20%3D%20Math.ceil(scratchHeight%20*%20requestedScale)%3B%0A%20%20%20%20%20%20this.ctx.scale(requestedScale%2C%20requestedScale)%3B%0A%0A%20%20%20%20%20%20this.ctx.translate(this.outlineWidth%2C%20this.outlineWidth)%3B%0A%0A%20%20%20%20%20%20const%20rainbowOffset%20%3D%20this.isRainbow%0A%20%20%20%20%20%20%20%20%3F%20(globalFrameTime%20-%20this.rainbowStartTime)%20%2F%20RAINBOW_TIME_PER%0A%20%20%20%20%20%20%20%20%3A%200%3B%0A%20%20%20%20%20%20this.ctx.fillStyle%20%3D%20this.color%3B%0A%20%20%20%20%20%20this.ctx.font%20%3D%20this._getFontStyle()%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.lines.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20line%20%3D%20this.lines%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20text%20%3D%20line.text%3B%0A%20%20%20%20%20%20%20%20const%20lineWidth%20%3D%20line.width%3B%0A%0A%20%20%20%20%20%20%20%20let%20xOffset%3B%0A%20%20%20%20%20%20%20%20const%20yOffset%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.verticalPadding%20%2B%20i%20*%20this.lineHeight%20%2B%20this.baseFontSize%3B%0A%20%20%20%20%20%20%20%20if%20(this.align%20%3D%3D%3D%20ALIGN_LEFT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.align%20%3D%3D%3D%20ALIGN_CENTER)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%20(this.wrapWidth%20-%20lineWidth)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%20this.wrapWidth%20-%20lineWidth%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.isRainbow)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20gradient%20%3D%20this.ctx.createLinearGradient(%0A%20%20%20%20%20%20%20%20%20%20%20%20xOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xOffset%20%2B%20lineWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20addRainbowStops(gradient%2C%20rainbowOffset)%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.fillStyle%20%3D%20gradient%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.outlineWidth%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.lineWidth%20%3D%20this.outlineWidth%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.strokeStyle%20%3D%20this.outlineColor%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.lineCap%20%3D%20%22round%22%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.lineJoin%20%3D%20%22round%22%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.strokeText(text%2C%20xOffset%2C%20yOffset)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20we're%20still%20a%20few%20pixels%20off%20of%20Scratch%20Lab%0A%20%20%20%20%20%20%20%20this.ctx.fillText(text%2C%20xOffset%2C%20yOffset)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!this._texture)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20-%20twgl%20not%20typed%20yet%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20twgl.createTexture(gl%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20auto%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20wrap%3A%20gl.CLAMP_TO_EDGE%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this._setTexture(this.canvas)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_invalidateTexture()%20%7B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%200%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_invalidateText()%20%7B%0A%20%20%20%20%20%20this._textDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%200%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setText(text)%20%7B%0A%20%20%20%20%20%20if%20(text%20!%3D%3D%20this.text)%20%7B%0A%20%20%20%20%20%20%20%20this.text%20%3D%20text%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor(color)%20%7B%0A%20%20%20%20%20%20if%20(color%20!%3D%3D%20this.color)%20%7B%0A%20%20%20%20%20%20%20%20this.color%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOutlineColor(color)%20%7B%0A%20%20%20%20%20%20if%20(color%20!%3D%3D%20this.color)%20%7B%0A%20%20%20%20%20%20%20%20this.outlineColor%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOutlineWidth(width)%20%7B%0A%20%20%20%20%20%20this.outlineWidth%20%3D%20width%3B%0A%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAlign(align)%20%7B%0A%20%20%20%20%20%20if%20(align%20!%3D%3D%20this.align)%20%7B%0A%20%20%20%20%20%20%20%20this.align%20%3D%20align%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidth(width)%20%7B%0A%20%20%20%20%20%20if%20(width%20!%3D%3D%20this.textWidth)%20%7B%0A%20%20%20%20%20%20%20%20this.textWidth%20%3D%20width%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFontFamily(font)%20%7B%0A%20%20%20%20%20%20if%20(font%20!%3D%3D%20this.fontFamily)%20%7B%0A%20%20%20%20%20%20%20%20this.fontFamily%20%3D%20font%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFontFamily()%20%7B%0A%20%20%20%20%20%20return%20this.fontFamily%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getColor()%20%7B%0A%20%20%20%20%20%20return%20this.color%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getWidth()%20%7B%0A%20%20%20%20%20%20return%20this.textWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getOutlineColor()%20%7B%0A%20%20%20%20%20%20return%20this.outlineColor%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getOutlineWidth()%20%7B%0A%20%20%20%20%20%20return%20this.outlineWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAlign()%20%7B%0A%20%20%20%20%20%20return%20this.align%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_oneAnimationAtATime(newCallback)%20%7B%0A%20%20%20%20%20%20this.cancelAnimation()%3B%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20newCallback(this.resolveOngoingAnimation)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startTypeAnimation()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isTyping%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20const%20originalText%20%3D%20this.text%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%201%3B%0A%20%20%20%20%20%20%20%20const%20update%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.setText(originalText.substring(0%2C%20i))%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20update()%3B%0A%0A%20%20%20%20%20%20%20%20this.typeAnimationInterval%20%3D%20setInterval(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20i%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20update()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20%3E%3D%20originalText.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(this.typeAnimationInterval)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.isTyping%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20this.typeDelay)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTypeDelay(delay)%20%7B%0A%20%20%20%20%20%20this.typeDelay%20%3D%20delay%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startRainbowAnimation()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.rainbowStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%20%20this.rainbowTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20this.rainbowDuration)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setRainbowDuration(duration)%20%7B%0A%20%20%20%20%20%20this.rainbowDuration%20%3D%20duration%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startZoomAnimation()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isZooming%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.zoomStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20this.zoomTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20this.zoomDuration)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setZoomDuration(duration)%20%7B%0A%20%20%20%20%20%20this.zoomDuration%20%3D%20duration%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startShakeAnimation()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isShaking%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.shakeStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20_invalidateText()%20is%20not%20smart%20enough%20to%20realize%20that%20we%20don't%20need%20to%20actually%0A%20%20%20%20%20%20%20%20%2F%2F%20do%20a%20full%20reflow%2C%20just%20update%20rotation%20center...%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20this.shakeTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isShaking%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20this.shakeDuration)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setShakeDuration(duration)%20%7B%0A%20%20%20%20%20%20this.shakeDuration%20%3D%20duration%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setShakeIntensity(intensity)%20%7B%0A%20%20%20%20%20%20this.shakeIntensity%20%3D%20intensity%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20cancelAnimation()%20%7B%0A%20%20%20%20%20%20if%20(this.resolveOngoingAnimation)%20%7B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation()%3B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20this.isTyping%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearInterval(this.typeAnimationInterval)%3B%0A%0A%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.rainbowTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.zoomTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20this.isShaking%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.shakeTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20sometimes%20we%20only%20need%20to%20invalidate%20the%20texture%20at%20this%20point%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20updateSilhouette(scale)%20%7B%0A%20%20%20%20%20%20this.getTexture(scale)%3B%0A%20%20%20%20%20%20this._silhouette.unlazy()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20getTexture(scale)%20%7B%0A%20%20%20%20%20%20const%20MAX_SCALE%20%3D%2010%3B%0A%20%20%20%20%20%20const%20upperScale%20%3D%20scale%0A%20%20%20%20%20%20%20%20%3F%20Math.max(Math.abs(scale%5B0%5D)%2C%20Math.abs(scale%5B1%5D))%0A%20%20%20%20%20%20%20%20%3A%20100%3B%0A%20%20%20%20%20%20const%20calculatedScale%20%3D%20Math.min(MAX_SCALE%2C%20upperScale%20%2F%20100)%3B%0A%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this._textureDirty%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isRainbow%20%26%26%20this._renderTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20calculatedScale%20!%3D%3D%20this._renderedAtScale%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this._renderAtScale(calculatedScale)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20this._texture%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Note%20that%20the%20returned%20skin%20is%20only%20usable%20by%20the%20given%20target.%20Things%20will%20break%20if%20another%0A%20%20%20*%20target%20tries%20to%20use%20it.%0A%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20*%20%40returns%20%7BTextCostumeSkin%7D%0A%20%20%20*%2F%0A%20%20const%20createTextCostumeSkin%20%3D%20(target)%20%3D%3E%20%7B%0A%20%20%20%20const%20drawable%20%3D%20renderer._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20const%20id%20%3D%20renderer._nextSkinId%2B%2B%3B%0A%20%20%20%20const%20skin%20%3D%20new%20TextCostumeSkin(id%2C%20drawable)%3B%0A%20%20%20%20renderer._allSkins%5Bid%5D%20%3D%20skin%3B%0A%20%20%20%20return%20skin%3B%0A%20%20%7D%3B%0A%0A%20%20vm.runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20globalFrameTime%20%3D%20Date.now()%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20renderer._allSkins.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allSkins%5Bi%5D%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20skin%20instanceof%20TextCostumeSkin%20%26%26%0A%20%20%20%20%20%20%20%20(skin.isRainbow%20%7C%7C%20skin.isZooming%20%7C%7C%20skin.isShaking)%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20skin.emitWasAltered()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20class%20AnimatedText%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20vm.runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._hideAllText()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20vm.runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._hideAllText()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20targetWasCreated%20does%20not%20work%20because%20it%20runs%20before%20the%20Drawable%20is%20set%20up%0A%20%20%20%20%20%20const%20extension%20%3D%20this%3B%0A%20%20%20%20%20%20const%20originalMakeClone%20%3D%20RenderedTarget.prototype.makeClone%3B%0A%20%20%20%20%20%20RenderedTarget.prototype.makeClone%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20const%20newClone%20%3D%20originalMakeClone.call(this)%3B%0A%20%20%20%20%20%20%20%20if%20(extension._hasState(this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20creates%20much%20unneeded%20state%0A%20%20%20%20%20%20%20%20%20%20const%20originalSkin%20%3D%20extension._getState(this).skin%3B%0A%20%20%20%20%20%20%20%20%20%20const%20newSkin%20%3D%20extension._getState(newClone).skin%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setAlign(originalSkin.align)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setColor(originalSkin.color)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setFontFamily(originalSkin.fontFamily)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setWidth(originalSkin.textWidth)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setText(originalSkin.text)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setRainbowDuration(originalSkin.rainbowDuration)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setZoomDuration(originalSkin.zoomDuration)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setTypeDelay(originalSkin.typeDelay)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer._allDrawables%5Bthis.drawableID%5D.skin%20instanceof%0A%20%20%20%20%20%20%20%20%20%20%20%20TextCostumeSkin%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer.updateDrawableSkinId(newClone.drawableID%2C%20newSkin.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20newClone%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20vm.runtime.on(%22targetWasRemoved%22%2C%20(target)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._hasState(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20state%20%3D%20this._getState(target)%3B%0A%20%20%20%20%20%20%20%20%20%20renderer.destroySkin(state.skin.id)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Animated%20Text%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%239966FF%22%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20blockIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22show%20text%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22Welcome%20to%20my%20project!%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22animateText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BANIMATE%5D%20text%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22animate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22Here%20we%20go!%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22animateTextInput%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22animateText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BANIMATE%5D%20text%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22Here%20we%20go!%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clearText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22show%20sprite%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFont%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20font%20to%20%5BFONT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FONT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22font%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFontInput%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setFont%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20font%20to%20%5BFONT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FONT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twFont%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20text%20color%20to%20%5BCOLOR%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setWidth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22200%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ALIGN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22align%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setWidthInput%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setWidth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22200%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ALIGN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAlign%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20Contributors%3A%0A%20%20%20%20%20%20%20%20%20%20%20*%20-%20LilyMakesThings%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22disableCompatibilityMode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Enable%20Non-Scratch%20Lab%20Features%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Incompatible%20with%20Scratch%20Lab%3A%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setOutlineWidth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20outline%20width%20to%20%5BWIDTH%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%223%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setOutlineColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20outline%20color%20to%20%5BCOLOR%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22addLine%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22add%20line%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22Hello!%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getLines%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%23%20of%20lines%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAlignment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22align%20text%20to%20%5BALIGN%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ALIGN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAlign%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20why%20is%20the%20other%20block%20called%20%22setWidth%22%20%3A(%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setWidthValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20width%20to%20%5BWIDTH%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetWidth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20text%20width%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22startAnimate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22start%20%5BANIMATE%5D%20animation%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22animateUntilDone%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22animate%20%5BANIMATE%5D%20until%20done%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isAnimating%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20animating%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%203%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20%5BANIMATE%5D%20duration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BANIMATE%5D%20duration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setShakeIntensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20shake%20intensity%20to%20%5BNUM%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTypeDelay%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200.1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetTypeDelay%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20typing%20delay%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getTypeDelay%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22typing%20delay%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22textActive%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20showing%20text%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDisplayedText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22displayed%20text%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getTextAttribute%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22text%20%5BATTRIBUTE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTRIBUTE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22attribute%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20These%20all%20need%20acceptReporters%3A%20false%20for%20parity%20with%20the%20Scratch%20Labs%20version.%0A%20%20%20%20%20%20%20%20%20%20animate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22type%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22type%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22rainbow%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22zoom%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22zoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20font%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getFonts%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20align%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22left%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22center%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22center%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22right%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20attribute%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22font%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22outline%20color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22outline%20width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22alignment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20TurboWarp%20menus%20(acceptReporters%3A%20true)%0A%20%20%20%20%20%20%20%20%20%20twAnimate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22type%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22type%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22rainbow%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22zoom%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22zoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22shake%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20twAnimateDuration%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22rainbow%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22zoom%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22zoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22shake%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20twAlign%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22left%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22center%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22center%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22right%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20twFont%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getFonts%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFonts()%20%7B%0A%20%20%20%20%20%20const%20customFonts%20%3D%20this._getFontsMap()%3B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20...FONTS%2C%0A%20%20%20%20%20%20%20%20...customFonts%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22random%20font%22)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20%22Random%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getFontsMap()%20%7B%0A%20%20%20%20%20%20return%20Scratch.vm.runtime.fontManager%0A%20%20%20%20%20%20%20%20%3F%20Scratch.vm.runtime.fontManager.getFonts().map((i)%20%3D%3E%20(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20i.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20i.family%2C%0A%20%20%20%20%20%20%20%20%20%20%7D))%0A%20%20%20%20%20%20%20%20%3A%20%5B%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40returns%20%7BTextState%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_getState(target)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20target%5BCUSTOM_STATE_KEY%5D%3B%0A%20%20%20%20%20%20if%20(!state)%20%7B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BTextState%7D%20*%2F%0A%20%20%20%20%20%20%20%20const%20newState%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20skin%3A%20createTextCostumeSkin(target)%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20target%5BCUSTOM_STATE_KEY%5D%20%3D%20newState%3B%0A%20%20%20%20%20%20%20%20return%20newState%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20state%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40returns%20%7Bboolean%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_hasState(target)%20%7B%0A%20%20%20%20%20%20return%20!!target%5BCUSTOM_STATE_KEY%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_hideAllText()%20%7B%0A%20%20%20%20%20%20for%20(const%20target%20of%20vm.runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._hasState(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._hideText(target%2C%20this._getState(target))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTextState%7D%20state%0A%20%20%20%20%20*%2F%0A%20%20%20%20_renderText(target%2C%20state)%20%7B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%20%20%20%20%20%20renderer.updateDrawableSkinId(target.drawableID%2C%20state.skin.id)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTextState%7D%20state%0A%20%20%20%20%20*%2F%0A%20%20%20%20_hideText(target%2C%20state)%20%7B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%20%20%20%20%20%20target.setCostume(target.currentCostume)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setText(%7B%20TEXT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%20%20%20%20%20%20state.skin.setText(Scratch.Cast.toString(TEXT))%3B%0A%20%20%20%20%20%20%2F%2F%20Scratch%20forces%201%20frame%20delay%20by%20returning%20promise.%20I%20think%20that's%20silly.%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20animateText(%7B%20ANIMATE%2C%20TEXT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%0A%20%20%20%20%20%20state.skin.setText(Scratch.Cast.toString(TEXT))%3B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%0A%20%20%20%20%20%20if%20(ANIMATE%20%3D%3D%3D%20%22type%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startTypeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startRainbowAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startZoomAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startShakeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20does%20nothing%20here%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20clearText(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(this._hasState(util.target))%20%7B%0A%20%20%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20%20%20this._hideText(util.target%2C%20state)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Scratch%20forces%201%20frame%20delay%20by%20returning%20promise.%20I%20think%20that's%20silly.%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFont(%7B%20FONT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20font%20%3D%20Scratch.Cast.toString(FONT)%3B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%0A%20%20%20%20%20%20if%20(font%20%3D%3D%3D%20%22Random%22)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Random%20font%20always%20switches%20to%20a%20new%20font%2C%20never%20the%20same%20one%0A%20%20%20%20%20%20%20%20const%20possibleFonts%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20...FONTS%2C%0A%20%20%20%20%20%20%20%20%20%20...this._getFontsMap().map((i)%20%3D%3E%20i.value)%2C%0A%20%20%20%20%20%20%20%20%5D.filter((i)%20%3D%3E%20i%20!%3D%3D%20state.skin.fontFamily)%3B%0A%20%20%20%20%20%20%20%20state.skin.setFontFamily(%0A%20%20%20%20%20%20%20%20%20%20possibleFonts%5BMath.floor(Math.random()%20*%20possibleFonts.length)%5D%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setFontFamily(font)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor(%7B%20COLOR%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setColor(Scratch.Cast.toString(COLOR))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidth(%7B%20WIDTH%2C%20ALIGN%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%0A%20%20%20%20%20%20if%20(ALIGN%20%3D%3D%3D%20%22center%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_CENTER)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ALIGN%20%3D%3D%3D%20%22right%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_RIGHT)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20treats%20unknown%20values%20as%20left%20alignment.%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_LEFT)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20state.skin.setWidth(Scratch.Cast.toNumber(WIDTH))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*%0A%20%20%20%20%20*%20Extra%20blocks%2C%20not%20compatible%20with%20Scratch%3A%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20disableCompatibilityMode()%20%7B%0A%20%20%20%20%20%20const%20popup%20%3D%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22disableCompatibilityMode%22%2C%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%22This%20will%20enable%20new%20blocks%20and%20features%20that%20WILL%20NOT%20WORK%20in%20the%20official%20Scratch%20Lab.%5Cn%5CnDo%20you%20wish%20to%20continue%3F%22%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(confirm(popup))%20%7B%0A%20%20%20%20%20%20%20%20compatibilityMode%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20Scratch.vm.extensionManager.refreshBlocks()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOutlineWidth(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20width%20%3D%20Scratch.Cast.toNumber(args.WIDTH)%3B%0A%0A%20%20%20%20%20%20state.skin.setOutlineWidth(width)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOutlineColor(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20color%20%3D%20Scratch.Cast.toString(args.COLOR)%3B%0A%0A%20%20%20%20%20%20state.skin.setOutlineColor(color)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20addLine(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%0A%20%20%20%20%20%20const%20originalText%20%3D%20state.skin.text%3B%0A%20%20%20%20%20%20const%20addingText%20%3D%20Scratch.Cast.toString(args.TEXT)%3B%0A%20%20%20%20%20%20state.skin.setText(%0A%20%20%20%20%20%20%20%20originalText%20%3F%20%60%24%7BoriginalText%7D%5Cn%24%7BaddingText%7D%60%20%3A%20addingText%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getLines(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20if%20(!(skin%20instanceof%20TextCostumeSkin))%20return%200%3B%0A%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20text%20%3D%20state.skin.text%3B%0A%20%20%20%20%20%20return%20text.split(%22%5Cn%22).length%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAlignment(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20see%20setWidth%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20if%20(args.ALIGN%20%3D%3D%3D%20%22center%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_CENTER)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ALIGN%20%3D%3D%3D%20%22right%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_RIGHT)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_LEFT)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidthValue(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setWidth(Scratch.Cast.toNumber(args.WIDTH))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetWidth(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setWidth(vm.runtime.stageWidth)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startAnimate(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20if%20(!(skin%20instanceof%20TextCostumeSkin))%20return%3B%0A%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Don't%20return%20the%20promise%0A%20%20%20%20%20%20if%20(args.ANIMATE%20%3D%3D%20%22type%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.startTypeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.startRainbowAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.startZoomAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.startShakeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20does%20nothing%20here%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20animateUntilDone(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20if%20(!(skin%20instanceof%20TextCostumeSkin))%20return%3B%0A%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%0A%20%20%20%20%20%20if%20(args.ANIMATE%20%3D%3D%20%22type%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startTypeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startRainbowAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startZoomAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startShakeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20does%20nothing%20here%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20isAnimating(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20skin%20%3D%20this._getState(util.target).skin%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20skin.isTyping%20%7C%7C%20skin.isRainbow%20%7C%7C%20skin.isZooming%20%7C%7C%20skin.isShaking%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAnimateDuration(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20animation%20%3D%20args.ANIMATE%3B%0A%20%20%20%20%20%20const%20milliseconds%20%3D%20Scratch.Cast.toNumber(args.NUM)%20*%201000%3B%0A%20%20%20%20%20%20if%20(animation%20%3D%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setRainbowDuration(milliseconds)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setZoomDuration(milliseconds)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setShakeDuration(milliseconds)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetAnimateDuration(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20animation%20%3D%20args.ANIMATE%3B%0A%20%20%20%20%20%20if%20(animation%20%3D%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setRainbowDuration(DEFAULT_RAINBOW_DURATION)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setZoomDuration(DEFAULT_ZOOM_DURATION)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setShakeDuration(DEFAULT_SHAKE_DURATION)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAnimateDuration(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20animation%20%3D%20args.ANIMATE%3B%0A%20%20%20%20%20%20if%20(animation%20%3D%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.rainbowDuration%20%2F%201000%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.zoomDuration%20%2F%201000%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.shakeDuration%20%2F%201000%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20should%20never%20happen%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setShakeIntensity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setShakeIntensity(Scratch.Cast.toNumber(args.NUM))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTypeDelay(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setTypeDelay(Scratch.Cast.toNumber(args.NUM)%20*%201000)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetTypeDelay(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setTypeDelay(DEFAULT_TYPE_DELAY)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTypeDelay(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20%2F%2F%20TODO%3A%20Should%20we%20round%20this%3F%0A%20%20%20%20%20%20return%20state.skin.typeDelay%20%2F%201000%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20textActive(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20return%20skin%20instanceof%20TextCostumeSkin%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getDisplayedText(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20return%20state.skin.text%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTextAttribute(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20attrib%20%3D%20args.ATTRIBUTE%3B%0A%20%20%20%20%20%20if%20(attrib%20%3D%3D%3D%20%22font%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getFontFamily()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22color%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getColor()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22width%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getWidth()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22outline%20color%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getOutlineColor()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22outline%20width%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getOutlineWidth()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22alignment%22)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(state.skin.getAlign())%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20ALIGN_LEFT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22left%22%3B%0A%20%20%20%20%20%20%20%20%20%20case%20ALIGN_RIGHT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22right%22%3B%0A%20%20%20%20%20%20%20%20%20%20case%20ALIGN_CENTER%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22center%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20should%20never%20happen%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20AnimatedText())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Looks%20Plus%0A%2F%2F%20ID%3A%20lmsLooksPlus%0A%2F%2F%20Description%3A%20Expands%20upon%20the%20looks%20category%2C%20allowing%20you%20to%20show%2Fhide%2C%20get%20costume%20data%20and%20edit%20SVG%20skins%20on%20sprites.%0A%2F%2F%20By%3A%20LilyMakesThings%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FLilyMakesThings%2F%3E%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAAA%2Bs9J6AAAABmJLR0QA%2FwD%2FAP%2BgvaeTAAAhkklEQVR42u1dd3RU15mfOLubsn9t4iTreM%2FZc3Y3PSfNm42d%2BGSzWduJU5zECYnjOA44BlGCbWxMM2AZjBGYYooNQgiQ6KILRBMCRC%2Bm944pKqOOumaku99v3oiVhSTuff2%2B%2Bb5zfh4jjea9d%2B%2F3m3vvV0MhFs9FhMRHZvQW96f2Eg%2FPTBLP0OurhHGE9Fk9xWp63Uk4TbhEKCCUxxEliPhr688K4u%2FD%2B3fG%2Fz4dn0f%2FPxCfT9f6Aa6H6%2FLosySUzO0uPp72vHiAiNCDSDGJsIlwntAQJ5PbwHXP4T6IoBMJ3en%2Fv4P75Nli0V6yuomPEtm%2BSYrdl14XxFemiEdkU0Ukfr%2Fzcf%2F0xfENPA%2FPKovvSUfK%2BiAp7cj4ClelCeFkUUVfJhvpdQThe8nJ4h6edRbPhZTxXkI3Qmr8LCYSCKWErNQk0Sv9OfF51gYW1wQKR8r3Aq14u%2Bi1JcGI1xmaYQSilbI%2Fvd7HWsJiu8zpIT6DsxEpWH5c4Zh4XRCSxmobvfbBToG1h8W04MxDyvQIKVImoY7JZQqN2LLSCvlLNuywSMu7fcU%2Fk%2BIMi%2FvamEj24SJ9qQ3F%2BLKWsXQo9G39BVKUKbzqubI6ZlKwwNdZ61haLZyIUlnLRhb3AeMWtqocuZO4K9%2FPSBEOMhl8gQM0Hz9lrUyglY%2BwnRXffyAi7sXKyFoaUEE0C5NPG2xFVA5rbUAk7lxPZf%2BedsAZPWv2X8W%2FshZrKpMGiE%2FQ1mYwTeQtVmitUUtIxnyyVmskZHX7BU3cB6zAgcIVGNNYu30u5Hv6bDzChZU2uMjCPLO2%2B9PqiWyGElbShEA5sjfYv%2BgTiYeZbWDFTEhnfw6HwXl%2F9vsJTUYhK2RCI0x68ASzwQPLZzzOk0PNGK3IzPyz%2BEdmhzur39dowM%2Bw0jE6wCkKyvgKs8RBIRP1rwJYu4VhL6phpGO22CxICKUVMIW3nwyFaBscV%2F6e2WOP6%2BHeeLkEVi6GakB43vR%2B4tPMImsE%2FPd4cVpWKobpjP73%2BogvMZvMnf8egvmZlYhhA8pIn37IrFIj4O%2B4zATDgZL%2FTzO75LagA9gAE1zM7ivE4mFCrBhjYOlIinzp7arB5gVmWdcr4GBW1GBh4VAhdswX4sxOIUqvCdHcLO6QSJMQxZeFOJEnxLJkV8LdUphtHRPwDVbaYGDuC0JszxCi4BwxrEWoCb3%2F%2BikhVqUwEV0TRMLToExj5dUfCwYZq1mkUViWFloxD%2BUIkdbbUSJO5UwM4ww4gRVY8y3nkDj5moTtcvmws0TEApDoBBzLSqwv5vQX4shGOudFhKNy4YDjxptJiUrAEazImiJJiLx0IWorhGuyf5XjzzUsEd0QrMwaYukIIQovCNcF58xFQx1%2FvsRwX9Bh%2BPdcflDDLPYkw9UQaRCeybUTrvgRnw76Cojq1%2FWs1Hph8WvkbjgvfCHLRzv%2BvPW0UHw%2FyMHYHAuqGXYutN%2Fq2VDXIm6cbxI3zjWJ%2Bho1RyKssC48dykR8YuBS0ciXGCl1sjh%2FhK5Bw7ZR7wPTjWKNVMrxeTnwuK1xwrEsEcNjHi8UGxKvyVaJLlYVezaGJwPTBoUdbz9O84H1AurKVrlVql14kUjLWL%2FuloxqUf4Nuk6Q15mtfTnzh%2FkXj4i9DcIhpiJrNj6YE9Wx%2FGdSpbMphaxZ1WNGPfH4ruSrxUjf14o6qvlLrx2kqtlFVN0J%2BBvOCNCD6T%2FzXCKW5Wz%2BxvExO5hafK1xZm99VLXQFyqy6Uyuul6DvwyF2XSxPpJqUVl162Rr%2BxmVGQOLzNFvlbsXlEjda29y9wvHkVb06%2FqRsBPcllCPZDzDlkra8yTDwYVkOf1XxRaIiCwbaHcudCF6JmOcFKrzlB0wzNZwfVwP1g5%2F5XeiIjUAaWWydeKHVly3wb7V3pWdn%2BqLufAx%2Fkc6PPoFwqGPrHF2vZzX3atLatfW7y%2FsVbq2jsWeFdKEW33fE3AeGuyIlZ0f2c%2BfHDMPPnqyIK5cFS5reRrxeWjcomIuTO97X3h2yY08eRc7o7kY8wfaJSYsOJwH%2F9MsSMEBG6Vye2NV47xfCzX%2BXUb2p0V3d8W0KqweQLuIuPL8J8WOEbAFPIpygrKZ3i%2Bpe8p%2FuTHsDSOC%2FUplo%2Bi3L9Kc%2BRramgRS8dWOEa%2BVmCLKyM1Fb4Z11JfdQymG1rCyu5PrBorKEjaHAErw1Hxbr8SxwkIIMJGttyFj8Y30xcEJCfmz1jZ%2FYmN081nQFw60ihGP1nkCgGBkutyNTL2r%2FCZpdlra2m8WecHrPD%2Bw7a55n2ABzfUUnZDgWsEnPCs%2FHlwzdu%2BG%2BtLc7uLj3u5DX2dFd5%2F2L1ESKcGtY9%2BQTaDW%2BRrxca0W3LnUwotTevjQ79rTzHUK5%2Fg%2FXQDNaz0%2FirAhOpnZg0wC98od52AwPWzcnvmK0d9O%2FbV6c%2BJz3uxCi5kxfcXAU9uM%2B%2BAT32p1BMCYisqu2rvXODf8SfbyFxXCUh9wR%2Fk0DR%2FEfDEVnMEhIN8Wu8STwiokswLorqVzGsSzbQt%2Fa6bjnnOlPcTAfPMEbC8MCom%2FiXsGQFR5qKsICp1rzfPajEfuW4R8BFWfv%2FA7Bmw6EpEpDxV7BkBgfRBZdL3i4wPHeaDbCU%2FcsMvuIOV3x84nmuyvwMFSr%2Fxq0JPCQgc21Yndb8os5%2FxiiYZKj3FLnbMJ8oKuN4cAU%2Fvqbc9BckMxv6hKFYISsMoGRkjzaPOWUSTxPtMAO9x2CQBD2%2BuczQIWwVbF8hXV9swTbs52ufUKvgoE8B7HDV5BkQWRNt6n14CtUary%2BXCedB0Jq23fvPkyNmQSLiRSeAtDq01R0DUgPED%2BVqxfLx8O6dD6%2FScK%2BLLWrujY77OfkHv68GYailGxXf9sgK2uiWKr8oFazdHje6%2Fms5Zi60V2hANwETwDpveM9pHq8qBHH8REJg%2Fslz6%2Fi8e0H7u0mwhIOpp0Ic1MBm8AapNRyPBICBw9aR8Q%2FvV47Sfv3qKLvucHTGiw5gM3gC1VJrq1QmISmh%2BJCDKI8pK%2BGow5pB2kYPtKN7E3ZS8qAkznAKrq0zkAq73JwGBi4flO4xunhmYubwEHrFbQreqaIPMdUXy6xYUmPWy%2FANVFhu1UQM0p%2F9jZSuaxaRwF%2BgLaKYvxOHcOt8SUKWmaKy47%2FyAFVvuKRaZIuCcHuIz9AGNTAz3kNbXXFtqdEJysxyFKmYPlF8FURVudr%2FAzW29qYaj9If9mBju4uwucwV5%2FRAL2qVF9IT8Koj%2BiAFNOevF2RI%2BB5RPVeD0drMimhlkjihXWgXRJzGI84uuv6qr4H3IFGZyuIOcyeqV0apKoo6WpLcDw39SEMtblA6vWxzoeQaf7lNJ3H2RyeEOlo4QorFWjYC1Vc1i8l%2FDviYgsGJCpdoq2C%2FYc0286quyEu5hgrhgCaWeCuUF6lXRZr5Y6nsCogd9RXFU%2Brl2LkqIOc%2BXLeL0Od6KumAJJT%2FY9VNqBET42rxhZb4nILBhlnykQTUZT2f3TYh5B6%2FulTHIPMskcR5mmnSunFSpBQHH%2FK5I1FfLH3K3zkmceSd%2B%2FVFmK7qYSeJwifo56gREwxQdCAggfUq65TYFJsxKSpy5p3NhRpcEzOomPkpvLGWiOIclI9SDsi8eavBNWYq7YVpSiZKld%2F2UhNOBcHKyuKerrehDTBTngEiQUsWQNNQGffN3RdqsgirhaQXnEtQe8Lx4oCvXxEgmi3M4s1ONgDhXTX4urA0BZRt9GiW16Yz7VmLqQZcNZOiXm5ksziAvXY2A2NLpYgkFEDqHVVtWLuxLXF0gnuV0dR6sZMI4kxvYqHgOzJlRpQ0BYyUMF8qXMIzQjnXhkITWiYoOz4XEzm8xYfxxDkR9UJ0IOLF7mDoCyzdEPLiG9QLF0zhrwiWotitDUHbyLwu1IuH59xuUHPNBD0%2BTRFJHltEFPDA2F2maYBgg5LdpLTETv04EXDS6XOlLJjeV9SKOzI5WwjM8MPYhvT8yHRQjYiZWakXAN54oFJUl8sYYJCynJrFuxHHyQwScNEB8gn4Y5YGxMSxNsWnnkS16nQMBRPFIW3uJq8uSWS%2FaIDK1v%2FhY263of%2FKg2IcVb6oV6y29EfFFqzIVzOivFhlzdBPrRQeuim%2B1tYw%2Bx4Ni08DSdqv4kto5cHofvc6BI39WKF3KHlJDx8Y5%2FVk3OgjmfrbteXAyD4o9yM9U24aue69Ku21o3vxqNWPMTNaLTkj4dlsSbuJBsQ5826sU7EWRJj%2BXKewIU3qFpZt7QpAzybrRKda3JSFX2bYB7yu0LkOG%2FMS%2FhLUiIDI5bpxrUoqMWfwa60UXOBMjIMJnUrnhi2VkvqKWorQx7ZZ229AtGbeUtqF7l7Ne3K0eaaxEPqVV%2FAsPhnUc2ySvnOFrkVi3Wp0ICOORSncoNHQJWCl7R4CuZ9iKPsyDYb10vcoqmD64TDtraNHliJJPcPko1gtJ48xD8BE%2Bw4NhDQdWyRPwzN567bah%2BUvUrKGHclgnlGrOoH8aD4a1qmm1ki3Y4dye0lMvYwx6Cqo45SsKA9lLwkmH%2FUBsR8fzYJjHhunBTVEa9ZsiUVEkHxsKsq56i3VCEWNBwnQeCPO4ckSymgO51t55Xq9V8NjWOt6GOr8dnYWQtdU8GOYNMs2SC8Xp3XqdBVVK2LeWLkzryzphAitAwl08EOawZZa8kqJHny4EnNQjTOU45KNimiNsDbVUGp%2F%2Bc5oHwhzO75VT0rKbUW3C01CwqeBik9IqeGA164KlvEL6z1UeCHOolkwqR6SJLqvgwQ1qLaIKLxoWYtYH07gEEhbwQJgwLfeW7yk4rbceqUrL365QIiBaui0cyrpgETdAwjIeCHXMe0k%2BUBsRJzpkR%2BBeVQRnYtYFyygBCat5IMwl78quhKikfXx7nVg2rsKXJe3hDyy5HlEi4NndrAM2oQokbOSBMIeqsHp3Jbg0Tu6sF7NfLfWFsQbpSSolCyGVxZwpbyMaQEJuCGoSp3cISxL%2BICKWja%2FwlIx716gZYqJkOF0%2BmufeRjTzSmilrugkYYsUXGoSc4e4n1mRPa1S%2BV7zMxysTEDtwzfNMBqo3jgN145RNhKv%2BDd%2Bjt%2FjfUFbCflMaAEw0dsliKp56%2FfunBlB%2Buao2v2dc%2BgcuGS40bEqItlVDe%2FD%2B%2FF3QTkTsnXUApa%2BTkrRZB8RYcTJSqlwPCJGpZ11LODgBuVB%2Fs3esUO2xbHNQvnLoO35Gn%2BvedZGCfsJbcCO%2BWrl7qVKQ9BZzYmz4pu%2FLRKlN9UsoegoZfeqs2ioQWw7BJ%2BzSF9%2F5Q2OmLEJ2%2BYJpbw7GTmRX2%2BrjxGNZlDhTUVQxHj9VHvHKot2D7WV9o4VPg%2Bfq2vEzCkmkT2A1RD9FuyUi4cbbOnShJo2qq4IyO6l9o7R%2FEEU7lcmHBF8Lj5fx9jRnUwgAxlUMW0dWTy3zqHtYBb1h9jYBusNhUQh29UpXVvokNiKs4pqQ5jO5BQZbKxsTeELPLmjXt1QlG9%2FgMONM8JRwZegZgWmtoOEqxKVdKiJuWsxFeE9pr49QpJueQFZDPcY4VtzX%2BjccIMsA6vf%2FjuyakyugAWxba2qgCxpfRw4O7sguI5Gergc%2BYSzE2q1e1mIPbTKld%2B0d%2BJRDvDaCfJjvdfxNzF%2BBh9X2XXz11g%2BvkJ5C4pVVFUqi4zYWDvHHZbV2ip3SIjr2G3JdRCpIGFKIpBv0TAj3jEacV4JbpUa29mOOtJiS7Z9nlq5%2FFZpqG0R4%2F5YLBcP%2ButCcfGQ%2BhmwgbqdLRlh%2F%2FjDya8iCCbH%2FWMVx6tqcPn2DG10cwy2o68GvTI2zjZmfVGWDAWUb7htrkG8jlbkS4fUP%2FPs%2Foa7EnD8n4qV6oS2zZBHFJAT8yBrsMI2P39pdexLpP2XCn7eIsnFWENSPWrMvBzcuqNJBgEaaoTnUny589UFW2NVH%2BPSsZ1vS1FGo7pc3VcCV0SuQ6lJc1%2BUd9%2Bsmtx1t2L8XrbyG66rRd3RIFbgxipz7aTwlSDUauci0WG7aFhjWxSIWFYQjRlc2ltAN8%2B9Zc5XidXHQWNG9gR7i2GdljznZr%2BtQd3a58WDoRm9xf1BIiC65FaXCt%2FK%2BX0dVyVD8xQVQTW0VqWcllSi1C3pjugchxu3yFpFZdsD4H1BsZLGelEEqSsTLJN2xnE6JTfPdWx9PLdXbTVEDOj7G2stReq40Tlp%2F0q5e2l%2FDuzK6CQj%2B1f4XmfrYl2Z4v0Jzweh%2FKAXxhezUnrNqFva%2FuxUU%2B7SDdAWdPcSd%2Bbm%2FWy5W1Jxv8gIrutzvT19u0koHQ43ak3ANMOwYIdUFEfF2X0NYs%2BqGpFLZ6yNsw3kZVaLg%2BtrxaWjjTFXgR1SdOnODPWN7zrPP6ycbm7VZJun2k7Ctb7vQ5Fzm4T0j4m6EhAhZFELW1AYRM4daBArJ1WKFEkfHELI0K8PxER2vBW5fvJO5z7I6ZQ0ketww1R354hJ2CnGtSVhdx0JiHJ7dVVmlbFF7FpeE%2FOpWQmMBiHTB5WJCyYc461yuF0Ph5wpzhCwhioarvCgNAWTsFP3xDNte9Z%2FR8dg6zKToWdH8%2BpEylPF9merDy1TrlrWej5Dd6e2z2d3oDM%2BD4ELXswVk7BTEn7zNgmn9hcfox9GdCEgzk3VJgwYNZXNIuO1MsfLyCMht0Xx2Ih4x7YW02VvGBEslu0vdP47tM6ZzAJEAq0aSxbWZRTJs0uIq0eNWjDtIZtNYjcJcd2O7gf3ifvFfeP%2BO4pocgER8C7UVpzuSbFgsOGsRp0SDET4ihFahCyEg6sN98Li4R370GA1xGDtX2VYFU25BS40Wd56qlazjkbUmHhmx4efO2%2B2sJSxjyD1VSn2zyVy9pDaVWdzQLbdJJQVPMeRDa7nIp4ItRdaGhc4cm4j8l0%2BrGa9bKg1vsWA%2BlvWB%2FnKiUbxxhPuV8GeN6yM%2FJYtStvS1e1Ig9C7iFoyvIjQ8fRgtv2typDaBLN%2FpEE4Il6RsG1UE7awdqdwdWIZzbiDhPSLPnZfKC%2FN6FfgpVw73WRLZrpZLEguV3KmY5fQUTmI66flArBPbaNv9IEOfJkOod3LVWfnymsStkrJVRd6bCSJXneQkGLYvmHnRQ5mC88FPj%2B3Sgh2BfgZVWTN%2BM7LZxzPNZKJW90yCFCH0uyjyJd5A5xRmFhNmArn58svJIyd0el5s5IdNcp89Q4SxsPXKu24wNZ0YXv1MVVprGuJxVT6odcD3Bhn9snv4T44Lp8o67gbaLB7UTx%2BImGrSwfP78C4loNvoY7EjsgZRIDUe5w%2BBB8gfHd%2BarqCQADZSBucnxf4oGAR%2Bg46GTjgdxJCYEC0%2B4xIPFsb6kzoDSOsXgAZ5V4KculmDfBna%2BqcGfLmxAOrvCfhvuXuzp0fSQjZZ38g%2BJCuSPg9SxWV%2B7pzduhMLh1pFGP%2FUOTrVtRVpXJR5ghE8DQYYgC29ExC42hjjIddY0vpg9%2FulITxc2HY7Iej1J8XgiiVRaPKtegLv2GW5GrY4u2WFD5Z1Rjc0huRWIA7asKYgco4mr3G1ZONMX1RDabYb9%2FOpPB2%2BlJnQv6LRWYvsD3DPeLB%2F3Zmb32s1AOyynXpCQ9rrWyxKVT19oqEqLgmS7592bVi3NPF2swBgPvFfcuSET0ZbRrbeaG7CZHwz2YvcCxX7oFO7aqnjOISseD18lhJhuPb60XBxSaq%2Fdnc6USXF0Zj2Q67VtTEiCebAOpHoFiTjHjVDRd9J2SlbYa%2FjsD9y4odVeiIX0%2FdlYS0X%2F2s2cahsk0zu5o4nJvQtGTCs8UxoL30yJ8Xaj3R7bH2XbktKZzjXpAQNW9k5PDmukDMx6HNcodfjIvFsY1O7yc%2BHZIRs6Xxj0uuhOvIShgkUqliSk%2B5PtsIo%2FIiuBhxoTKC5wjCfLzzvNx8IL7U4thuDckK%2BTH6m7nIIcmUFaQSJTIJUSlNNrh7oQctv2R2NHXU3zBIc1J36%2B6xhad3WPYP9pYmISpAYek0U2ZCLm2nWStjihMovipnnVkxxn0SItPlroaKcDRQ84EQx7sJMn6sbEVx1AupCB0gt5lpsCIrmcPLEpqE8GnKSM477pPwRN7d7wsW3uQngnFWR4C%2FzM7kxFZLBpnNIVUxlVWRJN%2F044KiXyhokG1VlpvqPglla6AuG1cRiLlAe3IZsVge8nkzJLzXTD3SU9vlV8O0gaUJS0LZdmWbZ7pPwpzJklkqRVEx%2BjdFWs8D7h%2FP4fCupH72X8WnQmaEDpJLVS%2B4dqI8CdG6OVFJKNuyDKU83CYhuknJFlFG5W83KxbY7bC%2FflbuQZE6ZjZrBQnzIbNC%2B9hHzGxJZaMtIIvfLE9IEl4%2BJncmXD%2FFG18hqiFIx1bWt4j962rFotHlsRL1ZqEyflaug%2Fvcv7Y2lu4mK1cOW4oV%2FZFpEiLGjT7kgupFUdlZVmDq1i3kyQ6US26Blo%2FyhoRoG%2B62%2BDWAO%2Bbbnmx6LC%2FeNVZUYjUcqryd6a%2FWlRXhaDoEX9uZTSFbst%2FujrkqcLq%2FvC4kLDhnaRwHhaxK3GeobKBBZTUVyUmgKBrkO8pt87xNZ0LZRTc6G%2FuZhHj%2BZeZ3I%2FXKvsEuLKXpZipzVRXLPyyKISWK7zB3nlzNmUIfdJtVOVoEkYS7l1rsR2%2BX0Id92UxQN3xcasmTLbEeD0EnYcElOYvcsU3%2BKLYs47wPIgmtOOcJLVQ87SshOwUdZMzcjGpf9ltlzdqavO0M3vbKR9iZxVu2lH1QSIgvHovB82tCdgux%2Bsem%2BpW%2FpF6yHpbDCX8JJhHRXk1qex711ijT2c6moTbYJMTz5c6ypZjTD0NOCH34AdMRGIrlBCpLomLyc%2BFAEXD8M8WUniQ3ENdO%2BLcRz8mt1trR%2BZGEeJ6T24zns2Gc9oScEmL3T83emGyuYVtBA5cgnRGPbZWvnJSf4fOuWAMMowUqhttVFt9tEuK%2Bcf94DjsLORFP%2FjfkpNBF8s3WsMS3u6rUkzPfbzVEzfalkK1ngtYB7Tv4%2BrrjLJ2dFg8TYuUYw6ndHuf3ekNCXLej%2B8F94n4dSpjeGXJazJ4NY4WBXzDXVQnnI539iGOoRAcMTrLiF6so9yc0lbL03yE3BGn6plukDTJfVh2ZB7pF7Y94vFBcOS7fVglNXbzIpmcS2kLAzSG3JF4kuMXszSIesrHeHBGRAa1LCtTwnxTESnmoyPEtwSJgApGwmXaJD4TcFLpoppWbRtPPBpM9K3C2OrihVox%2B0r%2BrIsp3HN6sRkCMh1OdlZiEjiM95LZQTNz9dOFqS7GJo9QCve%2BwnlY0izVTK2OFk%2FxEwFG0ZUblAFXZsSB4BIy1yVsj9%2FyydYfwPhnBdV16xluE%2B0JeCJlih9tRaLa6zJqpGWXNl4ypiG3%2FvCZgKgVny2ZqfyjB%2BbgRmRJEEu6RbBIkG6CB98nInqWuPeOgkFcyaYD4BN3AFTu6wKokAncmZQVRkT2t0pMCRGO6FcWiYVpM9GWso3juzIHBJKBKDLGsBVy2u5VL9XkuTu0vPhbyUsgi9Lgtzt%2BXhbh51h6nLzK9UVUZBhynV0dUCUdpflzTjMD9kj0huAQElr4uHzcMd45d7h5c14XneyzkB7HSRKa9Qx%2FWQTsF%2FS1goUT%2FCoSN2RKE3SsscmZWxUpUtFjsSJyfGWwC3q7CJ9kyDzVfOmtxjp%2FL1oSprXR%2Be096nxHyi8Qrs4Xt3L44FSiMJqJoXb1zWY3Inl4Vy2FEcxpkN2BVQ6mNST3CsZ%2FNHVIW65uxdWF1jMgoTIW%2Ft0sOrE4AArZW4ctX2J5TlFTe%2FGoxo39JbE7win%2Fj57KC6zn8TCVzeojPhPwkZKR51u5e6SgrEFQ5mJ04BGz1DbspLtTmeTrkRzGbc9jVNmbHfPOOfT8K%2BtEjWz2RCNiKK0fcGWMrldEkkR3yq8TbqhXa%2FdDzB6knB%2FtREJjtVQlDPwDuqEijs2OMz8d1HHyOYtRdCvlZ4ulOLU4MwJq3hSi%2BrCcBC84brphEJWArsLNxUvD5Dt5%2FC%2B32fhHSQYiI7zppaculsg%2Bl1zVZ%2FWgrvXcZWdJ6MwFVOzqryqltzt436fU7IV0k7sQ%2F5bTZO2eK%2B7Uxpf1%2FzUa76%2FmvMuncqFljQ02Yu%2BH43O7i4yGd5L0%2B4kt041VuTGpWspGDZyUO1bYyCZSKdGaH0SaOCdc1ts0Vosmi0Q1%2Fj89xOjbU9sppLm5Lf%2BXU%2BbAzZ%2F%2BGaUZHVbM5i%2BZMntRf%2FooQuxYHMwvCSeCcfGGfUA56wPvxdy6cs3EO%2FG1IZ6GHGOelbwo95WBZtRok3l4Q6wol2J5hWG%2BZUNaAchNH1lOlvZtdjzt%2Bj%2Ffh%2FS7d25sh3SU5WdxDK%2BJGP0w0gqRR%2BS2fLGiHaSIv7DcK%2FYSvUvA3TW5ViVGesYIIVnLV%2BB18WzhvICIfbcpQGj6DVztni0i9bLTYQ%2BlBWDvxin%2Fj5y7fy5asbuKjoSDI9H7i0%2FRA51nBGBrhrOnGnj421PwbHJ08uQwNUEK7ty%2BEgigUUfNf9IC1PMkMH6OOCPhQKMhCD9nNTHMZBsONYk1EwCdDiSD0sC%2FwhDN8iH6hRBJ64Nd40hk%2BwpBQIgot%2FW%2Fx5DM8L%2BPfU4wOJbLQIExgRWB4iGmhRBcREh%2Bhb6KprAwMt4GsCOhfiOX21nQwKwbDxS1oCrOOicjwjoAjmW13d1%2BwH5HhiB8w4dwQFlbEJxG5wErDsBENtAI%2BxexSEEqifJBjTRk2oZTwMLPKfND3GVYihgVcoBXwi8wm62lQW1iZGCYMMJsDl47klSCxkgY1mQ02DIWSFCmBScj1mcHmlzTAFaxkjK6KMmlfE0YDF8aXCSdZ2RgdlSXk859LgvqP2G7w9pTRuv0kpBI%2Byexwf3v6KA18ASthQqNYm9L0AfYnfo4mYh0rY0IiG02ImAX%2BOSuibEaYFTMhUE6l9Hux1vvTuf9P8bMBK2pwkeW7DrksHZ4V0Z7tEitsoHCR8Bhrt14O%2Fn%2BgA%2FuLqS41pWE4hhoEamjXEYnlQ2fF%2B%2BJb1CgrtHZuh0zfd8VlkRdaFb%2FLMaj6xHyS1fsB1tqACpm0f0BnxjxWdl%2BSbxeR78espYmzTX2MsI%2BV3xfYQwR8hLUyccn4MMzefGb05MyXi6B81kKWmFDe2X%2BQUkzhshqOoxEGFyLfV1nrWDqUeBjcEGRkM2FsxXlU0%2BMwMxZVQj4Qd29wOzeTxZWw1cd5j4vssljdqn4KsYpxqyqfHbsGxieXiNeTS0uwOLZdJQXrS4qWz%2FmM%2F088GpNt9NqHt5ssrkq8CFW3%2BJb1RoIRLxyzKtMOAVFJrA0snktysrgHZ0haEYYScgJYC6c8nrcJo9V3%2BIzHogUpaWv2dVLYJJjk43VxIpoQril%2Bv7jvJPpS%2BRqeh2eVRXtBZgcR89tk4HmW8DYp%2BIZ4ceN6j8iG654mrCeMJ7L9mfAt3CfPFkvCCc5VRIDv0%2BvThFfiXYzT6HVl3Ah0Mp4jeS2%2BNSxvs7JG2vzsWvx9eH9%2B%2FO%2FT4p%2F3Cj6f%2Fv8hPsf5R%2F4PVY57P6%2FezIwAAAAASUVORK5CYII%3D%22%3B%0A%0A%20%20const%20requireNonPackagedRuntime%20%3D%20(blockName)%20%3D%3E%20%7B%0A%20%20%20%20if%20(Scratch.vm.runtime.isPackaged)%20%7B%0A%20%20%20%20%20%20alert(%0A%20%20%20%20%20%20%20%20%60To%20use%20the%20Looks%2B%20%24%7BblockName%7D%20block%2C%20the%20creator%20of%20the%20packaged%20project%20must%20uncheck%20%22Remove%20raw%20asset%20data%20after%20loading%20to%20save%20RAM%22%20under%20advanced%20settings%20in%20the%20packager.%60%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20true%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BVM.BlockUtility%7D%20util%0A%20%20%20*%20%40param%20%7Bunknown%7D%20targetName%0A%20%20%20*%2F%0A%20%20const%20getSpriteTargetByName%20%3D%20(util%2C%20targetName)%20%3D%3E%20%7B%0A%20%20%20%20const%20nameString%20%3D%20Scratch.Cast.toString(targetName)%3B%0A%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20if%20(target.getName()%20%3D%3D%3D%20nameString)%20%7B%0A%20%20%20%20%20%20return%20target%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20util.runtime.getSpriteTargetByName(nameString)%3B%0A%20%20%7D%3B%0A%0A%20%20class%20LooksPlus%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22lmsLooksPlus%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Looks%2B%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%239966FF%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23855CD6%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23774DCB%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22showSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22show%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22hideSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22hide%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteVisible%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BTARGET%5D%20visible%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setLayerTo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20layer%20%23%20of%20%5BTARGET%5D%20to%20%5BLAYER%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LAYER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteLayerNumber%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22layer%20%23%20of%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22effectValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BEFFECT%5D%20effect%20of%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22effectMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22targetCostumeNumber%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%23%20of%20costumes%20in%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22costumeAttribute%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BATTRIBUTE%5D%20of%20%5BCOSTUME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTRIBUTE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22costumeAttribute%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COSTUME%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22snapshotStage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22snapshot%20stage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceCostumeContent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BTYPE%5D%20for%20%5BCOSTUME%5D%20to%20%5BCONTENT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22SVGPNG%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22SVG%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COSTUME%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONTENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%3Csvg%20%2F%3E%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22restoreCostumeContent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22restore%20content%20for%20%5BCOSTUME%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COSTUME%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22costumeContent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BCONTENT%5D%20of%20costume%20%23%20%5BCOSTUME%5D%20of%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONTENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22contentType%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceColors%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22replace%20%5BCOLOR1%5D%20with%20%5BCOLOR2%5D%20in%20%5BSVG%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%23FCB1E3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%238ECAFF%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%3Csvg%20%2F%3E%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22colorHex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22hex%20of%20%5BCOLOR%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%23FFD983%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20effectMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20false%20for%20Scratch%20parity%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22fisheye%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22fisheye%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22whirl%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22whirl%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pixelate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22pixelate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22mosaic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22mosaic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22brightness%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22brightness%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22ghost%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22ghost%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20costumeAttribute%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22height%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22height%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22format%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22format%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22rotation%20center%20x%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22rotationCenterX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22rotation%20center%20y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22rotationCenterY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20contentType%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22dataURI%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22dataURI%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20SVGPNG%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22SVG%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22SVG%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20spriteMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getSprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20getSpriteTargetByName(util%2C%20args.TARGET)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20target.setVisible(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20hideSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20getSpriteTargetByName(util%2C%20args.TARGET)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20target.setVisible(false)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteVisible(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20getSpriteTargetByName(util%2C%20args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Scratch.Cast.toBoolean(target.visible)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setLayerTo(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20getSpriteTargetByName(util%2C%20args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20drawableID%20%3D%20target.drawableID%3B%0A%20%20%20%20%20%20const%20layerOrder%20%3D%20target.getLayerOrder()%3B%0A%20%20%20%20%20%20const%20newLayer%20%3D%20args.LAYER%20-%20layerOrder%3B%0A%20%20%20%20%20%20target.renderer.setDrawableOrder(drawableID%2C%20newLayer%2C%20%22sprite%22%2C%20true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteLayerNumber(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20getSpriteTargetByName(util%2C%20args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20target.getLayerOrder()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20effectValue(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20getSpriteTargetByName(util%2C%20args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20effects%20%3D%20target.effects%3B%0A%20%20%20%20%20%20const%20name%20%3D%20Scratch.Cast.toString(args.EFFECT)%3B%0A%20%20%20%20%20%20if%20(Object.prototype.hasOwnProperty.call(effects%2C%20name))%20%7B%0A%20%20%20%20%20%20%20%20return%20effects%5Bname%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20should%20never%20happen%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20costumeAttribute(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20costumeIndex%20%3D%20this.getCostumeInput(args.COSTUME%2C%20util.target)%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20util.target.sprite.costumes%5BcostumeIndex%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Costume%20doesn't%20exist%22)%3B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20attribute%20%3D%20args.ATTRIBUTE%3B%0A%20%20%20%20%20%20if%20(attribute%20%3D%3D%3D%20%22width%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.ceil(Scratch.Cast.toNumber(costume.size%5B0%5D))%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attribute%20%3D%3D%3D%20%22height%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.ceil(Scratch.Cast.toNumber(costume.size%5B1%5D))%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attribute%20%3D%3D%3D%20%22format%22)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!requireNonPackagedRuntime(%22costume%20format%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%22unknown%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20costume.asset.assetType.runtimeFormat%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attribute%20%3D%3D%3D%20%22rotationCenterX%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20costume.rotationCenterX%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attribute%20%3D%3D%3D%20%22rotationCenterY%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20costume.rotationCenterY%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20targetCostumeNumber(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20getSpriteTargetByName(util%2C%20args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Scratch.Cast.toNumber(target.sprite.costumes.length)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20snapshotStage(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.runtime.renderer.requestSnapshot((uri)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20resolve(uri)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceCostumeContent(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20costumeIndex%20%3D%20this.getCostumeInput(args.COSTUME%2C%20util.target)%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20util.target.sprite.costumes%5BcostumeIndex%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Costume%20doesn't%20exist%22)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThis%20is%20here%20to%20ensure%20no%20changes%20are%20made%20to%20bitmap%20costumes%2C%20as%20changes%20are%20irreversible%0A%20%20%20%20%20%20%2F%2FCheck%20will%20be%20removed%20when%20it's%20possible%20to%20edit%20bitmap%20skins%0A%20%20%20%20%20%20const%20format%20%3D%20costume.asset.assetType.runtimeFormat%3B%0A%20%20%20%20%20%20if%20(format%20!%3D%3D%20%22svg%22)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Costume%20is%20not%20vector%22)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20contentType%20%3D%20args.TYPE%3B%0A%20%20%20%20%20%20const%20content%20%3D%20args.CONTENT%3B%0A%20%20%20%20%20%20if%20(contentType%20%3D%3D%3D%20%22SVG%22)%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.runtime.renderer.updateSVGSkin(%0A%20%20%20%20%20%20%20%20%20%20costume.skinId%2C%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toString(content)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Options%20other%20than%20SVG%20are%20currently%20unavailable%22)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20Scratch.vm.emitTargetsUpdate()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20restoreCostumeContent(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20costumeIndex%20%3D%20this.getCostumeInput(args.COSTUME%2C%20util.target)%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20util.target.sprite.costumes%5BcostumeIndex%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Costume%20doesn't%20exist%22)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!requireNonPackagedRuntime(%22restore%20costume%20content%22))%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThis%20is%20here%20to%20ensure%20no%20changes%20are%20made%20to%20bitmap%20costumes%2C%20as%20changes%20are%20irreversible%0A%20%20%20%20%20%20%2F%2FCheck%20will%20be%20removed%20when%20it's%20possible%20to%20edit%20bitmap%20skins%0A%20%20%20%20%20%20const%20format%20%3D%20costume.asset.assetType.runtimeFormat%3B%0A%20%20%20%20%20%20if%20(format%20!%3D%3D%20%22svg%22)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Costume%20is%20not%20vector%22)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20content%20%3D%20costume.asset.decodeText()%3B%0A%20%20%20%20%20%20const%20rotationCenterX%20%3D%20costume.rotationCenterX%3B%0A%20%20%20%20%20%20const%20rotationCenterY%20%3D%20costume.rotationCenterY%3B%0A%20%20%20%20%20%20util.target.renderer.updateSVGSkin(costume.skinId%2C%20content%2C%20%5B%0A%20%20%20%20%20%20%20%20rotationCenterX%2C%0A%20%20%20%20%20%20%20%20rotationCenterY%2C%0A%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20costumeContent(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20getSpriteTargetByName(util%2C%20args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Target%20does%20not%20exist%22)%3B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!requireNonPackagedRuntime(%22costume%20content%22))%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20costume%20%3D%20target.sprite.costumes%5Bargs.COSTUME%20-%201%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Target%20costume%20does%20not%20exist%22)%3B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20format%20%3D%20args.CONTENT%3B%0A%20%20%20%20%20%20if%20(format%20%3D%3D%3D%20%22content%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20costume.asset.decodeText()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20costume.asset.encodeDataURI()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceColors(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20svg%20%3D%20Scratch.Cast.toString(args.SVG)%3B%0A%20%20%20%20%20%20const%20color1%20%3D%20args.COLOR1%3B%0A%20%20%20%20%20%20const%20color2%20%3D%20args.COLOR2%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20return%20svg.replace(new%20RegExp(color1%2C%20%22gi%22)%2C%20color2)%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20regex%20was%20invalid%2C%20don't%20replace%20anything%0A%20%20%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20colorHex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20args.COLOR%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCostumeInput(costume%2C%20target)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20costume%20%3D%3D%3D%20%22number%22)%20%7B%0A%20%20%20%20%20%20%20%20costume%20%3D%20Math.round(costume%20-%201)%3B%0A%20%20%20%20%20%20%20%20if%20(costume%20%3D%3D%3D%20Infinity%20%7C%7C%20costume%20%3D%3D%3D%20-Infinity%20%7C%7C%20!costume)%20%7B%0A%20%20%20%20%20%20%20%20%20%20costume%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20costume%20%3D%20this.wrapClamp(costume%2C%200%2C%20target.sprite.costumes.length%20-%201)%3B%0A%20%20%20%20%20%20%20%20return%20costume%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20target.getCostumeIndexByName(Scratch.Cast.toString(costume))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20wrapClamp(n%2C%20min%2C%20max)%20%7B%0A%20%20%20%20%20%20const%20range%20%3D%20max%20-%20min%20%2B%201%3B%0A%20%20%20%20%20%20return%20n%20-%20Math.floor((n%20-%20min)%20%2F%20range)%20*%20range%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSprites()%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20const%20myself%20%3D%20Scratch.vm.runtime.getEditingTarget().getName()%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20targetName%20%3D%20target.getName()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(targetName%20%3D%3D%3D%20myself)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20spriteNames.unshift(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22this%20sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20targetName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20spriteNames.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20targetName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20targetName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(spriteNames.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20spriteNames%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%7B%20text%3A%20%22%22%2C%20value%3A%200%20%7D%5D%3B%20%2F%2Fthis%20should%20never%20happen%20but%20it's%20a%20failsafe%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20LooksPlus())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Deltatime%0A%2F%2F%20ID%3A%20dtbyxeroname%0A%2F%2F%20Description%3A%20Precise%20delta%20timing%20blocks.%0A%2F%2F%20By%3A%20XeroName%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2Fplant2014%2F%3E%0A%2F%2F%20License%3A%20MIT%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20icon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI%2BCjxjaXJjbGUgY3g9IjMwMCIgY3k9IjMwMCIgcj0iMzAwIiBmaWxsPSIjMjAyMDIwIi8%2BCjxwYXRoIGQ9Ik04Ny44NjggNTEyLjEzMkM2MC4wMTA0IDQ4NC4yNzQgMzcuOTEyNSA0NTEuMjAzIDIyLjgzNjEgNDE0LjgwNUM3Ljc1OTcyIDM3OC40MDcgLTMuNDQ0MTZlLTA2IDMzOS4zOTcgMCAzMDBDMy40NDQxNmUtMDYgMjYwLjYwMyA3Ljc1OTc0IDIyMS41OTMgMjIuODM2MiAxODUuMTk1QzM3LjkxMjYgMTQ4Ljc5NyA2MC4wMTA0IDExNS43MjYgODcuODY4IDg3Ljg2NzlDMTE1LjcyNiA2MC4wMTA0IDE0OC43OTcgMzcuOTEyNSAxODUuMTk1IDIyLjgzNjFDMjIxLjU5MyA3Ljc1OTcxIDI2MC42MDQgLTkuODYyNjZlLTA2IDMwMCAwQzMzOS4zOTcgOS44NjI2OGUtMDYgMzc4LjQwNyA3Ljc1OTc1IDQxNC44MDUgMjIuODM2MkM0NTEuMjAzIDM3LjkxMjYgNDg0LjI3NSA2MC4wMTA0IDUxMi4xMzIgODcuODY4TDMwMCAzMDBMODcuODY4IDUxMi4xMzJaIiBmaWxsPSIjMzAzMDMwIi8%2BCjxwYXRoIGQ9Ik0zMzAgNDM1TDIzMCAxODUiIHN0cm9rZT0iIzYxMjM2MSIgc3Ryb2tlLXdpZHRoPSIzMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8%2BCjxwYXRoIGQ9Ik0zMjAgMTg1SDQyME01MjAgMTg1SDQyME00MjAgMTg1VjQzNU0yOTkuNDUxIDQzMy42MjlMMjAwLjkyOCAxODcuMzIxQzIwMC41OTMgMTg2LjQ4MyAxOTkuNDA3IDE4Ni40ODMgMTk5LjA3MiAxODcuMzIxTDEwMC41NDkgNDMzLjYyOUMxMDAuMjg2IDQzNC4yODUgMTAwLjc3IDQzNSAxMDEuNDc3IDQzNUgyOTguNTIzQzI5OS4yMyA0MzUgMjk5LjcxNCA0MzQuMjg1IDI5OS40NTEgNDMzLjYyOVoiIHN0cm9rZT0iIzYwNjA2MCIgc3Ryb2tlLXdpZHRoPSIzMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8%2BCjxwYXRoIGQ9Ik0zMTAgNDE1TDIxMCAxNjUiIHN0cm9rZT0iI0ZGNUNGRiIgc3Ryb2tlLXdpZHRoPSIzMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8%2BCjxwYXRoIGQ9Ik0zMDAgMTY1SDQwME01MDAgMTY1SDQwME00MDAgMTY1VjQxNU0yNzkuNDUxIDQxMy42MjlMMTgwLjkyOCAxNjcuMzIxQzE4MC41OTMgMTY2LjQ4MyAxNzkuNDA3IDE2Ni40ODMgMTc5LjA3MiAxNjcuMzIxTDgwLjU0ODYgNDEzLjYyOUM4MC4yODU4IDQxNC4yODUgODAuNzY5NiA0MTUgODEuNDc3IDQxNUgyNzguNTIzQzI3OS4yMyA0MTUgMjc5LjcxNCA0MTQuMjg1IDI3OS40NTEgNDEzLjYyOVoiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMzIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22DeltaTime%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%0A%20%20let%20deltaTime%20%3D%200%3B%0A%20%20let%20previousTime%20%3D%200%3B%0A%0A%20%20vm.runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20const%20now%20%3D%20performance.now()%3B%0A%20%20%20%20deltaTime%20%3D%20previousTime%20%3D%3D%3D%200%20%3F%200%20%3A%20(now%20-%20previousTime)%20%2F%201000%3B%0A%20%20%20%20previousTime%20%3D%20now%3B%0A%20%20%7D)%3B%0A%0A%20%20class%20Dt%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22dtbyxeroname%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Deltatime%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23333333%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23444444%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23ffffff%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20icon%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22dt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%CE%94T%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22fps%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22fps%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20dt()%20%7B%0A%20%20%20%20%20%20return%20deltaTime%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20fps()%20%7B%0A%20%20%20%20%20%20return%20%2B(1%20%2F%20deltaTime).toFixed(2)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Dt())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Comment%20Blocks%0A%2F%2F%20ID%3A%20lmscomments%0A%2F%2F%20Description%3A%20Annotate%20your%20scripts.%0A%2F%2F%20By%3A%20LilyMakesThings%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FLilyMakesThings%2F%3E%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20class%20CommentBlocks%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22lmscomments%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Comment%20Blocks%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23e4db8c%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23c6be79%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23a8a167%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22commentHat%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%2F%2F%20%5BCOMMENT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22comment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22commentCommand%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%2F%2F%20%5BCOMMENT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22comment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22commentC%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.CONDITIONAL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%2F%2F%20%5BCOMMENT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22comment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22commentReporter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BINPUT%5D%20%2F%2F%20%5BCOMMENT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20allowDropAnywhere%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22comment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22commentBoolean%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BINPUT%5D%20%2F%2F%20%5BCOMMENT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22comment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20commentHat()%20%7B%0A%20%20%20%20%20%20%2F%2F%20no-op%0A%20%20%20%20%7D%0A%0A%20%20%20%20commentCommand()%20%7B%0A%20%20%20%20%20%20%2F%2F%20no-op%0A%20%20%20%20%7D%0A%0A%20%20%20%20commentC(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20commentReporter(args)%20%7B%0A%20%20%20%20%20%20return%20args.INPUT%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20commentBoolean(args)%20%7B%0A%20%20%20%20%20%20return%20args.INPUT%20%7C%7C%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20CommentBlocks())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Stretch%0A%2F%2F%20ID%3A%20stretch%0A%2F%2F%20Description%3A%20Stretch%20sprites%20horizontally%20or%20vertically.%0A%2F%2F%20License%3A%20MIT%20AND%20MPL-2.0%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_Stretch%22%3A%22Strecken%22%7D%2C%22it%22%3A%7B%22_Stretch%22%3A%22Stira%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22cambia%20deformazione%20di%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22cambia%20deformazione%20x%20di%20%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22cambia%20deformazione%20y%20di%20%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22imposta%20deformazione%20a%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22porta%20deformazione%20x%20a%20%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22porta%20deformazione%20y%20a%20%5BY%5D%22%2C%22_x%20stretch%22%3A%22deformazione%20x%22%2C%22_y%20stretch%22%3A%22deformazione%20y%22%7D%2C%22nb%22%3A%7B%22_Stretch%22%3A%22Strekke%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22endre%20strekk%20med%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22endre%20strekk%20x%20med%20%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22endre%20strekk%20y%20med%20%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22sett%20strekk%20til%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22sett%20strekk%20x%20til%20%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22sett%20strekk%20y%20til%20%5BY%5D%22%2C%22_x%20stretch%22%3A%22x%20strekk%22%2C%22_y%20stretch%22%3A%22y%20strekk%22%7D%2C%22nl%22%3A%7B%22_Stretch%22%3A%22Rekken%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22verander%20uitrekking%20met%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22verander%20x-uitrekking%20met%20%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22verander%20y-uitrekking%20met%20%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22stel%20uitrekking%20in%20op%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22maak%20x-uitrekking%20%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22maak%20y-uitrekking%20%5BY%5D%22%2C%22_x%20stretch%22%3A%22x-uitrekking%22%2C%22_y%20stretch%22%3A%22y-uitrekking%22%7D%2C%22ru%22%3A%7B%22_Stretch%22%3A%22%D0%A0%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BD%D0%B0%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20x%20%D0%BD%D0%B0%20%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20y%20%D0%BD%D0%B0%20%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20x%20%D0%B2%20%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20y%20%D0%B2%20%5BY%5D%22%2C%22_x%20stretch%22%3A%22%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20x%22%2C%22_y%20stretch%22%3A%22%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20y%22%7D%2C%22zh-cn%22%3A%7B%22_Stretch%22%3A%22%E8%A7%92%E8%89%B2%E6%8B%89%E4%BC%B8%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22%E5%A2%9E%E5%8A%A0%E8%A7%92%E8%89%B2%E6%8B%89%E4%BC%B8x%20%5BDX%5D%20y%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22x%E6%8B%89%E4%BC%B8%E5%A2%9E%E5%8A%A0%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22y%E6%8B%89%E4%BC%B8%E5%A2%9E%E5%8A%A0%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E8%A7%92%E8%89%B2%E6%8B%89%E4%BC%B8x%20%5BX%5D%20y%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22%E8%AE%BE%E7%BD%AEx%E6%8B%89%E4%BC%B8%E4%B8%BA%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22%E8%AE%BE%E7%BD%AEy%E6%8B%89%E4%BC%B8%E4%B8%BA%5BY%5D%22%2C%22_x%20stretch%22%3A%22x%E6%8B%89%E4%BC%B8%22%2C%22_y%20stretch%22%3A%22y%E6%8B%89%E4%BC%B8%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20STRETCH_X%20%3D%20Symbol(%22stretch.x%22)%3B%0A%20%20const%20STRETCH_Y%20%3D%20Symbol(%22stretch.y%22)%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BVM.RenderedTarget%7D%20target%0A%20%20%20*%20%40param%20%7BVM.RenderedTarget%7D%20%5BoriginalTarget%5D%20If%20target%20is%20a%20clone%2C%20the%20original%20to%20copy%20from.%0A%20%20%20*%2F%0A%20%20const%20implementStretchForTarget%20%3D%20(target%2C%20originalTarget)%20%3D%3E%20%7B%0A%20%20%20%20if%20(STRETCH_X%20in%20target)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Target%20already%20has%20stretch.%20Don't%20implement%20again.%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20target%5BSTRETCH_X%5D%20%3D%20originalTarget%20%3F%20originalTarget%5BSTRETCH_X%5D%20%3A%20100%3B%0A%20%20%20%20target%5BSTRETCH_Y%5D%20%3D%20originalTarget%20%3F%20originalTarget%5BSTRETCH_Y%5D%20%3A%20100%3B%0A%0A%20%20%20%20const%20original%20%3D%20target._getRenderedDirectionAndScale%3B%0A%20%20%20%20target._getRenderedDirectionAndScale%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20const%20result%20%3D%20original.call(this)%3B%0A%0A%20%20%20%20%20%20result.scale%5B0%5D%20*%3D%20this%5BSTRETCH_X%5D%20%2F%20100%3B%0A%20%20%20%20%20%20result.scale%5B1%5D%20*%3D%20this%5BSTRETCH_Y%5D%20%2F%20100%3B%0A%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%20%20vm.runtime.targets.forEach((target)%20%3D%3E%20implementStretchForTarget(target))%3B%0A%20%20vm.runtime.on(%22targetWasCreated%22%2C%20(target%2C%20originalTarget)%20%3D%3E%0A%20%20%20%20implementStretchForTarget(target%2C%20originalTarget)%0A%20%20)%3B%0A%20%20vm.runtime.on(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20vm.runtime.targets.forEach((target)%20%3D%3E%20implementStretchForTarget(target))%3B%0A%20%20%7D)%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BVM.RenderedTarget%7D%20target%0A%20%20%20*%2F%0A%20%20const%20forceUpdateDirectionAndScale%20%3D%20(target)%20%3D%3E%20%7B%0A%20%20%20%20target.setDirection(target.direction)%3B%0A%20%20%7D%3B%0A%0A%20%20class%20Stretch%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22stretch%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Stretch%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%234287f5%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%232b62ba%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23204785%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStretch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeStretch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStretchX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20stretch%20x%20to%20%5BX%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStretchY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20stretch%20y%20to%20%5BY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeStretchX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20stretch%20x%20by%20%5BDX%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeStretchY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20stretch%20y%20by%20%5BDY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22x%20stretch%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22y%20stretch%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20setStretch(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_X%5D%20%3D%20Scratch.Cast.toNumber(args.X)%3B%0A%20%20%20%20%20%20util.target%5BSTRETCH_Y%5D%20%3D%20Scratch.Cast.toNumber(args.Y)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeStretch(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_X%5D%20%2B%3D%20Scratch.Cast.toNumber(args.DX)%3B%0A%20%20%20%20%20%20util.target%5BSTRETCH_Y%5D%20%2B%3D%20Scratch.Cast.toNumber(args.DY)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setStretchX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_X%5D%20%3D%20Scratch.Cast.toNumber(args.X)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setStretchY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_Y%5D%20%3D%20Scratch.Cast.toNumber(args.Y)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeStretchX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_X%5D%20%2B%3D%20Scratch.Cast.toNumber(args.DX)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeStretchY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_Y%5D%20%2B%3D%20Scratch.Cast.toNumber(args.DY)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20util.target%5BSTRETCH_X%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20getY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20util.target%5BSTRETCH_Y%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Stretch())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Layer%20Control%0A%2F%2F%20ID%3A%20SPlayering%0A%2F%2F%20Description%3A%20Relayer%20Pen%2C%20Video%20Camera%2C%20Backdrops%2C%20Sprites%20and%20More%0A%2F%2F%20By%3A%20SharkPool%0A%0A%2F%2F%20Version%20V.1.0.4%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Layer%20Control%20must%20run%20unsandboxed!%22)%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMDQuNDg0NTQiIGhlaWdodD0iMTA0LjQ4NDU0IiB2aWV3Qm94PSIwLDAsMTA0LjQ4NDU0LDEwNC40ODQ1NCI%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE4Ny43NTc3NiwtMTI3Ljc1Nzc2KSI%2BPGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMTkwLjI1Nzc3LDE4MC4wMDAwNGMwLC0yNy40NzE4OSAyMi4yNzAzNywtNDkuNzQyMjcgNDkuNzQyMjcsLTQ5Ljc0MjI3YzI3LjQ3MTg5LDAgNDkuNzQyMjcsMjIuMjcwMzcgNDkuNzQyMjcsNDkuNzQyMjdjMCwyNy40NzE4OSAtMjIuMjcwMzcsNDkuNzQyMjcgLTQ5Ljc0MjI3LDQ5Ljc0MjI3Yy0yNy40NzE4OSwwIC00OS43NDIyNywtMjIuMjcwMzcgLTQ5Ljc0MjI3LC00OS43NDIyN3oiIGZpbGw9IiNiYjcxZTYiIHN0cm9rZT0iIzg5NTNhOCIgc3Ryb2tlLXdpZHRoPSI1Ii8%2BPHBhdGggZD0iTTIxNS42MzI1NywxODQuNjI4OTNjLTMuNDc4OTgsMCAtNi4yOTkyNCwtMi44MjAyNyAtNi4yOTkyNCwtNi4yOTkyNHYtMjIuNjk3MTFjMCwtMy40Nzg5OCAyLjgyMDI3LC02LjI5OTI0IDYuMjk5MjQsLTYuMjk5MjRoMjIuNjk3MTFjMy40Nzg5OCwwIDYuMjk5MjQsMi44MjAyNyA2LjI5OTI0LDYuMjk5MjR2MjIuNjk3MTFjMCwzLjQ3ODk4IC0yLjgyMDI3LDYuMjk5MjQgLTYuMjk5MjQsNi4yOTkyNHoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTIyOC42NTE0NCwxOTcuNjQ3OGMtMy40Nzg5OCwwIC02LjI5OTI0LC0yLjgyMDI3IC02LjI5OTI0LC02LjI5OTI0di0yMi42OTcxMWMwLC0zLjQ3ODk4IDIuODIwMjcsLTYuMjk5MjQgNi4yOTkyNCwtNi4yOTkyNGgyMi42OTcxMWMzLjQ3ODk4LDAgNi4yOTkyNCwyLjgyMDI3IDYuMjk5MjQsNi4yOTkyNHYyMi42OTcxMWMwLDMuNDc4OTggLTIuODIwMjcsNi4yOTkyNCAtNi4yOTkyNCw2LjI5OTI0eiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYmI3MWU2IiBzdHJva2Utd2lkdGg9IjcuNSIvPjxwYXRoIGQ9Ik0yMjguNjUxNDQsMTk3LjY0NzhjLTMuNDc4OTgsMCAtNi4yOTkyNCwtMi44MjAyNyAtNi4yOTkyNCwtNi4yOTkyNHYtMjIuNjk3MTFjMCwtMy40Nzg5OCAyLjgyMDI3LC02LjI5OTI0IDYuMjk5MjQsLTYuMjk5MjRoMjIuNjk3MTFjMy40Nzg5OCwwIDYuMjk5MjQsMi44MjAyNyA2LjI5OTI0LDYuMjk5MjR2MjIuNjk3MTFjMCwzLjQ3ODk4IC0yLjgyMDI3LDYuMjk5MjQgLTYuMjk5MjQsNi4yOTkyNHoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTI0MS42NzAzMSwyMTAuNjY2NjdjLTMuNDc4OTgsMCAtNi4yOTkyNCwtMi44MjAyNyAtNi4yOTkyNCwtNi4yOTkyNHYtMjIuNjk3MTFjMCwtMy40Nzg5OCAyLjgyMDI3LC02LjI5OTI0IDYuMjk5MjQsLTYuMjk5MjRoMjIuNjk3MTFjMy40Nzg5OCwwIDYuMjk5MjQsMi44MjAyNyA2LjI5OTI0LDYuMjk5MjR2MjIuNjk3MTFjMCwzLjQ3ODk4IC0yLjgyMDI3LDYuMjk5MjQgLTYuMjk5MjQsNi4yOTkyNHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2JiNzFlNiIgc3Ryb2tlLXdpZHRoPSI3LjUiLz48cGF0aCBkPSJNMjQxLjY3MDMxLDIxMC42NjY2N2MtMy40Nzg5OCwwIC02LjI5OTI0LC0yLjgyMDI3IC02LjI5OTI0LC02LjI5OTI0di0yMi42OTcxMWMwLC0zLjQ3ODk4IDIuODIwMjcsLTYuMjk5MjQgNi4yOTkyNCwtNi4yOTkyNGgyMi42OTcxMWMzLjQ3ODk4LDAgNi4yOTkyNCwyLjgyMDI3IDYuMjk5MjQsNi4yOTkyNHYyMi42OTcxMWMwLDMuNDc4OTggLTIuODIwMjcsNi4yOTkyNCAtNi4yOTkyNCw2LjI5OTI0eiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20%2F%2F%20Crash%20Preventer%20--%20By%20GarboMuffin%20(More%20Events)%0A%20%20%2F%2F%20Saving%20Projects%20with%20Incorrect%20Layering%20Corrupts%20Projects%2C%20this%20fixes%20it%20%3AD%0A%20%20const%20originalSaveProjectSb3%20%3D%20vm.saveProjectSb3%3B%0A%20%20vm.saveProjectSb3%20%3D%20async%20function%20(...args)%20%7B%0A%20%20%20%20await%20beforeSave()%3B%0A%20%20%20%20return%20await%20originalSaveProjectSb3.apply(this%2C%20args)%3B%0A%20%20%7D%3B%0A%20%20const%20beforeSave%20%3D%20()%20%3D%3E%0A%20%20%20%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20instanceClass%20%3D%20new%20SPlayering()%3B%0A%20%20%20%20%20%20instanceClass%5B%22reset%22%5D()%3B%0A%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%7D)%3B%0A%20%20const%20originalSaveProjectSb3Stream%20%3D%20vm.saveProjectSb3Stream%3B%0A%20%20vm.saveProjectSb3Stream%20%3D%20function%20(...args)%20%7B%0A%20%20%20%20let%20realStream%20%3D%20null%3B%0A%20%20%20%20const%20queuedCalls%20%3D%20%5B%5D%3B%0A%20%20%20%20const%20whenStreamReady%20%3D%20(methodName%2C%20args)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(realStream)%20return%20realStream%5BmethodName%5D.apply(realStream%2C%20args)%3B%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20queuedCalls.push(%7B%20resolve%2C%20methodName%2C%20args%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20streamWrapper%20%3D%20%7B%0A%20%20%20%20%20%20on%3A%20(...args)%20%3D%3E%20void%20whenStreamReady(%22on%22%2C%20args)%2C%0A%20%20%20%20%20%20pause%3A%20(...args)%20%3D%3E%20void%20whenStreamReady(%22pause%22%2C%20args)%2C%0A%20%20%20%20%20%20resume%3A%20(...args)%20%3D%3E%20void%20whenStreamReady(%22resume%22%2C%20args)%2C%0A%20%20%20%20%20%20accumulate%3A%20(...args)%20%3D%3E%20whenStreamReady(%22accumulate%22%2C%20args)%2C%0A%20%20%20%20%7D%3B%0A%20%20%20%20beforeSave().then(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20realStream%20%3D%20originalSaveProjectSb3Stream.apply(this%2C%20args)%3B%0A%20%20%20%20%20%20for%20(const%20queued%20of%20queuedCalls)%20%7B%0A%20%20%20%20%20%20%20%20queued.resolve(realStream%5Bqueued.methodName%5D.apply(realStream%2C%20queued.args))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20queuedCalls.length%20%3D%200%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20return%20streamWrapper%3B%0A%20%20%7D%3B%0A%0A%20%20class%20SPlayering%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPlayering%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Layer%20Control%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23bb71e6%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAllID%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20all%20layer%20IDs%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getID%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20ID%20layer%20of%20%5BTARGET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TARGETS%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getOwner%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20owner%20of%20layer%20ID%20%5BID%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveID%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22relayer%20ID%20%5BTARGET%5D%20to%20layer%20%5BORDER%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ORDER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22swapID%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22swap%20layers%20of%20ID%20%5BTARGET%5D%20with%20ID%20%5BORDER%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ORDER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22reset%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22reset%20special%20layers%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20TARGETS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20this._getTargets(true)%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getTargets(enable)%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20(enable)%20spriteNames.push(%7B%20text%3A%20%22myself%22%2C%20value%3A%20%22_myself_%22%20%7D)%3B%0A%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20%22Stage%22%2C%20value%3A%20%22_stage_%22%20%7D)%3B%0A%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20%22Video%20Layer%22%2C%20value%3A%20%22_video_%22%20%7D)%3B%0A%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20%22Pen%20Layer%22%2C%20value%3A%20%22_pen_%22%20%7D)%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20targetName%20%3D%20target.getName()%3B%0A%20%20%20%20%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20targetName%2C%20value%3A%20targetName%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20spriteNames.length%20%3E%200%20%3F%20spriteNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAllID()%20%7B%20return%20JSON.stringify(vm.renderer._drawList)%20%7D%0A%0A%20%20%20%20getID(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(args.TARGET%20%3D%3D%3D%20%22_myself_%22)%20return%20util.target.drawableID%3B%0A%20%20%20%20%20%20if%20(args.TARGET%20%3D%3D%3D%20%22_stage_%22)%20return%20runtime.getTargetForStage().drawableID%3B%0A%20%20%20%20%20%20if%20(args.TARGET%20%3D%3D%3D%20%22_pen_%22)%20return%20this.findSpecial(vm.renderer._allDrawables%2C%20%22a_lineColorIndex%22)%3B%0A%20%20%20%20%20%20const%20videoL%20%3D%20runtime.ioDevices.video._drawable%3B%0A%20%20%20%20%20%20if%20(args.TARGET%20%3D%3D%3D%20%22_video_%22)%20return%20videoL%20!%3D%3D%20-1%20%3F%20videoL%20%3A%20%22%22%3B%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20return%20target%20%3F%20target.drawableID%20%3A%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20renderer._penSkinID%20doesnt%20work%2C%20we%20need%20to%20use%20this%3A%0A%20%20%20%20findSpecial(array%2C%20key)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20array.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(array%5Bi%5D%20%26%26%20array%5Bi%5D.skin%5Bkey%5D%20!%3D%3D%20undefined)%20return%20i%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getOwner(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Cant%20Properly%20Return%20Non-Existent%20Pen%2FVideo%20Layer%2C%20Empty%20Number%20Inputs%20are%200%3F%0A%20%20%20%20%20%20const%20ID%20%3D%20Scratch.Cast.toNumber(args.ID)%3B%0A%20%20%20%20%20%20const%20penID%20%3D%20vm.renderer._penSkinId%20%7C%7C%20%22%22%3B%0A%20%20%20%20%20%20const%20videoL%20%3D%20runtime.ioDevices.video._drawable%3B%0A%20%20%20%20%20%20const%20vidID%20%3D%20videoL%20!%3D%3D%20-1%20%3F%20videoL%20%3A%20%22%22%3B%0A%20%20%20%20%20%20if%20(ID%20%3D%3D%3D%20penID)%20return%20%22Pen%20Layer%22%3B%0A%20%20%20%20%20%20if%20(ID%20%3D%3D%3D%20vidID)%20return%20%22Video%20Layer%22%3B%0A%20%20%20%20%20%20if%20(ID%20%3C%200)%20return%20%22%22%3B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%200%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20spriteNames%5Btarget.drawableID%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20%60%24%7Btarget.getName()%7D%24%7Btarget.isOriginal%20%3F%20%22%22%20%3A%20%22%20(Clone)%22%7D%60%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20spriteNames%5BID%5D%20%3F%20spriteNames%5BID%5D.text%20%3A%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20reset()%20%7B%0A%20%20%20%20%20%20const%20drawables%20%3D%20vm.renderer._drawList%3B%0A%20%20%20%20%20%20const%20stage%20%3D%20runtime.getTargetForStage().drawableID%3B%0A%20%20%20%20%20%20const%20pen%20%3D%20vm.renderer._penSkinId%20%7C%7C%20-1%3B%0A%20%20%20%20%20%20const%20video%20%3D%20runtime.ioDevices.video._drawable%20%7C%7C%20-1%3B%0A%20%20%20%20%20%20const%20newDraw%20%3D%20%5Bstage%2C%20...drawables.filter(item%20%3D%3E%20!%5Bstage%2C%20pen%2C%20video%5D.includes(item))%5D%3B%0A%20%20%20%20%20%20if%20(video%20!%3D%3D%20-1)%20newDraw.splice(1%2C%200%2C%20video)%3B%0A%20%20%20%20%20%20if%20(pen%20!%3D%3D%20-1)%20newDraw.splice(video%20!%3D%3D%20-1%20%3F%202%20%3A%201%2C%200%2C%20pen)%3B%0A%20%20%20%20%20%20vm.renderer._drawList%20%3D%20newDraw%3B%0A%20%20%20%20%20%20vm.runtime.targets%5B0%5D.updateAllDrawableProperties()%3B%0A%20%20%20%20%20%20runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20moveID(args)%20%7B%0A%20%20%20%20%20%20const%20allLay%20%3D%20vm.renderer._drawList%3B%0A%20%20%20%20%20%20const%20index%20%3D%20allLay.indexOf(args.TARGET)%3B%0A%20%20%20%20%20%20const%20targetL%20%3D%20Math.max(0%2C%20Math.min(allLay.length%20-%201%2C%20Math.round(args.ORDER)))%3B%0A%20%20%20%20%20%20if%20(index%20!%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20const%20removedLayer%20%3D%20allLay.splice(index%2C%201)%5B0%5D%3B%0A%20%20%20%20%20%20%20%20vm.renderer._drawList.splice(targetL%2C%200%2C%20removedLayer)%3B%0A%20%20%20%20%20%20%20%20vm.runtime.targets%5B0%5D.updateAllDrawableProperties()%3B%0A%20%20%20%20%20%20%20%20runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20swapID(args)%20%7B%0A%20%20%20%20%20%20const%20allLay%20%3D%20vm.renderer._drawList%3B%0A%20%20%20%20%20%20const%20target1%20%3D%20allLay.indexOf(args.TARGET)%3B%0A%20%20%20%20%20%20const%20target2%20%3D%20allLay.indexOf(args.ORDER)%3B%0A%20%20%20%20%20%20if%20(target1%20%3D%3D%3D%20-1%20%7C%7C%20target2%20%3D%3D%3D%20-1)%20return%3B%0A%20%20%20%20%20%20if%20(target1%20!%3D%3D%20target2%20%26%26%20target1%20%3E%3D%200%20%26%26%20target1%20%3C%20allLay.length%20%26%26%20target2%20%3E%3D%200%20%26%26%20target2%20%3C%20allLay.length)%20%7B%0A%20%20%20%20%20%20%20%20%5BallLay%5Btarget1%5D%2C%20allLay%5Btarget2%5D%5D%20%3D%20%5BallLay%5Btarget2%5D%2C%20allLay%5Btarget1%5D%5D%3B%0A%20%20%20%20%20%20%20%20vm.runtime.targets%5B0%5D.updateAllDrawableProperties()%3B%0A%20%20%20%20%20%20%20%20runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20SPlayering())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%0A%0A%20%20%2F%2F3dMath%20variables%0A%20%20const%20spriteData%20%3D%20%7B%7D%3B%0A%20%20let%20fov%20%3D%20300%3B%0A%20%20const%20d2r%20%3D%200.0174533%3B%0A%20%20const%20camera%20%3D%20%7B%0A%20%20%20%20position%3A%20%5B0%2C%200%2C%200%5D%2C%0A%20%20%20%20rotation%3A%20%5B0%2C%200%2C%200%5D%2C%0A%20%20%20%20sinAndCos%3A%20%5B%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%5D%2C%0A%20%20%7D%3B%0A%0A%20%20%2F%2FI'm%20going%20to%20write%20a%20whole%20library%20for%20pen%2B%20interaction%20in%20the%20future.%0A%20%20let%20penPLoaded%20%3D%20false%3Blet%20penPModule%20%3D%20null%3B%0A%20%20let%20penPIcon%20%3D%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2My45NDMyMiIgaGVpZ2h0PSI2My45NDMyMiIgdmlld0JveD0iMCwwLDYzLjk0MzIyLDYzLjk0MzIyIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjA4LjAyODM3LC0xNDguMDI4MzkpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0yMTIuNTU4NCwyMDcuMTgyNjJ2LTM3Ljg4NDU3aDM3Ljc1NzQ0djM3Ljg4NDU3eiIgZmlsbD0iI2FkYzIxMyIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMCIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48cGF0aCBkPSJNMjEzLjk1NjgzLDE2OS42Nzk0NWwxNi4zOTk2OSwtMTcuNTQzODZsMzUuODUwNSwwLjUwODUybC0xNS41MDk3OSwxNi42NTM5NXoiIGZpbGw9IiNhZGMyMTMiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8%2BPHBhdGggZD0iTTI1MC45NTE0OSwyMDYuNTQ2OTh2LTUzLjAxMjk3aDE2LjkwODIxbC0wLjYzNTY1LDM2LjQ4NjE0eiIgZmlsbD0iI2FkYzIxMyIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMCIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48cGF0aCBkPSJNMjY4LjgzMDA0LDE1Mi4zNzEyNHYzOC40NDAwMmMwLDAuMDY5NzEgLTAuMDI4ODMsMC4xMzIyMSAtMC4wNDA4OCwwLjE5OTQ1Yy0wLjAxNDQyLDAuMDg4ODYgLTAuMDE5MTQsMC4xNzUzNSAtMC4wNTI4MiwwLjI1OTQ3Yy0wLjA2MDAyLDAuMTQ2NTIgLTAuMTQ4OTksMC4yODEwOSAtMC4yNTk0NywwLjM5MTU3bC0xNi44MTc0OSwxNi44MTc0OWMtMC4wMDk2OSwwLjAwOTU3IC0wLjAyNDEsMC4wMTIwNSAtMC4wMzM2NywwLjAyMTYyYy0wLjEwNTY0LDAuMDk2MTggLTAuMjIwOTUsMC4xODAxOSAtMC4zNTU1MywwLjIzNTQ4Yy0wLjE0NjYzLDAuMDYyNSAtMC4zMDI3MiwwLjA5MzcgLTAuNDU4OTIsMC4wOTM3aC0zOC40NDAwMmMtMC42NjMwOSwwIC0xLjIwMTI5LC0wLjUzODIgLTEuMjAxMjksLTEuMjAxMTh2LTM4LjQzNTI5YzAsLTAuMTU4NTcgMC4wMzEyLC0wLjMxNDc3IDAuMDkxMzMsLTAuNDY2MTJjMC4wNTUzLC0wLjEzMjEgMC4xMzk0MiwtMC4yNDk5IDAuMjM1NDgsLTAuMzUzMTdjMC4wMTE5NCwtMC4wMDk2OSAwLjAxNDQyLC0wLjAyNDEgMC4wMjM5OSwtMC4wMzM2N2wxNi44MTczOCwtMTYuODE3NDljMC4xMTI5NiwtMC4xMTI4NCAwLjI0NTA2LC0wLjE5OTMzIDAuMzk0MDUsLTAuMjYxODRjMC4wODE3NiwtMC4wMzM2NyAwLjE3MDYyLC0wLjAzNjA0IDAuMjU3MTEsLTAuMDUwNDVjMC4wNjczNSwtMC4wMTIwNSAwLjEyOTc0LC0wLjA0MDg4IDAuMTk5NDUsLTAuMDQwODhoMzguNDQwMDJjMC4wOTEzMywwIDAuMTcyOTgsMC4wMzM2NyAwLjI1NDc0LDAuMDUwNDVjMC4wNjcyMywwLjAxNjg5IDAuMTM0NDcsMC4wMTQ0MiAwLjE5Njk3LDAuMDQwODhjMC4yOTc4NywwLjEyMjUzIDAuNTMzMzYsMC4zNTgwMSAwLjY1NTg4LDAuNjU1ODhjMC4wMjY0NywwLjA2MjM5IDAuMDI2NDcsMC4xMzIxIDAuMDQwODgsMC4xOTY5N2MwLjAxOTE0LDAuMDg0MTIgMC4wNTI4MiwwLjE2NTc3IDAuMDUyODIsMC4yNTcxMXpNMjQ5LjYwOTk3LDE3MC4zOTAwMmgtMzYuMDM3NTZ2MzYuMDM3NTZoMzYuMDM3NTZ6TTI2NC43Mjg5NSwxNTMuNTcyNDJoLTM1LjA0MjkybC0xNC40MTUwMiwxNC40MTUwMmgzNS4wNDI5MnpNMjY2LjQyNzU3LDE1NS4yNzEwM2wtMTQuNDE1MDIsMTQuNDE1MDJ2MzUuMDQyOTJsMTQuNDE1MDIsLTE0LjQxNTAyeiIgZmlsbD0iIzdlOGQwYiIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiM3ZThkMGIiIHN0cm9rZS13aWR0aD0iNiIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48cGF0aCBkPSJNMjIyLjUyNzU2LDE5OC45ODA5NmwtMy4yMjM0NywxLjM1MDA2bDEuMzUyMzQsLTMuMjEzNjFjMC45MjM4MSwtMi4xOTM0OCAyLjIwNDg1LC00LjExMzE1IDMuODE1MDcsLTUuNzE3M2wxNC45Nzk2NSwtMTQuOTI0MjhjMC42NDE2NiwtMC42Mzg2MyAyLjAwOTkzLC0wLjMxMDk3IDMuMDU4MTIsMC43MzM0M2MxLjA0NjY4LDEuMDQyODkgMS4zNzczNywyLjQwNjYgMC43MzU3MSwzLjA0NTIzbC0xNC45Nzk2NSwxNC45MjUwNGMtMS42MTAyMiwxLjYwNDkxIC0zLjUzNzQ3LDIuODgyMTYgLTUuNzM3NzcsMy44MDE0MiIgZmlsbD0iI2I3YzI2NiIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiM3ZThkMGIiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8%2BPHBhdGggZD0iTTIyOC42NzQ5LDE4Mi45MjEyNmMwLDAgMS45ODQxNCwxLjY4Mzc5IDMuMjk5MzEsLTEuMTcyNThjMi44NDU3NSwtNi4xODE0NyA2LjIyMDkxLC00LjM3Nzg1IDYuMjIwOTEsLTQuMzc3ODUiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjN2U4ZDBiIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNDMuNTExOTYsMTc5LjQzMDA2YzAsMC4zNTExNyAtMC4xMDYxOCwwLjY2MjE0IC0wLjMyNzY2LDAuODgyODVsLTcuMDgwMjUsNy4wNTM3MWMwLjIxMzg5LC0wLjIxOTk1IDAuMzEwOTcsLTAuNTA2NjUgMC4zMTA5NywtMC44NDk0OGMwLC0wLjY2MjkgLTAuMzg0NTQsLTEuNDg4ODYgLTEuMDY2NCwtMi4xNzUyN2MtMS4wMzMwMywtMS4wMjk5OSAtMi4zODY4OCwtMS4zNjUyMyAtMy4wMzUzNywtMC43NTA4OGw3LjA4MDI1LC03LjA1NDQ3YzAuNjQwMTQsLTAuNjM3MTEgMi4wMDk5MywtMC4zMTA5NyAzLjA2MDQsMC43MjgxMmMwLjY4MTEsMC42ODU2NSAxLjA1ODgxLDEuNTAzMjcgMS4wNTg4MSwyLjE2NTQxTTIyMy44NjM5NywxOTguMzUyOTZjLTAuNDM0NiwwLjIyOTA2IC0wLjg3NzU0LDAuNDMyMzIgLTEuMzM3OTMsMC42Mjk1MmwtMy4yMjQyMywxLjM0ODU1bDEuMzU0NjIsLTMuMjEyMDljMC4xOTU2OCwtMC40NTgxMSAwLjQwMTk5LC0wLjg5OTU0IDAuNjMxOCwtMS4zMzI2MmMwLjUyMzM0LDAuMTM4OCAxLjA5ODI1LDAuNDc0MDQgMS41OTg4NCwwLjk3MjM1YzAuNTAwNTksMC40OTkwNyAwLjgzNTgzLDEuMDcwOTUgMC45NzYxNCwxLjU5NDI5IiBmaWxsPSIjYWRjMjEzIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZT0iIzdlOGQwYiIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMjQzLjU3MTEyLDE3OS4zNzE2NmMwLDAuMzUxOTMgLTAuMTA2MTgsMC42NjI5IC0wLjMyODQxLDAuODgzNjFsLTE0Ljk3MzU4LDE0LjkyNjU2Yy0xLjYxNTUzLDEuNjAwMzYgLTMuNTQ0MywyLjg3Njg1IC01Ljc0MzA4LDMuNzk5OWwtMy4yMjQyMywxLjM0Nzc5bDAuNzM4NzQsLTEuNzU2NmwxLjQ2MDA0LC0wLjYxMjg0YzIuMTk4MDMsLTAuOTIzODEgNC4xMjYwNCwtMi4xOTk1NCA1Ljc0MTU3LC0zLjc5OTlsMTQuOTc0MzQsLTE0LjkyNjU2YzAuMjIxNDcsLTAuMjIxNDcgMC4zMjc2NiwtMC41MzI0NCAwLjMyNzY2LC0wLjg4MzYxYzAsLTAuNDg5OTcgLTAuMjA0NzksLTEuMDYxODUgLTAuNTkxNiwtMS42MDk0NmMwLjE4OTYyLDAuMTMwNDYgMC4zNzkyMywwLjI4NTk0IDAuNTU4OTksMC40NjU3YzAuNjgxMSwwLjY4NjQxIDEuMDU4ODEsMS41MDQwMyAxLjA1ODgxLDIuMTY2MTciIGZpbGw9IiM1NzVlNzUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgb3BhY2l0eT0iMC4xNSIvPjxwYXRoIGQ9Ik0yMjkuODgyMzgsMTgyLjQ2NzdjMCwwLjM3OTIzIC0wLjMwNjQyLDAuNjg2NDEgLTAuNjg1NjUsMC42ODY0MWMtMC4zNzkyMywwIC0wLjY4NjQxLC0wLjMwNzE4IC0wLjY4NjQxLC0wLjY4NTY1YzAsLTAuMzc5MjMgMC4zMDg2OSwtMC42ODQ4OSAwLjY4NzE3LC0wLjY4NDg5YzAuMzc5MjMsMCAwLjY4NTY1LDAuMzA2NDIgMC42ODU2NSwwLjY4NTY1eiIgZmlsbD0iIzdlOGQwYiIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiM3ZThkMGIiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8%2BPHBhdGggZD0iTTIzNC44NDg4NSwxOTMuMjU1MzFoNy4yMTg3OSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiNiN2MyNjYiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48cGF0aCBkPSJNMjM4LjQ1ODI0LDE5Ni44NjQ3di03LjIxODc5IiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI2I3YzI2NiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIvPjwvZz48L2c%2BPC9zdmc%2BPCEtLXJvdGF0aW9uQ2VudGVyOjMxLjk3MTYzMDY4NzExOTI3MzozMS45NzE2MDU2ODcxMTkzMDgtLT4%3D%22%3B%0A%20%20const%20penPCheck%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(penPLoaded)%20%7Breturn%3B%7D%20%2F%2F%20Return%20if%20pen%2B%20integration%20is%20loaded%0A%20%20%20%20if%20(vm.runtime.ext_penP)%20%7BpenPLoaded%20%3D%20true%3B%7D%0A%20%20%20%20penPModule%20%3D%20vm.runtime.ext_penP%3B%0A%0A%20%20%20%20if%20(penPModule)%20%7BpenPModule.turnAdvancedSettingOff(%7BSetting%3A%22wValueUnderFlow%22%2ConOrOff%3A%22on%22%7D)%3B%7D%0A%0A%20%20%20%20vm.runtime.extensionManager.refreshBlocks()%3B%0A%20%20%7D%0A%20%20penPCheck()%3B%0A%20%20vm.runtime.on(%22EXTENSION_ADDED%22%2C%20penPCheck)%3B%0A%0A%20%20class%20extension%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%233D%20Vector%20Math%23%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Vector%203%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22newV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22vector%203%20x%3A%5Bx%5D%20y%3A%5By%5D%20z%3A%5Bz%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20z%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22newV3fromValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22vector%203%20from%20%5Bvalue%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAxisOfV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20the%20%5Baxis%5D%20axis%20of%20%5Bvector%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22axisMenu%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vector%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Equations%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22addV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20%5Ba%5D%20%2B%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22subV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20%5Ba%5D%20-%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22mulV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20%5Ba%5D%20*%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22divV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20%5Ba%5D%20%2F%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22dotProductOfV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20dot%20product%20between%20%5Ba%5D%20and%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22crossProductOfV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20cross%20product%20between%20%5Ba%5D%20and%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22magnitudeV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20magnitude%20of%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22distanceV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20distance%20between%20%5Ba%5D%20and%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateAroundPointV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20rotate%20%5Ba%5D%20around%20%5Bb%5D%20by%20yaw%3A%5Byaw%5D%20pitch%3A%5Bpitch%5D%2C%20and%20roll%3A%5Broll%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20yaw%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pitch%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20roll%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateAroundCenterV3%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V3%3A%20rotate%20%5Ba%5D%20around%20the%20center%20by%20yaw%3A%5Byaw%5D%20pitch%3A%5Bpitch%5D%2C%20and%20roll%3A%5Broll%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20yaw%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pitch%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20roll%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%232D%20Vector%20Math%23%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Vector%202%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22newV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22vector%202%20x%3A%5Bx%5D%20y%3A%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22newV2fromValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22vector%202%20from%20%5Bvalue%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAxisOfV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20get%20the%20%5Baxis%5D%20axis%20of%20%5Bvector%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22axisMenu2D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vector%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%5B0%2C0%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22project2DFromCam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20projected%20%5Ba%5D%20to%202D%20from%20camera%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%5B0%2C0%2C100%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22project2DFromPos%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20projected%20%5Ba%5D%20to%202D%20from%20%5Bb%5D%20yaw%3A%5Byaw%5D%20pitch%3A%5Bpitch%5D%20roll%3A%5Broll%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%5B0%2C0%2C100%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20yaw%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pitch%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20roll%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Equations%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22addV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20%5Ba%5D%20%2B%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22subV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20%5Ba%5D%20-%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22mulV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20%5Ba%5D%20*%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22divV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20%5Ba%5D%20%2F%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22dotProductOfV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20dot%20product%20between%20%5Ba%5D%20and%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22crossProductOfV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20cross%20product%20between%20%5Ba%5D%20and%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22magnitudeV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20magnitude%20of%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22distanceV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20distance%20between%20%5Ba%5D%20and%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateAroundPointV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20rotate%20%5Ba%5D%20around%20%5Bb%5D%20by%20%5Byaw%5D%20degrees%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20yaw%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateAroundCenterV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22V2%3A%20rotate%20%5Ba%5D%20around%20the%20center%20by%20%5Byaw%5D%20degrees%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20yaw%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%23CAMERA%20CONTROLS%23%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22camera%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cam3DsetPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20camera%20position%20to%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cam3DchangePosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20camera%20position%20by%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B5%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cam3DchangePositionOnAxis%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20camera%20%5Baxis%5D%20by%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20%2215%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axis%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%2C%20menu%3A%20%22axisMenu2%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cam3DgetPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20camera%20position%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cam3DsetRotation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20camera%20rotation%20to%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cam3DchangeRotation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20camera%20rotation%20by%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B15%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cam3DchangeRotationOnAxis%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20camera%20%5Brotator%5D%20by%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20%2215%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20rotator%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%2C%20menu%3A%20%22angleMenu%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cam3DgetRotation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20camera%20rotation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFov%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20fov%20to%20%5Bdist%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dist%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20300%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeFov%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20fov%20by%20%5Bdist%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dist%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getFov%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22fov%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%23SPRITE%203D%23%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22sprite%203D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DsetPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20my%20position%20to%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DsetPositionComponent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20my%20%5Bcomponent%5D%20to%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20component%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%2C%20menu%3A%20%22axisMenu2%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DchangePosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20my%20position%20by%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C0%5D%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DchangePositionComponent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20my%20%5Bcomponent%5D%20by%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20component%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%2C%20menu%3A%20%22axisMenu2%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DgetPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22my%203d%20position%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DgetPositionComponent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22my%20%5Bcomponent%5D%20position%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20component%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%2C%20menu%3A%20%22axisMenu2%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DsetSize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20my%203d%20size%20to%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DchangeSize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20my%203d%20size%20by%20%5Ba%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3DgetSize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22my%203d%20size%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spr3D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22go%20to%20my%20position%20in%203D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%23Pen%2B%20Integration%20%23%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A(!penPLoaded)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Pen%2B%203D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A(!penPLoaded)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22draw3dTri%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22draw%203d%20triangle%20between%20%5Bpoint1%5D%2C%20%5Bpoint2%5D%2C%20%5Bpoint3%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20point1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C100%5D%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20point2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B10%2C0%2C100%5D%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20point3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B10%2C10%2C100%5D%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20penPIcon%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A(!penPLoaded)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22draw3dTexTri%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22draw%203d%20triangle%20between%20%5Bpoint1%5D%2C%20%5Bpoint2%5D%2C%20%5Bpoint3%5D%20with%20the%20image%20%5Btexture%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20point1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B0%2C0%2C100%5D%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20point2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B10%2C0%2C100%5D%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20point3%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B10%2C10%2C100%5D%22%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%3A%20%7B%20menu%3A%20%22tdMathPPCosMen%22%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20penPIcon%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20axisMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22x%20%2F%20yaw%22%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22y%20%2F%20pitch%22%2C%20value%3A%20%221%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22z%20%2F%20roll%22%2C%20value%3A%20%222%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20axisMenu2D%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22x%22%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22y%22%2C%20value%3A%20%221%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20angleMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22yaw%22%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22pitch%22%2C%20value%3A%20%221%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22roll%22%2C%20value%3A%20%222%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20axisMenu2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22x%22%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22y%22%2C%20value%3A%20%221%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%22z%22%2C%20value%3A%20%222%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20tdMathPPCosMen%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22tdMathPPCosMen%22%2C%20acceptReporters%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20name%3A%20%223D%20Math%22%2C%0A%20%20%20%20%20%20%20%20id%3A%20%22obviousAlexCMath3d%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%0A%20%20%20%20%20%20%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI4OC44NTEwNCIgaGVpZ2h0PSI4OC44NTEwNCIgdmlld0JveD0iMCwwLDg4Ljg1MTA0LDg4Ljg1MTA0Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTk1LjU3NDQ5LC0xMzUuNTc0NDkpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0xOTUuNTc0NSwxODAuMDAwMDFjMCwtMjQuNTM1NTQgMTkuODg5OTgsLTQ0LjQyNTUyIDQ0LjQyNTUyLC00NC40MjU1MmMyNC41MzU1NCwwIDQ0LjQyNTUyLDE5Ljg4OTk4IDQ0LjQyNTUyLDQ0LjQyNTUyYzAsMjQuNTM1NTQgLTE5Ljg4OTk4LDQ0LjQyNTUyIC00NC40MjU1Miw0NC40MjU1MmMtMjQuNTM1NTQsMCAtNDQuNDI1NTIsLTE5Ljg4OTk4IC00NC40MjU1MiwtNDQuNDI1NTJ6IiBmaWxsPSIjYzJkOTE2IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMCIvPjxwYXRoIGQ9Ik0yMTIuNTU4NDIsMjA3LjE4MjYydi0zNy44ODQ1N2gzNy43NTc0NHYzNy44ODQ1N3oiIGZpbGw9IiNhZGMyMTMiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTIxMy45NTY4NSwxNjkuNjc5NDRsMTYuMzk5NjksLTE3LjU0Mzg2bDM1Ljg1MDUsMC41MDg1MmwtMTUuNTA5NzksMTYuNjUzOTV6IiBmaWxsPSIjYWRjMjEzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIvPjxwYXRoIGQ9Ik0yNTAuOTUxNTEsMjA2LjU0Njk4di01My4wMTI5N2gxNi45MDgyMWwtMC42MzU2NSwzNi40ODYxNHoiIGZpbGw9IiNhZGMyMTMiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTI2OC44MzAwNiwxNTIuMzcxMjR2MzguNDQwMDJjMCwwLjA2OTcxIC0wLjAyODgzLDAuMTMyMjEgLTAuMDQwODgsMC4xOTk0NWMtMC4wMTQ0MiwwLjA4ODg2IC0wLjAxOTE0LDAuMTc1MzUgLTAuMDUyODIsMC4yNTk0N2MtMC4wNjAwMiwwLjE0NjUyIC0wLjE0ODk5LDAuMjgxMDkgLTAuMjU5NDcsMC4zOTE1N2wtMTYuODE3NDksMTYuODE3NDljLTAuMDA5NjksMC4wMDk1NyAtMC4wMjQxLDAuMDEyMDUgLTAuMDMzNjcsMC4wMjE2MmMtMC4xMDU2NCwwLjA5NjE4IC0wLjIyMDk1LDAuMTgwMTkgLTAuMzU1NTMsMC4yMzU0OGMtMC4xNDY2MywwLjA2MjUgLTAuMzAyNzIsMC4wOTM3IC0wLjQ1ODkyLDAuMDkzN2gtMzguNDQwMDJjLTAuNjYzMDksMCAtMS4yMDEyOSwtMC41MzgyIC0xLjIwMTI5LC0xLjIwMTE4di0zOC40MzUyOWMwLC0wLjE1ODU3IDAuMDMxMiwtMC4zMTQ3NyAwLjA5MTMzLC0wLjQ2NjEyYzAuMDU1MywtMC4xMzIxIDAuMTM5NDIsLTAuMjQ5OSAwLjIzNTQ4LC0wLjM1MzE3YzAuMDExOTQsLTAuMDA5NjkgMC4wMTQ0MiwtMC4wMjQxIDAuMDIzOTksLTAuMDMzNjdsMTYuODE3MzgsLTE2LjgxNzQ5YzAuMTEyOTYsLTAuMTEyODQgMC4yNDUwNiwtMC4xOTkzMyAwLjM5NDA1LC0wLjI2MTg0YzAuMDgxNzYsLTAuMDMzNjcgMC4xNzA2MiwtMC4wMzYwNCAwLjI1NzExLC0wLjA1MDQ1YzAuMDY3MzUsLTAuMDEyMDUgMC4xMjk3NCwtMC4wNDA4OCAwLjE5OTQ1LC0wLjA0MDg4aDM4LjQ0MDAyYzAuMDkxMzMsMCAwLjE3Mjk4LDAuMDMzNjcgMC4yNTQ3NCwwLjA1MDQ1YzAuMDY3MjMsMC4wMTY4OSAwLjEzNDQ3LDAuMDE0NDIgMC4xOTY5NywwLjA0MDg4YzAuMjk3ODcsMC4xMjI1MyAwLjUzMzM2LDAuMzU4MDEgMC42NTU4OCwwLjY1NTg4YzAuMDI2NDcsMC4wNjIzOSAwLjAyNjQ3LDAuMTMyMSAwLjA0MDg4LDAuMTk2OTdjMC4wMTkxNCwwLjA4NDEyIDAuMDUyODIsMC4xNjU3NyAwLjA1MjgyLDAuMjU3MTF6TTI0OS42MDk5OSwxNzAuMzkwMDJoLTM2LjAzNzU2djM2LjAzNzU2aDM2LjAzNzU2ek0yNjQuNzI4OTgsMTUzLjU3MjQyaC0zNS4wNDI5MmwtMTQuNDE1MDIsMTQuNDE1MDJoMzUuMDQyOTJ6TTI2Ni40Mjc1OSwxNTUuMjcxMDNsLTE0LjQxNTAyLDE0LjQxNTAydjM1LjA0MjkybDE0LjQxNTAyLC0xNC40MTUwMnoiIGZpbGw9IiM3ZThkMGIiIHN0cm9rZT0iIzdlOGQwYiIgc3Ryb2tlLXdpZHRoPSI2Ii8%2BPC9nPjwvZz48L3N2Zz48IS0tcm90YXRpb25DZW50ZXI6NDQuNDI1NTA0OTk5OTk5OTk6NDQuNDI1NTE0OTk5OTk5OTktLT4%3D%22%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%0A%20%20%20%20%20%20%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2My45NDMyMiIgaGVpZ2h0PSI2My45NDMyMiIgdmlld0JveD0iMCwwLDYzLjk0MzIyLDYzLjk0MzIyIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjA4LjAyODQsLTE0OC4wMjgzOCkiPjxnIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2lzUGFpbnRpbmdMYXllciZxdW90Ozp0cnVlfSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTIxMi41NTg0MywyMDcuMTgyNjJ2LTM3Ljg4NDU3aDM3Ljc1NzQ0djM3Ljg4NDU3eiIgZmlsbD0iI2FkYzIxMyIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjAiLz48cGF0aCBkPSJNMjEzLjk1Njg2LDE2OS42Nzk0NGwxNi4zOTk2OSwtMTcuNTQzODZsMzUuODUwNSwwLjUwODUybC0xNS41MDk3OSwxNi42NTM5NXoiIGZpbGw9IiNhZGMyMTMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIi8%2BPHBhdGggZD0iTTI1MC45NTE1MiwyMDYuNTQ2OTh2LTUzLjAxMjk3aDE2LjkwODIxbC0wLjYzNTY1LDM2LjQ4NjE0eiIgZmlsbD0iI2FkYzIxMyIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjAiLz48cGF0aCBkPSJNMjY4LjgzMDA3LDE1Mi4zNzEyNHYzOC40NDAwMmMwLDAuMDY5NzEgLTAuMDI4ODMsMC4xMzIyMSAtMC4wNDA4OCwwLjE5OTQ1Yy0wLjAxNDQyLDAuMDg4ODYgLTAuMDE5MTQsMC4xNzUzNSAtMC4wNTI4MiwwLjI1OTQ3Yy0wLjA2MDAyLDAuMTQ2NTIgLTAuMTQ4OTksMC4yODEwOSAtMC4yNTk0NywwLjM5MTU3bC0xNi44MTc0OSwxNi44MTc0OWMtMC4wMDk2OSwwLjAwOTU3IC0wLjAyNDEsMC4wMTIwNSAtMC4wMzM2NywwLjAyMTYyYy0wLjEwNTY0LDAuMDk2MTggLTAuMjIwOTUsMC4xODAxOSAtMC4zNTU1MywwLjIzNTQ4Yy0wLjE0NjYzLDAuMDYyNSAtMC4zMDI3MiwwLjA5MzcgLTAuNDU4OTIsMC4wOTM3aC0zOC40NDAwMmMtMC42NjMwOSwwIC0xLjIwMTI5LC0wLjUzODIgLTEuMjAxMjksLTEuMjAxMTh2LTM4LjQzNTI5YzAsLTAuMTU4NTcgMC4wMzEyLC0wLjMxNDc3IDAuMDkxMzMsLTAuNDY2MTJjMC4wNTUzLC0wLjEzMjEgMC4xMzk0MiwtMC4yNDk5IDAuMjM1NDgsLTAuMzUzMTdjMC4wMTE5NCwtMC4wMDk2OSAwLjAxNDQyLC0wLjAyNDEgMC4wMjM5OSwtMC4wMzM2N2wxNi44MTczOCwtMTYuODE3NDljMC4xMTI5NiwtMC4xMTI4NCAwLjI0NTA2LC0wLjE5OTMzIDAuMzk0MDUsLTAuMjYxODRjMC4wODE3NiwtMC4wMzM2NyAwLjE3MDYyLC0wLjAzNjA0IDAuMjU3MTEsLTAuMDUwNDVjMC4wNjczNSwtMC4wMTIwNSAwLjEyOTc0LC0wLjA0MDg4IDAuMTk5NDUsLTAuMDQwODhoMzguNDQwMDJjMC4wOTEzMywwIDAuMTcyOTgsMC4wMzM2NyAwLjI1NDc0LDAuMDUwNDVjMC4wNjcyMywwLjAxNjg5IDAuMTM0NDcsMC4wMTQ0MiAwLjE5Njk3LDAuMDQwODhjMC4yOTc4NywwLjEyMjUzIDAuNTMzMzYsMC4zNTgwMSAwLjY1NTg4LDAuNjU1ODhjMC4wMjY0NywwLjA2MjM5IDAuMDI2NDcsMC4xMzIxIDAuMDQwODgsMC4xOTY5N2MwLjAxOTE0LDAuMDg0MTIgMC4wNTI4MiwwLjE2NTc3IDAuMDUyODIsMC4yNTcxMXpNMjQ5LjYxLDE3MC4zOTAwMmgtMzYuMDM3NTZ2MzYuMDM3NTZoMzYuMDM3NTZ6TTI2NC43Mjg5OCwxNTMuNTcyNDJoLTM1LjA0MjkybC0xNC40MTUwMiwxNC40MTUwMmgzNS4wNDI5MnpNMjY2LjQyNzYsMTU1LjI3MTAzbC0xNC40MTUwMiwxNC40MTUwMnYzNS4wNDI5MmwxNC40MTUwMiwtMTQuNDE1MDJ6IiBmaWxsPSIjN2U4ZDBiIiBzdHJva2U9IiM3ZThkMGIiIHN0cm9rZS13aWR0aD0iNiIvPjwvZz48L2c%2BPC9zdmc%2BPCEtLXJvdGF0aW9uQ2VudGVyOjMxLjk3MTU5NTY4NzExOTI3NjozMS45NzE2MTU2ODcxMTkyODItLT4%3D%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23ADC213%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23A0B312%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23697700%22%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20draw3dTri(%7B%20point1%2C%20point2%2C%20point3%20%7D%2Cutil)%20%7B%0A%20%20%20%20%20%20if%20(!penPModule)%20throw%20%22Pen%2B%20module%20not%20found%22%3B%0A%20%20%20%20%20%20point1%20%3D%20JSON.parse(point1)%3Bpoint2%20%3D%20JSON.parse(point2)%3Bpoint3%20%3D%20JSON.parse(point3)%3B%0A%20%20%20%20%20%20%2F%2FCheck%20if%20points%20are%20valid%0A%20%20%20%20%20%20if%20(!(point1.length%20%3E%3D%203%20%26%26%20point2.length%20%3E%3D3%20%26%26%20point3.length%20%3E%3D%203))%20throw%20%22All%20points%20are%20not%20Vector3s!%22%3B%0A%20%20%20%20%20%20%2F%2Fcast%20points%20to%20number%0A%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20const%20sprX%20%3D%20spriteData%5Btarget.id%5D.position%5B0%5D%20-%20camera.position%5B0%5D%3B%0A%20%20%20%20%20%20const%20sprY%20%3D%20spriteData%5Btarget.id%5D.position%5B1%5D%20-%20camera.position%5B1%5D%3B%0A%20%20%20%20%20%20const%20sprZ%20%3D%20spriteData%5Btarget.id%5D.position%5B2%5D%20-%20camera.position%5B2%5D%3B%0A%0A%20%20%20%20%20%20point1%5B0%5D%20%3D%20Scratch.Cast.toNumber(point1%5B0%5D)%20%2B%20sprX%3Bpoint1%5B1%5D%20%3D%20Scratch.Cast.toNumber(point1%5B1%5D)%20%2B%20sprY%3Bpoint1%5B2%5D%20%3D%20Scratch.Cast.toNumber(point1%5B2%5D)%20%2B%20sprZ%3B%0A%20%20%20%20%20%20point2%5B0%5D%20%3D%20Scratch.Cast.toNumber(point2%5B0%5D)%20%2B%20sprX%3Bpoint2%5B1%5D%20%3D%20Scratch.Cast.toNumber(point2%5B1%5D)%20%2B%20sprY%3Bpoint2%5B2%5D%20%3D%20Scratch.Cast.toNumber(point2%5B2%5D)%20%2B%20sprZ%3B%0A%20%20%20%20%20%20point3%5B0%5D%20%3D%20Scratch.Cast.toNumber(point3%5B0%5D)%20%2B%20sprX%3Bpoint3%5B1%5D%20%3D%20Scratch.Cast.toNumber(point3%5B1%5D)%20%2B%20sprY%3Bpoint3%5B2%5D%20%3D%20Scratch.Cast.toNumber(point3%5B2%5D)%20%2B%20sprZ%3B%0A%0A%20%20%20%20%20%20%2F%2FRotate%20points%20around%20camera%0A%20%20%20%20%20%20let%20temp%20%3D%20point1%5B0%5D%3B%0A%20%20%20%20%20%20point1%5B0%5D%20%3D%20point1%5B2%5D%20*%20camera.sinAndCos%5B0%5D%20%2B%20point1%5B0%5D%20*%20camera.sinAndCos%5B1%5D%3Bpoint1%5B2%5D%20%3D%20point1%5B2%5D%20*%20camera.sinAndCos%5B1%5D%20-%20temp%20*%20camera.sinAndCos%5B0%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point1%5B1%5D%3B%0A%20%20%20%20%20%20point1%5B1%5D%20%3D%20point1%5B2%5D%20*%20camera.sinAndCos%5B2%5D%20%2B%20point1%5B1%5D%20*%20camera.sinAndCos%5B3%5D%3Bpoint1%5B2%5D%20%3D%20point1%5B2%5D%20*%20camera.sinAndCos%5B3%5D%20-%20temp%20*%20camera.sinAndCos%5B2%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point1%5B0%5D%3B%0A%20%20%20%20%20%20point1%5B0%5D%20%3D%20point1%5B1%5D%20*%20camera.sinAndCos%5B4%5D%20%2B%20point1%5B0%5D%20*%20camera.sinAndCos%5B5%5D%3Bpoint1%5B1%5D%20%3D%20point1%5B1%5D%20*%20camera.sinAndCos%5B5%5D%20-%20temp%20*%20camera.sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20temp%20%3D%20point2%5B0%5D%3B%0A%20%20%20%20%20%20point2%5B0%5D%20%3D%20point2%5B2%5D%20*%20camera.sinAndCos%5B0%5D%20%2B%20point2%5B0%5D%20*%20camera.sinAndCos%5B1%5D%3Bpoint2%5B2%5D%20%3D%20point2%5B2%5D%20*%20camera.sinAndCos%5B1%5D%20-%20temp%20*%20camera.sinAndCos%5B0%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point2%5B1%5D%3B%0A%20%20%20%20%20%20point2%5B1%5D%20%3D%20point2%5B2%5D%20*%20camera.sinAndCos%5B2%5D%20%2B%20point2%5B1%5D%20*%20camera.sinAndCos%5B3%5D%3Bpoint2%5B2%5D%20%3D%20point2%5B2%5D%20*%20camera.sinAndCos%5B3%5D%20-%20temp%20*%20camera.sinAndCos%5B2%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point2%5B0%5D%3B%0A%20%20%20%20%20%20point2%5B0%5D%20%3D%20point2%5B1%5D%20*%20camera.sinAndCos%5B4%5D%20%2B%20point2%5B0%5D%20*%20camera.sinAndCos%5B5%5D%3Bpoint2%5B1%5D%20%3D%20point2%5B1%5D%20*%20camera.sinAndCos%5B5%5D%20-%20temp%20*%20camera.sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20temp%20%3D%20point3%5B0%5D%3B%0A%20%20%20%20%20%20point3%5B0%5D%20%3D%20point3%5B2%5D%20*%20camera.sinAndCos%5B0%5D%20%2B%20point3%5B0%5D%20*%20camera.sinAndCos%5B1%5D%3Bpoint3%5B2%5D%20%3D%20point3%5B2%5D%20*%20camera.sinAndCos%5B1%5D%20-%20temp%20*%20camera.sinAndCos%5B0%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point3%5B1%5D%3B%0A%20%20%20%20%20%20point3%5B1%5D%20%3D%20point3%5B2%5D%20*%20camera.sinAndCos%5B2%5D%20%2B%20point3%5B1%5D%20*%20camera.sinAndCos%5B3%5D%3Bpoint3%5B2%5D%20%3D%20point3%5B2%5D%20*%20camera.sinAndCos%5B3%5D%20-%20temp%20*%20camera.sinAndCos%5B2%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point3%5B0%5D%3B%0A%20%20%20%20%20%20point3%5B0%5D%20%3D%20point3%5B1%5D%20*%20camera.sinAndCos%5B4%5D%20%2B%20point3%5B0%5D%20*%20camera.sinAndCos%5B5%5D%3Bpoint3%5B1%5D%20%3D%20point3%5B1%5D%20*%20camera.sinAndCos%5B5%5D%20-%20temp%20*%20camera.sinAndCos%5B4%5D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20if%20(point1%5B2%5D%20%3C%201%20%26%26%20point2%5B2%5D%20%3C%201%20%26%26%20point3%5B2%5D%20%3C%201)%20%7Breturn%3B%7D%0A%0A%20%20%20%20%20%20%2F%2FGet%20projection%20points%0A%20%20%20%20%20%20let%20project1%20%3D%20fov%20%2F%20point1%5B2%5D%3B%0A%20%20%20%20%20%20let%20project2%20%3D%20fov%20%2F%20point2%5B2%5D%3B%0A%20%20%20%20%20%20let%20project3%20%3D%20fov%20%2F%20point3%5B2%5D%3B%0A%0A%20%20%20%20%20%20point1%5B0%5D%20%3D%20point1%5B0%5D%20*%20project1%3Bpoint1%5B1%5D%20%3D%20point1%5B1%5D%20*%20project1%3B%0A%20%20%20%20%20%20point2%5B0%5D%20%3D%20point2%5B0%5D%20*%20project2%3Bpoint2%5B1%5D%20%3D%20point2%5B1%5D%20*%20project2%3B%0A%20%20%20%20%20%20point3%5B0%5D%20%3D%20point3%5B0%5D%20*%20project3%3Bpoint3%5B1%5D%20%3D%20point3%5B1%5D%20*%20project3%3B%0A%0A%20%20%20%20%20%20%2F%2FCorner%20Pinch%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A1%2C%20attribute%3A6%2C%20value%3Apoint1%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A2%2C%20attribute%3A6%2C%20value%3Apoint2%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A3%2C%20attribute%3A6%2C%20value%3Apoint3%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20%2F%2FDepth%20Buffer%20Value%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A1%2C%20attribute%3A5%2C%20value%3Apoint1%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A2%2C%20attribute%3A5%2C%20value%3Apoint2%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A3%2C%20attribute%3A5%2C%20value%3Apoint3%5B2%5D%20%7D%2C%20util)%3B%0A%0A%20%20%20%20%20%20penPModule.drawSolidTri(%7B%20x1%3Apoint1%5B0%5D%2C%20y1%3Apoint1%5B1%5D%2C%20x2%3Apoint2%5B0%5D%2C%20y2%3Apoint2%5B1%5D%2C%20x3%3Apoint3%5B0%5D%2C%20y3%3Apoint3%5B1%5D%20%7D%2Cutil)%3B%0A%20%20%20%20%7D%0A%20%20%20%20draw3dTexTri(%7B%20point1%2C%20point2%2C%20point3%2C%20texture%20%7D%2Cutil)%20%7B%0A%20%20%20%20%20%20if%20(!penPModule)%20throw%20%22Pen%2B%20module%20not%20found%22%3B%0A%20%20%20%20%20%20point1%20%3D%20JSON.parse(point1)%3Bpoint2%20%3D%20JSON.parse(point2)%3Bpoint3%20%3D%20JSON.parse(point3)%3B%0A%20%20%20%20%20%20%2F%2FCheck%20if%20we%20have%20all%20needed%20points%0A%20%20%20%20%20%20if%20(!(point1.length%20%3E%3D%203%20%26%26%20point2.length%20%3E%3D3%20%26%26%20point3.length%20%3E%3D%203))%20throw%20%22All%20points%20are%20not%20Vector3s!%22%3B%0A%20%20%20%20%20%20%2F%2Fcast%20points%20to%20number%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20const%20sprX%20%3D%20spriteData%5Btarget.id%5D.position%5B0%5D%20-%20camera.position%5B0%5D%3B%0A%20%20%20%20%20%20const%20sprY%20%3D%20spriteData%5Btarget.id%5D.position%5B1%5D%20-%20camera.position%5B1%5D%3B%0A%20%20%20%20%20%20const%20sprZ%20%3D%20spriteData%5Btarget.id%5D.position%5B2%5D%20-%20camera.position%5B2%5D%3B%0A%0A%20%20%20%20%20%20point1%5B0%5D%20%3D%20Scratch.Cast.toNumber(point1%5B0%5D)%20%2B%20sprX%3Bpoint1%5B1%5D%20%3D%20Scratch.Cast.toNumber(point1%5B1%5D)%20%2B%20sprY%3Bpoint1%5B2%5D%20%3D%20Scratch.Cast.toNumber(point1%5B2%5D)%20%2B%20sprZ%3B%0A%20%20%20%20%20%20point2%5B0%5D%20%3D%20Scratch.Cast.toNumber(point2%5B0%5D)%20%2B%20sprX%3Bpoint2%5B1%5D%20%3D%20Scratch.Cast.toNumber(point2%5B1%5D)%20%2B%20sprY%3Bpoint2%5B2%5D%20%3D%20Scratch.Cast.toNumber(point2%5B2%5D)%20%2B%20sprZ%3B%0A%20%20%20%20%20%20point3%5B0%5D%20%3D%20Scratch.Cast.toNumber(point3%5B0%5D)%20%2B%20sprX%3Bpoint3%5B1%5D%20%3D%20Scratch.Cast.toNumber(point3%5B1%5D)%20%2B%20sprY%3Bpoint3%5B2%5D%20%3D%20Scratch.Cast.toNumber(point3%5B2%5D)%20%2B%20sprZ%3B%0A%20%20%20%20%20%20%2F%2FRotate%20points%20around%20camera%0A%20%20%20%20%20%20let%20temp%20%3D%20point1%5B0%5D%3B%0A%20%20%20%20%20%20point1%5B0%5D%20%3D%20point1%5B2%5D%20*%20camera.sinAndCos%5B0%5D%20%2B%20point1%5B0%5D%20*%20camera.sinAndCos%5B1%5D%3Bpoint1%5B2%5D%20%3D%20point1%5B2%5D%20*%20camera.sinAndCos%5B1%5D%20-%20temp%20*%20camera.sinAndCos%5B0%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point1%5B1%5D%3B%0A%20%20%20%20%20%20point1%5B1%5D%20%3D%20point1%5B2%5D%20*%20camera.sinAndCos%5B2%5D%20%2B%20point1%5B1%5D%20*%20camera.sinAndCos%5B3%5D%3Bpoint1%5B2%5D%20%3D%20point1%5B2%5D%20*%20camera.sinAndCos%5B3%5D%20-%20temp%20*%20camera.sinAndCos%5B2%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point1%5B0%5D%3B%0A%20%20%20%20%20%20point1%5B0%5D%20%3D%20point1%5B1%5D%20*%20camera.sinAndCos%5B4%5D%20%2B%20point1%5B0%5D%20*%20camera.sinAndCos%5B5%5D%3Bpoint1%5B1%5D%20%3D%20point1%5B1%5D%20*%20camera.sinAndCos%5B5%5D%20-%20temp%20*%20camera.sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20temp%20%3D%20point2%5B0%5D%3B%0A%20%20%20%20%20%20point2%5B0%5D%20%3D%20point2%5B2%5D%20*%20camera.sinAndCos%5B0%5D%20%2B%20point2%5B0%5D%20*%20camera.sinAndCos%5B1%5D%3Bpoint2%5B2%5D%20%3D%20point2%5B2%5D%20*%20camera.sinAndCos%5B1%5D%20-%20temp%20*%20camera.sinAndCos%5B0%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point2%5B1%5D%3B%0A%20%20%20%20%20%20point2%5B1%5D%20%3D%20point2%5B2%5D%20*%20camera.sinAndCos%5B2%5D%20%2B%20point2%5B1%5D%20*%20camera.sinAndCos%5B3%5D%3Bpoint2%5B2%5D%20%3D%20point2%5B2%5D%20*%20camera.sinAndCos%5B3%5D%20-%20temp%20*%20camera.sinAndCos%5B2%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point2%5B0%5D%3B%0A%20%20%20%20%20%20point2%5B0%5D%20%3D%20point2%5B1%5D%20*%20camera.sinAndCos%5B4%5D%20%2B%20point2%5B0%5D%20*%20camera.sinAndCos%5B5%5D%3Bpoint2%5B1%5D%20%3D%20point2%5B1%5D%20*%20camera.sinAndCos%5B5%5D%20-%20temp%20*%20camera.sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20temp%20%3D%20point3%5B0%5D%3B%0A%20%20%20%20%20%20point3%5B0%5D%20%3D%20point3%5B2%5D%20*%20camera.sinAndCos%5B0%5D%20%2B%20point3%5B0%5D%20*%20camera.sinAndCos%5B1%5D%3Bpoint3%5B2%5D%20%3D%20point3%5B2%5D%20*%20camera.sinAndCos%5B1%5D%20-%20temp%20*%20camera.sinAndCos%5B0%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point3%5B1%5D%3B%0A%20%20%20%20%20%20point3%5B1%5D%20%3D%20point3%5B2%5D%20*%20camera.sinAndCos%5B2%5D%20%2B%20point3%5B1%5D%20*%20camera.sinAndCos%5B3%5D%3Bpoint3%5B2%5D%20%3D%20point3%5B2%5D%20*%20camera.sinAndCos%5B3%5D%20-%20temp%20*%20camera.sinAndCos%5B2%5D%3B%0A%20%20%20%20%20%20temp%20%3D%20point3%5B0%5D%3B%0A%20%20%20%20%20%20point3%5B0%5D%20%3D%20point3%5B1%5D%20*%20camera.sinAndCos%5B4%5D%20%2B%20point3%5B0%5D%20*%20camera.sinAndCos%5B5%5D%3Bpoint3%5B1%5D%20%3D%20point3%5B1%5D%20*%20camera.sinAndCos%5B5%5D%20-%20temp%20*%20camera.sinAndCos%5B4%5D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20if%20(point1%5B2%5D%20%3C%201%20%26%26%20point2%5B2%5D%20%3C%201%20%26%26%20point3%5B2%5D%20%3C%201)%20%7Breturn%3B%7D%0A%0A%20%20%20%20%20%20%2F%2FGet%20projection%20points%0A%20%20%20%20%20%20let%20project1%20%3D%20fov%20%2F%20point1%5B2%5D%3B%0A%20%20%20%20%20%20let%20project2%20%3D%20fov%20%2F%20point2%5B2%5D%3B%0A%20%20%20%20%20%20let%20project3%20%3D%20fov%20%2F%20point3%5B2%5D%3B%0A%0A%20%20%20%20%20%20point1%5B0%5D%20%3D%20point1%5B0%5D%20*%20project1%3Bpoint1%5B1%5D%20%3D%20point1%5B1%5D%20*%20project1%3B%0A%20%20%20%20%20%20point2%5B0%5D%20%3D%20point2%5B0%5D%20*%20project2%3Bpoint2%5B1%5D%20%3D%20point2%5B1%5D%20*%20project2%3B%0A%20%20%20%20%20%20point3%5B0%5D%20%3D%20point3%5B0%5D%20*%20project3%3Bpoint3%5B1%5D%20%3D%20point3%5B1%5D%20*%20project3%3B%0A%0A%20%20%20%20%20%20%2F%2FCorner%20Pinch%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A1%2C%20attribute%3A6%2C%20value%3Apoint1%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A2%2C%20attribute%3A6%2C%20value%3Apoint2%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A3%2C%20attribute%3A6%2C%20value%3Apoint3%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20%2F%2FDepth%20Buffer%20Value%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A1%2C%20attribute%3A5%2C%20value%3Apoint1%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A2%2C%20attribute%3A5%2C%20value%3Apoint2%5B2%5D%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20penPModule.setTrianglePointAttribute(%7B%20point%3A3%2C%20attribute%3A5%2C%20value%3Apoint3%5B2%5D%20%7D%2C%20util)%3B%0A%0A%20%20%20%20%20%20penPModule.drawTexTri(%7B%20x1%3Apoint1%5B0%5D%2C%20y1%3Apoint1%5B1%5D%2C%20x2%3Apoint2%5B0%5D%2C%20y2%3Apoint2%5B1%5D%2C%20x3%3Apoint3%5B0%5D%2C%20y3%3Apoint3%5B1%5D%2C%20tex%3Atexture%20%7D%2Cutil)%3B%0A%20%20%20%20%7D%0A%20%20%20%20tdMathPPCosMen()%20%7B%0A%20%20%20%20%20%20if%20(!penPModule)%20throw%20%22Pen%2B%20module%20not%20found%22%3B%0A%20%20%20%20%20%20return%20penPModule.costumeMenuFunction()%3B%0A%20%20%20%20%7D%0A%20%20%20%20newV3(%7B%20x%2C%20y%2C%20z%20%7D)%20%7B%0A%20%20%20%20%20%20return%20JSON.stringify(%5B%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(x)%20%7C%7C%200%2C%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(y)%20%7C%7C%200%2C%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(z)%20%7C%7C%200%2C%0A%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20newV3fromValue(%7B%20value%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20value%20%3D%3D%20%22number%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Bvalue%2C%20value%2C%20value%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20JSON.stringify(%5B0%2C%200%2C%200%5D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getAxisOfV3(%7B%20axis%2C%20vector%20%7D)%20%7B%0A%20%20%20%20%20%20axis%20%3D%20Scratch.Cast.toNumber(axis)%3B%0A%20%20%20%20%20%20vector%20%3D%20JSON.parse(vector)%3B%0A%20%20%20%20%20%20if%20(vector)%20%7B%0A%20%20%20%20%20%20%20%20return%20vector%5Baxis%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20addV3(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Ba%5B0%5D%20%2B%20b%5B0%5D%2C%20a%5B1%5D%20%2B%20b%5B1%5D%2C%20a%5B2%5D%20%2B%20b%5B2%5D%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20subV3(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Ba%5B0%5D%20-%20b%5B0%5D%2C%20a%5B1%5D%20-%20b%5B1%5D%2C%20a%5B2%5D%20-%20b%5B2%5D%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20mulV3(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Ba%5B0%5D%20*%20b%5B0%5D%2C%20a%5B1%5D%20*%20b%5B1%5D%2C%20a%5B2%5D%20*%20b%5B2%5D%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20divV3(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20const%20c%20%3D%20%5B0%2C%200%2C%200%5D%3B%0A%20%20%20%20%20%20%20%20c%5B0%5D%20%3D%20a%5B0%5D%20%2F%20b%5B0%5D%3B%0A%20%20%20%20%20%20%20%20c%5B1%5D%20%3D%20a%5B1%5D%20%2F%20b%5B1%5D%3B%0A%20%20%20%20%20%20%20%20c%5B2%5D%20%3D%20a%5B2%5D%20%2F%20b%5B2%5D%3B%0A%20%20%20%20%20%20%20%20if%20(isNaN(c%5B0%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%5B0%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(isNaN(c%5B1%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(isNaN(c%5B2%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(c)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20dotProductOfV3(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a.length%20%3D%3D%203%20%26%26%20b.length%20%3D%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20return%20a%5B0%5D%20*%20b%5B0%5D%20%2B%20a%5B1%5D%20*%20b%5B1%5D%20%2B%20a%5B2%5D%20%2B%20b%5B2%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20dotProductOfV2(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a.length%20%3D%3D%202%20%26%26%20b.length%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20return%20a%5B0%5D%20*%20b%5B0%5D%20%2B%20a%5B1%5D%20*%20b%5B1%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20crossProductOfV3(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20const%20c%20%3D%20%5B0%2C%200%2C%200%5D%3B%0A%0A%20%20%20%20%20%20%20%20c%5B0%5D%20%3D%20a%5B1%5D%20*%20b%5B2%5D%20-%20a%5B2%5D%20*%20b%5B1%5D%3B%0A%20%20%20%20%20%20%20%20c%5B1%5D%20%3D%20a%5B2%5D%20*%20b%5B0%5D%20-%20a%5B0%5D%20*%20b%5B2%5D%3B%0A%20%20%20%20%20%20%20%20c%5B2%5D%20%3D%20a%5B0%5D%20*%20b%5B1%5D%20-%20a%5B1%5D%20*%20b%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(c)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20magnitudeV3(%7B%20a%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(a%5B0%5D%2C%202)%20%2B%20Math.pow(a%5B1%5D%2C%202)%20%2B%20Math.pow(a%5B2%5D%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20distanceV3(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(a%5B0%5D%20-%20b%5B0%5D%2C%202)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.pow(a%5B1%5D%20-%20b%5B1%5D%2C%202)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.pow(a%5B2%5D%20-%20b%5B2%5D%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotateAroundPointV3(%7B%20a%2C%20b%2C%20yaw%2C%20pitch%2C%20roll%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20a%5B0%5D%20-%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20-%3D%20b%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20-%3D%20b%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20const%20sinAndCos%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Math.sin(yaw%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(yaw%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(pitch%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(pitch%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(roll%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(roll%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B0%5D%20%2B%20a%5B0%5D%20*%20sinAndCos%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B1%5D%20-%20temp%20*%20sinAndCos%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20temp%20%3D%20a%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B2%5D%20%2B%20a%5B1%5D%20*%20sinAndCos%5B3%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B3%5D%20-%20temp%20*%20sinAndCos%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B4%5D%20%2B%20a%5B0%5D%20*%20sinAndCos%5B5%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B5%5D%20-%20temp%20*%20sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%2B%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%2B%3D%20b%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%2B%3D%20b%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(a)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotateAroundCenterV3(%7B%20a%2C%20yaw%2C%20pitch%2C%20roll%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20const%20sinAndCos%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Math.sin(yaw%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(yaw%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(pitch%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(pitch%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(roll%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(roll%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B0%5D%20%2B%20a%5B0%5D%20*%20sinAndCos%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B1%5D%20-%20temp%20*%20sinAndCos%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20temp%20%3D%20a%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B2%5D%20%2B%20a%5B1%5D%20*%20sinAndCos%5B3%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B3%5D%20-%20temp%20*%20sinAndCos%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B4%5D%20%2B%20a%5B0%5D%20*%20sinAndCos%5B5%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B5%5D%20-%20temp%20*%20sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(a)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20newV2(%7B%20x%2C%20y%20%7D)%20%7B%0A%20%20%20%20%20%20return%20JSON.stringify(%5B%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(x)%20%7C%7C%200%2C%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(y)%20%7C%7C%200%2C%0A%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20newV2fromValue(%7B%20value%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20value%20%3D%3D%20%22number%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Bvalue%2C%20value%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20JSON.stringify(%5B0%2C%200%5D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getAxisOfV2(%7B%20axis%2C%20vector%20%7D)%20%7B%0A%20%20%20%20%20%20axis%20%3D%20Scratch.Cast.toNumber(axis)%3B%0A%20%20%20%20%20%20vector%20%3D%20JSON.parse(vector)%3B%0A%20%20%20%20%20%20if%20(vector)%20%7B%0A%20%20%20%20%20%20%20%20return%20vector%5Baxis%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20project2DFromCam(%7B%20a%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20a%5B0%5D%20-%3D%20camera.position%5B0%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20-%3D%20camera.position%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20-%3D%20camera.position%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B2%5D%20*%20camera.sinAndCos%5B0%5D%20%2B%20a%5B0%5D%20*%20camera.sinAndCos%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%3D%20a%5B2%5D%20*%20camera.sinAndCos%5B1%5D%20-%20temp%20*%20camera.sinAndCos%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20temp%20%3D%20a%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B2%5D%20*%20camera.sinAndCos%5B2%5D%20%2B%20a%5B1%5D%20*%20camera.sinAndCos%5B3%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%3D%20a%5B2%5D%20*%20camera.sinAndCos%5B3%5D%20-%20temp%20*%20camera.sinAndCos%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B1%5D%20*%20camera.sinAndCos%5B4%5D%20%2B%20a%5B0%5D%20*%20camera.sinAndCos%5B5%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B1%5D%20*%20camera.sinAndCos%5B5%5D%20-%20temp%20*%20camera.sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20project%20%3D%20fov%20%2F%20a%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Ba%5B0%5D%20*%20project%2C%20a%5B1%5D%20*%20project%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20project2DFromPos(%7B%20a%2C%20b%2C%20yaw%2C%20pitch%2C%20roll%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20a%5B0%5D%20-%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20-%3D%20b%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20-%3D%20b%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20const%20sinAndCos%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-yaw%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-yaw%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-pitch%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-pitch%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-roll%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-roll%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B0%5D%20%2B%20a%5B0%5D%20*%20sinAndCos%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B1%5D%20-%20temp%20*%20sinAndCos%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20temp%20%3D%20a%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B2%5D%20%2B%20a%5B1%5D%20*%20sinAndCos%5B3%5D%3B%0A%20%20%20%20%20%20%20%20a%5B2%5D%20%3D%20a%5B2%5D%20*%20sinAndCos%5B3%5D%20-%20temp%20*%20sinAndCos%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B4%5D%20%2B%20a%5B0%5D%20*%20sinAndCos%5B5%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B5%5D%20-%20temp%20*%20sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20project%20%3D%20fov%20%2F%20a%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Ba%5B0%5D%20*%20project%2C%20a%5B1%5D%20*%20project%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20addV2(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Ba%5B0%5D%20%2B%20b%5B0%5D%2C%20a%5B1%5D%20%2B%20b%5B1%5D%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20subV2(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Ba%5B0%5D%20-%20b%5B0%5D%2C%20a%5B1%5D%20-%20b%5B1%5D%2C%20a%5B2%5D%20-%20b%5B2%5D%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20mulV2(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(%5Ba%5B0%5D%20*%20b%5B0%5D%2C%20a%5B1%5D%20*%20b%5B1%5D%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20divV2(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20const%20c%20%3D%20%5B0%2C%200%5D%3B%0A%20%20%20%20%20%20%20%20c%5B0%5D%20%3D%20a%5B0%5D%20%2F%20b%5B0%5D%3B%0A%20%20%20%20%20%20%20%20c%5B1%5D%20%3D%20a%5B1%5D%20%2F%20b%5B1%5D%3B%0A%20%20%20%20%20%20%20%20if%20(isNaN(c%5B0%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%5B0%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(isNaN(c%5B1%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(c)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20crossProductOfV2(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20const%20c%20%3D%20%5B0%2C%200%5D%3B%0A%0A%20%20%20%20%20%20%20%20c%5B0%5D%20%3D%20a%5B1%5D%20-%20b%5B1%5D%3B%0A%20%20%20%20%20%20%20%20c%5B1%5D%20%3D%20b%5B0%5D%20-%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(c)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20magnitudeV2(%7B%20a%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(Math.pow(a%5B0%5D%2C%202)%20%2B%20Math.pow(a%5B1%5D%2C%202))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20distanceV2(%7B%20a%2C%20b%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(Math.pow(a%5B0%5D%20-%20b%5B0%5D%2C%202)%20%2B%20Math.pow(a%5B1%5D%20-%20b%5B1%5D%2C%202))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotateAroundPointV2(%7B%20a%2C%20b%2C%20yaw%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20b%20%3D%20JSON.parse(b)%3B%0A%0A%20%20%20%20%20%20if%20(a%20%26%26%20b)%20%7B%0A%20%20%20%20%20%20%20%20a%5B0%5D%20-%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20-%3D%20b%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20const%20sinAndCos%20%3D%20%5BMath.sin(yaw%20*%20d2r)%2C%20Math.cos(yaw%20*%20d2r)%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B0%5D%20%2B%20a%5B0%5D%20*%20sinAndCos%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B1%5D%20-%20temp%20*%20sinAndCos%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%2B%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%2B%3D%20b%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(a)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotateAroundCenterV2(%7B%20a%2C%20yaw%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20const%20sinAndCos%20%3D%20%5BMath.sin(yaw%20*%20d2r)%2C%20Math.cos(yaw%20*%20d2r)%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20temp%20%3D%20a%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20a%5B0%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B0%5D%20%2B%20a%5B0%5D%20*%20sinAndCos%5B1%5D%3B%0A%20%20%20%20%20%20%20%20a%5B1%5D%20%3D%20a%5B1%5D%20*%20sinAndCos%5B1%5D%20-%20temp%20*%20sinAndCos%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(a)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%5B0%2C0%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20cam3DsetPosition(%7B%20a%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20camera.position%20%3D%20a%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20cam3DchangePosition(%7B%20a%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a%5B0%5D%20!%3D%20undefined%20%26%26%20a%5B1%5D%20!%3D%20undefined%20%26%26%20a%5B2%5D%20!%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20camera.position%5B0%5D%20%2B%3D%20a%5B0%5D%3B%0A%20%20%20%20%20%20%20%20camera.position%5B1%5D%20%2B%3D%20a%5B1%5D%3B%0A%20%20%20%20%20%20%20%20camera.position%5B2%5D%20%2B%3D%20a%5B2%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20cam3DchangePositionOnAxis(%7B%20a%2C%20axis%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20Scratch.Cast.toNumber(a)%3B%0A%20%20%20%20%20%20axis%20%3D%20Scratch.Cast.toNumber(axis)%3B%0A%0A%20%20%20%20%20%20if%20(camera.position%5Baxis%5D%20!%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20camera.position%5Baxis%5D%20%2B%3D%20a%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20cam3DgetPosition()%20%7B%0A%20%20%20%20%20%20return%20JSON.stringify(camera.position)%3B%0A%20%20%20%20%7D%0A%20%20%20%20cam3DsetRotation(%7B%20a%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20camera.rotation%20%3D%20a%3B%0A%0A%20%20%20%20%20%20%20%20camera.sinAndCos%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B0%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B0%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B1%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B1%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B2%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B2%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20cam3DchangeRotation(%7B%20a%20%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a%5B0%5D%20!%3D%20undefined%20%26%26%20a%5B1%5D%20!%3D%20undefined%20%26%26%20a%5B2%5D%20!%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20camera.rotation%5B0%5D%20%2B%3D%20a%5B0%5D%3B%0A%20%20%20%20%20%20%20%20camera.rotation%5B1%5D%20%2B%3D%20a%5B1%5D%3B%0A%20%20%20%20%20%20%20%20camera.rotation%5B2%5D%20%2B%3D%20a%5B2%5D%3B%0A%20%20%20%20%20%20%20%20camera.sinAndCos%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B0%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B0%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B1%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B1%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B2%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B2%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20cam3DchangeRotationOnAxis(%7B%20a%2C%20rotator%7D)%20%7B%0A%20%20%20%20%20%20a%20%3D%20Scratch.Cast.toNumber(a)%3B%0A%20%20%20%20%20%20rotator%20%3D%20Scratch.Cast.toNumber(rotator)%3B%0A%0A%20%20%20%20%20%20if%20(camera.rotation%5Brotator%5D%20!%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20camera.rotation%5Brotator%5D%20%2B%3D%20a%3B%0A%20%20%20%20%20%20%20%20camera.sinAndCos%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B0%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B0%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B1%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B1%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.sin(-camera.rotation%5B2%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%20%20Math.cos(-camera.rotation%5B2%5D%20*%20d2r)%2C%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20cam3DgetRotation()%20%7B%0A%20%20%20%20%20%20return%20JSON.stringify(camera.rotation)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setFov(%7B%20dist%20%7D)%20%7B%0A%20%20%20%20%20%20fov%20%3D%20dist%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeFov(%7B%20dist%20%7D)%20%7B%0A%20%20%20%20%20%20fov%20%2B%3D%20dist%3B%0A%20%20%20%20%7D%0A%20%20%20%20getFov()%20%7B%0A%20%20%20%20%20%20return%20fov%3B%0A%20%20%20%20%7D%0A%20%20%20%20checkFor3dPositionData(targetID)%20%7B%0A%20%20%20%20%20%20if%20(!spriteData%5BtargetID%5D)%20%7B%0A%20%20%20%20%20%20%20%20spriteData%5BtargetID%5D%20%3D%20%7Bposition%3A%5B0%2C%200%2C%20fov%5D%2C%20size%3A100%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20spr3DsetPosition(%7B%20a%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20spriteData%5Btarget.id%5D.position%5B0%5D%20%3D%20a%5B0%5D%3B%0A%20%20%20%20%20%20%20%20spriteData%5Btarget.id%5D.position%5B1%5D%20%3D%20a%5B1%5D%3B%0A%20%20%20%20%20%20%20%20spriteData%5Btarget.id%5D.position%5B2%5D%20%3D%20a%5B2%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20spr3DsetPositionComponent(%7B%20a%2C%20component%20%7D%2C%20util)%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FString%20literal%20for%20the%20funnies!%0A%20%20%20%20%20%20%20%20if%20(spriteData%5Btarget.id%5D.position%5Bcomponent%5D%20%3D%3D%20undefined)%20throw%20%60Component%20%24%7Bcomponent%7D%20doesn't%20exist%60%3B%0A%20%20%20%20%20%20%20%20spriteData%5Btarget.id%5D.position%5Bcomponent%5D%20%3D%20a%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20spr3DchangePosition(%7B%20a%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%0A%20%20%20%20%20%20a%20%3D%20JSON.parse(a)%3B%0A%0A%20%20%20%20%20%20if%20(a)%20%7B%0A%20%20%20%20%20%20%20%20spriteData%5Btarget.id%5D.position%5B0%5D%20%2B%3D%20a%5B0%5D%3B%0A%20%20%20%20%20%20%20%20spriteData%5Btarget.id%5D.position%5B1%5D%20%2B%3D%20a%5B1%5D%3B%0A%20%20%20%20%20%20%20%20spriteData%5Btarget.id%5D.position%5B2%5D%20%2B%3D%20a%5B2%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20spr3DchangePositionComponent(%7B%20a%2C%20component%20%7D%2C%20util)%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20%2F%2FString%20literal%20for%20the%20funnies!%0A%20%20%20%20%20%20if%20(spriteData%5Btarget.id%5D.position%5Bcomponent%5D%20%3D%3D%20undefined)%20throw%20%60Component%20%24%7Bcomponent%7D%20doesn't%20exist%60%3B%0A%20%20%20%20%20%20spriteData%5Btarget.id%5D.position%5Bcomponent%5D%20%2B%3D%20a%3B%0A%20%20%20%20%7D%0A%20%20%20%20spr3DgetPositionComponent(%7Bcomponent%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20%2F%2FString%20literal%20for%20the%20funnies!%0A%20%20%20%20%20%20if%20((spriteData%5Btarget.id%5D.position%5Bcomponent%5D%20%3D%3D%20undefined))%20throw%20%60Component%20%24%7Bcomponent%7D%20doesn't%20exist%60%3B%0A%20%20%20%20%20%20return%20spriteData%5Btarget.id%5D.position%5Bcomponent%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20spr3DgetPosition(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20return%20JSON.stringify(spriteData%5Btarget.id%5D.position)%3B%0A%20%20%20%20%7D%0A%20%20%20%20spr3DsetSize(%7B%20a%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20spriteData%5Btarget.id%5D.size%20%3D%20a%3B%0A%20%20%20%20%7D%0A%20%20%20%20spr3DchangeSize(%7B%20a%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20spriteData%5Btarget.id%5D.size%20%2B%3D%20a%3B%0A%20%20%20%20%7D%0A%20%20%20%20spr3DgetSize(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20return%20spriteData%5Btarget.id%5D.size%3B%0A%20%20%20%20%7D%0A%20%20%20%20spr3D(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20this.checkFor3dPositionData(target.id)%3B%0A%20%20%20%20%20%20const%20myData%20%3D%20JSON.parse(JSON.stringify(spriteData%5Btarget.id%5D))%3B%0A%0A%20%20%20%20%20%20myData.position%5B0%5D%20-%3D%20camera.position%5B0%5D%3B%0A%20%20%20%20%20%20myData.position%5B1%5D%20-%3D%20camera.position%5B1%5D%3B%0A%20%20%20%20%20%20myData.position%5B2%5D%20-%3D%20camera.position%5B2%5D%3B%0A%0A%20%20%20%20%20%20let%20temp%20%3D%20myData.position%5B0%5D%3B%0A%0A%20%20%20%20%20%20myData.position%5B0%5D%20%3D%20myData.position%5B2%5D%20*%20camera.sinAndCos%5B0%5D%20%2B%20myData.position%5B0%5D%20*%20camera.sinAndCos%5B1%5D%3B%0A%20%20%20%20%20%20myData.position%5B2%5D%20%3D%20myData.position%5B2%5D%20*%20camera.sinAndCos%5B1%5D%20-%20temp%20*%20camera.sinAndCos%5B0%5D%3B%0A%0A%20%20%20%20%20%20temp%20%3D%20myData.position%5B1%5D%3B%0A%0A%20%20%20%20%20%20myData.position%5B1%5D%20%3D%20myData.position%5B2%5D%20*%20camera.sinAndCos%5B2%5D%20%2B%20myData.position%5B1%5D%20*%20camera.sinAndCos%5B3%5D%3B%0A%20%20%20%20%20%20myData.position%5B2%5D%20%3D%20myData.position%5B2%5D%20*%20camera.sinAndCos%5B3%5D%20-%20temp%20*%20camera.sinAndCos%5B2%5D%3B%0A%0A%20%20%20%20%20%20temp%20%3D%20myData.position%5B0%5D%3B%0A%0A%20%20%20%20%20%20myData.position%5B0%5D%20%3D%20myData.position%5B1%5D%20*%20camera.sinAndCos%5B4%5D%20%2B%20myData.position%5B0%5D%20*%20camera.sinAndCos%5B5%5D%3B%0A%20%20%20%20%20%20myData.position%5B1%5D%20%3D%20myData.position%5B1%5D%20*%20camera.sinAndCos%5B5%5D%20-%20temp%20*%20camera.sinAndCos%5B4%5D%3B%0A%0A%20%20%20%20%20%20let%20project%20%3D%20fov%20%2F%20myData.position%5B2%5D%3B%0A%0A%20%20%20%20%20%20if%20(myData.position%5B2%5D%20%3C%201)%20%7B%0A%20%20%20%20%20%20%20%20target.setVisible(false)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20target.setVisible(true)%3B%0A%20%20%20%20%20%20%20%20target.setSize(myData.size%20*%20project)%3B%0A%20%20%20%20%20%20%20%20target.setXY(myData.position%5B0%5D%20*%20project%2C%20myData.position%5B1%5D%20*%20project)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20extension())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Boxed%20Plysics%0A%2F%2F%20ID%3A%20P7BoxPhys%0A%2F%2F%20Description%3A%20Implements%20the%20Box2D%20physics%20engine%2C%20adding%20joints%2C%20springs%2C%20sliders%2C%20and%20more.%0A%2F%2F%20By%3A%20pooiod7%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2Fpooiod7%2F%3E%0A%2F%2F%20Original%3A%20Griffpatch%0A%2F%2F%20License%3A%20zlib%0A%0A%2F*%20This%20extension%20was%20originally%20based%20off%20of%20the%20Box2D%20Physics%20extension%0Afor%20ScratchX%20by%20Griffpatch%2C%20but%20has%20since%20deviated%20to%20have%20more%20features%2C%0Awhile%20keeping%20general%20compatability.%20(made%20with%20box2D%20js%20es6)%20*%2F%0A%0A(function(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%20%20var%20b2Dversion%20%3D%20%221.7.9.4%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error('Boxed%20Physics%20can%5C't%20run%20in%20the%20sandbox')%3B%0A%20%20%7D%0A%0A%20%20var%20b2Vec2%2C%20b2AABB%2C%20b2BodyDef%2C%20b2Body%2C%20b2FixtureDef%2C%20b2Fixture%2C%20b2World%2C%20b2MassData%2C%20b2PolygonShape%2C%20b2CircleShape%2C%20b2DebugDraw%2C%20b2MouseJointDef%3B%0A%20%20var%20b2Dworld%2C%20fixDef%3B%20var%20mousePVec%2C%20selectedBody%2C%20prb2djaxisX%2C%20prb2djaxisY%2C%20prb2djl%2C%20prb2dju%3B%0A%20%20var%20b2Dzoom%20%3D%2050%3B%20var%20b2Math%3B%0A%0A%20%20var%20physdebugmode%20%3D%20false%3B%0A%20%20var%20wipblocks%20%3D%20false%3B%0A%0A%20%20var%20positerations%20%3D%2010%3B%0A%20%20var%20veliterations%20%3D%2010%3B%0A%0A%20%20var%20defSpring%20%3D%20%7B%20len%3A%20100%2C%20damp%3A%200.7%2C%20freq%3A%205%20%7D%3B%0A%0A%20%20var%20bodyDef%3B%0A%0A%20%20var%20uid_seq%20%3D%200%3B%20var%20ujid_seq%20%3D%200%3B%0A%20%20var%20categorySeq%20%3D%200%3B%0A%0A%20%20var%20bodies%20%3D%20%7B%7D%3B%0A%20%20var%20joints%20%3D%20%7B%7D%3B%0A%0A%20%20var%20bodyCategoryBits%20%3D%201%3B%0A%20%20var%20bodyMaskBits%20%3D%201%3B%0A%20%20var%20noCollideSeq%20%3D%200%3B%0A%0A%20%20const%20toRad%20%3D%20Math.PI%20%2F%20180%3B%0A%0A%20%20var%20simspeed%20%3D%200%3B%0A%0A%20%20const%20menuIconURI%20%3D%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiDQoJIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmE9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iDQoJIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSItMy43IC0zLjcgNDAgNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTMuNyAtMy43IDQwIDQwIg0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxkZWZzPg0KPC9kZWZzPg0KPHJlY3QgeD0iOC45IiB5PSIxLjUiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxLjUiIHk9IjE2LjMiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxNi4zIiB5PSIxNi4zIiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxNjlGQjAiIHN0cm9rZS13aWR0aD0iMyIgd2lkdGg9IjE0LjgiIGhlaWdodD0iMTQuOCIvPg0KPC9zdmc%2B%22%3B%0A%0A%20%20class%20BoxPhys%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20this.vm%20%3D%20Scratch.vm%3B%0A%20%20%20%20%20%20this.runtime%20%3D%20this.vm.runtime%0A%0A%20%20%20%20%20%20this.turbowarp%20%3D%20window.location.href.indexOf('turbowarp.')%20%3E%20-1%3B%0A%0A%20%20%20%20%20%20this.docs%20%3D%20Scratch.extensions.isPenguinMod%20%3F%20'https%3A%2F%2Fextensions.penguinmod.com%2Fdocs%2FBoxedPhysics'%20%3A%20false%20%3F%20'https%3A%2F%2Fextensions.turbowarp.org%2Fpooiod7%2FBoxedPhysics%22%2C'%20%3A%20'https%3A%2F%2Fpooiod7.neocities.org%2Fmarkdown%2F%23%2Fprojects%2Fscratch%2Fextensions%2Fother%2Fmarkdown%2Fbox2D'%3B%0A%0A%20%20%20%20%20%20%2F%2F%20this%20is%20a%20penguinmod%20only%20thing%0A%20%20%20%20%20%20this.squaretype%20%3D%20Scratch.extensions.isPenguinMod%20%3F%20Scratch.BlockShape.SQUARE%20%3A%20false%3B%0A%0A%20%20%20%20%20%20vm.runtime.on('PROJECT_LOADED'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.physoptions(%7B%20%22CONPHYS%22%3A%20true%2C%20%22WARMSTART%22%3A%20true%2C%20%22POS%22%3A%2010%2C%20%22VEL%22%3A%2010%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20this.vm.runtime.on('PROJECT_STOP'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.init(%7B%20%22SCALE%22%3A%20b2Dzoom%2C%20%22GRAVITY%22%3A%20-10%2C%20%22SCENE%22%3A%20%22stage%22%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20vm.runtime.on('PROJECT_START'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.init(%7B%20%22SCALE%22%3A%20b2Dzoom%2C%20%22GRAVITY%22%3A%20-10%2C%20%22SCENE%22%3A%20%22stage%22%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20this.init(%7B%20%22SCALE%22%3A%20b2Dzoom%2C%20%22GRAVITY%22%3A%20-10%2C%20%22SCENE%22%3A%20%22stage%22%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20'P7BoxPhys'%2C%0A%20%20%20%20%20%20%20%20name%3A%20physdebugmode%20%7C%7C%20wipblocks%20%3F%20'Boxed%20Physics%20(debug)'%20%3A%20'Boxed%20Physics'%2C%0A%20%20%20%20%20%20%20%20color1%3A%20physdebugmode%20%7C%7C%20wipblocks%20%3F%20%22%234b4a60%22%20%3A%20%22%232cb0c0%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20physdebugmode%20%7C%7C%20wipblocks%20%3F%20%22%23383747%22%20%3A%20%22%234eb88a%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20docsURI%3A%20this.docs%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Define%20objects%22%20%7D%2C%20%2F%2F%20----%20Define%20objects%20---%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setBodyAttrs'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Define%20Type%20%5BBODYTYPE%5D%20%20Density%20%5BDENSITY%5D%20%20Friction%20%5BFRICTION%5D%20%20Bounce%20%5BBOUNCE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BODYTYPE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'BodyTypePK'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'dynamic'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DENSITY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FRICTION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200.5%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BOUNCE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200.2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'defineCircle'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Define%20Circle%2C%20size%3A%20%5BSIZE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'defineRect'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Define%20Box%2C%20width%3A%20%5BWIDTH%5D%20height%3A%20%5BHEIGHT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20HEIGHT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'definePoly'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Define%20Polygon%2C%20points%3A%20%5BPOINTS%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POINTS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%2050%20%20%2040%20-50%20%20%20-40%20-50%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'difineCostume'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Define%20pollygon%20as%20this%20costume'%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'placeBody'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Make%20object%20%5BNAME%5D%20at%20x%3A%20%5BX%5D%20%20y%3A%20%5BY%5D%20%20dir%3A%20%5BDIR%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2090%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Modify%20objects%22%20%7D%2C%20%2F%2F%20----%20Modify%20objects%20---%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'destroyBody'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Destroy%20object%20%5BNAME%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'destroyBodys'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Destroy%20every%20object'%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'createNoCollideSet'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Disable%20collision%20between%20%5BNAMES%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAMES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object1%20Object2'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'createYesCollideSet'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Reset%20collision%20of%20objects%20%5BNAMES%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAMES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object1%20Object2'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setBodyAttr'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Set%20%5BBODYATTR%5D%20of%20object%20%5BNAME%5D%20to%20%5BVALUE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BODYATTR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'bodyAttr'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200.1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'applyForceToBody'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Apply%20%5BFORCETYPE%5D%20to%20object%20%5BNAME%5D%20at%20x%3A%20%5BX%5D%20%20y%3A%20%5BY%5D%20%20power%3A%20%5BPOWER%5D%20%20dir%3A%20%5BDIR%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FORCETYPE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'ForceType'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Impulse'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POWER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2090%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'applyAngForceToBody'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Apply%20Angular%20Impulse%20to%20object%20%5BNAME%5D%20power%3A%20%5BPOWER%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANGFORCETYPE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'AngForceType'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Impulse'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POWER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'changevel'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Set%20Velocity%20of%20%5BNAME%5D%20to%20x%20%5BX%5D%20y%20%5BY%5D%20dir%20%5BDIR%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'moveto'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Move%20object%20%5BNAME%5D%20to%20x%20%5BX%5D%20y%20%5BY%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'rotateto'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Set%20rotation%20of%20object%20%5BNAME%5D%20to%20%5BROT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ROT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2090%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'clearvel'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Clear%20velocity%20of%20object%20%5BNAME%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getBodyAttr'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Get%20%5BBODYATTRREAD%5D%20from%20object%20%5BNAME%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BODYATTRREAD%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'bodyAttrRead'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getBodyIDAt'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Get%20object%20at%20x%3A%20%5BX%5D%20%20y%3A%20%5BY%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getobjects'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'All%20objects'%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Define%20joints%22%20%7D%2C%20%2F%2F%20----%20Define%20joints%20-----%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'defineSpring'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Define%20Spring%2C%20Length%3A%20%5BLENGTH%5D%20%20Damping%3A%20%5BDAMPING%5D%20%20Freq%3A%20%5BFREQ%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LENGTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DAMPING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200.7%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FREQ%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%205%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'definePrismatic'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Define%20Slider%2C%20Angle%3A%20%5BDIR%5D%20Lower%20stop%3A%20%5BLOW%5D%20Upper%20stop%3A%20%5BHIGH%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'90'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LOW%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'-100'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20HIGH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'100'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'createJointOfType'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Create%20Joint%20%5BJOINTID%5D%20of%20type%20%5BJOINTTYPE%5D%20between%20%5BBODY1%5D%20at%20%5BX1%5D%20%5BY1%5D%20and%20%5BBODY2%5D%20at%20%5BX2%5D%20%5BY2%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JOINTID%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Joint'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JOINTTYPE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'JointType'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Rotating'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BODY1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object1'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BODY2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object2'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Modify%20joints%22%20%7D%2C%20%2F%2F%20------%20Modify%20joints%20---%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'destroyJoint'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Destroy%20Joint%20%5BJOINTID%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JOINTID%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Joint%20ID'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setJointAttr'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Set%20%5BJOINTATTR%5D%20of%20joint%20%5BJOINTID%5D%20to%20%5BVALUE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JOINTATTR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'JointAttr'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Motor%20On'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JOINTID%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Joint%20ID'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setJointTarget'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Set%20Mouse%20Joint%20Target%20%5BJOINTID%5D%20to%20x%3A%20%5BX%5D%20%20y%3A%20%5BY%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JOINTID%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Joint%20ID'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getJointAttr'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Get%20%5BJOINTATTRREAD%5D%20of%20joint%3A%20%5BJOINTID%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JOINTATTRREAD%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'JointAttrRead'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JOINTID%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Joint%20ID'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22World%20functions%22%20%7D%2C%20%2F%2F%20---%20World%20functions%20--%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'init'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Make%20World%2C%20scale%201m%3A%20%5BSCALE%5D%20%20gravity%3A%20%5BGRAVITY%5D%20%20scene%3A%20%5BSCENE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SCALE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20GRAVITY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20-10%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SCENE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'sceneType'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'closed%20stage'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'physoptions'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Set%20physics%20Position%20Iterations%3A%20%5BPOS%5D%20Velocity%20Iterations%3A%20%5BVEL%5D%20Continuous%20Physics%3A%20%5BCONPHYS%5D%20Warm%20Starting%3A%20%5BWARMSTART%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VEL%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONPHYS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WARMSTART%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'rotatePoint'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Get%20%5BPART%5D%20from%20point%20x%20%5BX%5D%20y%20%5BY%5D%20rotated%20by%20%5BANGLE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PART%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'xy'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'x'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getsimspeed'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Slow%20motion'%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setsimspeed'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Set%20slow%20motion%20to%20%5BVALUE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2030%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'stepSimulation'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Step%20Simulation'%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!physdebugmode%20%26%26%20!wipblocks%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%20%2F%2F%20---------------------%20Work%20in%20progress%20blocks%20----%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Upcoming%20blocks%20(can%20brake%20projects)%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'ignore'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!physdebugmode%20%26%26%20!wipblocks%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Ignore%20%5BVALUE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'get_debug'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!physdebugmode%20%26%26%20!wipblocks%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockShape%3A%20this.squaretype%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Get%20debug%20%5BVAL%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAL%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22version%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'ispoly'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!physdebugmode%20%26%26%20!wipblocks%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Is%20%5BPOINTS%5D%20a%20polygon%3F'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POINTS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%2050%20%20%2040%20-50%20%20%20-40%20-50%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20sceneType%3A%20%5B'boxed%20stage'%2C%20'closed%20stage'%2C%20'opened%20stage'%2C%20'nothing'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20BodyTypePK%3A%20%5B'dynamic'%2C%20'static'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20bodyAttr%3A%20%5B'damping'%2C%20'rotational%20damping'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20bodyAttrRead%3A%20%5B'x'%2C%20'y'%2C%20'Xvel'%2C%20'Yvel'%2C%20'Dvel'%2C%20'direction'%2C%20'awake'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20ForceType%3A%20%5B'Impulse'%2C%20'World%20Impulse'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20AngForceType%3A%20%5B'Impulse'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20JointType%3A%20%5B'Rotating'%2C%20'Spring'%2C%20'Weld'%2C%20'Slider'%2C%20'Mouse'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20JointAttr%3A%20%5B'Motor%20On'%2C%20'Motor%20Speed'%2C%20'Max%20Torque'%2C%20'Limits%20On'%2C%20'Lower%20Limit'%2C%20'Upper%20Limit'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20JointAttrRead%3A%20%5B'Angle'%2C%20'Speed'%2C%20'Motor%20Torque'%2C%20'Reaction%20Torque'%2C%20'Tension'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20xyp%3A%20%5B'x'%2C%20'y'%2C%20'point'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20xy%3A%20%5B'x'%2C%20'y'%5D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20ignore()%20%7B%20%7D%0A%20%20%20%20get_debug(args)%20%7B%0A%20%20%20%20%20%20try%20%7B%20args%20%3D%20args.VAL%20%7D%20catch%20(error)%20%7B%20args%20%3D%20args%3B%20%7D%0A%20%20%20%20%20%20if%20(args%20%3D%3D%20%22version%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20b2Dversion%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args%20%3D%3D%20%22lib%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22Box2D%20JS%20es6%20(Uli%20Hecht's%20port%20of%20Box2D%20flash)%22%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args%20%3D%3D%3D%20%22maker%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22pooiod7%22%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args%20%3D%3D%3D%20%22base%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22Box2D%20Physics%20by%20griffpatch%20for%20ScratchX%20(Scratch%202.0)%22%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args%20%3D%3D%3D%20%22docs%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.docs%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20'%5B%22version%22%2C%20%22lib%22%2C%20%22maker%22%2C%20%22base%22%2C%20%22docs%22%5D'%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20init(args)%20%7B%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%20%20%20%20%20%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%20%20%20%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%3B%0A%0A%20%20%20%20%20%20b2Dworld%20%3D%20new%20b2World(%0A%20%20%20%20%20%20%20%20new%20b2Vec2(0%2C%20args.GRAVITY)%20%2F%2F%20args.GRAVITY%20(10)%0A%20%20%20%20%20%20%20%20%2C%20true%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20allow%20sleep%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20b2Dzoom%20%3D%20args.SCALE%3B%0A%0A%20%20%20%20%20%20fixDef%20%3D%20new%20b2FixtureDef%3B%0A%20%20%20%20%20%20fixDef.density%20%3D%201.0%3B%09%09%20%20%20%20%2F%2F%201.0%0A%20%20%20%20%20%20fixDef.friction%20%3D%200.5%3B%09%09%20%2F%2F%200.5%0A%20%20%20%20%20%20fixDef.restitution%20%3D%200.2%3B%09%2F%2F%200.2%0A%0A%20%20%20%20%20%20bodyDef%20%3D%20new%20b2BodyDef%3B%0A%0A%20%20%20%20%20%20if%20(args.SCENE%20%3D%3D%20'closed%20stage'%20%7C%7C%20args.SCENE%20%3D%3D%20'stage')%20%7B%0A%20%20%20%20%20%20%20%20bodyDef.type%20%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetAsBox(250%20%2F%20b2Dzoom%2C%2010%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(0%2C%20-190%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(0%2C%201000%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetAsBox(10%20%2F%20b2Dzoom%2C%20800%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(-250%20%2F%20b2Dzoom%2C%20540%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(250%20%2F%20b2Dzoom%2C%20540%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.SCENE%20%3D%3D%20'opened%20stage')%20%7B%0A%20%20%20%20%20%20%20%20bodyDef.type%20%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetAsBox(9999999%2C%2010%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(0%2C%20-190%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.SCENE%20%3D%3D%20'boxed%20stage')%20%7B%0A%20%20%20%20%20%20%20%20bodyDef.type%20%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetAsBox(250%20%2F%20b2Dzoom%2C%2010%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(0%2C%20-190%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(0%2C%201000%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetAsBox(10%20%2F%20b2Dzoom%2C%20800%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(-250%20%2F%20b2Dzoom%2C%20540%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(250%20%2F%20b2Dzoom%2C%20540%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetAsBox(250%20%2F%20b2Dzoom%2C%2010%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20bodyDef.position.Set(0%2C%20190%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20bodies%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20joints%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20uid_seq%20%3D%200%3B%0A%20%20%20%20%20%20ujid_seq%20%3D%200%3B%0A%0A%20%20%20%20%20%20categorySeq%20%3D%200%3B%0A%20%20%20%20%20%20bodyCategoryBits%20%3D%201%3B%0A%20%20%20%20%20%20noCollideSeq%20%3D%200%3B%0A%0A%20%20%20%20%20%20bodyDef.type%20%3D%20b2Body.b2_dynamicBody%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rotatePoint(args)%20%7B%0A%20%20%20%20%20%20var%20radians%20%3D%20args.ANGLE%20*%20Math.PI%20%2F%20180%3B%0A%20%20%20%20%20%20var%20cos%20%3D%20Math.cos(radians)%3B%0A%20%20%20%20%20%20var%20sin%20%3D%20Math.sin(radians)%3B%0A%20%20%20%20%20%20var%20nx%20%3D%20(cos%20*%20args.X)%20-%20(sin%20*%20args.Y)%3B%0A%20%20%20%20%20%20var%20ny%20%3D%20(sin%20*%20args.X)%20%2B%20(cos%20*%20args.Y)%3B%0A%20%20%20%20%20%20if%20(args.PART%20%3D%3D%20%22x%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20nx%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PART%20%3D%3D%20%22y%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20ny%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20'%5B%22'%2Bnx%2B'%22%2C%20%22'%2Bny%2B'%22%5D'%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setJointTarget(args)%20%7B%0A%20%20%20%20%20%20var%20joint%20%3D%20joints%5Bargs.JOINTID%5D%3B%0A%20%20%20%20%20%20if%20(joint)%20%7B%0A%20%20%20%20%20%20%20%20joint.SetTarget(new%20b2Vec2(args.X%20%2F%20b2Dzoom%2C%20args.Y%20%2F%20b2Dzoom))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20clearvel(args)%20%7B%0A%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20return%20''%3B%0A%0A%20%20%20%20%20%20body.SetLinearVelocity(new%20b2Vec2(0%2C%200))%3B%0A%20%20%20%20%20%20body.SetAngularVelocity(0)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20changevel(args)%20%7B%0A%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20return%20''%3B%0A%0A%20%20%20%20%20%20body.SetLinearVelocity(new%20b2Vec2(args.X%2C%20args.Y))%3B%0A%20%20%20%20%20%20body.SetAngularVelocity(args.DIR)%3B%0A%20%20%20%20%20%20body.SetAwake(true)%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBodyAttrs(args)%20%7B%0A%20%20%20%20%20%20var%20stat%20%3D%20args.BODYTYPE%3B%0A%20%20%20%20%20%20var%20dens%20%3D%20args.DENSITY%3B%0A%20%20%20%20%20%20var%20fric%20%3D%20args.FRICTION%3B%0A%20%20%20%20%20%20var%20rest%20%3D%20args.BOUNCE%3B%0A%0A%20%20%20%20%20%20bodyDef.type%20%3D%20stat%20%3D%3D%3D%20'static'%20%3F%20b2Body.b2_staticBody%20%3A%20b2Body.b2_dynamicBody%3B%0A%20%20%20%20%20%20fixDef.density%20%3D%20dens%3B%09%09%20%20%20%20%2F%2F%201.0%0A%20%20%20%20%20%20fixDef.friction%20%3D%20fric%3B%09%09%20%20%20%2F%2F%200.5%0A%20%20%20%20%20%20fixDef.restitution%20%3D%20rest%3B%09%2F%2F%200.2%0A%20%20%20%20%7D%0A%0A%20%20%20%20defineCircle(args)%20%7B%0A%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2CircleShape%3B%0A%20%20%20%20%20%20fixDef.shape.SetRadius(args.SIZE%20%2F%202%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20defineRect(args)%20%7B%0A%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%20%20%20%20%20%20fixDef.shape.SetAsBox(args.WIDTH%20%2F%202%20%2F%20b2Dzoom%2C%20args.HEIGHT%20%2F%202%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20difineCostume(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20if%20(target.isStage)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20r%20%3D%20this.runtime.renderer%3B%0A%20%20%20%20%20%20%20%20const%20drawable%20%3D%20r._allDrawables%5Btarget.drawableID%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Tell%20the%20Drawable%20about%20its%20updated%20convex%20hullPoints%2C%20if%20necessary.%0A%20%20%20%20%20%20%20%20if%20(drawable.needsConvexHullPoints())%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20points%20%3D%20r._getConvexHullPointsForDrawable(target.drawableID)%3B%0A%20%20%20%20%20%20%20%20%20%20drawable.setConvexHullPoints(points)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20points%20%3D%20drawable._convexHullPoints%3B%0A%20%20%20%20%20%20%20%20const%20scaleX%20%3D%20drawable.scale%5B0%5D%20%2F%20100%3B%0A%20%20%20%20%20%20%20%20const%20scaleY%20%3D%20drawable.scale%5B1%5D%20%2F%20-100%3B%20%2F%2F%20Flip%20Y%20for%20hulls%0A%20%20%20%20%20%20%20%20const%20offset%20%3D%20drawable.skin.rotationCenter%3B%0A%20%20%20%20%20%20%20%20let%20allHulls%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20(const%20i%20in%20points)%20%7B%0A%20%20%20%20%20%20%20%20%20%20hullPoints.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20(points%5Bi%5D%5B0%5D%20-%20offset%5B0%5D)%20*%20scaleX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20(points%5Bi%5D%5B1%5D%20-%20offset%5B1%5D)%20*%20scaleY%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape()%3B%0A%0A%20%20%20%20%20%20%20%20const%20vertices%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20hullPoints.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20b2Vec%20%3D%20new%20b2Vec2(hullPoints%5Bi%5D.x%20%2F%20b2Dzoom%2C%20hullPoints%5Bi%5D.y%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(prev%20!%3D%3D%20null%20%26%26%20b2Math.SubtractVV(b2Vec%2C%20prev).LengthSquared()%20%3E%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20vertices.push(b2Vec)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20prev%20%3D%20b2Vec%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fixDef.shape.SetAsArray(vertices)%3B%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.warn(error)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20svgtopoints(svg)%20%7B%0A%20%20%20%20%20%20console.error(%22no%20svg%20support%20yet%22)%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20ispoly(args)%20%7B%0A%20%20%20%20%20%20return%20this.definePoly(args)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20definePoly(args)%20%7B%0A%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%20%20%20%20%20%20var%20points%20%3D%20args.POINTS%3B%0A%0A%20%20%20%20%20%20%2F%2F%20this%20feature%20does%20not%20work%20yet%20%3A(%20%0A%20%20%20%20%20%20if%20(points.charAt(0)%20%3D%3D%3D%20'%3C')%20%7B%0A%20%20%20%20%20%20%20%20console.warn(%22svg%20object%20conversion%20is%20not%20yet%20supported%2C%20use%20%5BDefine%20costume%5D%22)%3B%0A%20%20%20%20%20%20%20%20%2F%2Fpoints%20%3D%20this.svgtopoints(points)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20var%20pts%20%3D%20points.split('%20')%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20pts.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(pts%5Bi%5D.length%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20pts.splice(i%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i--%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20vertices%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%20pts.length%3B%20i%20%3E%200%3B%20i%20-%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20vertices.push(new%20b2Vec2(parseFloat(pts%5Bi%20-%202%5D)%20%2F%20b2Dzoom%2C%20parseFloat(pts%5Bi%20-%201%5D)%20%2F%20b2Dzoom))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20fixDef.shape.SetAsArray(vertices)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2CircleShape%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetRadius(100%20%2F%202%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20console.error(%22Incorrect%20polly%20format%22%2C%20points)%3B%0A%20%20%20%20%20%20%20%20console.warn(%22Defaulting%20to%20%5C%22circle%20100%5C%22%22)%3B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20placeBody(args)%20%7B%0A%20%20%20%20%20%20var%20id%20%3D%20args.NAME%3B%0A%0A%20%20%20%20%20%20if%20(bodies%5Bid%5D)%20%7B%0A%20%20%20%20%20%20%20%20b2Dworld.DestroyBody(bodies%5Bid%5D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20fixDef.filter.categoryBits%20%3D%20bodyCategoryBits%3B%0A%20%20%20%20%20%20fixDef.filter.maskBits%20%3D%20bodyMaskBits%3B%0A%0A%20%20%20%20%20%20bodyDef.position.x%20%3D%20args.X%20%2F%20b2Dzoom%3B%0A%20%20%20%20%20%20bodyDef.position.y%20%3D%20args.Y%20%2F%20b2Dzoom%3B%0A%20%20%20%20%20%20bodyDef.angle%20%3D%20(90%20-%20args.DIR)%20*%20toRad%3B%0A%20%20%20%20%20%20var%20body%20%3D%20b2Dworld.CreateBody(bodyDef)%3B%0A%20%20%20%20%20%20body.uid%20%3D%20id%3B%0A%20%20%20%20%20%20body.CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20bodies%5Bid%5D%20%3D%20body%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20createNoCollideSet(args)%20%7B%0A%20%20%20%20%20%20if%20(noCollideSeq%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20noCollideSeq%20%3D%20-noCollideSeq%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20noCollideSeq%20-%3D%201%3B%0A%20%20%20%20%20%20var%20bids%20%3D%20args.NAMES.split('%20')%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20bids.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20bid%20%3D%20bids%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(bid.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bbid%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20fix%20%3D%20body.GetFixtureList()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(body)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20(fix)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20fdata%20%3D%20fix.GetFilterData()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fdata.groupIndex%20%3D%20noCollideSeq%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(noCollideSeq)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fix.SetFilterData(fdata)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(fix)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fix%20%3D%20fix.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20createYesCollideSet(args)%20%7B%0A%20%20%20%20%20%20if%20(noCollideSeq%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20noCollideSeq%20%3D%20-noCollideSeq%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20noCollideSeq%20%2B%3D%201%3B%0A%20%20%20%20%20%20var%20bids%20%3D%20args.NAMES.split('%20')%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20bids.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20bid%20%3D%20bids%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(bid.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bbid%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20fix%20%3D%20body.GetFixtureList()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(body)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20(fix)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20fdata%20%3D%20fix.GetFilterData()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fdata.groupIndex%20%3D%20noCollideSeq%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(noCollideSeq)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fix.SetFilterData(fdata)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(fix)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fix%20%3D%20fix.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getobjects()%20%7B%0A%20%20%20%20%20%20var%20bodynames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20(var%20bodyName%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bodies.hasOwnProperty(bodyName))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(bodynames.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodynames.push(%22%20%22%20%2B%20bodyName)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodynames.push(bodyName)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Scratch.Cast.toString(bodynames)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20destroyBodys()%20%7B%0A%20%20%20%20%20%20for%20(var%20bodyName%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bodies.hasOwnProperty(bodyName))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.destroyBody(%7BNAME%3AbodyName%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20destroyBody(args)%20%7B%0A%20%20%20%20%20%20if%20(bodies%5Bargs.NAME%5D)%20%7B%0A%20%20%20%20%20%20%20%20b2Dworld.DestroyBody(bodies%5Bargs.NAME%5D)%3B%0A%20%20%20%20%20%20%20%20delete%20bodies%5Bargs.NAME%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBodyAttr(args)%20%7B%0A%20%20%20%20%20%20var%20bds%20%3D%20args.NAME.split('%20')%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20bds.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20id%20%3D%20bds%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(id.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bid%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20(args.BODYATTR)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'damping'%3A%20body.SetLinearDamping(args.VALUE)%3B%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'rotational%20damping'%3A%20body.GetAngularDamping(args.VALUE)%3B%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTouchingObjectNames(obj)%20%7B%0A%20%20%20%20%20%20var%20contacts%20%3D%20obj.GetContactList()%3B%0A%20%20%20%20%20%20var%20touchingObjectNames%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20while%20(contacts)%20%7B%0A%20%20%20%20%20%20%20%20if%20(contacts.contact.IsTouching())%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20otherFixture%20%3D%20contacts.contact.GetFixtureA()%20%3D%3D%3D%20obj%20%3F%20contacts.contact.GetFixtureB()%20%3A%20contacts.contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20otherBody%20%3D%20otherFixture.GetBody()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20otherUserData%20%3D%20otherBody.GetUserData()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(otherUserData%20%26%26%20otherUserData.name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20touchingObjectNames.push(otherUserData.name)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20contacts%20%3D%20contacts.next%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20touchingObjectNames%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getBodyAttr(args)%20%7B%0A%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20return%20''%3B%0A%20%20%20%20%20%20switch%20(args.BODYATTRREAD)%20%7B%0A%20%20%20%20%20%20%20%20case%20'x'%3A%20return%20body.GetPosition().x%20*%20b2Dzoom%3B%0A%20%20%20%20%20%20%20%20case%20'y'%3A%20return%20body.GetPosition().y%20*%20b2Dzoom%3B%0A%20%20%20%20%20%20%20%20case%20'direction'%3A%20return%2090%20-%20(body.GetAngle()%20%2F%20toRad)%3B%0A%20%20%20%20%20%20%20%20case%20'Xvel'%3A%20return%20body.GetLinearVelocity().x%3B%0A%20%20%20%20%20%20%20%20case%20'Yvel'%3A%20return%20body.GetLinearVelocity().y%3B%0A%20%20%20%20%20%20%20%20case%20'Dvel'%3A%20return%20body.GetAngularVelocity()%3B%0A%20%20%20%20%20%20%20%20case%20'awake'%3A%20return%20body.IsAwake()%20%3F%201%20%3A%200%3B%0A%0A%20%20%20%20%20%20%20%20case%20'Tension'%3A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Assume%20that%20body%20is%20a%20b2Body%20object%20that%20represents%20the%20object%0A%20%20%20%20%20%20%20%20%20%20var%20force%20%3D%200%3B%20%2F%2F%20Initialize%20the%20force%20to%200%0A%20%20%20%20%20%20%20%20%20%20var%20contact%20%3D%20body.GetContactList()%3B%20%2F%2F%20Get%20the%20contact%20list%0A%20%20%20%20%20%20%20%20%20%20while%20(contact)%20%7B%20%2F%2F%20Loop%20through%20the%20contacts%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20impulse%20%3D%20contact.impulse%3B%20%2F%2F%20Get%20the%20impulse%20object%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20normalImpulse%20%3D%20impulse.normalImpulses%5B0%5D%3B%20%2F%2F%20Get%20the%20normal%20impulse%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20tangentImpulse%20%3D%20impulse.tangentImpulses%5B0%5D%3B%20%2F%2F%20Get%20the%20tangent%20impulse%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20impulseMagnitude%20%3D%20Math.sqrt(normalImpulse%20*%20normalImpulse%20%2B%20tangentImpulse%20*%20tangentImpulse)%3B%20%2F%2F%20Calculate%20the%20impulse%20magnitude%0A%20%20%20%20%20%20%20%20%20%20%20%20force%20%2B%3D%20impulseMagnitude%3B%20%2F%2F%20Add%20the%20impulse%20magnitude%20to%20the%20force%0A%20%20%20%20%20%20%20%20%20%20%20%20contact%20%3D%20contact.next%3B%20%2F%2F%20Move%20to%20the%20next%20contact%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20console.log(%22The%20force%20applied%20to%20the%20object%20by%20other%20objects%20is%20%22%20%2B%20force%20%2B%20%22%20N%22)%3B%20%2F%2F%20Print%20the%20result%0A%20%20%20%20%20%20%20%20%20%20return%20force%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2Fcase%20'touching'%3A%20return%20JSON.stringify(this.getTouchingObjectNames(body))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20moveto(args)%20%7B%0A%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20return%20''%3B%0A%0A%20%20%20%20%20%20var%20desiredPosition%20%3D%20new%20b2Vec2(args.X%20%2F%20b2Dzoom%2C%20args.Y%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20body.SetPosition(desiredPosition)%3B%0A%20%20%20%20%20%20body.SetAwake(true)%0A%20%20%20%20%7D%0A%0A%20%20%20%20rotateto(args)%20%7B%0A%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20return%20''%3B%0A%0A%20%20%20%20%20%20var%20desiredRotation%20%3D%20(180%20-%20args.ROT%20-%2090)%20*%20toRad%3B%0A%20%20%20%20%20%20body.SetAngle(desiredRotation)%3B%0A%20%20%20%20%20%20body.SetAwake(true)%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20getBodyCB(fixture)%20%7B%0A%20%20%20%20%20%20if%20(fixture.GetBody().GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20if%20(fixture.GetShape().TestPoint(fixture.GetBody().GetTransform()%2C%20mousePVec))%20%7B%0A%20%20%20%20%20%20%20%20%20%20selectedBody%20%3D%20fixture.GetBody()%3B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20getBodyIDAt(args)%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20args.X%3B%0A%20%20%20%20%20%20var%20y%20%3D%20args.Y%3B%0A%0A%20%20%20%20%20%20mousePVec%20%3D%20new%20b2Vec2(x%20%2F%20b2Dzoom%2C%20y%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20var%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20aabb.lowerBound.Set(mousePVec.x%20-%200.001%2C%20mousePVec.y%20-%200.001)%3B%0A%20%20%20%20%20%20aabb.upperBound.Set(mousePVec.x%20%2B%200.001%2C%20mousePVec.y%20%2B%200.001)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Query%20the%20b2Dworld%20for%20overlapping%20shapes.%0A%20%20%20%20%20%20selectedBody%20%3D%20null%3B%0A%20%20%20%20%20%20b2Dworld.QueryAABB(this.getBodyCB%2C%20aabb)%3B%0A%0A%20%20%20%20%20%20return%20selectedBody%20%3F%20selectedBody.uid%20%3A%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20applyAngForceToBody(args)%20%7B%0A%20%20%20%20%20%20var%20ftype%20%3D%20%2F*args.ANGFORCETYPE*%2F%20'Impulse'%3B%0A%20%20%20%20%20%20var%20bodyID%20%3D%20args.NAME%3B%0A%20%20%20%20%20%20var%20pow%20%3D%20args.POWER%3B%0A%0A%20%20%20%20%20%20var%20body%20%3D%20bodies%5BbodyID%5D%3B%0A%20%20%20%20%20%20if%20(!body)%0A%20%20%20%20%20%20%20%20return%3B%0A%0A%20%20%20%20%20%20if%20(ftype%20%3D%3D%3D%20'Impulse')%20%7B%0A%20%20%20%20%20%20%20%20body.ApplyTorque(-pow)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20applyForceToBody(args)%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20args.X%3B%0A%20%20%20%20%20%20var%20y%20%3D%20args.Y%3B%0A%20%20%20%20%20%20var%20ftype%20%3D%20args.FORCETYPE%3B%0A%20%20%20%20%20%20var%20pow%20%3D%20args.POWER%3B%0A%20%20%20%20%20%20var%20dir%20%3D%20args.DIR%3B%0A%0A%20%20%20%20%20%20var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%20%20%20%20%20%20if%20(!body)%0A%20%20%20%20%20%20%20%20return%3B%0A%0A%20%20%20%20%20%20dir%20%3D%20(90%20-%20dir)%20*%20toRad%3B%0A%0A%20%20%20%20%20%20if%20(ftype%20%3D%3D%3D%20'Impulse')%20%7B%0A%20%20%20%20%20%20%20%20body.ApplyImpulse(%7B%20x%3A%20pow%20*%20Math.cos(dir)%2C%20y%3A%20pow%20*%20Math.sin(dir)%20%7D%2C%20body.GetWorldPoint(%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D))%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ftype%20%3D%3D%3D%20'World%20Impulse')%20%7B%0A%20%20%20%20%20%20%20%20body.ApplyForce(%7B%20x%3A%20pow%20*%20Math.cos(dir)%2C%20y%3A%20pow%20*%20Math.sin(dir)%20%7D%2C%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20defineSpring(args)%20%7B%0A%20%20%20%20%20%20var%20len%20%3D%20args.LENGTH%3B%0A%20%20%20%20%20%20var%20damp%20%3D%20args.DAMPING%3B%0A%20%20%20%20%20%20var%20freq%20%3D%20args.FREQ%3B%0A%0A%20%20%20%20%20%20defSpring.len%20%3D%20len%20%3C%200.1%20%3F%200.1%20%3A%20len%20%2F%20b2Dzoom%3B%0A%20%20%20%20%20%20defSpring.damp%20%3D%20damp%20%3C%200%20%3F%200.7%20%3A%20damp%3B%0A%20%20%20%20%20%20defSpring.freq%20%3D%20freq%20%3E%200%20%3F%20freq%20%3A%205%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20definePrismatic(args)%20%7B%0A%20%20%20%20%20%20var%20directionRadians%20%3D%20args.DIR%20-%2090%20*%20Math.PI%20%2F%20180%3B%0A%20%20%20%20%20%20prb2djaxisX%20%3D%20Math.cos(directionRadians)%3B%0A%20%20%20%20%20%20prb2djaxisY%20%3D%20Math.sin(directionRadians)%3B%0A%20%20%20%20%20%20prb2dju%20%3D%20args.HIGH%3B%0A%20%20%20%20%20%20prb2djl%20%3D%20args.LOW%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20createJointOfType(args)%20%7B%0A%20%20%20%20%20%20var%20jName%20%3D%20args.JOINTID%3B%0A%20%20%20%20%20%20var%20typ%20%3D%20args.JOINTTYPE%3B%0A%20%20%20%20%20%20var%20bodyID%20%3D%20args.BODY1%3B%0A%20%20%20%20%20%20var%20x%20%3D%20args.X1%3B%0A%20%20%20%20%20%20var%20y%20%3D%20args.Y1%3B%0A%20%20%20%20%20%20var%20bodyID2%20%3D%20args.BODY2%0A%20%20%20%20%20%20var%20x2%20%3D%20args.X2%3B%0A%20%20%20%20%20%20var%20y2%20%3D%20args.Y2%3B%0A%0A%20%20%20%20%20%20if%20(jName.length%20%3E%200)%20this.destroyJoint(jName)%3B%0A%0A%20%20%20%20%20%20if%20(bodyID%20%3D%3D%20'')%20bodyID%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(bodyID2%20%3D%3D%20'')%20bodyID2%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(!bodyID%20%26%26%20!bodyID2)%20return%20''%3B%0A%0A%20%20%20%20%20%20var%20body%20%3D%20bodyID%20%3F%20bodies%5BbodyID%5D%20%3A%20b2Dworld.GetGroundBody()%3B%0A%20%20%20%20%20%20var%20body2%20%3D%20bodyID2%20%3F%20bodies%5BbodyID2%5D%20%3A%20b2Dworld.GetGroundBody()%3B%0A%0A%20%20%20%20%20%20if%20(!body%20%7C%7C%20!body2)%20return%20''%3B%0A%0A%20%20%20%20%20%20var%20md%3B%0A%20%20%20%20%20%20switch%20(typ)%20%7B%0A%20%20%20%20%20%20%20%20case%20'Spring'%3A%0A%20%20%20%20%20%20%20%20%20%20md%20%3D%20new%20Box2D.Dynamics.Joints.b2DistanceJointDef()%3B%0A%20%20%20%20%20%20%20%20%20%20md.length%20%3D%20defSpring.len%3B%0A%20%20%20%20%20%20%20%20%20%20md.dampingRatio%20%3D%20defSpring.damp%3B%0A%20%20%20%20%20%20%20%20%20%20md.frequencyHz%20%3D%20defSpring.freq%3B%0A%20%20%20%20%20%20%20%20%20%20md.bodyA%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20b2Dzoom%2C%20y%3A%20y2%20%2F%20b2Dzoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20'Rotating'%3A%0A%20%20%20%20%20%20%20%20%20%20md%20%3D%20new%20Box2D.Dynamics.Joints.b2RevoluteJointDef()%3B%0A%20%20%20%20%20%20%20%20%20%20md.bodyA%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20b2Dzoom%2C%20y%3A%20y2%20%2F%20b2Dzoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20'Slider'%3A%0A%20%20%20%20%20%20%20%20%20%20md%20%3D%20new%20Box2D.Dynamics.Joints.b2PrismaticJointDef()%3B%0A%20%20%20%20%20%20%20%20%20%20md.Initialize(body%2C%20body2%2C%20body.GetWorldCenter()%2C%20new%20b2Vec2(prb2djaxisX%2C%20prb2djaxisY))%3B%0A%20%20%20%20%20%20%20%20%20%20md.enableLimit%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20md.lowerTranslation%20%3D%20prb2djl%3B%0A%20%20%20%20%20%20%20%20%20%20md.upperTranslation%20%3D%20prb2dju%3B%0A%20%20%20%20%20%20%20%20%20%20md.bodyA%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20b2Dzoom%2C%20y%3A%20y2%20%2F%20b2Dzoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20'Weld'%3A%0A%20%20%20%20%20%20%20%20%20%20md%20%3D%20new%20Box2D.Dynamics.Joints.b2WeldJointDef()%3B%0A%20%20%20%20%20%20%20%20%20%20md.bodyA%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20b2Dzoom%2C%20y%3A%20y2%20%2F%20b2Dzoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20'Mouse'%3A%0A%20%20%20%20%20%20%20%20%20%20var%20md%20%3D%20new%20b2MouseJointDef()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(bodyID%20%3D%3D%20'')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20md.target.Set(x2%20%2F%20b2Dzoom%2C%20y2%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20md.target.Set(x%20%2F%20b2Dzoom%2C%20y%20%2F%20b2Dzoom)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20md.bodyA%20%3D%20b2Dworld.GetGroundBody()%3B%0A%20%20%20%20%20%20%20%20%20%20md.collideConnected%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20md.maxForce%20%3D%20300.0%20*%20body.GetMass()%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2Fmd.collideConnected%20%3D%20true%3B%0A%20%20%20%20%20%20%2F%2Fmd.maxForce%20%3D%20300.0%20*%20body.GetMass()%3B%0A%20%20%20%20%20%20var%20joint%20%3D%20b2Dworld.CreateJoint(md)%3B%0A%20%20%20%20%20%20if%20(bodyID.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20body.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bodyID2.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20body2.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(jName.length%20%3D%3D%200)%20jName%20%3D%20'_'%20%2B%20(%2B%2Bujid_seq)%3B%0A%20%20%20%20%20%20joints%5BjName%5D%20%3D%20joint%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20destroyJoint(args)%20%7B%0A%20%20%20%20%20%20var%20joint%20%3D%20joints%5Bargs.JOINTID%5D%3B%0A%20%20%20%20%20%20if%20(joint)%20%7B%0A%20%20%20%20%20%20%20%20b2Dworld.DestroyJoint(joint)%3B%0A%20%20%20%20%20%20%20%20delete%20joints%5Bargs.JOINTID%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setJointAttr(args)%20%7B%0A%20%20%20%20%20%20var%20attr%20%3D%20args.JOINTATTR%3B%0A%20%20%20%20%20%20var%20jointID%20%3D%20args.JOINTID%3B%0A%20%20%20%20%20%20var%20val%20%3D%20args.VALUE%3B%0A%0A%20%20%20%20%20%20%2F%2F%20JointAttr%3A%20%5B'Motor%20On'%2C'Motor%20Speed'%2C'Max%20Torque'%2C%20'Limits%20On'%2C'Lower%20Limit'%2C'Upper%20Limit'%5D%2C%0A%20%20%20%20%20%20var%20jointids%20%3D%20jointID.split('%20')%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20jointids.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20joint%20%3D%20joints%5Bjointids%5Bi%5D%5D%3B%0A%20%20%20%20%20%20%20%20if%20(joint)%20%7B%0A%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20(attr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'Motor%20On'%3A%20joint.EnableMotor(val%20%3E%200)%3B%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'Motor%20Speed'%3A%20joint.SetMotorSpeed(val)%3B%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'Max%20Torque'%3A%20joint.SetMaxMotorTorque(val)%3B%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'Limits%20On'%3A%20joint.EnableLimit(val%20%3E%200)%3B%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'Lower%20Limit'%3A%20joint.SetLimits(joint.GetJointAngle()%20%2B%20val%20*%20toRad%2C%20joint.GetUpperLimit())%3B%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'Upper%20Limit'%3A%20joint.SetLimits(joint.GetLowerLimit()%2C%20joint.GetJointAngle()%20%2B%20val%20*%20toRad)%3B%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20(attr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'Lower%20Limit'%3A%20joint.GetLowerLimit().Set(new%20b2Vec2(val%2C%20val))%3B%20joint.SetLimits()%3B%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'Upper%20Limit'%3A%20joint.GetUpperLimit().Set(new%20b2Vec2(val%2C%20val))%3B%20joint.SetLimits()%3B%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getJointAttr(args)%20%7B%0A%20%20%20%20%20%20var%20attr%20%3D%20args.JOINTATTRREAD%3B%0A%20%20%20%20%20%20var%20jointID%20%3D%20args.JOINTID%3B%0A%0A%20%20%20%20%20%20%2F%2F%20JointAttrRead%3A%20%5B'Angle'%2C'Speed'%2C'Motor%20Torque'%2C%20'Reaction%20Torque'%5D%2C%0A%20%20%20%20%20%20var%20joint%20%3D%20joints%5BjointID%5D%3B%0A%20%20%20%20%20%20if%20(joint)%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20switch%20(attr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Angle'%3A%20return%20joint.GetJointAngle()%20%2F%20toRad%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Speed'%3A%20return%20joint.GetJointSpeed()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Motor%20Torque'%3A%20return%20joint.GetMotorTorque()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Reaction%20Torque'%3A%20return%20joint.GetReactionTorque()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Tension'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20force%20%3D%20joint.GetReactionForce(1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20tension%20%3D%20Math.sqrt(force.x%20*%20force.x%20%2B%20force.y%20*%20force.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!joint.GetBodyA().IsAwake()%20%26%26%20!joint.GetBodyB().IsAwake())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tension%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20Math.floor(tension%20*%20100)%20%2F%2010%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Sliders%20only%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Lower%20Limit'%3A%20return%20joint.GetLowerLimit()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Upper%20Limit'%3A%20return%20joint.GetUpperLimit()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setsimspeed(args)%20%7B%0A%20%20%20%20%20%20simspeed%20%3D%20args.VALUE%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getsimspeed()%20%7B%0A%20%20%20%20%20%20return%20simspeed%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20physoptions(args)%20%7B%0A%20%20%20%20%20%20b2Dworld.SetContinuousPhysics(args.CONPHYS)%3B%0A%20%20%20%20%20%20b2Dworld.SetWarmStarting(args.WARMSTART)%3B%0A%20%20%20%20%20%20positerations%20%3D%20args.POS%3B%0A%20%20%20%20%20%20if%20(positerations%20%3C%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20positerations%20%3D%200.0001%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20veliterations%20%3D%20args.VEL%3B%0A%20%20%20%20%20%20if%20(veliterations%20%3C%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20veliterations%20%3D%200.0001%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20stepSimulation()%20%7B%0A%20%20%20%20%20%20var%20secondsimspeed%20%3D%20Math.abs(simspeed%20%2B%2029)%3B%0A%20%20%20%20%20%20if%20(secondsimspeed%20%3D%3D%200)%20%7B%20secondsimspeed%20%3D%201%20%7D%3B%0A%0A%20%20%20%20%20%20b2Dworld.Step(1%20%2F%20secondsimspeed%2C%20veliterations%2C%20positerations)%3B%0A%20%20%20%20%20%20b2Dworld.ClearForces()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F*%20Incoming%20ugly%20hack%0A%20%20%20*%20(I%20pasted%20the%20whole%20box2D%20lib%20into%20here)%0A%20%20%20%5C%5C%20%0A%20%20%20%20*%20Copyright%20(c)%202006-2007%20Erin%20Catto%20http%3A%2F%2Fwww.gphysics.com%0A%20%20%20%20*%20This%20software%20is%20provided%20'as-is'%2C%20without%20any%20express%20or%20implied%0A%20%20%20%20*%20warranty.%20%20In%20no%20event%20will%20the%20authors%20be%20held%20liable%20for%20any%20damages%0A%20%20%20%20*%20arising%20from%20the%20use%20of%20this%20software.%0A%20%20%20%20*%20Permission%20is%20granted%20to%20anyone%20to%20use%20this%20software%20for%20any%20purpose%2C%0A%20%20%20%20*%20including%20commercial%20applications%2C%20and%20to%20alter%20it%20and%20redistribute%20it%0A%20%20%20%20*%20freely%2C%20subject%20to%20the%20following%20restrictions%3A%0A%20%20%20%20*%201.%20The%20origin%20of%20this%20software%20must%20not%20be%20misrepresented%3B%20you%20must%20not%0A%20%20%20%20*%20claim%20that%20you%20wrote%20the%20original%20software.%20If%20you%20use%20this%20software%0A%20%20%20%20*%20in%20a%20product%2C%20an%20acknowledgment%20in%20the%20product%20documentation%20would%20be%0A%20%20%20%20*%20appreciated%20but%20is%20not%20required.%0A%20%20%20%20*%202.%20Altered%20source%20versions%20must%20be%20plainly%20marked%20as%20such%2C%20and%20must%20not%20be%0A%20%20%20%20*%20misrepresented%20as%20being%20the%20original%20software.%0A%20%20%20%20*%203.%20This%20notice%20may%20not%20be%20removed%20or%20altered%20from%20any%20source%20distribution.%0A%20%20%20%20%7C%20%2F%2F%2F%20https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fbox2d-es6%20(the%20lib%20by%20itself)%0A%20%20%20%20*%2F%2F%2F%20Prepare%20for%2090%25%20of%20this%20extensions%20code%3A%20the%20box2D_es6%20lib.%0A%0A%20%20'use%20strict'%3B%0A%0A%20%20let%20Box2D%20%3D%20%7B%7D%3B%0A%0A%20%20(((a2j%2C%20undefined)%20%3D%3E%20%7B%0A%0A%20%20%20%20a2j.generateCallback%20%3D%20function%20generateCallback(context%2C%20cb)%20%7B%0A%20%20%20%20%20%20return%20function()%20%7B%0A%20%20%20%20%20%20%20%20cb.apply(context%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.NVector%20%3D%20function%20NVector(length)%20%7B%0A%20%20%20%20%20%20if%20(length%20%3D%3D%3D%20undefined)%20length%20%3D%200%3B%0A%20%20%20%20%20%20const%20tmp%20%3D%20new%20Array(length%20%7C%7C%200)%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20length%3B%20%2B%2Bi)%20%7B%20tmp%5Bi%5D%20%3D%200%3B%20%7D%0A%20%20%20%20%20%20return%20tmp%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.is%20%3D%20function%20is(o1%2C%20o2)%20%7B%0A%20%20%20%20%20%20if%20(o1%20%3D%3D%3D%20null)%20return%20false%3B%0A%20%20%20%20%20%20if%20((o2%20instanceof%20Function)%20%26%26%20(o1%20instanceof%20o2))%20return%20true%3B%0A%20%20%20%20%20%20if%20((o1.constructor.__implements%20!%3D%20undefined)%20%26%26%20(o1.constructor.__implements%5Bo2%5D))%20return%20true%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.parseUInt%20%3D%20v%20%3D%3E%20Math.abs(parseInt(v))%3B%0A%20%20%7D))(Box2D)%3B%0A%0A%20%20%2F%2F%20%23TODO%20remove%20assignments%20from%20global%20namespace%0A%20%20const%20Vector%20%3D%20Array%3B%0A%20%20const%20Vector_a2j_Number%20%3D%20Box2D.NVector%3B%0A%20%20%2F%2F%20package%20structure%0A%20%20if%20(typeof%20(Box2D)%20%3D%3D%3D%20'undefined')%20Box2D%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20(Box2D.Collision)%20%3D%3D%3D%20'undefined')%20Box2D.Collision%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20(Box2D.Collision.Shapes)%20%3D%3D%3D%20'undefined')%20Box2D.Collision.Shapes%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20(Box2D.Common)%20%3D%3D%3D%20'undefined')%20Box2D.Common%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20(Box2D.Common.Math)%20%3D%3D%3D%20'undefined')%20Box2D.Common.Math%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20(Box2D.Dynamics)%20%3D%3D%3D%20'undefined')%20Box2D.Dynamics%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20(Box2D.Dynamics.Contacts)%20%3D%3D%3D%20'undefined')%20Box2D.Dynamics.Contacts%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20(Box2D.Dynamics.Controllers)%20%3D%3D%3D%20'undefined')%20Box2D.Dynamics.Controllers%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20(Box2D.Dynamics.Joints)%20%3D%3D%3D%20'undefined')%20Box2D.Dynamics.Joints%20%3D%20%7B%7D%3B%0A%20%20%2F%2F%20pre-definitions%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20Box2D.Collision.IBroadPhase%20%3D%20'Box2D.Collision.IBroadPhase'%3B%0A%0A%20%20%20%20class%20b2AABB%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2AABB.b2AABB.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2AABB()%20%7B%0A%20%20%20%20%20%20%20%20this.lowerBound%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.upperBound%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsValid()%20%7B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20this.upperBound.x%20-%20this.lowerBound.x%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20this.upperBound.y%20-%20this.lowerBound.y%3B%0A%20%20%20%20%20%20%20%20let%20valid%20%3D%20dX%20%3E%3D%200.0%20%26%26%20dY%20%3E%3D%200.0%3B%0A%20%20%20%20%20%20%20%20valid%20%3D%20valid%20%26%26%20this.lowerBound.IsValid()%20%26%26%20this.upperBound.IsValid()%3B%0A%20%20%20%20%20%20%20%20return%20valid%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetCenter()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2((this.lowerBound.x%20%2B%20this.upperBound.x)%20%2F%202%2C%20(this.lowerBound.y%20%2B%20this.upperBound.y)%20%2F%202)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetExtents()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2((this.upperBound.x%20-%20this.lowerBound.x)%20%2F%202%2C%20(this.upperBound.y%20-%20this.lowerBound.y)%20%2F%202)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Contains(aabb)%20%7B%0A%20%20%20%20%20%20%20%20let%20result%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20result%20%3D%20result%20%26%26%20this.lowerBound.x%20%3C%3D%20aabb.lowerBound.x%3B%0A%20%20%20%20%20%20%20%20result%20%3D%20result%20%26%26%20this.lowerBound.y%20%3C%3D%20aabb.lowerBound.y%3B%0A%20%20%20%20%20%20%20%20result%20%3D%20result%20%26%26%20aabb.upperBound.x%20%3C%3D%20this.upperBound.x%3B%0A%20%20%20%20%20%20%20%20result%20%3D%20result%20%26%26%20aabb.upperBound.y%20%3C%3D%20this.upperBound.y%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(output%2C%20input)%20%7B%0A%20%20%20%20%20%20%20%20let%20tmin%20%3D%20(-Number.MAX_VALUE)%3B%0A%20%20%20%20%20%20%20%20let%20tmax%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20const%20pX%20%3D%20input.p1.x%3B%0A%20%20%20%20%20%20%20%20const%20pY%20%3D%20input.p1.y%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20%20%20const%20absDX%20%3D%20Math.abs(dX)%3B%0A%20%20%20%20%20%20%20%20const%20absDY%20%3D%20Math.abs(dY)%3B%0A%20%20%20%20%20%20%20%20const%20normal%20%3D%20output.normal%3B%0A%20%20%20%20%20%20%20%20let%20inv_d%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20t1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20t2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20t3%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20s%20%3D%200%3B%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(absDX%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(pX%20%3C%20this.lowerBound.x%20%7C%7C%20this.upperBound.x%20%3C%20pX)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20inv_d%20%3D%201.0%20%2F%20dX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t1%20%3D%20(this.lowerBound.x%20-%20pX)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t2%20%3D%20(this.upperBound.x%20-%20pX)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20(-1.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20t2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t3%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t1%20%3D%20t2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t2%20%3D%20t3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20tmin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normal.x%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normal.y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tmin%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20tmax%20%3D%20Math.min(tmax%2C%20t2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(tmin%20%3E%20tmax)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(absDY%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(pY%20%3C%20this.lowerBound.y%20%7C%7C%20this.upperBound.y%20%3C%20pY)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20inv_d%20%3D%201.0%20%2F%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t1%20%3D%20(this.lowerBound.y%20-%20pY)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t2%20%3D%20(this.upperBound.y%20-%20pY)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20(-1.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20t2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t3%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t1%20%3D%20t2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t2%20%3D%20t3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20tmin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normal.y%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normal.x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tmin%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20tmax%20%3D%20Math.min(tmax%2C%20t2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(tmin%20%3E%20tmax)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20output.fraction%20%3D%20tmin%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20TestOverlap(other)%20%7B%0A%20%20%20%20%20%20%20%20const%20d1X%20%3D%20other.lowerBound.x%20-%20this.upperBound.x%3B%0A%20%20%20%20%20%20%20%20const%20d1Y%20%3D%20other.lowerBound.y%20-%20this.upperBound.y%3B%0A%20%20%20%20%20%20%20%20const%20d2X%20%3D%20this.lowerBound.x%20-%20other.upperBound.x%3B%0A%20%20%20%20%20%20%20%20const%20d2Y%20%3D%20this.lowerBound.y%20-%20other.upperBound.y%3B%0A%20%20%20%20%20%20%20%20if%20(d1X%20%3E%200.0%20%7C%7C%20d1Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20%20%20if%20(d2X%20%3E%200.0%20%7C%7C%20d2Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Combine(aabb1%2C%20aabb2)%20%7B%0A%20%20%20%20%20%20%20%20this.lowerBound.x%20%3D%20Math.min(aabb1.lowerBound.x%2C%20aabb2.lowerBound.x)%3B%0A%20%20%20%20%20%20%20%20this.lowerBound.y%20%3D%20Math.min(aabb1.lowerBound.y%2C%20aabb2.lowerBound.y)%3B%0A%20%20%20%20%20%20%20%20this.upperBound.x%20%3D%20Math.max(aabb1.upperBound.x%2C%20aabb2.upperBound.x)%3B%0A%20%20%20%20%20%20%20%20this.upperBound.y%20%3D%20Math.max(aabb1.upperBound.y%2C%20aabb2.upperBound.y)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2AABB%20%3D%20b2AABB%3B%0A%0A%20%20%20%20class%20b2Bound%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Bound.b2Bound.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsLower()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.value%20%26%201)%20%3D%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsUpper()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.value%20%26%201)%20%3D%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Swap(b)%20%7B%0A%20%20%20%20%20%20%20%20const%20tempValue%20%3D%20this.value%3B%0A%20%20%20%20%20%20%20%20const%20tempProxy%20%3D%20this.proxy%3B%0A%20%20%20%20%20%20%20%20const%20tempStabbingCount%20%3D%20this.stabbingCount%3B%0A%20%20%20%20%20%20%20%20this.value%20%3D%20b.value%3B%0A%20%20%20%20%20%20%20%20this.proxy%20%3D%20b.proxy%3B%0A%20%20%20%20%20%20%20%20this.stabbingCount%20%3D%20b.stabbingCount%3B%0A%20%20%20%20%20%20%20%20b.value%20%3D%20tempValue%3B%0A%20%20%20%20%20%20%20%20b.proxy%20%3D%20tempProxy%3B%0A%20%20%20%20%20%20%20%20b.stabbingCount%20%3D%20tempStabbingCount%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2Bound%20%3D%20b2Bound%3B%0A%0A%20%20%20%20class%20b2BoundValues%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2BoundValues.b2BoundValues.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2BoundValues)%20this.b2BoundValues.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2BoundValues()%20%7B%0A%20%20%20%20%20%20%20%20this.lowerValues%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20%20%20this.lowerValues%5B0%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.lowerValues%5B1%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.upperValues%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20%20%20this.upperValues%5B0%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.upperValues%5B1%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2BoundValues%20%3D%20b2BoundValues%3B%0A%0A%20%20%20%20function%20b2Collision()%20%7B%0A%20%20%20%20%20%20b2Collision.b2Collision.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Collision%20%3D%20b2Collision%3B%0A%0A%20%20%20%20class%20b2ContactID%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactID.b2ContactID.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactID)%20this.b2ContactID.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ContactID()%20%7B%0A%20%20%20%20%20%20%20%20this.features%20%3D%20new%20Features()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2ContactID()%20%7B%0A%20%20%20%20%20%20%20%20this.features._m_id%20%3D%20this%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(id)%20%7B%0A%20%20%20%20%20%20%20%20this.key%20%3D%20id._key%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%20%20%20%20id.key%20%3D%20this.key%3B%0A%20%20%20%20%20%20%20%20return%20id%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20get%20key()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._key%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20set%20key(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._key%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this.features._referenceEdge%20%3D%20this._key%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._incidentEdge%20%3D%20((this._key%20%26%200x0000ff00)%20%3E%3E%208)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._incidentVertex%20%3D%20((this._key%20%26%200x00ff0000)%20%3E%3E%2016)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._flip%20%3D%20((this._key%20%26%200xff000000)%20%3E%3E%2024)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2ContactID%20%3D%20b2ContactID%3B%0A%0A%20%20%20%20class%20b2ContactPoint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactPoint.b2ContactPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ContactPoint()%20%7B%0A%20%20%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.velocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2ContactPoint%20%3D%20b2ContactPoint%3B%0A%0A%20%20%20%20function%20b2Distance()%20%7B%0A%20%20%20%20%20%20b2Distance.b2Distance.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Distance%20%3D%20b2Distance%3B%0A%0A%20%20%20%20function%20b2DistanceInput()%20%7B%0A%20%20%20%20%20%20b2DistanceInput.b2DistanceInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DistanceInput%20%3D%20b2DistanceInput%3B%0A%0A%20%20%20%20class%20b2DistanceOutput%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2DistanceOutput.b2DistanceOutput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2DistanceOutput()%20%7B%0A%20%20%20%20%20%20%20%20this.pointA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.pointB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2DistanceOutput%20%3D%20b2DistanceOutput%3B%0A%0A%20%20%20%20class%20b2DistanceProxy%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2DistanceProxy.b2DistanceProxy.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(shape)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(shape.GetType())%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Shape.e_circleShape%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20circle%20%3D%20(shape%20instanceof%20b2CircleShape%20%3F%20shape%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector(1%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%5B0%5D%20%3D%20circle.m_p%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_radius%20%3D%20circle.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Shape.e_polygonShape%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20polygon%20%3D%20(shape%20instanceof%20b2PolygonShape%20%3F%20shape%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%20%3D%20polygon.m_vertices%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%20polygon.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_radius%20%3D%20polygon.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetSupport(d)%20%7B%0A%20%20%20%20%20%20%20%20let%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20bestIndex%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetSupportVertex(d)%20%7B%0A%20%20%20%20%20%20%20%20let%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20this.m_vertices%5BbestIndex%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetVertexCount()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_count%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetVertex(index)%20%7B%0A%20%20%20%20%20%20%20%20if%20(index%20%3D%3D%3D%20undefined)%20index%20%3D%200%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(index%20%3E%3D%200%20%26%26%20index%20%3C%20this.m_count)%3B%0A%20%20%20%20%20%20%20%20return%20this.m_vertices%5Bindex%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2DistanceProxy%20%3D%20b2DistanceProxy%3B%0A%0A%20%20%20%20class%20b2DynamicTree%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2DynamicTree.b2DynamicTree.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DynamicTree)%20this.b2DynamicTree.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2DynamicTree()%20%7B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_freeList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_path%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_insertionCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CreateProxy(aabb%2C%20userData)%20%7B%0A%20%20%20%20%20%20%20%20const%20node%20%3D%20this.AllocateNode()%3B%0A%20%20%20%20%20%20%20%20const%20extendX%20%3D%20b2Settings.b2_aabbExtension%3B%0A%20%20%20%20%20%20%20%20const%20extendY%20%3D%20b2Settings.b2_aabbExtension%3B%0A%20%20%20%20%20%20%20%20node.aabb.lowerBound.x%20%3D%20aabb.lowerBound.x%20-%20extendX%3B%0A%20%20%20%20%20%20%20%20node.aabb.lowerBound.y%20%3D%20aabb.lowerBound.y%20-%20extendY%3B%0A%20%20%20%20%20%20%20%20node.aabb.upperBound.x%20%3D%20aabb.upperBound.x%20%2B%20extendX%3B%0A%20%20%20%20%20%20%20%20node.aabb.upperBound.y%20%3D%20aabb.upperBound.y%20%2B%20extendY%3B%0A%20%20%20%20%20%20%20%20node.userData%20%3D%20userData%3B%0A%20%20%20%20%20%20%20%20this.InsertLeaf(node)%3B%0A%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DestroyProxy(proxy)%20%7B%0A%20%20%20%20%20%20%20%20this.RemoveLeaf(proxy)%3B%0A%20%20%20%20%20%20%20%20this.FreeNode(proxy)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20MoveProxy(proxy%2C%20aabb%2C%20displacement)%20%7B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(proxy.IsLeaf())%3B%0A%20%20%20%20%20%20%20%20if%20(proxy.aabb.Contains(aabb))%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.RemoveLeaf(proxy)%3B%0A%20%20%20%20%20%20%20%20const%20extendX%20%3D%20b2Settings.b2_aabbExtension%20%2B%20b2Settings.b2_aabbMultiplier%20*%20(displacement.x%20%3E%200%20%3F%20displacement.x%20%3A%20(-displacement.x))%3B%0A%20%20%20%20%20%20%20%20const%20extendY%20%3D%20b2Settings.b2_aabbExtension%20%2B%20b2Settings.b2_aabbMultiplier%20*%20(displacement.y%20%3E%200%20%3F%20displacement.y%20%3A%20(-displacement.y))%3B%0A%20%20%20%20%20%20%20%20proxy.aabb.lowerBound.x%20%3D%20aabb.lowerBound.x%20-%20extendX%3B%0A%20%20%20%20%20%20%20%20proxy.aabb.lowerBound.y%20%3D%20aabb.lowerBound.y%20-%20extendY%3B%0A%20%20%20%20%20%20%20%20proxy.aabb.upperBound.x%20%3D%20aabb.upperBound.x%20%2B%20extendX%3B%0A%20%20%20%20%20%20%20%20proxy.aabb.upperBound.y%20%3D%20aabb.upperBound.y%20%2B%20extendY%3B%0A%20%20%20%20%20%20%20%20this.InsertLeaf(proxy)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Rebalance(iterations)%20%7B%0A%20%20%20%20%20%20%20%20if%20(iterations%20%3D%3D%3D%20undefined)%20iterations%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20node%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20%20%20%20%20let%20bit%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20while%20(node.IsLeaf()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20(this.m_path%20%3E%3E%20bit)%20%26%201%20%3F%20node.child2%20%3A%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bit%20%3D%20(bit%20%2B%201)%20%26%2031%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2B%2Bthis.m_path%3B%0A%20%20%20%20%20%20%20%20%20%20this.RemoveLeaf(node)%3B%0A%20%20%20%20%20%20%20%20%20%20this.InsertLeaf(node)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFatAABB(proxy)%20%7B%0A%20%20%20%20%20%20%20%20return%20proxy.aabb%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetUserData(proxy)%20%7B%0A%20%20%20%20%20%20%20%20return%20proxy.userData%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Query(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%20%20const%20stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20let%20count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20%20%20while%20(count%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20node%20%3D%20stack%5B--count%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(node.aabb.TestOverlap(aabb))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(node.IsLeaf())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20proceed%20%3D%20callback(node)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!proceed)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(callback%2C%20input)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%20%20const%20p1%20%3D%20input.p1%3B%0A%20%20%20%20%20%20%20%20const%20p2%20%3D%20input.p2%3B%0A%20%20%20%20%20%20%20%20const%20r%20%3D%20b2Math.SubtractVV(p1%2C%20p2)%3B%0A%20%20%20%20%20%20%20%20r.Normalize()%3B%0A%20%20%20%20%20%20%20%20const%20v%20%3D%20b2Math.CrossFV(1.0%2C%20r)%3B%0A%20%20%20%20%20%20%20%20const%20abs_v%20%3D%20b2Math.AbsV(v)%3B%0A%20%20%20%20%20%20%20%20let%20maxFraction%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20%20%20const%20segmentAABB%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tY%20%3D%200%3B%20%7B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20p1.x%20%2B%20maxFraction%20*%20(p2.x%20-%20p1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20tY%20%3D%20p1.y%20%2B%20maxFraction%20*%20(p2.y%20-%20p1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20segmentAABB.lowerBound.x%20%3D%20Math.min(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20%20%20segmentAABB.lowerBound.y%20%3D%20Math.min(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20segmentAABB.upperBound.x%20%3D%20Math.max(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20%20%20segmentAABB.upperBound.y%20%3D%20Math.max(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20let%20count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20%20%20while%20(count%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20node%20%3D%20stack%5B--count%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(node.aabb.TestOverlap(segmentAABB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20c%20%3D%20node.aabb.GetCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20h%20%3D%20node.aabb.GetExtents()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20separation%20%3D%20Math.abs(v.x%20*%20(p1.x%20-%20c.x)%20%2B%20v.y%20*%20(p1.y%20-%20c.y))%20-%20abs_v.x%20*%20h.x%20-%20abs_v.y%20*%20h.y%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(separation%20%3E%200.0)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(node.IsLeaf())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20subInput%20%3D%20new%20b2RayCastInput()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20subInput.p1%20%3D%20input.p1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20subInput.p2%20%3D%20input.p2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20subInput.maxFraction%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxFraction%20%3D%20callback(subInput%2C%20node)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(maxFraction%20%3D%3D%200.0)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(maxFraction%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tX%20%3D%20p1.x%20%2B%20maxFraction%20*%20(p2.x%20-%20p1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tY%20%3D%20p1.y%20%2B%20maxFraction%20*%20(p2.y%20-%20p1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.lowerBound.x%20%3D%20Math.min(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.lowerBound.y%20%3D%20Math.min(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.upperBound.x%20%3D%20Math.max(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.upperBound.y%20%3D%20Math.max(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AllocateNode()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_freeList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20node%20%3D%20this.m_freeList%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_freeList%20%3D%20node.parent%3B%0A%20%20%20%20%20%20%20%20%20%20node.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20node.child1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20node.child2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20new%20b2DynamicTreeNode()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20FreeNode(node)%20%7B%0A%20%20%20%20%20%20%20%20node.parent%20%3D%20this.m_freeList%3B%0A%20%20%20%20%20%20%20%20this.m_freeList%20%3D%20node%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InsertLeaf(leaf)%20%7B%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_insertionCount%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_root%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_root.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20center%20%3D%20leaf.aabb.GetCenter()%3B%0A%20%20%20%20%20%20%20%20let%20sibling%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20%20%20if%20(sibling.IsLeaf()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20child1%20%3D%20sibling.child1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20child2%20%3D%20sibling.child2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20norm1%20%3D%20Math.abs((child1.aabb.lowerBound.x%20%2B%20child1.aabb.upperBound.x)%20%2F%202%20-%20center.x)%20%2B%20Math.abs((child1.aabb.lowerBound.y%20%2B%20child1.aabb.upperBound.y)%20%2F%202%20-%20center.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20norm2%20%3D%20Math.abs((child2.aabb.lowerBound.x%20%2B%20child2.aabb.upperBound.x)%20%2F%202%20-%20center.x)%20%2B%20Math.abs((child2.aabb.lowerBound.y%20%2B%20child2.aabb.upperBound.y)%20%2F%202%20-%20center.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(norm1%20%3C%20norm2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20child1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20child2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20while%20(sibling.IsLeaf()%20%3D%3D%20false)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20node1%20%3D%20sibling.parent%3B%0A%20%20%20%20%20%20%20%20let%20node2%20%3D%20this.AllocateNode()%3B%0A%20%20%20%20%20%20%20%20node2.parent%20%3D%20node1%3B%0A%20%20%20%20%20%20%20%20node2.userData%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20node2.aabb.Combine(leaf.aabb%2C%20sibling.aabb)%3B%0A%20%20%20%20%20%20%20%20if%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(sibling.parent.child1%20%3D%3D%20sibling)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node1.child1%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node1.child2%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20node2.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%20%20node2.child2%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%20%20leaf.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(node1.aabb.Contains(node2.aabb))%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node1.aabb.Combine(node1.child1.aabb%2C%20node1.child2.aabb)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node2%20%3D%20node1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node1%20%3D%20node1.parent%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20while%20(node1)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node2.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%20%20node2.child2%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%20%20leaf.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_root%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RemoveLeaf(leaf)%20%7B%0A%20%20%20%20%20%20%20%20if%20(leaf%20%3D%3D%20this.m_root)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_root%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20node2%20%3D%20leaf.parent%3B%0A%20%20%20%20%20%20%20%20let%20node1%20%3D%20node2.parent%3B%0A%20%20%20%20%20%20%20%20let%20sibling%3B%0A%20%20%20%20%20%20%20%20if%20(node2.child1%20%3D%3D%20leaf)%20%7B%0A%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20node2.child2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20node2.child1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(node1.child1%20%3D%3D%20node2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node1.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node1.child2%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node1%3B%0A%20%20%20%20%20%20%20%20%20%20this.FreeNode(node2)%3B%0A%20%20%20%20%20%20%20%20%20%20while%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20oldAABB%20%3D%20node1.aabb%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node1.aabb%20%3D%20b2AABB.Combine(node1.child1.aabb%2C%20node1.child2.aabb)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(oldAABB.Contains(node1.aabb))%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node1%20%3D%20node1.parent%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_root%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%20%20sibling.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20this.FreeNode(node2)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2DynamicTree%20%3D%20b2DynamicTree%3B%0A%0A%20%20%20%20class%20b2DynamicTreeBroadPhase%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2DynamicTreeBroadPhase.b2DynamicTreeBroadPhase.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2DynamicTreeBroadPhase()%20%7B%0A%20%20%20%20%20%20%20%20this.m_tree%20%3D%20new%20b2DynamicTree()%3B%0A%20%20%20%20%20%20%20%20this.m_moveBuffer%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20this.m_pairBuffer%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20this.m_pairCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CreateProxy(aabb%2C%20userData)%20%7B%0A%20%20%20%20%20%20%20%20const%20proxy%20%3D%20this.m_tree.CreateProxy(aabb%2C%20userData)%3B%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_proxyCount%3B%0A%20%20%20%20%20%20%20%20this.BufferMove(proxy)%3B%0A%20%20%20%20%20%20%20%20return%20proxy%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DestroyProxy(proxy)%20%7B%0A%20%20%20%20%20%20%20%20this.UnBufferMove(proxy)%3B%0A%20%20%20%20%20%20%20%20--this.m_proxyCount%3B%0A%20%20%20%20%20%20%20%20this.m_tree.DestroyProxy(proxy)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20MoveProxy(proxy%2C%20aabb%2C%20displacement)%20%7B%0A%20%20%20%20%20%20%20%20const%20buffer%20%3D%20this.m_tree.MoveProxy(proxy%2C%20aabb%2C%20displacement)%3B%0A%20%20%20%20%20%20%20%20if%20(buffer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.BufferMove(proxy)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20TestOverlap(proxyA%2C%20proxyB)%20%7B%0A%20%20%20%20%20%20%20%20const%20aabbA%20%3D%20this.m_tree.GetFatAABB(proxyA)%3B%0A%20%20%20%20%20%20%20%20const%20aabbB%20%3D%20this.m_tree.GetFatAABB(proxyB)%3B%0A%20%20%20%20%20%20%20%20return%20aabbA.TestOverlap(aabbB)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetUserData(proxy)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_tree.GetUserData(proxy)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFatAABB(proxy)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_tree.GetFatAABB(proxy)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetProxyCount()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_proxyCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20UpdatePairs(callback)%20%7B%0A%20%20%20%20%20%20%20%20const%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20__this.m_pairCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20queryProxy%3B%0A%20%20%20%20%20%20%20%20function%20QueryCallback(proxy)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(proxy%20%3D%3D%20queryProxy)%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(__this.m_pairCount%20%3D%3D%20__this.m_pairBuffer.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20__this.m_pairBuffer%5B__this.m_pairCount%5D%20%3D%20new%20b2DynamicTreePair()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20pair%20%3D%20__this.m_pairBuffer%5B__this.m_pairCount%5D%3B%0A%20%20%20%20%20%20%20%20%20%20pair.proxyA%20%3D%20proxy%20%3C%20queryProxy%20%3F%20proxy%20%3A%20queryProxy%3B%0A%20%20%20%20%20%20%20%20%20%20pair.proxyB%20%3D%20proxy%20%3E%3D%20queryProxy%20%3F%20proxy%20%3A%20queryProxy%3B%20%2B%2B__this.m_pairCount%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20__this.m_moveBuffer.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20queryProxy%20%3D%20__this.m_moveBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fatAABB%20%3D%20__this.m_tree.GetFatAABB(queryProxy)%3B%0A%20%20%20%20%20%20%20%20%20%20__this.m_tree.Query(QueryCallback%2C%20fatAABB)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20__this.m_moveBuffer.length%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20__this.m_pairCount%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20primaryPair%20%3D%20__this.m_pairBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20userDataA%20%3D%20__this.m_tree.GetUserData(primaryPair.proxyA)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20userDataB%20%3D%20__this.m_tree.GetUserData(primaryPair.proxyB)%3B%0A%20%20%20%20%20%20%20%20%20%20callback(userDataA%2C%20userDataB)%3B%0A%20%20%20%20%20%20%20%20%20%20%2B%2Bi%3B%0A%20%20%20%20%20%20%20%20%20%20while%20(i%20%3C%20__this.m_pairCount)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20pair%20%3D%20__this.m_pairBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(pair.proxyA%20!%3D%20primaryPair.proxyA%20%7C%7C%20pair.proxyB%20!%3D%20primaryPair.proxyB)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%2B%2Bi%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Query(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20%20%20this.m_tree.Query(callback%2C%20aabb)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(callback%2C%20input)%20%7B%0A%20%20%20%20%20%20%20%20this.m_tree.RayCast(callback%2C%20input)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Validate()%20%7B%20%7D%0A%0A%20%20%20%20%20%20Rebalance(iterations)%20%7B%0A%20%20%20%20%20%20%20%20if%20(iterations%20%3D%3D%3D%20undefined)%20iterations%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_tree.Rebalance(iterations)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20BufferMove(proxy)%20%7B%0A%20%20%20%20%20%20%20%20this.m_moveBuffer%5Bthis.m_moveBuffer.length%5D%20%3D%20proxy%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20UnBufferMove(proxy)%20%7B%0A%20%20%20%20%20%20%20%20const%20i%20%3D%20parseInt(this.m_moveBuffer.indexOf(proxy))%3B%0A%20%20%20%20%20%20%20%20this.m_moveBuffer.splice(i%2C%201)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComparePairs(pair1%2C%20pair2)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2DynamicTreeBroadPhase%20%3D%20b2DynamicTreeBroadPhase%3B%0A%0A%20%20%20%20class%20b2DynamicTreeNode%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2DynamicTreeNode.b2DynamicTreeNode.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2DynamicTreeNode()%20%7B%0A%20%20%20%20%20%20%20%20this.aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsLeaf()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.child1%20%3D%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2DynamicTreeNode%20%3D%20b2DynamicTreeNode%3B%0A%0A%20%20%20%20function%20b2DynamicTreePair()%20%7B%0A%20%20%20%20%20%20b2DynamicTreePair.b2DynamicTreePair.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTreePair%20%3D%20b2DynamicTreePair%3B%0A%0A%20%20%20%20class%20b2Manifold%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Manifold.b2Manifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Manifold)%20this.b2Manifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Manifold()%20%7B%0A%20%20%20%20%20%20%20%20this.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Manifold()%20%7B%0A%20%20%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2ManifoldPoint()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_localPlaneNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Reset()%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20((this.m_points%5Bi%5D%20instanceof%20b2ManifoldPoint%20%3F%20this.m_points%5Bi%5D%20%3A%20null)).Reset()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_localPlaneNormal.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(m)%20%7B%0A%20%20%20%20%20%20%20%20this.m_pointCount%20%3D%20m.m_pointCount%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20((this.m_points%5Bi%5D%20instanceof%20b2ManifoldPoint%20%3F%20this.m_points%5Bi%5D%20%3A%20null)).Set(m.m_points%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_localPlaneNormal.SetV(m.m_localPlaneNormal)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.SetV(m.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20m.m_type%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20const%20copy%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%20%20%20%20copy.Set(this)%3B%0A%20%20%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2Manifold%20%3D%20b2Manifold%3B%0A%0A%20%20%20%20class%20b2ManifoldPoint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ManifoldPoint.b2ManifoldPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ManifoldPoint)%20this.b2ManifoldPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ManifoldPoint()%20%7B%0A%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2ManifoldPoint()%20%7B%0A%20%20%20%20%20%20%20%20this.Reset()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Reset()%20%7B%0A%20%20%20%20%20%20%20%20this.m_localPoint.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(m)%20%7B%0A%20%20%20%20%20%20%20%20this.m_localPoint.SetV(m.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20this.m_normalImpulse%20%3D%20m.m_normalImpulse%3B%0A%20%20%20%20%20%20%20%20this.m_tangentImpulse%20%3D%20m.m_tangentImpulse%3B%0A%20%20%20%20%20%20%20%20this.m_id.Set(m.m_id)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2ManifoldPoint%20%3D%20b2ManifoldPoint%3B%0A%0A%20%20%20%20class%20b2Point%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Point.b2Point.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Point()%20%7B%0A%20%20%20%20%20%20%20%20this.p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Support(xf%2C%20vX%2C%20vY)%20%7B%0A%20%20%20%20%20%20%20%20if%20(vX%20%3D%3D%3D%20undefined)%20vX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(vY%20%3D%3D%3D%20undefined)%20vY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20this.p%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFirstVertex(xf)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.p%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2Point%20%3D%20b2Point%3B%0A%0A%20%20%20%20class%20b2RayCastInput%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2RayCastInput.b2RayCastInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RayCastInput)%20this.b2RayCastInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2RayCastInput()%20%7B%0A%20%20%20%20%20%20%20%20this.p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2RayCastInput(p1%2C%20p2%2C%20maxFraction)%20%7B%0A%20%20%20%20%20%20%20%20if%20(p1%20%3D%3D%3D%20undefined)%20p1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(p2%20%3D%3D%3D%20undefined)%20p2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(maxFraction%20%3D%3D%3D%20undefined)%20maxFraction%20%3D%201%3B%0A%20%20%20%20%20%20%20%20if%20(p1)%20this.p1.SetV(p1)%3B%0A%20%20%20%20%20%20%20%20if%20(p2)%20this.p2.SetV(p2)%3B%0A%20%20%20%20%20%20%20%20this.maxFraction%20%3D%20maxFraction%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2RayCastInput%20%3D%20b2RayCastInput%3B%0A%0A%20%20%20%20class%20b2RayCastOutput%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2RayCastOutput.b2RayCastOutput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2RayCastOutput()%20%7B%0A%20%20%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2RayCastOutput%20%3D%20b2RayCastOutput%3B%0A%0A%20%20%20%20class%20b2Segment%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Segment.b2Segment.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Segment()%20%7B%0A%20%20%20%20%20%20%20%20this.p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20TestSegment(lambda%2C%20normal%2C%20segment%2C%20maxLambda)%20%7B%0A%20%20%20%20%20%20%20%20if%20(maxLambda%20%3D%3D%3D%20undefined)%20maxLambda%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20segment.p1%3B%0A%20%20%20%20%20%20%20%20const%20rX%20%3D%20segment.p2.x%20-%20s.x%3B%0A%20%20%20%20%20%20%20%20const%20rY%20%3D%20segment.p2.y%20-%20s.y%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20this.p2.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20this.p2.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20%20%20let%20nX%20%3D%20dY%3B%0A%20%20%20%20%20%20%20%20let%20nY%20%3D%20(-dX)%3B%0A%20%20%20%20%20%20%20%20const%20k_slop%20%3D%20100.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%20%20%20%20const%20denom%20%3D%20(-(rX%20*%20nX%20%2B%20rY%20*%20nY))%3B%0A%20%20%20%20%20%20%20%20if%20(denom%20%3E%20k_slop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20bX%20%3D%20s.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bY%20%3D%20s.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20%20%20%20%20let%20a%20%3D%20(bX%20*%20nX%20%2B%20bY%20*%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(a%20%3E%3D%200.0%20%26%26%20a%20%3C%3D%20maxLambda%20*%20denom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20mu2%20%3D%20(-rX%20*%20bY)%20%2B%20rY%20*%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20((-k_slop%20*%20denom)%20%3C%3D%20mu2%20%26%26%20mu2%20%3C%3D%20denom%20*%20(1.0%20%2B%20k_slop))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%20%2F%3D%20denom%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20nLen%20%3D%20Math.sqrt(nX%20*%20nX%20%2B%20nY%20*%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20nX%20%2F%3D%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20nY%20%2F%3D%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20lambda%5B0%5D%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normal.Set(nX%2C%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Extend(aabb)%20%7B%0A%20%20%20%20%20%20%20%20this.ExtendForward(aabb)%3B%0A%20%20%20%20%20%20%20%20this.ExtendBackward(aabb)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ExtendForward(aabb)%20%7B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20this.p2.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20this.p2.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20%20%20const%20lambda%20%3D%20Math.min(dX%20%3E%200%20%3F%20(aabb.upperBound.x%20-%20this.p1.x)%20%2F%20dX%20%3A%20dX%20%3C%200%20%3F%20(aabb.lowerBound.x%20-%20this.p1.x)%20%2F%20dX%20%3A%20Number.POSITIVE_INFINITY%2C%0A%20%20%20%20%20%20%20%20%20%20dY%20%3E%200%20%3F%20(aabb.upperBound.y%20-%20this.p1.y)%20%2F%20dY%20%3A%20dY%20%3C%200%20%3F%20(aabb.lowerBound.y%20-%20this.p1.y)%20%2F%20dY%20%3A%20Number.POSITIVE_INFINITY)%3B%0A%20%20%20%20%20%20%20%20this.p2.x%20%3D%20this.p1.x%20%2B%20dX%20*%20lambda%3B%0A%20%20%20%20%20%20%20%20this.p2.y%20%3D%20this.p1.y%20%2B%20dY%20*%20lambda%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ExtendBackward(aabb)%20%7B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20(-this.p2.x)%20%2B%20this.p1.x%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20(-this.p2.y)%20%2B%20this.p1.y%3B%0A%20%20%20%20%20%20%20%20const%20lambda%20%3D%20Math.min(dX%20%3E%200%20%3F%20(aabb.upperBound.x%20-%20this.p2.x)%20%2F%20dX%20%3A%20dX%20%3C%200%20%3F%20(aabb.lowerBound.x%20-%20this.p2.x)%20%2F%20dX%20%3A%20Number.POSITIVE_INFINITY%2C%0A%20%20%20%20%20%20%20%20%20%20dY%20%3E%200%20%3F%20(aabb.upperBound.y%20-%20this.p2.y)%20%2F%20dY%20%3A%20dY%20%3C%200%20%3F%20(aabb.lowerBound.y%20-%20this.p2.y)%20%2F%20dY%20%3A%20Number.POSITIVE_INFINITY)%3B%0A%20%20%20%20%20%20%20%20this.p1.x%20%3D%20this.p2.x%20%2B%20dX%20*%20lambda%3B%0A%20%20%20%20%20%20%20%20this.p1.y%20%3D%20this.p2.y%20%2B%20dY%20*%20lambda%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2Segment%20%3D%20b2Segment%3B%0A%0A%20%20%20%20class%20b2SeparationFunction%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2SeparationFunction.b2SeparationFunction.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2SeparationFunction()%20%7B%0A%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(cache%2C%20proxyA%2C%20transformA%2C%20proxyB%2C%20transformB)%20%7B%0A%20%20%20%20%20%20%20%20this.m_proxyA%20%3D%20proxyA%3B%0A%20%20%20%20%20%20%20%20this.m_proxyB%20%3D%20proxyB%3B%0A%20%20%20%20%20%20%20%20const%20count%20%3D%20parseInt(cache.count)%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(count%20%3E%200%20%26%26%20count%20%3C%203)%3B%0A%20%20%20%20%20%20%20%20let%20localPointA%3B%0A%20%20%20%20%20%20%20%20let%20localPointA1%3B%0A%20%20%20%20%20%20%20%20let%20localPointA2%3B%0A%20%20%20%20%20%20%20%20let%20localPointB%3B%0A%20%20%20%20%20%20%20%20let%20localPointB1%3B%0A%20%20%20%20%20%20%20%20let%20localPointB2%3B%0A%20%20%20%20%20%20%20%20let%20pointAX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20pointAY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20pointBX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20pointBY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20normalX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20normalY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20let%20s%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20sgn%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(count%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_points%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(cache.indexB%5B0%5D%20%3D%3D%20cache.indexB%5B1%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceA%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA1%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA2%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localPoint.x%20%3D%200.5%20*%20(localPointA1.x%20%2B%20localPointA2.x)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localPoint.y%20%3D%200.5%20*%20(localPointA1.y%20%2B%20localPointA2.y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(localPointA2%2C%20localPointA1)%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20(pointBX%20-%20pointAX)%20*%20normalX%20%2B%20(pointBY%20-%20pointAY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(cache.indexA%5B0%5D%20%3D%3D%20cache.indexA%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceB%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB1%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB2%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localPoint.x%20%3D%200.5%20*%20(localPointB1.x%20%2B%20localPointB2.x)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localPoint.y%20%3D%200.5%20*%20(localPointB1.y%20%2B%20localPointB2.y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(localPointB2%2C%20localPointB1)%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20(pointAX%20-%20pointBX)%20*%20normalX%20%2B%20(pointAY%20-%20pointBY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20localPointA1%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA2%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB1%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB2%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20pA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dA%20%3D%20b2Math.MulMV(transformA.R%2C%20b2Math.SubtractVV(localPointA2%2C%20localPointA1))%3B%0A%20%20%20%20%20%20%20%20%20%20const%20pB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dB%20%3D%20b2Math.MulMV(transformB.R%2C%20b2Math.SubtractVV(localPointB2%2C%20localPointB1))%3B%0A%20%20%20%20%20%20%20%20%20%20const%20a%20%3D%20dA.x%20*%20dA.x%20%2B%20dA.y%20*%20dA.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20e%20%3D%20dB.x%20*%20dB.x%20%2B%20dB.y%20*%20dB.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20r%20%3D%20b2Math.SubtractVV(dB%2C%20dA)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20c%20%3D%20dA.x%20*%20r.x%20%2B%20dA.y%20*%20r.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20f%20%3D%20dB.x%20*%20r.x%20%2B%20dB.y%20*%20r.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20b%20%3D%20dA.x%20*%20dB.x%20%2B%20dA.y%20*%20dB.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20denom%20%3D%20a%20*%20e%20-%20b%20*%20b%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(denom%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20b2Math.Clamp((b%20*%20f%20-%20c%20*%20e)%20%2F%20denom%2C%200.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20let%20t%20%3D%20(b%20*%20s%20%2B%20f)%20%2F%20e%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(t%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20t%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20b2Math.Clamp((b%20-%20c)%20%2F%20a%2C%200.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA.x%20%3D%20localPointA1.x%20%2B%20s%20*%20(localPointA2.x%20-%20localPointA1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA.y%20%3D%20localPointA1.y%20%2B%20s%20*%20(localPointA2.y%20-%20localPointA1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB.x%20%3D%20localPointB1.x%20%2B%20s%20*%20(localPointB2.x%20-%20localPointB1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB.y%20%3D%20localPointB1.y%20%2B%20s%20*%20(localPointB2.y%20-%20localPointB1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(s%20%3D%3D%200.0%20%7C%7C%20s%20%3D%3D%201.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(localPointB2%2C%20localPointB1)%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sgn%20%3D%20(pointAX%20-%20pointBX)%20*%20normalX%20%2B%20(pointAY%20-%20pointBY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceA%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(localPointA2%2C%20localPointA1)%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sgn%20%3D%20(pointBX%20-%20pointAX)%20*%20normalX%20%2B%20(pointBY%20-%20pointAY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Evaluate(transformA%2C%20transformB)%20%7B%0A%20%20%20%20%20%20%20%20let%20axisA%3B%0A%20%20%20%20%20%20%20%20let%20axisB%3B%0A%20%20%20%20%20%20%20%20let%20localPointA%3B%0A%20%20%20%20%20%20%20%20let%20localPointB%3B%0A%20%20%20%20%20%20%20%20let%20pointA%3B%0A%20%20%20%20%20%20%20%20let%20pointB%3B%0A%20%20%20%20%20%20%20%20let%20seperation%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20normal%3B%0A%20%20%20%20%20%20%20%20switch%20(this.m_type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_points%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axisA%20%3D%20b2Math.MulTMV(transformA.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axisB%20%3D%20b2Math.MulTMV(transformB.R%2C%20this.m_axis.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetSupportVertex(axisA)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetSupportVertex(axisB)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20seperation%20%3D%20(pointB.x%20-%20pointA.x)%20*%20this.m_axis.x%20%2B%20(pointB.y%20-%20pointA.y)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_faceA%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normal%20%3D%20b2Math.MulMV(transformA.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20this.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axisB%20%3D%20b2Math.MulTMV(transformB.R%2C%20normal.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetSupportVertex(axisB)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20seperation%20%3D%20(pointB.x%20-%20pointA.x)%20*%20normal.x%20%2B%20(pointB.y%20-%20pointA.y)%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_faceB%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normal%20%3D%20b2Math.MulMV(transformB.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20this.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20axisA%20%3D%20b2Math.MulTMV(transformA.R%2C%20normal.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetSupportVertex(axisA)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20seperation%20%3D%20(pointA.x%20-%20pointB.x)%20*%20normal.x%20%2B%20(pointA.y%20-%20pointB.y)%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2SeparationFunction%20%3D%20b2SeparationFunction%3B%0A%0A%20%20%20%20class%20b2Simplex%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Simplex.b2Simplex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Simplex)%20this.b2Simplex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Simplex()%20%7B%0A%20%20%20%20%20%20%20%20this.m_v1%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20%20%20this.m_v2%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20%20%20this.m_v3%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector(3)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Simplex()%20%7B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B0%5D%20%3D%20this.m_v1%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B1%5D%20%3D%20this.m_v2%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B2%5D%20%3D%20this.m_v3%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ReadCache(cache%2C%20proxyA%2C%20transformA%2C%20proxyB%2C%20transformB)%20%7B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(cache.count%20%3E%3D%200%20%26%26%20cache.count%20%3C%3D%203)%3B%0A%20%20%20%20%20%20%20%20let%20wALocal%3B%0A%20%20%20%20%20%20%20%20let%20wBLocal%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%20cache.count%3B%0A%20%20%20%20%20%20%20%20const%20vertices%20%3D%20this.m_vertices%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20v%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20v.indexA%20%3D%20cache.indexA%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20v.indexB%20%3D%20cache.indexB%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20wALocal%20%3D%20proxyA.GetVertex(v.indexA)%3B%0A%20%20%20%20%20%20%20%20%20%20wBLocal%20%3D%20proxyB.GetVertex(v.indexB)%3B%0A%20%20%20%20%20%20%20%20%20%20v.wA%20%3D%20b2Math.MulX(transformA%2C%20wALocal)%3B%0A%20%20%20%20%20%20%20%20%20%20v.wB%20%3D%20b2Math.MulX(transformB%2C%20wBLocal)%3B%0A%20%20%20%20%20%20%20%20%20%20v.w%20%3D%20b2Math.SubtractVV(v.wB%2C%20v.wA)%3B%0A%20%20%20%20%20%20%20%20%20%20v.a%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_count%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20metric1%20%3D%20cache.metric%3B%0A%20%20%20%20%20%20%20%20%20%20const%20metric2%20%3D%20this.GetMetric()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(metric2%20%3C%200.5%20*%20metric1%20%7C%7C%202.0%20*%20metric1%20%3C%20metric2%20%7C%7C%20metric2%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_count%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20v%20%3D%20vertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20v.indexA%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20v.indexB%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20wALocal%20%3D%20proxyA.GetVertex(0)%3B%0A%20%20%20%20%20%20%20%20%20%20wBLocal%20%3D%20proxyB.GetVertex(0)%3B%0A%20%20%20%20%20%20%20%20%20%20v.wA%20%3D%20b2Math.MulX(transformA%2C%20wALocal)%3B%0A%20%20%20%20%20%20%20%20%20%20v.wB%20%3D%20b2Math.MulX(transformB%2C%20wBLocal)%3B%0A%20%20%20%20%20%20%20%20%20%20v.w%20%3D%20b2Math.SubtractVV(v.wB%2C%20v.wA)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20WriteCache(cache)%20%7B%0A%20%20%20%20%20%20%20%20cache.metric%20%3D%20this.GetMetric()%3B%0A%20%20%20%20%20%20%20%20cache.count%20%3D%20Box2D.parseUInt(this.m_count)%3B%0A%20%20%20%20%20%20%20%20const%20vertices%20%3D%20this.m_vertices%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20cache.indexA%5Bi%5D%20%3D%20Box2D.parseUInt(vertices%5Bi%5D.indexA)%3B%0A%20%20%20%20%20%20%20%20%20%20cache.indexB%5Bi%5D%20%3D%20Box2D.parseUInt(vertices%5Bi%5D.indexB)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetSearchDirection()%20%7B%0A%20%20%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.m_v1.w.GetNegative()%3B%0A%20%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20e12%20%3D%20b2Math.SubtractVV(this.m_v2.w%2C%20this.m_v1.w)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20sgn%20%3D%20b2Math.CrossVV(e12%2C%20this.m_v1.w.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(sgn%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossFV(1.0%2C%20e12)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossVF(e12%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetClosestPoint()%20%7B%0A%20%20%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.m_v1.w%3B%0A%20%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2(this.m_v1.a%20*%20this.m_v1.w.x%20%2B%20this.m_v2.a%20*%20this.m_v2.w.x%2C%20this.m_v1.a%20*%20this.m_v1.w.y%20%2B%20this.m_v2.a%20*%20this.m_v2.w.y)%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetWitnessPoints(pA%2C%20pB)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20pA.SetV(this.m_v1.wA)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pB.SetV(this.m_v1.wB)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20pA.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pA.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pB.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wB.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wB.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pB.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wB.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wB.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20pB.x%20%3D%20pA.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.x%20%2B%20this.m_v3.a%20*%20this.m_v3.wA.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pB.y%20%3D%20pA.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.y%20%2B%20this.m_v3.a%20*%20this.m_v3.wA.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMetric()%20%7B%0A%20%20%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b2Math.SubtractVV(this.m_v1.w%2C%20this.m_v2.w).Length()%3B%0A%20%20%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossVV(b2Math.SubtractVV(this.m_v2.w%2C%20this.m_v1.w)%2C%20b2Math.SubtractVV(this.m_v3.w%2C%20this.m_v1.w))%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Solve2()%20%7B%0A%20%20%20%20%20%20%20%20const%20w1%20%3D%20this.m_v1.w%3B%0A%20%20%20%20%20%20%20%20const%20w2%20%3D%20this.m_v2.w%3B%0A%20%20%20%20%20%20%20%20const%20e12%20%3D%20b2Math.SubtractVV(w2%2C%20w1)%3B%0A%20%20%20%20%20%20%20%20const%20d12_2%20%3D%20(-(w1.x%20*%20e12.x%20%2B%20w1.y%20*%20e12.y))%3B%0A%20%20%20%20%20%20%20%20if%20(d12_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20d12_1%20%3D%20(w2.x%20*%20e12.x%20%2B%20w2.y%20*%20e12.y)%3B%0A%20%20%20%20%20%20%20%20if%20(d12_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v2)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20inv_d12%20%3D%201.0%20%2F%20(d12_1%20%2B%20d12_2)%3B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%20d12_1%20*%20inv_d12%3B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%20d12_2%20*%20inv_d12%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Solve3()%20%7B%0A%20%20%20%20%20%20%20%20const%20w1%20%3D%20this.m_v1.w%3B%0A%20%20%20%20%20%20%20%20const%20w2%20%3D%20this.m_v2.w%3B%0A%20%20%20%20%20%20%20%20const%20w3%20%3D%20this.m_v3.w%3B%0A%20%20%20%20%20%20%20%20const%20e12%20%3D%20b2Math.SubtractVV(w2%2C%20w1)%3B%0A%20%20%20%20%20%20%20%20const%20w1e12%20%3D%20b2Math.Dot(w1%2C%20e12)%3B%0A%20%20%20%20%20%20%20%20const%20w2e12%20%3D%20b2Math.Dot(w2%2C%20e12)%3B%0A%20%20%20%20%20%20%20%20const%20d12_1%20%3D%20w2e12%3B%0A%20%20%20%20%20%20%20%20const%20d12_2%20%3D%20(-w1e12)%3B%0A%20%20%20%20%20%20%20%20const%20e13%20%3D%20b2Math.SubtractVV(w3%2C%20w1)%3B%0A%20%20%20%20%20%20%20%20const%20w1e13%20%3D%20b2Math.Dot(w1%2C%20e13)%3B%0A%20%20%20%20%20%20%20%20const%20w3e13%20%3D%20b2Math.Dot(w3%2C%20e13)%3B%0A%20%20%20%20%20%20%20%20const%20d13_1%20%3D%20w3e13%3B%0A%20%20%20%20%20%20%20%20const%20d13_2%20%3D%20(-w1e13)%3B%0A%20%20%20%20%20%20%20%20const%20e23%20%3D%20b2Math.SubtractVV(w3%2C%20w2)%3B%0A%20%20%20%20%20%20%20%20const%20w2e23%20%3D%20b2Math.Dot(w2%2C%20e23)%3B%0A%20%20%20%20%20%20%20%20const%20w3e23%20%3D%20b2Math.Dot(w3%2C%20e23)%3B%0A%20%20%20%20%20%20%20%20const%20d23_1%20%3D%20w3e23%3B%0A%20%20%20%20%20%20%20%20const%20d23_2%20%3D%20(-w2e23)%3B%0A%20%20%20%20%20%20%20%20const%20n123%20%3D%20b2Math.CrossVV(e12%2C%20e13)%3B%0A%20%20%20%20%20%20%20%20const%20d123_1%20%3D%20n123%20*%20b2Math.CrossVV(w2%2C%20w3)%3B%0A%20%20%20%20%20%20%20%20const%20d123_2%20%3D%20n123%20*%20b2Math.CrossVV(w3%2C%20w1)%3B%0A%20%20%20%20%20%20%20%20const%20d123_3%20%3D%20n123%20*%20b2Math.CrossVV(w1%2C%20w2)%3B%0A%20%20%20%20%20%20%20%20if%20(d12_2%20%3C%3D%200.0%20%26%26%20d13_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(d12_1%20%3E%200.0%20%26%26%20d12_2%20%3E%200.0%20%26%26%20d123_3%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20inv_d12%20%3D%201.0%20%2F%20(d12_1%20%2B%20d12_2)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%20d12_1%20*%20inv_d12%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%20d12_2%20*%20inv_d12%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(d13_1%20%3E%200.0%20%26%26%20d13_2%20%3E%200.0%20%26%26%20d123_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20inv_d13%20%3D%201.0%20%2F%20(d13_1%20%2B%20d13_2)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%20d13_1%20*%20inv_d13%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%20d13_2%20*%20inv_d13%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(d12_1%20%3C%3D%200.0%20%26%26%20d23_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v2)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(d13_1%20%3C%3D%200.0%20%26%26%20d23_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(d23_1%20%3E%200.0%20%26%26%20d23_2%20%3E%200.0%20%26%26%20d123_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20inv_d23%20%3D%201.0%20%2F%20(d23_1%20%2B%20d23_2)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%20d23_1%20*%20inv_d23%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%20d23_2%20*%20inv_d23%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20inv_d123%20%3D%201.0%20%2F%20(d123_1%20%2B%20d123_2%20%2B%20d123_3)%3B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%20d123_1%20*%20inv_d123%3B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%20d123_2%20*%20inv_d123%3B%0A%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%20d123_3%20*%20inv_d123%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%203%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2Simplex%20%3D%20b2Simplex%3B%0A%0A%20%20%20%20class%20b2SimplexCache%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2SimplexCache.b2SimplexCache.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2SimplexCache()%20%7B%0A%20%20%20%20%20%20%20%20this.indexA%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%20%20%20%20this.indexB%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2SimplexCache%20%3D%20b2SimplexCache%3B%0A%0A%20%20%20%20class%20b2SimplexVertex%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2SimplexVertex.b2SimplexVertex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(other)%20%7B%0A%20%20%20%20%20%20%20%20this.wA.SetV(other.wA)%3B%0A%20%20%20%20%20%20%20%20this.wB.SetV(other.wB)%3B%0A%20%20%20%20%20%20%20%20this.w.SetV(other.w)%3B%0A%20%20%20%20%20%20%20%20this.a%20%3D%20other.a%3B%0A%20%20%20%20%20%20%20%20this.indexA%20%3D%20other.indexA%3B%0A%20%20%20%20%20%20%20%20this.indexB%20%3D%20other.indexB%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2SimplexVertex%20%3D%20b2SimplexVertex%3B%0A%0A%20%20%20%20function%20b2TimeOfImpact()%20%7B%0A%20%20%20%20%20%20b2TimeOfImpact.b2TimeOfImpact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2TimeOfImpact%20%3D%20b2TimeOfImpact%3B%0A%0A%20%20%20%20class%20b2TOIInput%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2TOIInput.b2TOIInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2TOIInput()%20%7B%0A%20%20%20%20%20%20%20%20this.proxyA%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20%20%20this.proxyB%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20%20%20this.sweepA%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20%20%20this.sweepB%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2TOIInput%20%3D%20b2TOIInput%3B%0A%0A%20%20%20%20class%20b2WorldManifold%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2WorldManifold.b2WorldManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WorldManifold)%20this.b2WorldManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2WorldManifold()%20%7B%0A%20%20%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2WorldManifold()%20%7B%0A%20%20%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(manifold%2C%20xfA%2C%20radiusA%2C%20xfB%2C%20radiusB)%20%7B%0A%20%20%20%20%20%20%20%20if%20(radiusA%20%3D%3D%3D%20undefined)%20radiusA%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(radiusB%20%3D%3D%3D%20undefined)%20radiusB%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(manifold.m_pointCount%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20normalX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20normalY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20planePointX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20planePointY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20clipPointX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20clipPointY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20switch%20(manifold.m_type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Manifold.e_circles%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pointAX%20%3D%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pointAY%20%3D%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5B0%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pointBX%20%3D%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pointBY%20%3D%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20dX%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20dY%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20d2%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(d2%20%3E%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20d%20%3D%20Math.sqrt(d2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20dX%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20dY%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20cAX%20%3D%20pointAX%20%2B%20radiusA%20*%20this.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20cAY%20%3D%20pointAY%20%2B%20radiusA%20*%20this.m_normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20cBX%20%3D%20pointBX%20-%20radiusB%20*%20this.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20cBY%20%3D%20pointBY%20-%20radiusB%20*%20this.m_normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.x%20%3D%200.5%20*%20(cAX%20%2B%20cBX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.y%20%3D%200.5%20*%20(cAY%20%2B%20cBY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceA%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20manifold.m_pointCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5Bi%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%20clipPointX%20%2B%200.5%20*%20(radiusA%20-%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%20radiusB)%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%20clipPointY%20%2B%200.5%20*%20(radiusA%20-%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%20radiusB)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceB%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20(-normalX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20(-normalY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20manifold.m_pointCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5Bi%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%20clipPointX%20%2B%200.5%20*%20(radiusB%20-%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%20radiusA)%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%20clipPointY%20%2B%200.5%20*%20(radiusB%20-%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%20radiusA)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.b2WorldManifold%20%3D%20b2WorldManifold%3B%0A%0A%20%20%20%20class%20ClipVertex%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20ClipVertex.ClipVertex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20ClipVertex()%20%7B%0A%20%20%20%20%20%20%20%20this.v%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(other)%20%7B%0A%20%20%20%20%20%20%20%20this.v.SetV(other.v)%3B%0A%20%20%20%20%20%20%20%20this.id.Set(other.id)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.ClipVertex%20%3D%20ClipVertex%3B%0A%0A%20%20%20%20class%20Features%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20Features.Features.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20get%20referenceEdge()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._referenceEdge%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20set%20referenceEdge(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._referenceEdge%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%20(this._m_id._key%20%26%200xffffff00)%20%7C%20(this._referenceEdge%20%26%200x000000ff)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20get%20incidentEdge()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._incidentEdge%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20set%20incidentEdge(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._incidentEdge%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%20(this._m_id._key%20%26%200xffff00ff)%20%7C%20((this._incidentEdge%20%3C%3C%208)%20%26%200x0000ff00)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20get%20incidentVertex()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._incidentVertex%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20set%20incidentVertex(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._incidentVertex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%20(this._m_id._key%20%26%200xff00ffff)%20%7C%20((this._incidentVertex%20%3C%3C%2016)%20%26%200x00ff0000)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20get%20flip()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._flip%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20set%20flip(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._flip%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%20(this._m_id._key%20%26%200x00ffffff)%20%7C%20((this._flip%20%3C%3C%2024)%20%26%200xff000000)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.Features%20%3D%20Features%3B%0A%0A%20%20%20%20class%20b2Shape%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Shape)%20this.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(other)%20%7B%0A%20%20%20%20%20%20%20%20this.m_radius%20%3D%20other.m_radius%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetType()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20TestPoint(xf%2C%20p)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeAABB(aabb%2C%20xf)%20%7B%20%7D%0A%0A%20%20%20%20%20%20ComputeMass(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeSubmergedArea(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%20%20%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Shape()%20%7B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_unknownShape%3B%0A%20%20%20%20%20%20%20%20this.m_radius%20%3D%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.Shapes.b2Shape%20%3D%20b2Shape%3B%0A%20%20%20%20Box2D.Common.b2internal%20%3D%20'Box2D.Common.b2internal'%3B%0A%0A%20%20%20%20class%20b2CircleShape%20extends%20b2Shape%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2CircleShape.b2CircleShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2CircleShape)%20this.b2CircleShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2CircleShape()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.m_p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20new%20b2CircleShape()%3B%0A%20%20%20%20%20%20%20%20s.Set(this)%3B%0A%20%20%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(other)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.Set.call(this%2C%20other)%3B%0A%20%20%20%20%20%20%20%20if%20(Box2D.is(other%2C%20b2CircleShape))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20other2%20%3D%20(other%20instanceof%20b2CircleShape%20%3F%20other%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_p.SetV(other2.m_p)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20TestPoint(transform%2C%20p)%20%7B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20let%20dX%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20%20%20let%20dY%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20%20%20dX%20%3D%20p.x%20-%20dX%3B%0A%20%20%20%20%20%20%20%20dY%20%3D%20p.y%20-%20dY%3B%0A%20%20%20%20%20%20%20%20return%20(dX%20*%20dX%20%2B%20dY%20*%20dY)%20%3C%3D%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20const%20positionX%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20%20%20const%20positionY%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20%20%20const%20sX%20%3D%20input.p1.x%20-%20positionX%3B%0A%20%20%20%20%20%20%20%20const%20sY%20%3D%20input.p1.y%20-%20positionY%3B%0A%20%20%20%20%20%20%20%20const%20b%20%3D%20(sX%20*%20sX%20%2B%20sY%20*%20sY)%20-%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20%20%20const%20rX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20%20%20const%20rY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20%20%20const%20c%20%3D%20(sX%20*%20rX%20%2B%20sY%20*%20rY)%3B%0A%20%20%20%20%20%20%20%20const%20rr%20%3D%20(rX%20*%20rX%20%2B%20rY%20*%20rY)%3B%0A%20%20%20%20%20%20%20%20const%20sigma%20%3D%20c%20*%20c%20-%20rr%20*%20b%3B%0A%20%20%20%20%20%20%20%20if%20(sigma%20%3C%200.0%20%7C%7C%20rr%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20a%20%3D%20(-(c%20%2B%20Math.sqrt(sigma)))%3B%0A%20%20%20%20%20%20%20%20if%20(a%20%3E%3D%200.0%20%26%26%20a%20%3C%3D%20input.maxFraction%20*%20rr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20a%20%2F%3D%20rr%3B%0A%20%20%20%20%20%20%20%20%20%20output.fraction%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20%20%20output.normal.x%20%3D%20sX%20%2B%20a%20*%20rX%3B%0A%20%20%20%20%20%20%20%20%20%20output.normal.y%20%3D%20sY%20%2B%20a%20*%20rY%3B%0A%20%20%20%20%20%20%20%20%20%20output.normal.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeAABB(aabb%2C%20transform)%20%7B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20const%20pX%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20%20%20const%20pY%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.Set(pX%20-%20this.m_radius%2C%20pY%20-%20this.m_radius)%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.Set(pX%20%2B%20this.m_radius%2C%20pY%20%2B%20this.m_radius)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeMass(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20%20%20massData.mass%20%3D%20density%20*%20b2Settings.b2_pi%20*%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20%20%20massData.center.SetV(this.m_p)%3B%0A%20%20%20%20%20%20%20%20massData.I%20%3D%20massData.mass%20*%20(0.5%20*%20this.m_radius%20*%20this.m_radius%20%2B%20(this.m_p.x%20*%20this.m_p.x%20%2B%20this.m_p.y%20*%20this.m_p.y))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeSubmergedArea(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%20%20%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20p%20%3D%20b2Math.MulX(xf%2C%20this.m_p)%3B%0A%20%20%20%20%20%20%20%20const%20l%20%3D%20(-(b2Math.Dot(normal%2C%20p)%20-%20offset))%3B%0A%20%20%20%20%20%20%20%20if%20(l%20%3C%20(-this.m_radius)%20%2B%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(l%20%3E%20this.m_radius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.SetV(p)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20Math.PI%20*%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20r2%20%3D%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20%20%20const%20l2%20%3D%20l%20*%20l%3B%0A%20%20%20%20%20%20%20%20const%20area%20%3D%20r2%20*%20(Math.asin(l%20%2F%20this.m_radius)%20%2B%20Math.PI%20%2F%202)%20%2B%20l%20*%20Math.sqrt(r2%20-%20l2)%3B%0A%20%20%20%20%20%20%20%20const%20com%20%3D%20(-2%20%2F%203%20*%20Math.pow(r2%20-%20l2%2C%201.5)%20%2F%20area)%3B%0A%20%20%20%20%20%20%20%20c.x%20%3D%20p.x%20%2B%20normal.x%20*%20com%3B%0A%20%20%20%20%20%20%20%20c.y%20%3D%20p.y%20%2B%20normal.y%20*%20com%3B%0A%20%20%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLocalPosition()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_p%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetLocalPosition(position)%20%7B%0A%20%20%20%20%20%20%20%20this.m_p.SetV(position)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetRadius()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_radius%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetRadius(radius)%20%7B%0A%20%20%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_radius%20%3D%20radius%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2CircleShape(radius)%20%7B%0A%20%20%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_circleShape%3B%0A%20%20%20%20%20%20%20%20this.m_radius%20%3D%20radius%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.Shapes.b2CircleShape%20%3D%20b2CircleShape%3B%0A%0A%20%20%20%20class%20b2EdgeChainDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2EdgeChainDef.b2EdgeChainDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2EdgeChainDef)%20this.b2EdgeChainDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2EdgeChainDef()%20%7B%0A%20%20%20%20%20%20%20%20this.vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.isALoop%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.vertices%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.Shapes.b2EdgeChainDef%20%3D%20b2EdgeChainDef%3B%0A%0A%20%20%20%20class%20b2EdgeShape%20extends%20b2Shape%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2EdgeShape.b2EdgeShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2EdgeShape)%20this.b2EdgeShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2EdgeShape()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.s_supportVec%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_v1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_v2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_coreV1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_coreV2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_direction%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_cornerDir1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_cornerDir2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20TestPoint(transform%2C%20p)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20rX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20%20%20const%20rY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20const%20v1X%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_v1.x%20%2B%20tMat.col2.x%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20%20%20const%20v1Y%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_v1.x%20%2B%20tMat.col2.y%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20%20%20const%20nX%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_v2.x%20%2B%20tMat.col2.y%20*%20this.m_v2.y)%20-%20v1Y%3B%0A%20%20%20%20%20%20%20%20const%20nY%20%3D%20(-(transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_v2.x%20%2B%20tMat.col2.x%20*%20this.m_v2.y)%20-%20v1X))%3B%0A%20%20%20%20%20%20%20%20const%20k_slop%20%3D%20100.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%20%20%20%20const%20denom%20%3D%20(-(rX%20*%20nX%20%2B%20rY%20*%20nY))%3B%0A%20%20%20%20%20%20%20%20if%20(denom%20%3E%20k_slop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20bX%20%3D%20input.p1.x%20-%20v1X%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bY%20%3D%20input.p1.y%20-%20v1Y%3B%0A%20%20%20%20%20%20%20%20%20%20let%20a%20%3D%20(bX%20*%20nX%20%2B%20bY%20*%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(a%20%3E%3D%200.0%20%26%26%20a%20%3C%3D%20input.maxFraction%20*%20denom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20mu2%20%3D%20(-rX%20*%20bY)%20%2B%20rY%20*%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20((-k_slop%20*%20denom)%20%3C%3D%20mu2%20%26%26%20mu2%20%3C%3D%20denom%20*%20(1.0%20%2B%20k_slop))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%20%2F%3D%20denom%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20output.fraction%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20nLen%20%3D%20Math.sqrt(nX%20*%20nX%20%2B%20nY%20*%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20output.normal.x%20%3D%20nX%20%2F%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20output.normal.y%20%3D%20nY%20%2F%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeAABB(aabb%2C%20transform)%20%7B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20const%20v1X%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_v1.x%20%2B%20tMat.col2.x%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20%20%20const%20v1Y%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_v1.x%20%2B%20tMat.col2.y%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20%20%20const%20v2X%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_v2.x%20%2B%20tMat.col2.x%20*%20this.m_v2.y)%3B%0A%20%20%20%20%20%20%20%20const%20v2Y%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_v2.x%20%2B%20tMat.col2.y%20*%20this.m_v2.y)%3B%0A%20%20%20%20%20%20%20%20if%20(v1X%20%3C%20v2X)%20%7B%0A%20%20%20%20%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%20%20%20%20aabb.upperBound.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%20%20%20%20aabb.upperBound.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(v1Y%20%3C%20v2Y)%20%7B%0A%20%20%20%20%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%20%20%20%20aabb.upperBound.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%20%20%20%20aabb.upperBound.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeMass(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20%20%20massData.mass%20%3D%200%3B%0A%20%20%20%20%20%20%20%20massData.center.SetV(this.m_v1)%3B%0A%20%20%20%20%20%20%20%20massData.I%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeSubmergedArea(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%20%20%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20v0%20%3D%20new%20b2Vec2(normal.x%20*%20offset%2C%20normal.y%20*%20offset)%3B%0A%20%20%20%20%20%20%20%20const%20v1%20%3D%20b2Math.MulX(xf%2C%20this.m_v1)%3B%0A%20%20%20%20%20%20%20%20const%20v2%20%3D%20b2Math.MulX(xf%2C%20this.m_v2)%3B%0A%20%20%20%20%20%20%20%20const%20d1%20%3D%20b2Math.Dot(normal%2C%20v1)%20-%20offset%3B%0A%20%20%20%20%20%20%20%20const%20d2%20%3D%20b2Math.Dot(normal%2C%20v2)%20-%20offset%3B%0A%20%20%20%20%20%20%20%20if%20(d1%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(d2%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20v1.x%20%3D%20(-d2%20%2F%20(d1%20-%20d2)%20*%20v1.x)%20%2B%20d1%20%2F%20(d1%20-%20d2)%20*%20v2.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20v1.y%20%3D%20(-d2%20%2F%20(d1%20-%20d2)%20*%20v1.y)%20%2B%20d1%20%2F%20(d1%20-%20d2)%20*%20v2.y%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(d2%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20v2.x%20%3D%20(-d2%20%2F%20(d1%20-%20d2)%20*%20v1.x)%20%2B%20d1%20%2F%20(d1%20-%20d2)%20*%20v2.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20v2.y%20%3D%20(-d2%20%2F%20(d1%20-%20d2)%20*%20v1.y)%20%2B%20d1%20%2F%20(d1%20-%20d2)%20*%20v2.y%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20c.x%20%3D%20(v0.x%20%2B%20v1.x%20%2B%20v2.x)%20%2F%203%3B%0A%20%20%20%20%20%20%20%20c.y%20%3D%20(v0.y%20%2B%20v1.y%20%2B%20v2.y)%20%2F%203%3B%0A%20%20%20%20%20%20%20%20return%200.5%20*%20((v1.x%20-%20v0.x)%20*%20(v2.y%20-%20v0.y)%20-%20(v1.y%20-%20v0.y)%20*%20(v2.x%20-%20v0.x))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLength()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_length%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetVertex1()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_v1%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetVertex2()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_v2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetCoreVertex1()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_coreV1%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetCoreVertex2()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_coreV2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNormalVector()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_normal%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetDirectionVector()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_direction%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetCorner1Vector()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_cornerDir1%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetCorner2Vector()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_cornerDir2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Corner1IsConvex()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_cornerConvex1%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Corner2IsConvex()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_cornerConvex2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFirstVertex(xf)%20%7B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(xf.position.x%20%2B%20(tMat.col1.x%20*%20this.m_coreV1.x%20%2B%20tMat.col2.x%20*%20this.m_coreV1.y)%2C%20xf.position.y%20%2B%20(tMat.col1.y%20*%20this.m_coreV1.x%20%2B%20tMat.col2.y%20*%20this.m_coreV1.y))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNextEdge()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_nextEdge%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetPrevEdge()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_prevEdge%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Support(xf%2C%20dX%2C%20dY)%20%7B%0A%20%20%20%20%20%20%20%20if%20(dX%20%3D%3D%3D%20undefined)%20dX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(dY%20%3D%3D%3D%20undefined)%20dY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20%20%20const%20v1X%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20this.m_coreV1.x%20%2B%20tMat.col2.x%20*%20this.m_coreV1.y)%3B%0A%20%20%20%20%20%20%20%20const%20v1Y%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20this.m_coreV1.x%20%2B%20tMat.col2.y%20*%20this.m_coreV1.y)%3B%0A%20%20%20%20%20%20%20%20const%20v2X%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20this.m_coreV2.x%20%2B%20tMat.col2.x%20*%20this.m_coreV2.y)%3B%0A%20%20%20%20%20%20%20%20const%20v2Y%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20this.m_coreV2.x%20%2B%20tMat.col2.y%20*%20this.m_coreV2.y)%3B%0A%20%20%20%20%20%20%20%20if%20((v1X%20*%20dX%20%2B%20v1Y%20*%20dY)%20%3E%20(v2X%20*%20dX%20%2B%20v2Y%20*%20dY))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.s_supportVec.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%20%20%20%20this.s_supportVec.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.s_supportVec.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%20%20%20%20this.s_supportVec.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20this.s_supportVec%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2EdgeShape(v1%2C%20v2)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_edgeShape%3B%0A%20%20%20%20%20%20%20%20this.m_prevEdge%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nextEdge%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_v1%20%3D%20v1%3B%0A%20%20%20%20%20%20%20%20this.m_v2%20%3D%20v2%3B%0A%20%20%20%20%20%20%20%20this.m_direction.Set(this.m_v2.x%20-%20this.m_v1.x%2C%20this.m_v2.y%20-%20this.m_v1.y)%3B%0A%20%20%20%20%20%20%20%20this.m_length%20%3D%20this.m_direction.Normalize()%3B%0A%20%20%20%20%20%20%20%20this.m_normal.Set(this.m_direction.y%2C%20(-this.m_direction.x))%3B%0A%20%20%20%20%20%20%20%20this.m_coreV1.Set((-b2Settings.b2_toiSlop%20*%20(this.m_normal.x%20-%20this.m_direction.x))%20%2B%20this.m_v1.x%2C%20(-b2Settings.b2_toiSlop%20*%20(this.m_normal.y%20-%20this.m_direction.y))%20%2B%20this.m_v1.y)%3B%0A%20%20%20%20%20%20%20%20this.m_coreV2.Set((-b2Settings.b2_toiSlop%20*%20(this.m_normal.x%20%2B%20this.m_direction.x))%20%2B%20this.m_v2.x%2C%20(-b2Settings.b2_toiSlop%20*%20(this.m_normal.y%20%2B%20this.m_direction.y))%20%2B%20this.m_v2.y)%3B%0A%20%20%20%20%20%20%20%20this.m_cornerDir1%20%3D%20this.m_normal%3B%0A%20%20%20%20%20%20%20%20this.m_cornerDir2.Set((-this.m_normal.x)%2C%20(-this.m_normal.y))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetPrevEdge(edge%2C%20core%2C%20cornerDir%2C%20convex)%20%7B%0A%20%20%20%20%20%20%20%20this.m_prevEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20this.m_coreV1%20%3D%20core%3B%0A%20%20%20%20%20%20%20%20this.m_cornerDir1%20%3D%20cornerDir%3B%0A%20%20%20%20%20%20%20%20this.m_cornerConvex1%20%3D%20convex%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetNextEdge(edge%2C%20core%2C%20cornerDir%2C%20convex)%20%7B%0A%20%20%20%20%20%20%20%20this.m_nextEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20this.m_coreV2%20%3D%20core%3B%0A%20%20%20%20%20%20%20%20this.m_cornerDir2%20%3D%20cornerDir%3B%0A%20%20%20%20%20%20%20%20this.m_cornerConvex2%20%3D%20convex%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.Shapes.b2EdgeShape%20%3D%20b2EdgeShape%3B%0A%0A%20%20%20%20class%20b2MassData%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2MassData.b2MassData.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2MassData()%20%7B%0A%20%20%20%20%20%20%20%20this.mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.center%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%20%20%20%20this.I%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.Shapes.b2MassData%20%3D%20b2MassData%3B%0A%0A%20%20%20%20class%20b2PolygonShape%20extends%20b2Shape%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2PolygonShape.b2PolygonShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PolygonShape)%20this.b2PolygonShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2PolygonShape()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20%20%20s.Set(this)%3B%0A%20%20%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(other)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.Set.call(this%2C%20other)%3B%0A%20%20%20%20%20%20%20%20if%20(Box2D.is(other%2C%20b2PolygonShape))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20other2%20%3D%20(other%20instanceof%20b2PolygonShape%20%3F%20other%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_centroid.SetV(other2.m_centroid)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertexCount%20%3D%20other2.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20%20%20this.Reserve(this.m_vertexCount)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D.SetV(other2.m_vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.SetV(other2.m_normals%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAsArray(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20v%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20vertices.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20v.push(tVec)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.SetAsVector(v%2C%20vertexCount)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAsVector(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%200)%20vertexCount%20%3D%20vertices.length%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(vertexCount%20%3E%3D%202)%3B%0A%20%20%20%20%20%20%20%20this.m_vertexCount%20%3D%20vertexCount%3B%0A%20%20%20%20%20%20%20%20this.Reserve(vertexCount)%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D.SetV(vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20i1%20%3D%20parseInt(i)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20i2%20%3D%20parseInt(i%20%2B%201%20%3C%20this.m_vertexCount%20%3F%20i%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20edge%20%3D%20b2Math.SubtractVV(this.m_vertices%5Bi2%5D%2C%20this.m_vertices%5Bi1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(edge.LengthSquared()%20%3E%20Number.MIN_VALUE)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.SetV(b2Math.CrossVF(edge%2C%201.0))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.Normalize()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_centroid%20%3D%20b2PolygonShape.ComputeCentroid(this.m_vertices%2C%20this.m_vertexCount)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAsBox(hx%2C%20hy)%20%7B%0A%20%20%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_vertexCount%20%3D%204%3B%0A%20%20%20%20%20%20%20%20this.Reserve(4)%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B0%5D.Set((-hx)%2C%20(-hy))%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B1%5D.Set(hx%2C%20(-hy))%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B2%5D.Set(hx%2C%20hy)%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B3%5D.Set((-hx)%2C%20hy)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B0%5D.Set(0.0%2C%20(-1.0))%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B1%5D.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B2%5D.Set(0.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B3%5D.Set((-1.0)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.m_centroid.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAsOrientedBox(hx%2C%20hy%2C%20center%2C%20angle)%20%7B%0A%20%20%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(center%20%3D%3D%3D%20undefined)%20center%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_vertexCount%20%3D%204%3B%0A%20%20%20%20%20%20%20%20this.Reserve(4)%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B0%5D.Set((-hx)%2C%20(-hy))%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B1%5D.Set(hx%2C%20(-hy))%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B2%5D.Set(hx%2C%20hy)%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B3%5D.Set((-hx)%2C%20hy)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B0%5D.Set(0.0%2C%20(-1.0))%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B1%5D.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B2%5D.Set(0.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B3%5D.Set((-1.0)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.m_centroid%20%3D%20center%3B%0A%20%20%20%20%20%20%20%20const%20xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20%20%20xf.position%20%3D%20center%3B%0A%20%20%20%20%20%20%20%20xf.R.Set(angle)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D%20%3D%20b2Math.MulX(xf%2C%20this.m_vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D%20%3D%20b2Math.MulMV(xf.R%2C%20this.m_normals%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAsEdge(v1%2C%20v2)%20%7B%0A%20%20%20%20%20%20%20%20this.m_vertexCount%20%3D%202%3B%0A%20%20%20%20%20%20%20%20this.Reserve(2)%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B0%5D.SetV(v1)%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%5B1%5D.SetV(v2)%3B%0A%20%20%20%20%20%20%20%20this.m_centroid.x%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20%20%20this.m_centroid.y%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B0%5D%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(v2%2C%20v1)%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B0%5D.Normalize()%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B1%5D.x%20%3D%20(-this.m_normals%5B0%5D.x)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5B1%5D.y%20%3D%20(-this.m_normals%5B0%5D.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20TestPoint(xf%2C%20p)%20%7B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%20p.x%20-%20xf.position.x%3B%0A%20%20%20%20%20%20%20%20let%20tY%20%3D%20p.y%20-%20xf.position.y%3B%0A%20%20%20%20%20%20%20%20const%20pLocalX%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%20%20%20%20%20%20%20%20const%20pLocalY%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20pLocalX%20-%20tVec.x%3B%0A%20%20%20%20%20%20%20%20%20%20tY%20%3D%20pLocalY%20-%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dot%20%3D%20(tVec.x%20*%20tX%20%2B%20tVec.y%20*%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(dot%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20%20%20let%20lower%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20upper%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20input.p1.x%20-%20transform.position.x%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20input.p1.y%20-%20transform.position.y%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20const%20p1X%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%20%20%20%20%20%20%20%20const%20p1Y%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20input.p2.x%20-%20transform.position.x%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20input.p2.y%20-%20transform.position.y%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20const%20p2X%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%20%20%20%20%20%20%20%20const%20p2Y%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20let%20index%20%3D%20parseInt((-1))%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20tVec.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20%20%20tY%20%3D%20tVec.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20numerator%20%3D%20(tVec.x%20*%20tX%20%2B%20tVec.y%20*%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20denominator%20%3D%20(tVec.x%20*%20dX%20%2B%20tVec.y%20*%20dY)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(denominator%20%3D%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(numerator%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(denominator%20%3C%200.0%20%26%26%20numerator%20%3C%20lower%20*%20denominator)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20lower%20%3D%20numerator%20%2F%20denominator%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(denominator%20%3E%200.0%20%26%26%20numerator%20%3C%20upper%20*%20denominator)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20upper%20%3D%20numerator%20%2F%20denominator%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(upper%20%3C%20lower%20-%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(index%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20output.fraction%20%3D%20lower%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20%20%20output.normal.x%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20output.normal.y%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeAABB(aabb%2C%20xf)%20%7B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20%20%20let%20tVec%20%3D%20this.m_vertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20let%20lowerX%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20let%20lowerY%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20let%20upperX%20%3D%20lowerX%3B%0A%20%20%20%20%20%20%20%20let%20upperY%20%3D%20lowerY%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20vX%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20vY%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20lowerX%20%3D%20lowerX%20%3C%20vX%20%3F%20lowerX%20%3A%20vX%3B%0A%20%20%20%20%20%20%20%20%20%20lowerY%20%3D%20lowerY%20%3C%20vY%20%3F%20lowerY%20%3A%20vY%3B%0A%20%20%20%20%20%20%20%20%20%20upperX%20%3D%20upperX%20%3E%20vX%20%3F%20upperX%20%3A%20vX%3B%0A%20%20%20%20%20%20%20%20%20%20upperY%20%3D%20upperY%20%3E%20vY%20%3F%20upperY%20%3A%20vY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20lowerX%20-%20this.m_radius%3B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20lowerY%20-%20this.m_radius%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.x%20%3D%20upperX%20%2B%20this.m_radius%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.y%20%3D%20upperY%20%2B%20this.m_radius%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeMass(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_vertexCount%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20massData.center.x%20%3D%200.5%20*%20(this.m_vertices%5B0%5D.x%20%2B%20this.m_vertices%5B1%5D.x)%3B%0A%20%20%20%20%20%20%20%20%20%20massData.center.y%20%3D%200.5%20*%20(this.m_vertices%5B0%5D.y%20%2B%20this.m_vertices%5B1%5D.y)%3B%0A%20%20%20%20%20%20%20%20%20%20massData.mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20massData.I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20centerX%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20centerY%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20const%20p1X%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20const%20p1Y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20const%20k_inv3%20%3D%201.0%20%2F%203.0%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20p2%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20p3%20%3D%20i%20%2B%201%20%3C%20this.m_vertexCount%20%3F%20this.m_vertices%5BparseInt(i%20%2B%201)%5D%20%3A%20this.m_vertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20e1X%20%3D%20p2.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20%20%20const%20e1Y%20%3D%20p2.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20e2X%20%3D%20p3.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20%20%20const%20e2Y%20%3D%20p3.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20D%20%3D%20e1X%20*%20e2Y%20-%20e1Y%20*%20e2X%3B%0A%20%20%20%20%20%20%20%20%20%20const%20triangleArea%20%3D%200.5%20*%20D%3B%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20%20%20centerX%20%2B%3D%20triangleArea%20*%20k_inv3%20*%20(p1X%20%2B%20p2.x%20%2B%20p3.x)%3B%0A%20%20%20%20%20%20%20%20%20%20centerY%20%2B%3D%20triangleArea%20*%20k_inv3%20*%20(p1Y%20%2B%20p2.y%20%2B%20p3.y)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20px%20%3D%20p1X%3B%0A%20%20%20%20%20%20%20%20%20%20const%20py%20%3D%20p1Y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20ex1%20%3D%20e1X%3B%0A%20%20%20%20%20%20%20%20%20%20const%20ey1%20%3D%20e1Y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20ex2%20%3D%20e2X%3B%0A%20%20%20%20%20%20%20%20%20%20const%20ey2%20%3D%20e2Y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20intx2%20%3D%20k_inv3%20*%20(0.25%20*%20(ex1%20*%20ex1%20%2B%20ex2%20*%20ex1%20%2B%20ex2%20*%20ex2)%20%2B%20(px%20*%20ex1%20%2B%20px%20*%20ex2))%20%2B%200.5%20*%20px%20*%20px%3B%0A%20%20%20%20%20%20%20%20%20%20const%20inty2%20%3D%20k_inv3%20*%20(0.25%20*%20(ey1%20*%20ey1%20%2B%20ey2%20*%20ey1%20%2B%20ey2%20*%20ey2)%20%2B%20(py%20*%20ey1%20%2B%20py%20*%20ey2))%20%2B%200.5%20*%20py%20*%20py%3B%20I%20%2B%3D%20D%20*%20(intx2%20%2B%20inty2)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20massData.mass%20%3D%20density%20*%20area%3B%0A%20%20%20%20%20%20%20%20centerX%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20%20%20centerY%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20%20%20massData.center.Set(centerX%2C%20centerY)%3B%0A%20%20%20%20%20%20%20%20massData.I%20%3D%20density%20*%20I%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ComputeSubmergedArea(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%20%20%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20normalL%20%3D%20b2Math.MulTMV(xf.R%2C%20normal)%3B%0A%20%20%20%20%20%20%20%20const%20offsetL%20%3D%20offset%20-%20b2Math.Dot(normal%2C%20xf.position)%3B%0A%20%20%20%20%20%20%20%20const%20depths%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20%20%20let%20diveCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20intoIndex%20%3D%20parseInt((-1))%3B%0A%20%20%20%20%20%20%20%20let%20outoIndex%20%3D%20parseInt((-1))%3B%0A%20%20%20%20%20%20%20%20let%20lastSubmerged%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20depths%5Bi%5D%20%3D%20b2Math.Dot(normalL%2C%20this.m_vertices%5Bi%5D)%20-%20offsetL%3B%0A%20%20%20%20%20%20%20%20%20%20const%20isSubmerged%20%3D%20depths%5Bi%5D%20%3C%20(-Number.MIN_VALUE)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20intoIndex%20%3D%20i%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20diveCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20outoIndex%20%3D%20i%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20diveCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20lastSubmerged%20%3D%20isSubmerged%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20switch%20(diveCount)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20md%20%3D%20new%20b2MassData()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.ComputeMass(md%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20c.SetV(b2Math.MulX(xf%2C%20md.center))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20md.mass%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(intoIndex%20%3D%3D%20(-1))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20intoIndex%20%3D%20this.m_vertexCount%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20outoIndex%20%3D%20this.m_vertexCount%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20intoIndex2%20%3D%20parseInt((intoIndex%20%2B%201)%20%25%20this.m_vertexCount)%3B%0A%20%20%20%20%20%20%20%20const%20outoIndex2%20%3D%20parseInt((outoIndex%20%2B%201)%20%25%20this.m_vertexCount)%3B%0A%20%20%20%20%20%20%20%20const%20intoLamdda%20%3D%20(0%20-%20depths%5BintoIndex%5D)%20%2F%20(depths%5BintoIndex2%5D%20-%20depths%5BintoIndex%5D)%3B%0A%20%20%20%20%20%20%20%20const%20outoLamdda%20%3D%20(0%20-%20depths%5BoutoIndex%5D)%20%2F%20(depths%5BoutoIndex2%5D%20-%20depths%5BoutoIndex%5D)%3B%0A%20%20%20%20%20%20%20%20const%20intoVec%20%3D%20new%20b2Vec2(this.m_vertices%5BintoIndex%5D.x%20*%20(1%20-%20intoLamdda)%20%2B%20this.m_vertices%5BintoIndex2%5D.x%20*%20intoLamdda%2C%20this.m_vertices%5BintoIndex%5D.y%20*%20(1%20-%20intoLamdda)%20%2B%20this.m_vertices%5BintoIndex2%5D.y%20*%20intoLamdda)%3B%0A%20%20%20%20%20%20%20%20const%20outoVec%20%3D%20new%20b2Vec2(this.m_vertices%5BoutoIndex%5D.x%20*%20(1%20-%20outoLamdda)%20%2B%20this.m_vertices%5BoutoIndex2%5D.x%20*%20outoLamdda%2C%20this.m_vertices%5BoutoIndex%5D.y%20*%20(1%20-%20outoLamdda)%20%2B%20this.m_vertices%5BoutoIndex2%5D.y%20*%20outoLamdda)%3B%0A%20%20%20%20%20%20%20%20let%20area%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20center%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20let%20p2%20%3D%20this.m_vertices%5BintoIndex2%5D%3B%0A%20%20%20%20%20%20%20%20let%20p3%3B%0A%20%20%20%20%20%20%20%20i%20%3D%20intoIndex2%3B%0A%20%20%20%20%20%20%20%20while%20(i%20!%3D%20outoIndex2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20i%20%3D%20(i%20%2B%201)%20%25%20this.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20%3D%3D%20outoIndex2)%20p3%20%3D%20outoVec%3B%0A%20%20%20%20%20%20%20%20%20%20else%20p3%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20triangleArea%20%3D%200.5%20*%20((p2.x%20-%20intoVec.x)%20*%20(p3.y%20-%20intoVec.y)%20-%20(p2.y%20-%20intoVec.y)%20*%20(p3.x%20-%20intoVec.x))%3B%0A%20%20%20%20%20%20%20%20%20%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20%20%20center.x%20%2B%3D%20triangleArea%20*%20(intoVec.x%20%2B%20p2.x%20%2B%20p3.x)%20%2F%203%3B%0A%20%20%20%20%20%20%20%20%20%20center.y%20%2B%3D%20triangleArea%20*%20(intoVec.y%20%2B%20p2.y%20%2B%20p3.y)%20%2F%203%3B%0A%20%20%20%20%20%20%20%20%20%20p2%20%3D%20p3%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20center.Multiply(1%20%2F%20area)%3B%0A%20%20%20%20%20%20%20%20c.SetV(b2Math.MulX(xf%2C%20center))%3B%0A%20%20%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetVertexCount()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_vertexCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetVertices()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_vertices%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNormals()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_normals%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetSupport(d)%20%7B%0A%20%20%20%20%20%20%20%20let%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20bestIndex%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetSupportVertex(d)%20%7B%0A%20%20%20%20%20%20%20%20let%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20this.m_vertices%5BbestIndex%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Validate()%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2PolygonShape()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_polygonShape%3B%0A%20%20%20%20%20%20%20%20this.m_centroid%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20this.m_normals%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Reserve(count)%20%7B%0A%20%20%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20parseInt(this.m_vertices.length)%3B%20i%20%3C%20count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Collision.Shapes.b2PolygonShape%20%3D%20b2PolygonShape%3B%0A%20%20%20%20class%20b2Color%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Color.b2Color.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Color)%20this.b2Color.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Color()%20%7B%0A%20%20%20%20%20%20%20%20this._r%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._g%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._b%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Color(rr%2C%20gg%2C%20bb)%20%7B%0A%20%20%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(rr%2C%20gg%2C%20bb)%20%7B%0A%20%20%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20set%20r(rr)%20%7B%0A%20%20%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20set%20g(gg)%20%7B%0A%20%20%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20set%20b(bb)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20get%20color()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this._r%20%3C%3C%2016)%20%7C%20(this._g%20%3C%3C%208)%20%7C%20(this._b)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Common.b2Color%20%3D%20b2Color%3B%0A%0A%20%20%20%20function%20b2Settings()%20%7B%0A%20%20%20%20%20%20b2Settings.b2Settings.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.b2Settings%20%3D%20b2Settings%3B%0A%0A%20%20%20%20class%20b2Mat22%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Mat22.b2Mat22.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Mat22)%20this.b2Mat22.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Mat22()%20%7B%0A%20%20%20%20%20%20%20%20this.col1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.col2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Mat22()%20%7B%0A%20%20%20%20%20%20%20%20this.SetIdentity()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(angle)%20%7B%0A%20%20%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20c%20%3D%20Math.cos(angle)%3B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20Math.sin(angle)%3B%0A%20%20%20%20%20%20%20%20this.col1.x%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20this.col2.x%20%3D%20(-s)%3B%0A%20%20%20%20%20%20%20%20this.col1.y%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20this.col2.y%20%3D%20c%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetVV(c1%2C%20c2)%20%7B%0A%20%20%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20const%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20mat.SetM(this)%3B%0A%20%20%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetM(m)%20%7B%0A%20%20%20%20%20%20%20%20this.col1.SetV(m.col1)%3B%0A%20%20%20%20%20%20%20%20this.col2.SetV(m.col2)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AddM(m)%20%7B%0A%20%20%20%20%20%20%20%20this.col1.x%20%2B%3D%20m.col1.x%3B%0A%20%20%20%20%20%20%20%20this.col1.y%20%2B%3D%20m.col1.y%3B%0A%20%20%20%20%20%20%20%20this.col2.x%20%2B%3D%20m.col2.x%3B%0A%20%20%20%20%20%20%20%20this.col2.y%20%2B%3D%20m.col2.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetIdentity()%20%7B%0A%20%20%20%20%20%20%20%20this.col1.x%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col2.y%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetZero()%20%7B%0A%20%20%20%20%20%20%20%20this.col1.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col2.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAngle()%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.atan2(this.col1.y%2C%20this.col1.x)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetInverse(out)%20%7B%0A%20%20%20%20%20%20%20%20const%20a%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20%20%20const%20b%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20%20%20const%20c%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20%20%20const%20d%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20%20%20let%20det%20%3D%20a%20*%20d%20-%20b%20*%20c%3B%0A%20%20%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20out.col1.x%20%3D%20det%20*%20d%3B%0A%20%20%20%20%20%20%20%20out.col2.x%20%3D%20(-det%20*%20b)%3B%0A%20%20%20%20%20%20%20%20out.col1.y%20%3D%20(-det%20*%20c)%3B%0A%20%20%20%20%20%20%20%20out.col2.y%20%3D%20det%20*%20a%3B%0A%20%20%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Solve(out%2C%20bX%2C%20bY)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20%20%20const%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20%20%20const%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20%20%20const%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20%20%20let%20det%20%3D%20a11%20*%20a22%20-%20a12%20*%20a21%3B%0A%20%20%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20out.x%20%3D%20det%20*%20(a22%20*%20bX%20-%20a12%20*%20bY)%3B%0A%20%20%20%20%20%20%20%20out.y%20%3D%20det%20*%20(a11%20*%20bY%20-%20a21%20*%20bX)%3B%0A%20%20%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Abs()%20%7B%0A%20%20%20%20%20%20%20%20this.col1.Abs()%3B%0A%20%20%20%20%20%20%20%20this.col2.Abs()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Common.Math.b2Mat22%20%3D%20b2Mat22%3B%0A%0A%20%20%20%20class%20b2Mat33%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Mat33.b2Mat33.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Mat33)%20this.b2Mat33.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Mat33()%20%7B%0A%20%20%20%20%20%20%20%20this.col1%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%20%20this.col2%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%20%20this.col3%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Mat33(c1%2C%20c2%2C%20c3)%20%7B%0A%20%20%20%20%20%20%20%20if%20(c1%20%3D%3D%3D%20undefined)%20c1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(c2%20%3D%3D%3D%20undefined)%20c2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(c3%20%3D%3D%3D%20undefined)%20c3%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(!c1%20%26%26%20!c2%20%26%26%20!c3)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.col1.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.col2.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.col3.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%20%20%20%20%20%20this.col3.SetV(c3)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetVVV(c1%2C%20c2%2C%20c3)%20%7B%0A%20%20%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%20%20%20%20this.col3.SetV(c3)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20b2Mat33(this.col1%2C%20this.col2%2C%20this.col3)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetM(m)%20%7B%0A%20%20%20%20%20%20%20%20this.col1.SetV(m.col1)%3B%0A%20%20%20%20%20%20%20%20this.col2.SetV(m.col2)%3B%0A%20%20%20%20%20%20%20%20this.col3.SetV(m.col3)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AddM(m)%20%7B%0A%20%20%20%20%20%20%20%20this.col1.x%20%2B%3D%20m.col1.x%3B%0A%20%20%20%20%20%20%20%20this.col1.y%20%2B%3D%20m.col1.y%3B%0A%20%20%20%20%20%20%20%20this.col1.z%20%2B%3D%20m.col1.z%3B%0A%20%20%20%20%20%20%20%20this.col2.x%20%2B%3D%20m.col2.x%3B%0A%20%20%20%20%20%20%20%20this.col2.y%20%2B%3D%20m.col2.y%3B%0A%20%20%20%20%20%20%20%20this.col2.z%20%2B%3D%20m.col2.z%3B%0A%20%20%20%20%20%20%20%20this.col3.x%20%2B%3D%20m.col3.x%3B%0A%20%20%20%20%20%20%20%20this.col3.y%20%2B%3D%20m.col3.y%3B%0A%20%20%20%20%20%20%20%20this.col3.z%20%2B%3D%20m.col3.z%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetIdentity()%20%7B%0A%20%20%20%20%20%20%20%20this.col1.x%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col3.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col2.y%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.col3.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col1.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col2.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col3.z%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetZero()%20%7B%0A%20%20%20%20%20%20%20%20this.col1.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col3.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col2.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col3.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col1.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col2.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.col3.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Solve22(out%2C%20bX%2C%20bY)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20%20%20const%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20%20%20const%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20%20%20const%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20%20%20let%20det%20%3D%20a11%20*%20a22%20-%20a12%20*%20a21%3B%0A%20%20%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20out.x%20%3D%20det%20*%20(a22%20*%20bX%20-%20a12%20*%20bY)%3B%0A%20%20%20%20%20%20%20%20out.y%20%3D%20det%20*%20(a11%20*%20bY%20-%20a21%20*%20bX)%3B%0A%20%20%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Solve33(out%2C%20bX%2C%20bY%2C%20bZ)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(bZ%20%3D%3D%3D%20undefined)%20bZ%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20%20%20const%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20%20%20const%20a31%20%3D%20this.col1.z%3B%0A%20%20%20%20%20%20%20%20const%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20%20%20const%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20%20%20const%20a32%20%3D%20this.col2.z%3B%0A%20%20%20%20%20%20%20%20const%20a13%20%3D%20this.col3.x%3B%0A%20%20%20%20%20%20%20%20const%20a23%20%3D%20this.col3.y%3B%0A%20%20%20%20%20%20%20%20const%20a33%20%3D%20this.col3.z%3B%0A%20%20%20%20%20%20%20%20let%20det%20%3D%20a11%20*%20(a22%20*%20a33%20-%20a32%20*%20a23)%20%2B%20a21%20*%20(a32%20*%20a13%20-%20a12%20*%20a33)%20%2B%20a31%20*%20(a12%20*%20a23%20-%20a22%20*%20a13)%3B%0A%20%20%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20out.x%20%3D%20det%20*%20(bX%20*%20(a22%20*%20a33%20-%20a32%20*%20a23)%20%2B%20bY%20*%20(a32%20*%20a13%20-%20a12%20*%20a33)%20%2B%20bZ%20*%20(a12%20*%20a23%20-%20a22%20*%20a13))%3B%0A%20%20%20%20%20%20%20%20out.y%20%3D%20det%20*%20(a11%20*%20(bY%20*%20a33%20-%20bZ%20*%20a23)%20%2B%20a21%20*%20(bZ%20*%20a13%20-%20bX%20*%20a33)%20%2B%20a31%20*%20(bX%20*%20a23%20-%20bY%20*%20a13))%3B%0A%20%20%20%20%20%20%20%20out.z%20%3D%20det%20*%20(a11%20*%20(a22%20*%20bZ%20-%20a32%20*%20bY)%20%2B%20a21%20*%20(a32%20*%20bX%20-%20a12%20*%20bZ)%20%2B%20a31%20*%20(a12%20*%20bY%20-%20a22%20*%20bX))%3B%0A%20%20%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Common.Math.b2Mat33%20%3D%20b2Mat33%3B%0A%0A%20%20%20%20function%20b2Math()%20%7B%0A%20%20%20%20%20%20b2Math.b2Math.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Math%20%3D%20b2Math%3B%0A%0A%20%20%20%20class%20b2Sweep%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Sweep.b2Sweep.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Sweep()%20%7B%0A%20%20%20%20%20%20%20%20this.localCenter%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.c0%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.c%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(other)%20%7B%0A%20%20%20%20%20%20%20%20this.localCenter.SetV(other.localCenter)%3B%0A%20%20%20%20%20%20%20%20this.c0.SetV(other.c0)%3B%0A%20%20%20%20%20%20%20%20this.c.SetV(other.c)%3B%0A%20%20%20%20%20%20%20%20this.a0%20%3D%20other.a0%3B%0A%20%20%20%20%20%20%20%20this.a%20%3D%20other.a%3B%0A%20%20%20%20%20%20%20%20this.t0%20%3D%20other.t0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20const%20copy%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20%20%20copy.localCenter.SetV(this.localCenter)%3B%0A%20%20%20%20%20%20%20%20copy.c0.SetV(this.c0)%3B%0A%20%20%20%20%20%20%20%20copy.c.SetV(this.c)%3B%0A%20%20%20%20%20%20%20%20copy.a0%20%3D%20this.a0%3B%0A%20%20%20%20%20%20%20%20copy.a%20%3D%20this.a%3B%0A%20%20%20%20%20%20%20%20copy.t0%20%3D%20this.t0%3B%0A%20%20%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetTransform(xf%2C%20alpha)%20%7B%0A%20%20%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20%20%20xf.position.x%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.x%20%2B%20alpha%20*%20this.c.x%3B%0A%20%20%20%20%20%20%20%20xf.position.y%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.y%20%2B%20alpha%20*%20this.c.y%3B%0A%20%20%20%20%20%20%20%20const%20angle%20%3D%20(1.0%20-%20alpha)%20*%20this.a0%20%2B%20alpha%20*%20this.a%3B%0A%20%20%20%20%20%20%20%20xf.R.Set(angle)%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20%20%20xf.position.x%20-%3D%20(tMat.col1.x%20*%20this.localCenter.x%20%2B%20tMat.col2.x%20*%20this.localCenter.y)%3B%0A%20%20%20%20%20%20%20%20xf.position.y%20-%3D%20(tMat.col1.y%20*%20this.localCenter.x%20%2B%20tMat.col2.y%20*%20this.localCenter.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Advance(t)%20%7B%0A%20%20%20%20%20%20%20%20if%20(t%20%3D%3D%3D%20undefined)%20t%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.t0%20%3C%20t%20%26%26%201.0%20-%20this.t0%20%3E%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20alpha%20%3D%20(t%20-%20this.t0)%20%2F%20(1.0%20-%20this.t0)%3B%0A%20%20%20%20%20%20%20%20%20%20this.c0.x%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.x%20%2B%20alpha%20*%20this.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.c0.y%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.y%20%2B%20alpha%20*%20this.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20this.a0%20%3D%20(1.0%20-%20alpha)%20*%20this.a0%20%2B%20alpha%20*%20this.a%3B%0A%20%20%20%20%20%20%20%20%20%20this.t0%20%3D%20t%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Common.Math.b2Sweep%20%3D%20b2Sweep%3B%0A%0A%20%20%20%20class%20b2Transform%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Transform.b2Transform.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Transform)%20this.b2Transform.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Transform()%20%7B%0A%20%20%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.R%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Transform(pos%2C%20r)%20%7B%0A%20%20%20%20%20%20%20%20if%20(pos%20%3D%3D%3D%20undefined)%20pos%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(r%20%3D%3D%3D%20undefined)%20r%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(pos)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.position.SetV(pos)%3B%0A%20%20%20%20%20%20%20%20%20%20this.R.SetM(r)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(pos%2C%20r)%20%7B%0A%20%20%20%20%20%20%20%20this.position.SetV(pos)%3B%0A%20%20%20%20%20%20%20%20this.R.SetM(r)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetIdentity()%20%7B%0A%20%20%20%20%20%20%20%20this.position.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.R.SetIdentity()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(x)%20%7B%0A%20%20%20%20%20%20%20%20this.position.SetV(x.position)%3B%0A%20%20%20%20%20%20%20%20this.R.SetM(x.R)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAngle()%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.atan2(this.R.col1.y%2C%20this.R.col1.x)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Common.Math.b2Transform%20%3D%20b2Transform%3B%0A%0A%20%20%20%20class%20b2Vec2%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Vec2.b2Vec2.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Vec2)%20this.b2Vec2.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Vec2(x_%2C%20y_)%20%7B%0A%20%20%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20x_%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20y_%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetZero()%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(x_%2C%20y_)%20%7B%0A%20%20%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20x_%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20y_%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetV(v)%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20v.x%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20v.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNegative()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2((-this.x)%2C%20(-this.y))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20NegativeSelf()%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20(-this.x)%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20(-this.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(this.x%2C%20this.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Add(v)%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%2B%3D%20v.x%3B%0A%20%20%20%20%20%20%20%20this.y%20%2B%3D%20v.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Subtract(v)%20%7B%0A%20%20%20%20%20%20%20%20this.x%20-%3D%20v.x%3B%0A%20%20%20%20%20%20%20%20this.y%20-%3D%20v.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Multiply(a)%20%7B%0A%20%20%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.x%20*%3D%20a%3B%0A%20%20%20%20%20%20%20%20this.y%20*%3D%20a%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20MulM(A)%20%7B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20A.col1.x%20*%20tX%20%2B%20A.col2.x%20*%20this.y%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20A.col1.y%20*%20tX%20%2B%20A.col2.y%20*%20this.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20MulTM(A)%20%7B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%20b2Math.Dot(this%2C%20A.col1)%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20b2Math.Dot(this%2C%20A.col2)%3B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20tX%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CrossVF(s)%20%7B%0A%20%20%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20s%20*%20this.y%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20(-s%20*%20tX)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CrossFV(s)%20%7B%0A%20%20%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20(-s%20*%20this.y)%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20s%20*%20tX%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20MinV(b)%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20this.x%20%3C%20b.x%20%3F%20this.x%20%3A%20b.x%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20this.y%20%3C%20b.y%20%3F%20this.y%20%3A%20b.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20MaxV(b)%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20this.x%20%3E%20b.x%20%3F%20this.x%20%3A%20b.x%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20this.y%20%3E%20b.y%20%3F%20this.y%20%3A%20b.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Abs()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.x%20%3C%200)%20this.x%20%3D%20(-this.x)%3B%0A%20%20%20%20%20%20%20%20if%20(this.y%20%3C%200)%20this.y%20%3D%20(-this.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Length()%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20LengthSquared()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Normalize()%20%7B%0A%20%20%20%20%20%20%20%20const%20length%20%3D%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%20%20%20%20%20%20%20%20if%20(length%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20invLength%20%3D%201.0%20%2F%20length%3B%0A%20%20%20%20%20%20%20%20this.x%20*%3D%20invLength%3B%0A%20%20%20%20%20%20%20%20this.y%20*%3D%20invLength%3B%0A%20%20%20%20%20%20%20%20return%20length%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsValid()%20%7B%0A%20%20%20%20%20%20%20%20return%20b2Math.IsValid(this.x)%20%26%26%20b2Math.IsValid(this.y)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Common.Math.b2Vec2%20%3D%20b2Vec2%3B%0A%0A%20%20%20%20class%20b2Vec3%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Vec3.b2Vec3.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Vec3)%20this.b2Vec3.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Vec3(x%2C%20y%2C%20z)%20%7B%0A%20%20%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(y%20%3D%3D%3D%20undefined)%20y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(z%20%3D%3D%3D%20undefined)%20z%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20this.z%20%3D%20z%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetZero()%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20this.y%20%3D%20this.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(x%2C%20y%2C%20z)%20%7B%0A%20%20%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(y%20%3D%3D%3D%20undefined)%20y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(z%20%3D%3D%3D%20undefined)%20z%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20this.z%20%3D%20z%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetV(v)%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20v.x%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20v.y%3B%0A%20%20%20%20%20%20%20%20this.z%20%3D%20v.z%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNegative()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec3((-this.x)%2C%20(-this.y)%2C%20(-this.z))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20NegativeSelf()%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%3D%20(-this.x)%3B%0A%20%20%20%20%20%20%20%20this.y%20%3D%20(-this.y)%3B%0A%20%20%20%20%20%20%20%20this.z%20%3D%20(-this.z)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec3(this.x%2C%20this.y%2C%20this.z)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Add(v)%20%7B%0A%20%20%20%20%20%20%20%20this.x%20%2B%3D%20v.x%3B%0A%20%20%20%20%20%20%20%20this.y%20%2B%3D%20v.y%3B%0A%20%20%20%20%20%20%20%20this.z%20%2B%3D%20v.z%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Subtract(v)%20%7B%0A%20%20%20%20%20%20%20%20this.x%20-%3D%20v.x%3B%0A%20%20%20%20%20%20%20%20this.y%20-%3D%20v.y%3B%0A%20%20%20%20%20%20%20%20this.z%20-%3D%20v.z%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Multiply(a)%20%7B%0A%20%20%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.x%20*%3D%20a%3B%0A%20%20%20%20%20%20%20%20this.y%20*%3D%20a%3B%0A%20%20%20%20%20%20%20%20this.z%20*%3D%20a%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Common.Math.b2Vec3%20%3D%20b2Vec3%3B%0A%0A%20%20%20%20class%20b2Body%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Body.b2Body.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Body)%20this.b2Body.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Body()%20%7B%0A%20%20%20%20%20%20%20%20this.m_xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20%20%20this.m_sweep%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_force%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20connectEdges(s1%2C%20s2%2C%20angle1)%20%7B%0A%20%20%20%20%20%20%20%20if%20(angle1%20%3D%3D%3D%20undefined)%20angle1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20angle2%20%3D%20Math.atan2(s2.GetDirectionVector().y%2C%20s2.GetDirectionVector().x)%3B%0A%20%20%20%20%20%20%20%20const%20coreOffset%20%3D%20Math.tan((angle2%20-%20angle1)%20*%200.5)%3B%0A%20%20%20%20%20%20%20%20let%20core%20%3D%20b2Math.MulFV(coreOffset%2C%20s2.GetDirectionVector())%3B%0A%20%20%20%20%20%20%20%20core%20%3D%20b2Math.SubtractVV(core%2C%20s2.GetNormalVector())%3B%0A%20%20%20%20%20%20%20%20core%20%3D%20b2Math.MulFV(b2Settings.b2_toiSlop%2C%20core)%3B%0A%20%20%20%20%20%20%20%20core%20%3D%20b2Math.AddVV(core%2C%20s2.GetVertex1())%3B%0A%20%20%20%20%20%20%20%20const%20cornerDir%20%3D%20b2Math.AddVV(s1.GetDirectionVector()%2C%20s2.GetDirectionVector())%3B%0A%20%20%20%20%20%20%20%20cornerDir.Normalize()%3B%0A%20%20%20%20%20%20%20%20const%20convex%20%3D%20b2Math.Dot(s1.GetDirectionVector()%2C%20s2.GetNormalVector())%20%3E%200.0%3B%0A%20%20%20%20%20%20%20%20s1.SetNextEdge(s2%2C%20core%2C%20cornerDir%2C%20convex)%3B%0A%20%20%20%20%20%20%20%20s2.SetPrevEdge(s1%2C%20core%2C%20cornerDir%2C%20convex)%3B%0A%20%20%20%20%20%20%20%20return%20angle2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CreateFixture(def)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20fixture%20%3D%20new%20b2Fixture()%3B%0A%20%20%20%20%20%20%20%20fixture.Create(this%2C%20this.m_xf%2C%20def)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20%20%20fixture.CreateProxy(broadPhase%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20fixture.m_next%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureList%20%3D%20fixture%3B%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_fixtureCount%3B%0A%20%20%20%20%20%20%20%20fixture.m_body%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20if%20(fixture.m_density%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_world.m_flags%20%7C%3D%20b2World.e_newFixture%3B%0A%20%20%20%20%20%20%20%20return%20fixture%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CreateFixture2(shape%2C%20density)%20%7B%0A%20%20%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20const%20def%20%3D%20new%20b2FixtureDef()%3B%0A%20%20%20%20%20%20%20%20def.shape%20%3D%20shape%3B%0A%20%20%20%20%20%20%20%20def.density%20%3D%20density%3B%0A%20%20%20%20%20%20%20%20return%20this.CreateFixture(def)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DestroyFixture(fixture)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20node%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20let%20ppF%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20found%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20while%20(node%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(node%20%3D%3D%20fixture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(ppF)%20ppF.m_next%20%3D%20fixture.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20this.m_fixtureList%20%3D%20fixture.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20found%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20ppF%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20node.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20edge%20%3D%20this.m_contactList%3B%0A%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20c%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(fixture%20%3D%3D%20fixtureA%20%7C%7C%20fixture%20%3D%3D%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_world.m_contactManager.Destroy(c)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20%20%20fixture.DestroyProxy(broadPhase)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%7D%0A%20%20%20%20%20%20%20%20fixture.Destroy()%3B%0A%20%20%20%20%20%20%20%20fixture.m_body%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20fixture.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20--this.m_fixtureCount%3B%0A%20%20%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetPositionAndAngle(position%2C%20angle)%20%7B%0A%20%20%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20f%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_xf.R.Set(angle)%3B%0A%20%20%20%20%20%20%20%20this.m_xf.position.SetV(position)%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20%20%20const%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.x%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.y%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c0.SetV(this.m_sweep.c)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.a0%20%3D%20this.m_sweep.a%20%3D%20angle%3B%0A%20%20%20%20%20%20%20%20const%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f.Synchronize(broadPhase%2C%20this.m_xf%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_world.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetTransform(xf)%20%7B%0A%20%20%20%20%20%20%20%20this.SetPositionAndAngle(xf.position%2C%20xf.GetAngle())%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetTransform()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_xf%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetPosition()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_xf.position%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetPosition(position)%20%7B%0A%20%20%20%20%20%20%20%20this.SetPositionAndAngle(position%2C%20this.GetAngle())%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAngle()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_sweep.a%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAngle(angle)%20%7B%0A%20%20%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.SetPositionAndAngle(this.GetPosition()%2C%20angle)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetWorldCenter()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_sweep.c%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLocalCenter()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetLinearVelocity(v)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.SetV(v)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLinearVelocity()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_linearVelocity%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAngularVelocity(omega)%20%7B%0A%20%20%20%20%20%20%20%20if%20(omega%20%3D%3D%3D%20undefined)%20omega%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20%3D%20omega%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAngularVelocity()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_angularVelocity%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetDefinition()%20%7B%0A%20%20%20%20%20%20%20%20const%20bd%20%3D%20new%20b2BodyDef()%3B%0A%20%20%20%20%20%20%20%20bd.type%20%3D%20this.GetType()%3B%0A%20%20%20%20%20%20%20%20bd.allowSleep%20%3D%20(this.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%20%20bd.angle%20%3D%20this.GetAngle()%3B%0A%20%20%20%20%20%20%20%20bd.angularDamping%20%3D%20this.m_angularDamping%3B%0A%20%20%20%20%20%20%20%20bd.angularVelocity%20%3D%20this.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20bd.fixedRotation%20%3D%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%20%20bd.bullet%20%3D%20(this.m_flags%20%26%20b2Body.e_bulletFlag)%20%3D%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%20%20bd.awake%20%3D%20(this.m_flags%20%26%20b2Body.e_awakeFlag)%20%3D%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%20%20bd.linearDamping%20%3D%20this.m_linearDamping%3B%0A%20%20%20%20%20%20%20%20bd.linearVelocity.SetV(this.GetLinearVelocity())%3B%0A%20%20%20%20%20%20%20%20bd.position%20%3D%20this.GetPosition()%3B%0A%20%20%20%20%20%20%20%20bd.userData%20%3D%20this.GetUserData()%3B%0A%20%20%20%20%20%20%20%20return%20bd%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ApplyForce(force%2C%20point)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_force.x%20%2B%3D%20force.x%3B%0A%20%20%20%20%20%20%20%20this.m_force.y%20%2B%3D%20force.y%3B%0A%20%20%20%20%20%20%20%20this.m_torque%20%2B%3D%20((point.x%20-%20this.m_sweep.c.x)%20*%20force.y%20-%20(point.y%20-%20this.m_sweep.c.y)%20*%20force.x)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ApplyTorque(torque)%20%7B%0A%20%20%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_torque%20%2B%3D%20torque%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ApplyImpulse(impulse%2C%20point)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%20this.m_invMass%20*%20impulse.x%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%20this.m_invMass%20*%20impulse.y%3B%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20%2B%3D%20this.m_invI%20*%20((point.x%20-%20this.m_sweep.c.x)%20*%20impulse.y%20-%20(point.y%20-%20this.m_sweep.c.y)%20*%20impulse.x)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Split(callback)%20%7B%0A%20%20%20%20%20%20%20%20const%20linearVelocity%20%3D%20this.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20%20%20const%20angularVelocity%20%3D%20this.GetAngularVelocity()%3B%0A%20%20%20%20%20%20%20%20const%20center%20%3D%20this.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20const%20body1%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20const%20body2%20%3D%20this.m_world.CreateBody(this.GetDefinition())%3B%0A%20%20%20%20%20%20%20%20let%20prev%3B%0A%20%20%20%20%20%20%20%20for%20(let%20f%20%3D%20body1.m_fixtureList%3B%20f%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(callback(f))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20next%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20prev.m_next%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20body1.m_fixtureList%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20body1.m_fixtureCount--%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.m_next%20%3D%20body2.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20body2.m_fixtureList%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20body2.m_fixtureCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.m_body%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prev%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20body1.ResetMassData()%3B%0A%20%20%20%20%20%20%20%20body2.ResetMassData()%3B%0A%20%20%20%20%20%20%20%20const%20center1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20const%20center2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20const%20velocity1%20%3D%20b2Math.AddVV(linearVelocity%2C%20b2Math.CrossFV(angularVelocity%2C%20b2Math.SubtractVV(center1%2C%20center)))%3B%0A%20%20%20%20%20%20%20%20const%20velocity2%20%3D%20b2Math.AddVV(linearVelocity%2C%20b2Math.CrossFV(angularVelocity%2C%20b2Math.SubtractVV(center2%2C%20center)))%3B%0A%20%20%20%20%20%20%20%20body1.SetLinearVelocity(velocity1)%3B%0A%20%20%20%20%20%20%20%20body2.SetLinearVelocity(velocity2)%3B%0A%20%20%20%20%20%20%20%20body1.SetAngularVelocity(angularVelocity)%3B%0A%20%20%20%20%20%20%20%20body2.SetAngularVelocity(angularVelocity)%3B%0A%20%20%20%20%20%20%20%20body1.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%20%20body2.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%20%20return%20body2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Merge(other)%20%7B%0A%20%20%20%20%20%20%20%20let%20f%3B%0A%20%20%20%20%20%20%20%20for%20(f%20%3D%20other.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20f%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20next%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20other.m_fixtureCount--%3B%0A%20%20%20%20%20%20%20%20%20%20f.m_next%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_fixtureList%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_fixtureCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20f.m_body%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20f%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20body1.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20body1%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20var%20body2%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20const%20center1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20const%20center2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20const%20velocity1%20%3D%20body1.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20%20%20const%20velocity2%20%3D%20body2.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20%20%20const%20angular1%20%3D%20body1.GetAngularVelocity()%3B%0A%20%20%20%20%20%20%20%20const%20angular%20%3D%20body2.GetAngularVelocity()%3B%0A%20%20%20%20%20%20%20%20body1.ResetMassData()%3B%0A%20%20%20%20%20%20%20%20this.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMass()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_mass%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetInertia()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_I%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMassData(data)%20%7B%0A%20%20%20%20%20%20%20%20data.mass%20%3D%20this.m_mass%3B%0A%20%20%20%20%20%20%20%20data.I%20%3D%20this.m_I%3B%0A%20%20%20%20%20%20%20%20data.center.SetV(this.m_sweep.localCenter)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMassData(massData)%20%7B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(this.m_world.IsLocked()%20%3D%3D%20false)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20massData.mass%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_mass%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%20%2F%20this.m_mass%3B%0A%20%20%20%20%20%20%20%20if%20(massData.I%20%3E%200.0%20%26%26%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_I%20%3D%20massData.I%20-%20this.m_mass%20*%20(massData.center.x%20*%20massData.center.x%20%2B%20massData.center.y%20*%20massData.center.y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_invI%20%3D%201.0%20%2F%20this.m_I%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20oldCenter%20%3D%20this.m_sweep.c.Copy()%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.localCenter.SetV(massData.center)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf%2C%20this.m_sweep.localCenter))%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%20this.m_angularVelocity%20*%20(-(this.m_sweep.c.y%20-%20oldCenter.y))%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%20this.m_angularVelocity%20*%20(%2B(this.m_sweep.c.x%20-%20oldCenter.x))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ResetMassData()%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.localCenter.SetZero()%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody%20%7C%7C%20this.m_type%20%3D%3D%20b2Body.b2_kinematicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20center%20%3D%20b2Vec2.Make(0%2C%200)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(f.m_density%20%3D%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20massData%20%3D%20f.GetMassData()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20%2B%3D%20massData.mass%3B%0A%20%20%20%20%20%20%20%20%20%20center.x%20%2B%3D%20massData.center.x%20*%20massData.mass%3B%0A%20%20%20%20%20%20%20%20%20%20center.y%20%2B%3D%20massData.center.y%20*%20massData.mass%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_I%20%2B%3D%20massData.I%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_mass%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%20%2F%20this.m_mass%3B%0A%20%20%20%20%20%20%20%20%20%20center.x%20*%3D%20this.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20center.y%20*%3D%20this.m_invMass%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_I%20%3E%200.0%20%26%26%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_I%20-%3D%20this.m_mass%20*%20(center.x%20*%20center.x%20%2B%20center.y%20*%20center.y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_I%20*%3D%20this.m_inertiaScale%3B%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(this.m_I%20%3E%200)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_invI%20%3D%201.0%20%2F%20this.m_I%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20oldCenter%20%3D%20this.m_sweep.c.Copy()%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.localCenter.SetV(center)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf%2C%20this.m_sweep.localCenter))%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%20this.m_angularVelocity%20*%20(-(this.m_sweep.c.y%20-%20oldCenter.y))%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%20this.m_angularVelocity%20*%20(%2B(this.m_sweep.c.x%20-%20oldCenter.x))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetWorldPoint(localPoint)%20%7B%0A%20%20%20%20%20%20%20%20const%20A%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20%20%20const%20u%20%3D%20new%20b2Vec2(A.col1.x%20*%20localPoint.x%20%2B%20A.col2.x%20*%20localPoint.y%2C%20A.col1.y%20*%20localPoint.x%20%2B%20A.col2.y%20*%20localPoint.y)%3B%0A%20%20%20%20%20%20%20%20u.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20%20%20u.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetWorldVector(localVector)%20%7B%0A%20%20%20%20%20%20%20%20return%20b2Math.MulMV(this.m_xf.R%2C%20localVector)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLocalPoint(worldPoint)%20%7B%0A%20%20%20%20%20%20%20%20return%20b2Math.MulXT(this.m_xf%2C%20worldPoint)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLocalVector(worldVector)%20%7B%0A%20%20%20%20%20%20%20%20return%20b2Math.MulTMV(this.m_xf.R%2C%20worldVector)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLinearVelocityFromWorldPoint(worldPoint)%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(this.m_linearVelocity.x%20-%20this.m_angularVelocity%20*%20(worldPoint.y%20-%20this.m_sweep.c.y)%2C%20this.m_linearVelocity.y%20%2B%20this.m_angularVelocity%20*%20(worldPoint.x%20-%20this.m_sweep.c.x))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLinearVelocityFromLocalPoint(localPoint)%20%7B%0A%20%20%20%20%20%20%20%20const%20A%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20%20%20const%20worldPoint%20%3D%20new%20b2Vec2(A.col1.x%20*%20localPoint.x%20%2B%20A.col2.x%20*%20localPoint.y%2C%20A.col1.y%20*%20localPoint.x%20%2B%20A.col2.y%20*%20localPoint.y)%3B%0A%20%20%20%20%20%20%20%20worldPoint.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20%20%20worldPoint.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(this.m_linearVelocity.x%20-%20this.m_angularVelocity%20*%20(worldPoint.y%20-%20this.m_sweep.c.y)%2C%20this.m_linearVelocity.y%20%2B%20this.m_angularVelocity%20*%20(worldPoint.x%20-%20this.m_sweep.c.x))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLinearDamping()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_linearDamping%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetLinearDamping(linearDamping)%20%7B%0A%20%20%20%20%20%20%20%20if%20(linearDamping%20%3D%3D%3D%20undefined)%20linearDamping%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_linearDamping%20%3D%20linearDamping%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAngularDamping()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_angularDamping%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAngularDamping(angularDamping)%20%7B%0A%20%20%20%20%20%20%20%20if%20(angularDamping%20%3D%3D%3D%20undefined)%20angularDamping%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_angularDamping%20%3D%20angularDamping%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetType(type)%20%7B%0A%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20undefined)%20type%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20type%3B%0A%20%20%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearVelocity.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_force.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20for%20(let%20ce%20%3D%20this.m_contactList%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ce.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetType()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetBullet(flag)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsBullet()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_bulletFlag)%20%3D%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetSleepingAllowed(flag)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAwake(flag)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearVelocity.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_force.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsAwake()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_awakeFlag)%20%3D%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetFixedRotation(fixed)%20%7B%0A%20%20%20%20%20%20%20%20if%20(fixed)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsFixedRotation()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetActive(flag)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flag%20%3D%3D%20this.IsActive())%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20broadPhase%3B%0A%20%20%20%20%20%20%20%20let%20f%3B%0A%20%20%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%20%20%20%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.CreateProxy(broadPhase%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%20%20%20%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.DestroyProxy(broadPhase)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20let%20ce%20%3D%20this.m_contactList%3B%0A%20%20%20%20%20%20%20%20%20%20while%20(ce)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20ce0%20%3D%20ce%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ce%20%3D%20ce.next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_world.m_contactManager.Destroy(ce0.contact)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsActive()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%3D%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsSleepingAllowed()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFixtureList()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointList()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_jointList%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetControllerList()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_controllerList%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetContactList()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_contactList%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNext()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetUserData()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetUserData(data)%20%7B%0A%20%20%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetWorld()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_world%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Body(bd%2C%20world)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(bd.bullet)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(bd.fixedRotation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(bd.allowSleep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(bd.awake)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(bd.active)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_world%20%3D%20world%3B%0A%20%20%20%20%20%20%20%20this.m_xf.position.SetV(bd.position)%3B%0A%20%20%20%20%20%20%20%20this.m_xf.R.Set(bd.angle)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.localCenter.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.t0%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.a0%20%3D%20this.m_sweep.a%20%3D%20bd.angle%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20%20%20const%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.x%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.y%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c0.SetV(this.m_sweep.c)%3B%0A%20%20%20%20%20%20%20%20this.m_jointList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_controllerList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_controllerCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.SetV(bd.linearVelocity)%3B%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20%3D%20bd.angularVelocity%3B%0A%20%20%20%20%20%20%20%20this.m_linearDamping%20%3D%20bd.linearDamping%3B%0A%20%20%20%20%20%20%20%20this.m_angularDamping%20%3D%20bd.angularDamping%3B%0A%20%20%20%20%20%20%20%20this.m_force.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20bd.type%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_inertiaScale%20%3D%20bd.inertiaScale%3B%0A%20%20%20%20%20%20%20%20this.m_userData%20%3D%20bd.userData%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SynchronizeFixtures()%20%7B%0A%20%20%20%20%20%20%20%20const%20xf1%20%3D%20b2Body.s_xf1%3B%0A%20%20%20%20%20%20%20%20xf1.R.Set(this.m_sweep.a0)%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20%20%20const%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20%20%20xf1.position.x%20%3D%20this.m_sweep.c0.x%20-%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20xf1.position.y%20%3D%20this.m_sweep.c0.y%20-%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20let%20f%3B%0A%20%20%20%20%20%20%20%20const%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f.Synchronize(broadPhase%2C%20xf1%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SynchronizeTransform()%20%7B%0A%20%20%20%20%20%20%20%20this.m_xf.R.Set(this.m_sweep.a)%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20%20%20const%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20%20%20this.m_xf.position.x%20%3D%20this.m_sweep.c.x%20-%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20this.m_xf.position.y%20%3D%20this.m_sweep.c.y%20-%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ShouldCollide(other)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody%20%26%26%20other.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(let%20jn%20%3D%20this.m_jointList%3B%20jn%3B%20jn%20%3D%20jn.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(jn.other%20%3D%3D%20other)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(jn.joint.m_collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Advance(t)%20%7B%0A%20%20%20%20%20%20%20%20if%20(t%20%3D%3D%3D%20undefined)%20t%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.Advance(t)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20%20%20this.m_sweep.a%20%3D%20this.m_sweep.a0%3B%0A%20%20%20%20%20%20%20%20this.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2Body%20%3D%20b2Body%3B%0A%0A%20%20%20%20class%20b2BodyDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2BodyDef.b2BodyDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2BodyDef)%20this.b2BodyDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2BodyDef()%20%7B%0A%20%20%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.linearVelocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2BodyDef()%20%7B%0A%20%20%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.position.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.angle%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.linearVelocity.Set(0%2C%200)%3B%0A%20%20%20%20%20%20%20%20this.angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.linearDamping%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.angularDamping%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.allowSleep%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.awake%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.fixedRotation%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.bullet%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20%20%20%20%20this.active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.inertiaScale%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2BodyDef%20%3D%20b2BodyDef%3B%0A%0A%20%20%20%20class%20b2ContactFilter%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactFilter.b2ContactFilter.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ShouldCollide(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20const%20filter1%20%3D%20fixtureA.GetFilterData()%3B%0A%20%20%20%20%20%20%20%20const%20filter2%20%3D%20fixtureB.GetFilterData()%3B%0A%20%20%20%20%20%20%20%20if%20(filter1.groupIndex%20%3D%3D%20filter2.groupIndex%20%26%26%20filter1.groupIndex%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20filter1.groupIndex%20%3E%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20collide%20%3D%20(filter1.maskBits%20%26%20filter2.categoryBits)%20!%3D%200%20%26%26%20(filter1.categoryBits%20%26%20filter2.maskBits)%20!%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20collide%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCollide(userData%2C%20fixture)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!userData)%20return%20true%3B%0A%20%20%20%20%20%20%20%20return%20this.ShouldCollide((userData%20instanceof%20b2Fixture%20%3F%20userData%20%3A%20null)%2C%20fixture)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2ContactFilter%20%3D%20b2ContactFilter%3B%0A%0A%20%20%20%20class%20b2ContactImpulse%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactImpulse.b2ContactImpulse.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ContactImpulse()%20%7B%0A%20%20%20%20%20%20%20%20this.normalImpulses%20%3D%20new%20Vector_a2j_Number(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20%20%20this.tangentImpulses%20%3D%20new%20Vector_a2j_Number(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2ContactImpulse%20%3D%20b2ContactImpulse%3B%0A%0A%20%20%20%20class%20b2ContactListener%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactListener.b2ContactListener.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20BeginContact(contact)%20%7B%20%7D%0A%20%20%20%20%20%20EndContact(contact)%20%7B%20%7D%0A%20%20%20%20%20%20PreSolve(contact%2C%20oldManifold)%20%7B%20%7D%0A%20%20%20%20%20%20PostSolve(contact%2C%20impulse)%20%7B%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2ContactListener%20%3D%20b2ContactListener%3B%0A%0A%20%20%20%20class%20b2ContactManager%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactManager.b2ContactManager.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactManager)%20this.b2ContactManager.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2ContactManager()%20%7B%0A%20%20%20%20%20%20%20%20this.m_world%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_contactFilter%20%3D%20b2ContactFilter.b2_defaultFilter%3B%0A%20%20%20%20%20%20%20%20this.m_contactListener%20%3D%20b2ContactListener.b2_defaultListener%3B%0A%20%20%20%20%20%20%20%20this.m_contactFactory%20%3D%20new%20b2ContactFactory(this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20this.m_broadPhase%20%3D%20new%20b2DynamicTreeBroadPhase()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AddPair(proxyUserDataA%2C%20proxyUserDataB)%20%7B%0A%20%20%20%20%20%20%20%20let%20fixtureA%20%3D%20(proxyUserDataA%20instanceof%20b2Fixture%20%3F%20proxyUserDataA%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20let%20fixtureB%20%3D%20(proxyUserDataB%20instanceof%20b2Fixture%20%3F%20proxyUserDataB%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20let%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20let%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20if%20(bodyA%20%3D%3D%20bodyB)%20return%3B%0A%20%20%20%20%20%20%20%20let%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20fA%20%3D%20edge.contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20fB%20%3D%20edge.contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(fA%20%3D%3D%20fixtureA%20%26%26%20fB%20%3D%3D%20fixtureB)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(fA%20%3D%3D%20fixtureB%20%26%26%20fB%20%3D%3D%20fixtureA)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(bodyB.ShouldCollide(bodyA)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_contactFilter.ShouldCollide(fixtureA%2C%20fixtureB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20c%20%3D%20this.m_contactFactory.Create(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20bodyA%20%3D%20fixtureA.m_body%3B%0A%20%20%20%20%20%20%20%20bodyB%20%3D%20fixtureB.m_body%3B%0A%20%20%20%20%20%20%20%20c.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20c.m_next%20%3D%20this.m_world.m_contactList%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_world.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_world.m_contactList.m_prev%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_world.m_contactList%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20c.m_nodeA.contact%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20c.m_nodeA.other%20%3D%20bodyB%3B%0A%20%20%20%20%20%20%20%20c.m_nodeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20c.m_nodeA.next%20%3D%20bodyA.m_contactList%3B%0A%20%20%20%20%20%20%20%20if%20(bodyA.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_contactList.prev%20%3D%20c.m_nodeA%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bodyA.m_contactList%20%3D%20c.m_nodeA%3B%0A%20%20%20%20%20%20%20%20c.m_nodeB.contact%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20c.m_nodeB.other%20%3D%20bodyA%3B%0A%20%20%20%20%20%20%20%20c.m_nodeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20c.m_nodeB.next%20%3D%20bodyB.m_contactList%3B%0A%20%20%20%20%20%20%20%20if%20(bodyB.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_contactList.prev%20%3D%20c.m_nodeB%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bodyB.m_contactList%20%3D%20c.m_nodeB%3B%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_world.m_contactCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20FindNewContacts()%20%7B%0A%20%20%20%20%20%20%20%20this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this%2C%20this.AddPair))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Destroy(c)%20%7B%0A%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20if%20(c.IsTouching())%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_contactListener.EndContact(c)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.m_prev.m_next%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.m_next.m_prev%20%3D%20c.m_prev%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c%20%3D%3D%20this.m_world.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_world.m_contactList%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_nodeA.prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.m_nodeA.prev.next%20%3D%20c.m_nodeA.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_nodeA.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.m_nodeA.next.prev%20%3D%20c.m_nodeA.prev%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_nodeA%20%3D%3D%20bodyA.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_contactList%20%3D%20c.m_nodeA.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_nodeB.prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.m_nodeB.prev.next%20%3D%20c.m_nodeB.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_nodeB.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.m_nodeB.next.prev%20%3D%20c.m_nodeB.prev%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_nodeB%20%3D%3D%20bodyB.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_contactList%20%3D%20c.m_nodeB.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_contactFactory.Destroy(c)%3B%0A%20%20%20%20%20%20%20%20--this.m_contactCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Collide()%20%7B%0A%20%20%20%20%20%20%20%20let%20c%20%3D%20this.m_world.m_contactList%3B%0A%20%20%20%20%20%20%20%20while%20(c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(bodyA.IsAwake()%20%3D%3D%20false%20%26%26%20bodyB.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20c.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(c.m_flags%20%26%20b2Contact.e_filterFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(bodyB.ShouldCollide(bodyA)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.m_contactFilter.ShouldCollide(fixtureA%2C%20fixtureB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~b2Contact.e_filterFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20proxyA%20%3D%20fixtureA.m_proxy%3B%0A%20%20%20%20%20%20%20%20%20%20const%20proxyB%20%3D%20fixtureB.m_proxy%3B%0A%20%20%20%20%20%20%20%20%20%20const%20overlap%20%3D%20this.m_broadPhase.TestOverlap(proxyA%2C%20proxyB)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(overlap%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20c.Update(this.m_contactListener)%3B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20c.GetNext()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2ContactManager%20%3D%20b2ContactManager%3B%0A%0A%20%20%20%20class%20b2DebugDraw%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2DebugDraw.b2DebugDraw.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DebugDraw)%20this.b2DebugDraw.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2DebugDraw()%20%7B%20%7D%0A%0A%20%20%20%20%20%20SetFlags(flags)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFlags()%20%7B%20%7D%0A%0A%20%20%20%20%20%20AppendFlags(flags)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ClearFlags(flags)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetSprite(sprite)%20%7B%20%7D%0A%20%20%20%20%20%20GetSprite()%20%7B%20%7D%0A%0A%20%20%20%20%20%20SetDrawScale(drawScale)%20%7B%0A%20%20%20%20%20%20%20%20if%20(drawScale%20%3D%3D%3D%20undefined)%20drawScale%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetDrawScale()%20%7B%20%7D%0A%0A%20%20%20%20%20%20SetLineThickness(lineThickness)%20%7B%0A%20%20%20%20%20%20%20%20if%20(lineThickness%20%3D%3D%3D%20undefined)%20lineThickness%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLineThickness()%20%7B%20%7D%0A%0A%20%20%20%20%20%20SetAlpha(alpha)%20%7B%0A%20%20%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAlpha()%20%7B%20%7D%0A%0A%20%20%20%20%20%20SetFillAlpha(alpha)%20%7B%0A%20%20%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFillAlpha()%20%7B%20%7D%0A%0A%20%20%20%20%20%20SetXFormScale(xformScale)%20%7B%0A%20%20%20%20%20%20%20%20if%20(xformScale%20%3D%3D%3D%20undefined)%20xformScale%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetXFormScale()%20%7B%20%7D%0A%0A%20%20%20%20%20%20DrawPolygon(vertices%2C%20vertexCount%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawSolidPolygon(vertices%2C%20vertexCount%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawCircle(center%2C%20radius%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawSolidCircle(center%2C%20radius%2C%20axis%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawSegment(p1%2C%20p2%2C%20color)%20%7B%20%7D%0A%20%20%20%20%20%20DrawTransform(xf)%20%7B%20%7D%0A%0A%20%20%20%20%20%20static%20b2DebugDraw()%20%7B%0A%20%20%20%20%20%20%20%20this.m_drawScale%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_lineThickness%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_fillAlpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_xformScale%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20const%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%23WORKAROUND%0A%20%20%20%20%20%20%20%20this.m_sprite%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20graphics%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clear%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20__this.m_ctx.clearRect(0%2C%200%2C%20__this.m_ctx.canvas.width%2C%20__this.m_ctx.canvas.height)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20_color(color%2C%20alpha)%20%7B%0A%20%20%20%20%20%20%20%20return%20'rgba('%20%2B%20((color%20%26%200xFF0000)%20%3E%3E%2016)%20%2B%20'%2C'%20%2B%20((color%20%26%200xFF00)%20%3E%3E%208)%20%2B%20'%2C'%20%2B%20(color%20%26%200xFF)%20%2B%20'%2C'%20%2B%20alpha%20%2B%20')'%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2DebugDraw()%20%7B%0A%20%20%20%20%20%20%20%20this.m_drawFlags%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetFlags(flags)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_drawFlags%20%3D%20flags%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFlags()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_drawFlags%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AppendFlags(flags)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_drawFlags%20%7C%3D%20flags%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ClearFlags(flags)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_drawFlags%20%26%3D%20~flags%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetSprite(sprite)%20%7B%0A%20%20%20%20%20%20%20%20this.m_ctx%20%3D%20sprite%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetSprite()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_ctx%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetDrawScale(drawScale)%20%7B%0A%20%20%20%20%20%20%20%20if%20(drawScale%20%3D%3D%3D%20undefined)%20drawScale%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_drawScale%20%3D%20drawScale%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetDrawScale()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_drawScale%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetLineThickness(lineThickness)%20%7B%0A%20%20%20%20%20%20%20%20if%20(lineThickness%20%3D%3D%3D%20undefined)%20lineThickness%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_lineThickness%20%3D%20lineThickness%3B%0A%20%20%20%20%20%20%20%20this.m_ctx.strokeWidth%20%3D%20lineThickness%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLineThickness()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_lineThickness%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAlpha(alpha)%20%7B%0A%20%20%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_alpha%20%3D%20alpha%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAlpha()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_alpha%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetFillAlpha(alpha)%20%7B%0A%20%20%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_fillAlpha%20%3D%20alpha%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFillAlpha()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_fillAlpha%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetXFormScale(xformScale)%20%7B%0A%20%20%20%20%20%20%20%20if%20(xformScale%20%3D%3D%3D%20undefined)%20xformScale%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_xformScale%20%3D%20xformScale%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetXFormScale()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_xformScale%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawPolygon(vertices%2C%20vertexCount%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!vertexCount)%20return%3B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20%20%20const%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20%20%20s.moveTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20s.lineTo(vertices%5Bi%5D.x%20*%20drawScale%2C%20vertices%5Bi%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20s.lineTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawSolidPolygon(vertices%2C%20vertexCount%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!vertexCount)%20return%3B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20%20%20const%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20%20%20s.fillStyle%20%3D%20this._color(color.color%2C%20this.m_fillAlpha)%3B%0A%20%20%20%20%20%20%20%20s.moveTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20s.lineTo(vertices%5Bi%5D.x%20*%20drawScale%2C%20vertices%5Bi%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20s.lineTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20%20%20s.fill()%3B%0A%20%20%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawCircle(center%2C%20radius%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!radius)%20return%3B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20%20%20const%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20%20%20s.arc(center.x%20*%20drawScale%2C%20center.y%20*%20drawScale%2C%20radius%20*%20drawScale%2C%200%2C%20Math.PI%20*%202%2C%20true)%3B%0A%20%20%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawSolidCircle(center%2C%20radius%2C%20axis%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!radius)%20return%3B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20%20%20const%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20%20%20const%20cx%20%3D%20center.x%20*%20drawScale%3B%0A%20%20%20%20%20%20%20%20const%20cy%20%3D%20center.y%20*%20drawScale%3B%0A%20%20%20%20%20%20%20%20s.moveTo(0%2C%200)%3B%0A%20%20%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20%20%20s.fillStyle%20%3D%20this._color(color.color%2C%20this.m_fillAlpha)%3B%0A%20%20%20%20%20%20%20%20s.arc(cx%2C%20cy%2C%20radius%20*%20drawScale%2C%200%2C%20Math.PI%20*%202%2C%20true)%3B%0A%20%20%20%20%20%20%20%20s.moveTo(cx%2C%20cy)%3B%0A%20%20%20%20%20%20%20%20s.lineTo((center.x%20%2B%20axis.x%20*%20radius)%20*%20drawScale%2C%20(center.y%20%2B%20axis.y%20*%20radius)%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20%20%20s.fill()%3B%0A%20%20%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawSegment(p1%2C%20p2%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20%20%20const%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20%20%20s.moveTo(p1.x%20*%20drawScale%2C%20p1.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20s.lineTo(p2.x%20*%20drawScale%2C%20p2.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawTransform(xf)%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20%20%20const%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(0xff0000%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20%20%20s.moveTo(xf.position.x%20*%20drawScale%2C%20xf.position.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20s.lineTo((xf.position.x%20%2B%20this.m_xformScale%20*%20xf.R.col1.x)%20*%20drawScale%2C%20(xf.position.y%20%2B%20this.m_xformScale%20*%20xf.R.col1.y)%20*%20drawScale)%3B%0A%0A%20%20%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(0xff00%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20%20%20s.moveTo(xf.position.x%20*%20drawScale%2C%20xf.position.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20s.lineTo((xf.position.x%20%2B%20this.m_xformScale%20*%20xf.R.col2.x)%20*%20drawScale%2C%20(xf.position.y%20%2B%20this.m_xformScale%20*%20xf.R.col2.y)%20*%20drawScale)%3B%0A%20%20%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2DebugDraw%20%3D%20b2DebugDraw%3B%0A%0A%20%20%20%20class%20b2DestructionListener%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2DestructionListener.b2DestructionListener.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SayGoodbyeJoint(joint)%20%7B%20%7D%0A%20%20%20%20%20%20SayGoodbyeFixture(fixture)%20%7B%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2DestructionListener%20%3D%20b2DestructionListener%3B%0A%0A%20%20%20%20class%20b2FilterData%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2FilterData.b2FilterData.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2FilterData()%20%7B%0A%20%20%20%20%20%20%20%20this.categoryBits%20%3D%200x0001%3B%0A%20%20%20%20%20%20%20%20this.maskBits%20%3D%200xFFFF%3B%0A%20%20%20%20%20%20%20%20this.groupIndex%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Copy()%20%7B%0A%20%20%20%20%20%20%20%20const%20copy%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%20%20%20%20copy.categoryBits%20%3D%20this.categoryBits%3B%0A%20%20%20%20%20%20%20%20copy.maskBits%20%3D%20this.maskBits%3B%0A%20%20%20%20%20%20%20%20copy.groupIndex%20%3D%20this.groupIndex%3B%0A%20%20%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2FilterData%20%3D%20b2FilterData%3B%0A%0A%20%20%20%20class%20b2Fixture%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Fixture.b2Fixture.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Fixture)%20this.b2Fixture.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Fixture()%20%7B%0A%20%20%20%20%20%20%20%20this.m_filter%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetType()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_shape.GetType()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetShape()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_shape%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetSensor(sensor)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_isSensor%20%3D%3D%20sensor)%20return%3B%0A%20%20%20%20%20%20%20%20this.m_isSensor%20%3D%20sensor%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_body%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%20%20let%20edge%20%3D%20this.m_body.GetContactList()%3B%0A%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20contact%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%20this%20%7C%7C%20fixtureB%20%3D%3D%20this)%20contact.SetSensor(fixtureA.IsSensor()%20%7C%7C%20fixtureB.IsSensor())%3B%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsSensor()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_isSensor%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetFilterData(filter)%20%7B%0A%20%20%20%20%20%20%20%20this.m_filter%20%3D%20filter.Copy()%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_body)%20return%3B%0A%20%20%20%20%20%20%20%20let%20edge%20%3D%20this.m_body.GetContactList()%3B%0A%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20contact%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%20this%20%7C%7C%20fixtureB%20%3D%3D%20this)%20contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFilterData()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_filter.Copy()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetBody()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_body%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNext()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetUserData()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetUserData(data)%20%7B%0A%20%20%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20TestPoint(p)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_shape.TestPoint(this.m_body.GetTransform()%2C%20p)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(output%2C%20input)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_shape.RayCast(output%2C%20input%2C%20this.m_body.GetTransform())%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMassData(massData)%20%7B%0A%20%20%20%20%20%20%20%20if%20(massData%20%3D%3D%3D%20undefined)%20massData%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(massData%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20massData%20%3D%20new%20b2MassData()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_shape.ComputeMass(massData%2C%20this.m_density)%3B%0A%20%20%20%20%20%20%20%20return%20massData%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetDensity(density)%20%7B%0A%20%20%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_density%20%3D%20density%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetDensity()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_density%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFriction()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_friction%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetFriction(friction)%20%7B%0A%20%20%20%20%20%20%20%20if%20(friction%20%3D%3D%3D%20undefined)%20friction%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_friction%20%3D%20friction%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetRestitution()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_restitution%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetRestitution(restitution)%20%7B%0A%20%20%20%20%20%20%20%20if%20(restitution%20%3D%3D%3D%20undefined)%20restitution%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_restitution%20%3D%20restitution%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAABB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_aabb%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Fixture()%20%7B%0A%20%20%20%20%20%20%20%20this.m_aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20this.m_userData%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_body%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_shape%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_density%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_friction%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_restitution%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Create(body%2C%20xf%2C%20def)%20%7B%0A%20%20%20%20%20%20%20%20this.m_userData%20%3D%20def.userData%3B%0A%20%20%20%20%20%20%20%20this.m_friction%20%3D%20def.friction%3B%0A%20%20%20%20%20%20%20%20this.m_restitution%20%3D%20def.restitution%3B%0A%20%20%20%20%20%20%20%20this.m_body%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_filter%20%3D%20def.filter.Copy()%3B%0A%20%20%20%20%20%20%20%20this.m_isSensor%20%3D%20def.isSensor%3B%0A%20%20%20%20%20%20%20%20this.m_shape%20%3D%20def.shape.Copy()%3B%0A%20%20%20%20%20%20%20%20this.m_density%20%3D%20def.density%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Destroy()%20%7B%0A%20%20%20%20%20%20%20%20this.m_shape%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CreateProxy(broadPhase%2C%20xf)%20%7B%0A%20%20%20%20%20%20%20%20this.m_shape.ComputeAABB(this.m_aabb%2C%20xf)%3B%0A%20%20%20%20%20%20%20%20this.m_proxy%20%3D%20broadPhase.CreateProxy(this.m_aabb%2C%20this)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DestroyProxy(broadPhase)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_proxy%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20broadPhase.DestroyProxy(this.m_proxy)%3B%0A%20%20%20%20%20%20%20%20this.m_proxy%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Synchronize(broadPhase%2C%20transform1%2C%20transform2)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.m_proxy)%20return%3B%0A%20%20%20%20%20%20%20%20const%20aabb1%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20const%20aabb2%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20this.m_shape.ComputeAABB(aabb1%2C%20transform1)%3B%0A%20%20%20%20%20%20%20%20this.m_shape.ComputeAABB(aabb2%2C%20transform2)%3B%0A%20%20%20%20%20%20%20%20this.m_aabb.Combine(aabb1%2C%20aabb2)%3B%0A%20%20%20%20%20%20%20%20const%20displacement%20%3D%20b2Math.SubtractVV(transform2.position%2C%20transform1.position)%3B%0A%20%20%20%20%20%20%20%20broadPhase.MoveProxy(this.m_proxy%2C%20this.m_aabb%2C%20displacement)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2Fixture%20%3D%20b2Fixture%3B%0A%0A%20%20%20%20class%20b2FixtureDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2FixtureDef.b2FixtureDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FixtureDef)%20this.b2FixtureDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2FixtureDef()%20%7B%0A%20%20%20%20%20%20%20%20this.filter%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2FixtureDef()%20%7B%0A%20%20%20%20%20%20%20%20this.shape%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.friction%20%3D%200.2%3B%0A%20%20%20%20%20%20%20%20this.restitution%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.density%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.filter.categoryBits%20%3D%200x0001%3B%0A%20%20%20%20%20%20%20%20this.filter.maskBits%20%3D%200xFFFF%3B%0A%20%20%20%20%20%20%20%20this.filter.groupIndex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.isSensor%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2FixtureDef%20%3D%20b2FixtureDef%3B%0A%0A%20%20%20%20class%20b2Island%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Island.b2Island.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Island)%20this.b2Island.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Island()%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodies%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20this.m_contacts%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20this.m_joints%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(%0A%20%20%20%20%20%20%20%20bodyCapacity%2C%0A%20%20%20%20%20%20%20%20contactCapacity%2C%0A%20%20%20%20%20%20%20%20jointCapacity%2C%0A%20%20%20%20%20%20%20%20allocator%2C%0A%20%20%20%20%20%20%20%20listener%2C%0A%20%20%20%20%20%20%20%20contactSolver%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bodyCapacity%20%3D%3D%3D%20undefined)%20bodyCapacity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(contactCapacity%20%3D%3D%3D%20undefined)%20contactCapacity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(jointCapacity%20%3D%3D%3D%20undefined)%20jointCapacity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_bodyCapacity%20%3D%20bodyCapacity%3B%0A%20%20%20%20%20%20%20%20this.m_contactCapacity%20%3D%20contactCapacity%3B%0A%20%20%20%20%20%20%20%20this.m_jointCapacity%20%3D%20jointCapacity%3B%0A%20%20%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20%20%20this.m_listener%20%3D%20listener%3B%0A%20%20%20%20%20%20%20%20this.m_contactSolver%20%3D%20contactSolver%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodies.length%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20bodyCapacity%3B%20i%2B%2B)%20%7B%20this.m_bodies%5Bi%5D%20%3D%20null%3B%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_contacts.length%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20contactCapacity%3B%20i%2B%2B)%20%7B%20this.m_contacts%5Bi%5D%20%3D%20null%3B%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_joints.length%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20jointCapacity%3B%20i%2B%2B)%20%7B%20this.m_joints%5Bi%5D%20%3D%20null%3B%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Clear()%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Solve(step%2C%20gravity%2C%20allowSleep)%20%7B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20b%3B%0A%20%20%20%20%20%20%20%20let%20joint%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%20step.dt%20*%20(gravity.x%20%2B%20b.m_invMass%20*%20b.m_force.x)%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%20step.dt%20*%20(gravity.y%20%2B%20b.m_invMass%20*%20b.m_force.y)%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%20step.dt%20*%20b.m_invI%20*%20b.m_torque%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.Multiply(b2Math.Clamp(1.0%20-%20step.dt%20*%20b.m_linearDamping%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20*%3D%20b2Math.Clamp(1.0%20-%20step.dt%20*%20b.m_angularDamping%2C%200.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_contactSolver.Initialize(step%2C%20this.m_contacts%2C%20this.m_contactCount%2C%20this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20const%20contactSolver%20%3D%20this.m_contactSolver%3B%0A%20%20%20%20%20%20%20%20contactSolver.InitVelocityConstraints(step)%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20joint.InitVelocityConstraints(step)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20step.velocityIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint.SolveVelocityConstraints(step)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20contactSolver.SolveVelocityConstraints()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20joint.FinalizeVelocityConstraints()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20contactSolver.FinalizeVelocityConstraints()%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20const%20translationX%20%3D%20step.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20translationY%20%3D%20step.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20%20%20if%20((translationX%20*%20translationX%20%2B%20translationY%20*%20translationY)%20%3E%20b2Settings.b2_maxTranslationSquared)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20*%3D%20b2Settings.b2_maxTranslation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20*%3D%20b2Settings.b2_maxTranslation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20rotation%20%3D%20step.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rotation%20*%20rotation%20%3E%20b2Settings.b2_maxRotationSquared)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.m_angularVelocity%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20(-b2Settings.b2_maxRotation%20*%20step.inv_dt)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20b2Settings.b2_maxRotation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.c0.SetV(b.m_sweep.c)%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.a0%20%3D%20b.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.c.x%20%2B%3D%20step.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.c.y%20%2B%3D%20step.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.a%20%2B%3D%20step.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20b.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20step.positionIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20contactsOkay%20%3D%20contactSolver.SolvePositionConstraints(b2Settings.b2_contactBaumgarte)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20jointsOkay%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20jointOkay%20%3D%20joint.SolvePositionConstraints(b2Settings.b2_contactBaumgarte)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20jointsOkay%20%3D%20jointsOkay%20%26%26%20jointOkay%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(contactsOkay%20%26%26%20jointsOkay)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.Report(contactSolver.m_constraints)%3B%0A%20%20%20%20%20%20%20%20if%20(allowSleep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20minSleepTime%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20%20%20const%20linTolSqr%20%3D%20b2Settings.b2_linearSleepTolerance%20*%20b2Settings.b2_linearSleepTolerance%3B%0A%20%20%20%20%20%20%20%20%20%20const%20angTolSqr%20%3D%20b2Settings.b2_angularSleepTolerance%20*%20b2Settings.b2_angularSleepTolerance%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20((b.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20((b.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%200%20%7C%7C%20b.m_angularVelocity%20*%20b.m_angularVelocity%20%3E%20angTolSqr%20%7C%7C%20b2Math.Dot(b.m_linearVelocity%2C%20b.m_linearVelocity)%20%3E%20linTolSqr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%2B%3D%20step.dt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%20b2Math.Min(minSleepTime%2C%20b.m_sleepTime)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(minSleepTime%20%3E%3D%20b2Settings.b2_timeToSleep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveTOI(subStep)%20%7B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_contactSolver.Initialize(subStep%2C%20this.m_contacts%2C%20this.m_contactCount%2C%20this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20const%20contactSolver%20%3D%20this.m_contactSolver%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_joints%5Bi%5D.InitVelocityConstraints(subStep)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20subStep.velocityIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20contactSolver.SolveVelocityConstraints()%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_joints%5Bj%5D.SolveVelocityConstraints(subStep)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20const%20translationX%20%3D%20subStep.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20translationY%20%3D%20subStep.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20%20%20if%20((translationX%20*%20translationX%20%2B%20translationY%20*%20translationY)%20%3E%20b2Settings.b2_maxTranslationSquared)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20*%3D%20b2Settings.b2_maxTranslation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20*%3D%20b2Settings.b2_maxTranslation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20rotation%20%3D%20subStep.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rotation%20*%20rotation%20%3E%20b2Settings.b2_maxRotationSquared)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.m_angularVelocity%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20(-b2Settings.b2_maxRotation%20*%20subStep.inv_dt)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20b2Settings.b2_maxRotation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.c0.SetV(b.m_sweep.c)%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.a0%20%3D%20b.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.c.x%20%2B%3D%20subStep.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.c.y%20%2B%3D%20subStep.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.a%20%2B%3D%20subStep.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20b.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20k_toiBaumgarte%20%3D%200.75%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20subStep.positionIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20contactsOkay%20%3D%20contactSolver.SolvePositionConstraints(k_toiBaumgarte)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20jointsOkay%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20jointOkay%20%3D%20this.m_joints%5Bj%5D.SolvePositionConstraints(b2Settings.b2_contactBaumgarte)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20jointsOkay%20%3D%20jointsOkay%20%26%26%20jointOkay%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(contactsOkay%20%26%26%20jointsOkay)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.Report(contactSolver.m_constraints)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Report(constraints)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_listener%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20c%20%3D%20this.m_contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20cc%20%3D%20constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20cc.pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Island.s_impulse.normalImpulses%5Bj%5D%20%3D%20cc.points%5Bj%5D.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Island.s_impulse.tangentImpulses%5Bj%5D%20%3D%20cc.points%5Bj%5D.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_listener.PostSolve(c%2C%20b2Island.s_impulse)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AddBody(body)%20%7B%0A%20%20%20%20%20%20%20%20body.m_islandIndex%20%3D%20this.m_bodyCount%3B%0A%20%20%20%20%20%20%20%20this.m_bodies%5Bthis.m_bodyCount%2B%2B%5D%20%3D%20body%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AddContact(contact)%20%7B%0A%20%20%20%20%20%20%20%20this.m_contacts%5Bthis.m_contactCount%2B%2B%5D%20%3D%20contact%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AddJoint(joint)%20%7B%0A%20%20%20%20%20%20%20%20this.m_joints%5Bthis.m_jointCount%2B%2B%5D%20%3D%20joint%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2Island%20%3D%20b2Island%3B%0A%0A%20%20%20%20class%20b2TimeStep%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2TimeStep.b2TimeStep.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(step)%20%7B%0A%20%20%20%20%20%20%20%20this.dt%20%3D%20step.dt%3B%0A%20%20%20%20%20%20%20%20this.inv_dt%20%3D%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20this.positionIterations%20%3D%20step.positionIterations%3B%0A%20%20%20%20%20%20%20%20this.velocityIterations%20%3D%20step.velocityIterations%3B%0A%20%20%20%20%20%20%20%20this.warmStarting%20%3D%20step.warmStarting%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2TimeStep%20%3D%20b2TimeStep%3B%0A%0A%20%20%20%20class%20b2World%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2World.b2World.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2World)%20this.b2World.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2World()%20%7B%0A%20%20%20%20%20%20%20%20this.s_stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%20%20this.m_contactManager%20%3D%20new%20b2ContactManager()%3B%0A%20%20%20%20%20%20%20%20this.m_contactSolver%20%3D%20new%20b2ContactSolver()%3B%0A%20%20%20%20%20%20%20%20this.m_island%20%3D%20new%20b2Island()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2World(gravity%2C%20doSleep)%20%7B%0A%20%20%20%20%20%20%20%20this.m_destructionListener%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_debugDraw%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_bodyList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_jointList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_controllerList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_controllerCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20b2World.m_warmStarting%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20b2World.m_continuousPhysics%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.m_allowSleep%20%3D%20doSleep%3B%0A%20%20%20%20%20%20%20%20this.m_gravity%20%3D%20gravity%3B%0A%20%20%20%20%20%20%20%20this.m_inv_dt0%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20const%20bd%20%3D%20new%20b2BodyDef()%3B%0A%20%20%20%20%20%20%20%20this.m_groundBody%20%3D%20this.CreateBody(bd)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetDestructionListener(listener)%20%7B%0A%20%20%20%20%20%20%20%20this.m_destructionListener%20%3D%20listener%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetContactFilter(filter)%20%7B%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_contactFilter%20%3D%20filter%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetContactListener(listener)%20%7B%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_contactListener%20%3D%20listener%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetDebugDraw(debugDraw)%20%7B%0A%20%20%20%20%20%20%20%20this.m_debugDraw%20%3D%20debugDraw%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetBroadPhase(broadPhase)%20%7B%0A%20%20%20%20%20%20%20%20const%20oldBroadPhase%20%3D%20this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_broadPhase%20%3D%20broadPhase%3B%0A%20%20%20%20%20%20%20%20for%20(let%20b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20f%20%3D%20b.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.m_proxy%20%3D%20broadPhase.CreateProxy(oldBroadPhase.GetFatAABB(f.m_proxy)%2C%20f)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Validate()%20%7B%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_broadPhase.Validate()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetProxyCount()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_contactManager.m_broadPhase.GetProxyCount()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CreateBody(def)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20b%20%3D%20new%20b2Body(def%2C%20this)%3B%0A%20%20%20%20%20%20%20%20b.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20b.m_next%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_bodyList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_bodyList.m_prev%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_bodyList%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_bodyCount%3B%0A%20%20%20%20%20%20%20%20return%20b%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DestroyBody(b)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20jn%20%3D%20b.m_jointList%3B%0A%20%20%20%20%20%20%20%20while%20(jn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20jn0%20%3D%20jn%3B%0A%20%20%20%20%20%20%20%20%20%20jn%20%3D%20jn.next%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_destructionListener)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_destructionListener.SayGoodbyeJoint(jn0.joint)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.DestroyJoint(jn0.joint)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20coe%20%3D%20b.m_controllerList%3B%0A%20%20%20%20%20%20%20%20while%20(coe)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20coe0%20%3D%20coe%3B%0A%20%20%20%20%20%20%20%20%20%20coe%20%3D%20coe.nextController%3B%0A%20%20%20%20%20%20%20%20%20%20coe0.controller.RemoveBody(b)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20ce%20%3D%20b.m_contactList%3B%0A%20%20%20%20%20%20%20%20while%20(ce)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20ce0%20%3D%20ce%3B%0A%20%20%20%20%20%20%20%20%20%20ce%20%3D%20ce.next%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_contactManager.Destroy(ce0.contact)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20f%20%3D%20b.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20while%20(f)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20f0%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20f%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_destructionListener)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_destructionListener.SayGoodbyeFixture(f0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20f0.DestroyProxy(this.m_contactManager.m_broadPhase)%3B%0A%20%20%20%20%20%20%20%20%20%20f0.Destroy()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b.m_fixtureList%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20b.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(b.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b.m_prev.m_next%20%3D%20b.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b.m_next.m_prev%20%3D%20b.m_prev%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(b%20%3D%3D%20this.m_bodyList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_bodyList%20%3D%20b.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%20--this.m_bodyCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CreateJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20const%20j%20%3D%20b2Joint.Create(def%2C%20null)%3B%0A%20%20%20%20%20%20%20%20j.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20j.m_next%20%3D%20this.m_jointList%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_jointList.m_prev%20%3D%20j%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_jointList%20%3D%20j%3B%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_jointCount%3B%0A%20%20%20%20%20%20%20%20j.m_edgeA.joint%20%3D%20j%3B%0A%20%20%20%20%20%20%20%20j.m_edgeA.other%20%3D%20j.m_bodyB%3B%0A%20%20%20%20%20%20%20%20j.m_edgeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20j.m_edgeA.next%20%3D%20j.m_bodyA.m_jointList%3B%0A%20%20%20%20%20%20%20%20if%20(j.m_bodyA.m_jointList)%20j.m_bodyA.m_jointList.prev%20%3D%20j.m_edgeA%3B%0A%20%20%20%20%20%20%20%20j.m_bodyA.m_jointList%20%3D%20j.m_edgeA%3B%0A%20%20%20%20%20%20%20%20j.m_edgeB.joint%20%3D%20j%3B%0A%20%20%20%20%20%20%20%20j.m_edgeB.other%20%3D%20j.m_bodyA%3B%0A%20%20%20%20%20%20%20%20j.m_edgeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20j.m_edgeB.next%20%3D%20j.m_bodyB.m_jointList%3B%0A%20%20%20%20%20%20%20%20if%20(j.m_bodyB.m_jointList)%20j.m_bodyB.m_jointList.prev%20%3D%20j.m_edgeB%3B%0A%20%20%20%20%20%20%20%20j.m_bodyB.m_jointList%20%3D%20j.m_edgeB%3B%0A%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20def.bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20def.bodyB%3B%0A%20%20%20%20%20%20%20%20if%20(def.collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20edge.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20j%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DestroyJoint(j)%20%7B%0A%20%20%20%20%20%20%20%20const%20collideConnected%20%3D%20j.m_collideConnected%3B%0A%20%20%20%20%20%20%20%20if%20(j.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j.m_prev.m_next%20%3D%20j.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j.m_next.m_prev%20%3D%20j.m_prev%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(j%20%3D%3D%20this.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_jointList%20%3D%20j.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20j.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20j.m_bodyB%3B%0A%20%20%20%20%20%20%20%20bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20if%20(j.m_edgeA.prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j.m_edgeA.prev.next%20%3D%20j.m_edgeA.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(j.m_edgeA.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j.m_edgeA.next.prev%20%3D%20j.m_edgeA.prev%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(j.m_edgeA%20%3D%3D%20bodyA.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_jointList%20%3D%20j.m_edgeA.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20j.m_edgeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20j.m_edgeA.next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(j.m_edgeB.prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j.m_edgeB.prev.next%20%3D%20j.m_edgeB.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(j.m_edgeB.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j.m_edgeB.next.prev%20%3D%20j.m_edgeB.prev%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(j.m_edgeB%20%3D%3D%20bodyB.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_jointList%20%3D%20j.m_edgeB.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20j.m_edgeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20j.m_edgeB.next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20b2Joint.Destroy(j%2C%20null)%3B%0A%20%20%20%20%20%20%20%20--this.m_jointCount%3B%0A%20%20%20%20%20%20%20%20if%20(collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20edge.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AddController(c)%20%7B%0A%20%20%20%20%20%20%20%20c.m_next%20%3D%20this.m_controllerList%3B%0A%20%20%20%20%20%20%20%20c.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_controllerList%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20c.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20this.m_controllerCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RemoveController(c)%20%7B%0A%20%20%20%20%20%20%20%20if%20(c.m_prev)%20c.m_prev.m_next%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%20%20if%20(c.m_next)%20c.m_next.m_prev%20%3D%20c.m_prev%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_controllerList%20%3D%3D%20c)%20this.m_controllerList%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%20%20this.m_controllerCount--%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20CreateController(controller)%20%7B%0A%20%20%20%20%20%20%20%20if%20(controller.m_world%20!%3D%20this)%20throw%20new%20Error('Controller%20can%20only%20be%20a%20member%20of%20one%20world')%3B%0A%20%20%20%20%20%20%20%20controller.m_next%20%3D%20this.m_controllerList%3B%0A%20%20%20%20%20%20%20%20controller.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_controllerList)%20this.m_controllerList.m_prev%20%3D%20controller%3B%0A%20%20%20%20%20%20%20%20this.m_controllerList%20%3D%20controller%3B%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_controllerCount%3B%0A%20%20%20%20%20%20%20%20controller.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20return%20controller%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DestroyController(controller)%20%7B%0A%20%20%20%20%20%20%20%20controller.Clear()%3B%0A%20%20%20%20%20%20%20%20if%20(controller.m_next)%20controller.m_next.m_prev%20%3D%20controller.m_prev%3B%0A%20%20%20%20%20%20%20%20if%20(controller.m_prev)%20controller.m_prev.m_next%20%3D%20controller.m_next%3B%0A%20%20%20%20%20%20%20%20if%20(controller%20%3D%3D%20this.m_controllerList)%20this.m_controllerList%20%3D%20controller.m_next%3B%0A%20%20%20%20%20%20%20%20--this.m_controllerCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetWarmStarting(flag)%20%7B%0A%20%20%20%20%20%20%20%20b2World.m_warmStarting%20%3D%20flag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetContinuousPhysics(flag)%20%7B%0A%20%20%20%20%20%20%20%20b2World.m_continuousPhysics%20%3D%20flag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetBodyCount()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointCount()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_jointCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetContactCount()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_contactCount%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetGravity(gravity)%20%7B%0A%20%20%20%20%20%20%20%20this.m_gravity%20%3D%20gravity%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetGravity()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_gravity%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetGroundBody()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_groundBody%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Step(dt%2C%20velocityIterations%2C%20positionIterations)%20%7B%0A%20%20%20%20%20%20%20%20if%20(dt%20%3D%3D%3D%20undefined)%20dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(velocityIterations%20%3D%3D%3D%20undefined)%20velocityIterations%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(positionIterations%20%3D%3D%3D%20undefined)%20positionIterations%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2World.e_newFixture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2World.e_newFixture%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2World.e_locked%3B%0A%20%20%20%20%20%20%20%20const%20step%20%3D%20b2World.s_timestep2%3B%0A%20%20%20%20%20%20%20%20step.dt%20%3D%20dt%3B%0A%20%20%20%20%20%20%20%20step.velocityIterations%20%3D%20velocityIterations%3B%0A%20%20%20%20%20%20%20%20step.positionIterations%20%3D%20positionIterations%3B%0A%20%20%20%20%20%20%20%20if%20(dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20step.inv_dt%20%3D%201.0%20%2F%20dt%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20step.inv_dt%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20step.dtRatio%20%3D%20this.m_inv_dt0%20*%20dt%3B%0A%20%20%20%20%20%20%20%20step.warmStarting%20%3D%20b2World.m_warmStarting%3B%0A%20%20%20%20%20%20%20%20this.m_contactManager.Collide()%3B%0A%20%20%20%20%20%20%20%20if%20(step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.Solve(step)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(b2World.m_continuousPhysics%20%26%26%20step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.SolveTOI(step)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_inv_dt0%20%3D%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2World.e_locked%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20ClearForces()%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20body%20%3D%20this.m_bodyList%3B%20body%3B%20body%20%3D%20body.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20body.m_force.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20body.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawDebugData()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_debugDraw%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_debugDraw.m_sprite.graphics.clear()%3B%0A%20%20%20%20%20%20%20%20const%20flags%20%3D%20this.m_debugDraw.GetFlags()%3B%0A%20%20%20%20%20%20%20%20const%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20b%3B%0A%20%20%20%20%20%20%20%20let%20f%3B%0A%20%20%20%20%20%20%20%20let%20s%3B%0A%20%20%20%20%20%20%20%20let%20j%3B%0A%20%20%20%20%20%20%20%20let%20bp%3B%0A%20%20%20%20%20%20%20%20const%20invQ%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20const%20x1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20const%20x2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20let%20xf%3B%0A%20%20%20%20%20%20%20%20const%20b1%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20const%20b2%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20let%20vs%20%3D%20%5Bnew%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%5D%3B%0A%20%20%20%20%20%20%20%20const%20color%20%3D%20new%20b2Color(0%2C%200%2C%200)%3B%0A%20%20%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_shapeBit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xf%20%3D%20b.m_xf%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(f%20%3D%20b.GetFixtureList()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20f.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.5%2C%200.3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.9%2C%200.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_kinematicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.5%2C%200.9)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.6%2C%200.6%2C%200.6)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.9%2C%200.7%2C%200.7)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_jointBit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_jointList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.DrawJoint(j)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_controllerBit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20c%20%3D%20this.m_controllerList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.Draw(this.m_debugDraw)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_pairBit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20color.Set(0.3%2C%200.9%2C%200.9)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20contact%20%3D%20this.m_contactManager.m_contactList%3B%20contact%3B%20contact%20%3D%20contact.GetNext())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cA%20%3D%20fixtureA.GetAABB().GetCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cB%20%3D%20fixtureB.GetAABB().GetCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(cA%2C%20cB%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_aabbBit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bp%20%3D%20this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20%20%20vs%20%3D%20%5Bnew%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%5D%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%3B%20b%20%3D%20b.GetNext())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(f%20%3D%20b.GetFixtureList()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%3B%20f%20%3D%20f.GetNext())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20aabb%20%3D%20bp.GetFatAABB(f.m_proxy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vs%5B0%5D.Set(aabb.lowerBound.x%2C%20aabb.lowerBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vs%5B1%5D.Set(aabb.upperBound.x%2C%20aabb.lowerBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vs%5B2%5D.Set(aabb.upperBound.x%2C%20aabb.upperBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vs%5B3%5D.Set(aabb.lowerBound.x%2C%20aabb.upperBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawPolygon(vs%2C%204%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_centerOfMassBit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xf%20%3D%20b2World.s_xf%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xf.R%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xf.position%20%3D%20b.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawTransform(xf)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20QueryAABB(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20%20%20const%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20const%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20callback(broadPhase.GetUserData(proxy))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20QueryShape(callback%2C%20shape%2C%20transform)%20%7B%0A%20%20%20%20%20%20%20%20const%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20if%20(transform%20%3D%3D%3D%20undefined)%20transform%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(transform%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20transform%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20%20%20%20%20transform.SetIdentity()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20fixture%20%3D%20(broadPhase.GetUserData(proxy)%20instanceof%20b2Fixture%20%3F%20broadPhase.GetUserData(proxy)%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b2Shape.TestOverlap(shape%2C%20transform%2C%20fixture.GetShape()%2C%20fixture.GetBody().GetTransform()))%20return%20callback(fixture)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20shape.ComputeAABB(aabb%2C%20transform)%3B%0A%20%20%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20QueryPoint(callback%2C%20p)%20%7B%0A%20%20%20%20%20%20%20%20const%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20const%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20fixture%20%3D%20(broadPhase.GetUserData(proxy)%20instanceof%20b2Fixture%20%3F%20broadPhase.GetUserData(proxy)%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(fixture.TestPoint(p))%20return%20callback(fixture)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.Set(p.x%20-%20b2Settings.b2_linearSlop%2C%20p.y%20-%20b2Settings.b2_linearSlop)%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.Set(p.x%20%2B%20b2Settings.b2_linearSlop%2C%20p.y%20%2B%20b2Settings.b2_linearSlop)%3B%0A%20%20%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCast(callback%2C%20point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20%20%20const%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20const%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20const%20output%20%3D%20new%20b2RayCastOutput()%3B%0A%0A%20%20%20%20%20%20%20%20function%20RayCastWrapper(input%2C%20proxy)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20userData%20%3D%20broadPhase.GetUserData(proxy)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixture%20%3D%20(userData%20instanceof%20b2Fixture%20%3F%20userData%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20hit%20%3D%20fixture.RayCast(output%2C%20input)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(hit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20fraction%20%3D%20output.fraction%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20point%20%3D%20new%20b2Vec2((1.0%20-%20fraction)%20*%20point1.x%20%2B%20fraction%20*%20point2.x%2C%20(1.0%20-%20fraction)%20*%20point1.y%20%2B%20fraction%20*%20point2.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback(fixture%2C%20point%2C%20output.normal%2C%20fraction)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20input.maxFraction%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20input%20%3D%20new%20b2RayCastInput(point1%2C%20point2)%3B%0A%20%20%20%20%20%20%20%20broadPhase.RayCast(RayCastWrapper%2C%20input)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCastOne(point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20%20%20const%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20let%20result%3B%0A%0A%20%20%20%20%20%20%20%20function%20RayCastOneWrapper(fixture%2C%20point%2C%20normal%2C%20fraction)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(fraction%20%3D%3D%3D%20undefined)%20fraction%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20result%20%3D%20fixture%3B%0A%20%20%20%20%20%20%20%20%20%20return%20fraction%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20__this.RayCast(RayCastOneWrapper%2C%20point1%2C%20point2)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RayCastAll(point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20%20%20const%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20new%20Vector()%3B%0A%0A%20%20%20%20%20%20%20%20function%20RayCastAllWrapper(fixture%2C%20point%2C%20normal%2C%20fraction)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(fraction%20%3D%3D%3D%20undefined)%20fraction%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20result%5Bresult.length%5D%20%3D%20fixture%3B%0A%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20__this.RayCast(RayCastAllWrapper%2C%20point1%2C%20point2)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetBodyList()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyList%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointList()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_jointList%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetContactList()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_contactList%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsLocked()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2World.e_locked)%20%3E%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Solve(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20b%3B%0A%20%20%20%20%20%20%20%20for%20(let%20controller%20%3D%20this.m_controllerList%3B%20controller%3B%20controller%20%3D%20controller.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20controller.Step(step)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20island%20%3D%20this.m_island%3B%0A%20%20%20%20%20%20%20%20island.Initialize(this.m_bodyCount%2C%20this.m_contactCount%2C%20this.m_jointCount%2C%20null%2C%20this.m_contactManager.m_contactListener%2C%20this.m_contactSolver)%3B%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(let%20c%20%3D%20this.m_contactList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%20this.m_jointList%3B%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20stackSize%20%3D%20parseInt(this.m_bodyCount)%3B%0A%20%20%20%20%20%20%20%20const%20stack%20%3D%20this.s_stack%3B%0A%20%20%20%20%20%20%20%20for%20(let%20seed%20%3D%20this.m_bodyList%3B%20seed%3B%20seed%20%3D%20seed.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(seed.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(seed.IsAwake()%20%3D%3D%20false%20%7C%7C%20seed.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(seed.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20island.Clear()%3B%0A%20%20%20%20%20%20%20%20%20%20let%20stackCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20seed%3B%0A%20%20%20%20%20%20%20%20%20%20seed.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20while%20(stackCount%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20stack%5B--stackCount%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddBody(b)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20ce%20%3D%20b.m_contactList%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(ce.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(ce.contact.IsSensor()%20%3D%3D%20true%20%7C%7C%20ce.contact.IsEnabled()%20%3D%3D%20false%20%7C%7C%20ce.contact.IsTouching()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20island.AddContact(ce.contact)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.m_flags%20%7C%3D%20b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20ce.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20jn%20%3D%20b.m_jointList%3B%20jn%3B%20jn%20%3D%20jn.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(jn.joint.m_islandFlag%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20jn.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20island.AddJoint(jn.joint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20jn.joint.m_islandFlag%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20island.Solve(step%2C%20this.m_gravity%2C%20this.m_allowSleep)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20island.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20island.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20stack.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!stack%5Bi%5D)%20break%3B%0A%20%20%20%20%20%20%20%20%20%20stack%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false%20%7C%7C%20b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20b.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveTOI(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20b%3B%0A%20%20%20%20%20%20%20%20let%20fA%3B%0A%20%20%20%20%20%20%20%20let%20fB%3B%0A%20%20%20%20%20%20%20%20let%20bA%3B%0A%20%20%20%20%20%20%20%20let%20bB%3B%0A%20%20%20%20%20%20%20%20let%20cEdge%3B%0A%20%20%20%20%20%20%20%20let%20j%3B%0A%20%20%20%20%20%20%20%20const%20island%20%3D%20this.m_island%3B%0A%20%20%20%20%20%20%20%20island.Initialize(this.m_bodyCount%2C%20b2Settings.b2_maxTOIContactsPerIsland%2C%20b2Settings.b2_maxTOIJointsPerIsland%2C%20null%2C%20this.m_contactManager.m_contactListener%2C%20this.m_contactSolver)%3B%0A%20%20%20%20%20%20%20%20const%20queue%20%3D%20b2World.s_queue%3B%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_sweep.t0%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20c%3B%0A%20%20%20%20%20%20%20%20for%20(c%20%3D%20this.m_contactList%3B%0A%20%20%20%20%20%20%20%20%20%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~(b2Contact.e_toiFlag%20%7C%20b2Contact.e_islandFlag)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_jointList%3B%0A%20%20%20%20%20%20%20%20%20%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(%3B%20%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20minContact%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20let%20minTOI%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(c%20%3D%20this.m_contactList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(c.IsSensor()%20%3D%3D%20true%20%7C%7C%20c.IsEnabled()%20%3D%3D%20false%20%7C%7C%20c.IsContinuous()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20toi%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(c.m_flags%20%26%20b2Contact.e_toiFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20c.m_toi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fA%20%3D%20c.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fB%20%3D%20c.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bA%20%3D%20fA.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bB%20%3D%20fB.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20((bA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bA.IsAwake()%20%3D%3D%20false)%20%26%26%20(bB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bB.IsAwake()%20%3D%3D%20false))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20t0%20%3D%20bA.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(bA.m_sweep.t0%20%3C%20bB.m_sweep.t0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t0%20%3D%20bB.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bA.m_sweep.Advance(t0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(bB.m_sweep.t0%20%3C%20bA.m_sweep.t0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t0%20%3D%20bA.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bB.m_sweep.Advance(t0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20c.ComputeTOI(bA.m_sweep%2C%20bB.m_sweep)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(toi%20%3E%3D%200.0%20%26%26%20toi%20%3C%3D%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(toi%20%3E%200.0%20%26%26%20toi%20%3C%201.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20(1.0%20-%20toi)%20*%20t0%20%2B%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(toi%20%3E%201)%20toi%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20c.m_toi%20%3D%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20c.m_flags%20%7C%3D%20b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Number.MIN_VALUE%20%3C%20toi%20%26%26%20toi%20%3C%20minTOI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20minContact%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20minTOI%20%3D%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(minContact%20%3D%3D%20null%20%7C%7C%201.0%20-%20100.0%20*%20Number.MIN_VALUE%20%3C%20minTOI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20fA%20%3D%20minContact.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20%20%20fB%20%3D%20minContact.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20%20%20bA%20%3D%20fA.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20bB%20%3D%20fB.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20b2World.s_backupA.Set(bA.m_sweep)%3B%0A%20%20%20%20%20%20%20%20%20%20b2World.s_backupB.Set(bB.m_sweep)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20%20%20minContact.Update(this.m_contactManager.m_contactListener)%3B%0A%20%20%20%20%20%20%20%20%20%20minContact.m_flags%20%26%3D%20~b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(minContact.IsSensor()%20%3D%3D%20true%20%7C%7C%20minContact.IsEnabled()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bA.m_sweep.Set(b2World.s_backupA)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bB.m_sweep.Set(b2World.s_backupB)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(minContact.IsTouching()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20let%20seed%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(seed.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20seed%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20island.Clear()%3B%0A%20%20%20%20%20%20%20%20%20%20let%20queueStart%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20let%20queueSize%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%2B%2B%5D%20%3D%20seed%3B%0A%20%20%20%20%20%20%20%20%20%20seed.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20while%20(queueSize%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20queue%5BqueueStart%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20--queueSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddBody(b)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(cEdge%20%3D%20b.m_contactList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge%3B%20cEdge%20%3D%20cEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(island.m_contactCount%20%3D%3D%20island.m_contactCapacity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(cEdge.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(cEdge.contact.IsSensor()%20%3D%3D%20true%20%7C%7C%20cEdge.contact.IsEnabled()%20%3D%3D%20false%20%7C%7C%20cEdge.contact.IsTouching()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20island.AddContact(cEdge.contact)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.m_flags%20%7C%3D%20b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20other%20%3D%20cEdge.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BqueueSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20jEdge%20%3D%20b.m_jointList%3B%20jEdge%3B%20jEdge%20%3D%20jEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(island.m_jointCount%20%3D%3D%20island.m_jointCapacity)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(jEdge.joint.m_islandFlag%20%3D%3D%20true)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20jEdge.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20island.AddJoint(jEdge.joint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20jEdge.joint.m_islandFlag%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BqueueSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20subStep%20%3D%20b2World.s_timestep%3B%0A%20%20%20%20%20%20%20%20%20%20subStep.warmStarting%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20subStep.dt%20%3D%20(1.0%20-%20minTOI)%20*%20step.dt%3B%0A%20%20%20%20%20%20%20%20%20%20subStep.inv_dt%20%3D%201.0%20%2F%20subStep.dt%3B%0A%20%20%20%20%20%20%20%20%20%20subStep.dtRatio%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20subStep.velocityIterations%20%3D%20step.velocityIterations%3B%0A%20%20%20%20%20%20%20%20%20%20subStep.positionIterations%20%3D%20step.positionIterations%3B%0A%20%20%20%20%20%20%20%20%20%20island.SolveTOI(subStep)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20island.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20island.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20b.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(cEdge%20%3D%20b.m_contactList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge%3B%20cEdge%20%3D%20cEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.m_flags%20%26%3D%20~b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20island.m_contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20island.m_contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~(b2Contact.e_toiFlag%20%7C%20b2Contact.e_islandFlag)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20island.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%20%3D%20island.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawJoint(joint)%20%7B%0A%20%20%20%20%20%20%20%20const%20b1%20%3D%20joint.GetBodyA()%3B%0A%20%20%20%20%20%20%20%20const%20b2%20%3D%20joint.GetBodyB()%3B%0A%20%20%20%20%20%20%20%20const%20xf1%20%3D%20b1.m_xf%3B%0A%20%20%20%20%20%20%20%20const%20xf2%20%3D%20b2.m_xf%3B%0A%20%20%20%20%20%20%20%20const%20x1%20%3D%20xf1.position%3B%0A%20%20%20%20%20%20%20%20const%20x2%20%3D%20xf2.position%3B%0A%20%20%20%20%20%20%20%20const%20p1%20%3D%20joint.GetAnchorA()%3B%0A%20%20%20%20%20%20%20%20const%20p2%20%3D%20joint.GetAnchorB()%3B%0A%20%20%20%20%20%20%20%20const%20color%20%3D%20b2World.s_jointColor%3B%0A%20%20%20%20%20%20%20%20switch%20(joint.m_type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Joint.e_distanceJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Joint.e_pulleyJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pulley%20%3D%20((joint%20instanceof%20b2PulleyJoint%20%3F%20joint%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20s1%20%3D%20pulley.GetGroundAnchorA()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20s2%20%3D%20pulley.GetGroundAnchorB()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s1%2C%20p1%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s2%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s1%2C%20s2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Joint.e_mouseJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b1%20!%3D%20this.m_groundBody)%20this.m_debugDraw.DrawSegment(x1%2C%20p1%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b2%20!%3D%20this.m_groundBody)%20this.m_debugDraw.DrawSegment(x2%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20DrawShape(shape%2C%20xf%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(shape.m_type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Shape.e_circleShape%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20circle%20%3D%20((shape%20instanceof%20b2CircleShape%20%3F%20shape%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20center%20%3D%20b2Math.MulX(xf%2C%20circle.m_p)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20radius%20%3D%20circle.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20axis%20%3D%20xf.R.col1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSolidCircle(center%2C%20radius%2C%20axis%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Shape.e_polygonShape%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20poly%20%3D%20((shape%20instanceof%20b2PolygonShape%20%3F%20shape%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20vertexCount%20%3D%20parseInt(poly.GetVertexCount())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20localVertices%20%3D%20poly.GetVertices()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20vertices%20%3D%20new%20Vector(vertexCount)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vertices%5Bi%5D%20%3D%20b2Math.MulX(xf%2C%20localVertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSolidPolygon(vertices%2C%20vertexCount%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Shape.e_edgeShape%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20edge%20%3D%20(shape%20instanceof%20b2EdgeShape%20%3F%20shape%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(b2Math.MulX(xf%2C%20edge.GetVertex1())%2C%20b2Math.MulX(xf%2C%20edge.GetVertex2())%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.b2World%20%3D%20b2World%3B%0A%0A%20%20%20%20class%20b2Contact%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Contact)%20this.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Contact()%20%7B%0A%20%20%20%20%20%20%20%20this.m_nodeA%20%3D%20new%20b2ContactEdge()%3B%0A%20%20%20%20%20%20%20%20this.m_nodeB%20%3D%20new%20b2ContactEdge()%3B%0A%20%20%20%20%20%20%20%20this.m_manifold%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%20%20%20%20this.m_oldManifold%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetManifold()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_manifold%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetWorldManifold(worldManifold)%20%7B%0A%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20shapeA%20%3D%20this.m_fixtureA.GetShape()%3B%0A%20%20%20%20%20%20%20%20const%20shapeB%20%3D%20this.m_fixtureB.GetShape()%3B%0A%20%20%20%20%20%20%20%20worldManifold.Initialize(this.m_manifold%2C%20bodyA.GetTransform()%2C%20shapeA.m_radius%2C%20bodyB.GetTransform()%2C%20shapeB.m_radius)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsTouching()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Contact.e_touchingFlag)%20%3D%3D%20b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsContinuous()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Contact.e_continuousFlag)%20%3D%3D%20b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetSensor(sensor)%20%7B%0A%20%20%20%20%20%20%20%20if%20(sensor)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsSensor()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%3D%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetEnabled(flag)%20%7B%0A%20%20%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsEnabled()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Contact.e_enabledFlag)%20%3D%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNext()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFixtureA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_fixtureA%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFixtureB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_fixtureB%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20FlagForFiltering()%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_filterFlag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Contact()%20%7B%20%7D%0A%0A%20%20%20%20%20%20Reset(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%3D%20undefined)%20fixtureA%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(fixtureB%20%3D%3D%3D%20undefined)%20fixtureB%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_flags%20%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%20%20if%20(!fixtureA%20%7C%7C%20!fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_fixtureA%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_fixtureB%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(fixtureA.IsSensor()%20%7C%7C%20fixtureB.IsSensor())%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20if%20(bodyA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bodyA.IsBullet()%20%7C%7C%20bodyB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bodyB.IsBullet())%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_fixtureA%20%3D%20fixtureA%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureB%20%3D%20fixtureB%3B%0A%20%20%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nodeA.contact%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nodeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nodeA.next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nodeA.other%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nodeB.contact%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nodeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nodeB.next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_nodeB.other%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Update(listener)%20%7B%0A%20%20%20%20%20%20%20%20const%20tManifold%20%3D%20this.m_oldManifold%3B%0A%20%20%20%20%20%20%20%20this.m_oldManifold%20%3D%20this.m_manifold%3B%0A%20%20%20%20%20%20%20%20this.m_manifold%20%3D%20tManifold%3B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%20%20let%20touching%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20const%20wasTouching%20%3D%20(this.m_flags%20%26%20b2Contact.e_touchingFlag)%20%3D%3D%20b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20this.m_fixtureA.m_body%3B%0A%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20this.m_fixtureB.m_body%3B%0A%20%20%20%20%20%20%20%20const%20aabbOverlap%20%3D%20this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(aabbOverlap)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20shapeA%20%3D%20this.m_fixtureA.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20shapeB%20%3D%20this.m_fixtureB.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20xfA%20%3D%20bodyA.GetTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20xfB%20%3D%20bodyB.GetTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20touching%20%3D%20b2Shape.TestOverlap(shapeA%2C%20xfA%2C%20shapeB%2C%20xfB)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(bodyA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bodyA.IsBullet()%20%7C%7C%20bodyB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bodyB.IsBullet())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(aabbOverlap)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Evaluate()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20touching%20%3D%20this.m_manifold.m_pointCount%20%3E%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_manifold.m_pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20mp2%20%3D%20this.m_manifold.m_points%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20id2%20%3D%20mp2.m_id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20this.m_oldManifold.m_pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20mp1%20%3D%20this.m_oldManifold.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(mp1.m_id.key%20%3D%3D%20id2.key)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_normalImpulse%20%3D%20mp1.m_normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_tangentImpulse%20%3D%20mp1.m_tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(touching%20!%3D%20wasTouching)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(touching)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(wasTouching%20%3D%3D%20false%20%26%26%20touching%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20listener.BeginContact(this)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(wasTouching%20%3D%3D%20true%20%26%26%20touching%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20listener.EndContact(this)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20((this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20listener.PreSolve(this%2C%20this.m_oldManifold)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Evaluate()%20%7B%20%7D%0A%0A%20%20%20%20%20%20ComputeTOI(sweepA%2C%20sweepB)%20%7B%0A%20%20%20%20%20%20%20%20b2Contact.s_input.proxyA.Set(this.m_fixtureA.GetShape())%3B%0A%20%20%20%20%20%20%20%20b2Contact.s_input.proxyB.Set(this.m_fixtureB.GetShape())%3B%0A%20%20%20%20%20%20%20%20b2Contact.s_input.sweepA%20%3D%20sweepA%3B%0A%20%20%20%20%20%20%20%20b2Contact.s_input.sweepB%20%3D%20sweepB%3B%0A%20%20%20%20%20%20%20%20b2Contact.s_input.tolerance%20%3D%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%20%20return%20b2TimeOfImpact.TimeOfImpact(b2Contact.s_input)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2Contact%20%3D%20b2Contact%3B%0A%0A%20%20%20%20class%20b2CircleContact%20extends%20b2Contact%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2CircleContact.b2CircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2CircleContact()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Reset(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Evaluate()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20b2Collision.CollideCircles(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2CircleShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2CircleContact%20%3D%20b2CircleContact%3B%0A%0A%20%20%20%20class%20b2ContactConstraint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactConstraint.b2ContactConstraint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactConstraint)%20this.b2ContactConstraint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ContactConstraint()%20%7B%0A%20%20%20%20%20%20%20%20this.localPlaneNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.normalMass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2ContactConstraint()%20%7B%0A%20%20%20%20%20%20%20%20this.points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.points%5Bi%5D%20%3D%20new%20b2ContactConstraintPoint()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraint%20%3D%20b2ContactConstraint%3B%0A%0A%20%20%20%20class%20b2ContactConstraintPoint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactConstraintPoint.b2ContactConstraintPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ContactConstraintPoint()%20%7B%0A%20%20%20%20%20%20%20%20this.localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.rA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.rB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%20%3D%20b2ContactConstraintPoint%3B%0A%0A%20%20%20%20function%20b2ContactEdge()%20%7B%0A%20%20%20%20%20%20b2ContactEdge.b2ContactEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactEdge%20%3D%20b2ContactEdge%3B%0A%0A%20%20%20%20class%20b2ContactFactory%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactFactory.b2ContactFactory.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactFactory)%20this.b2ContactFactory.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2ContactFactory(allocator)%20%7B%0A%20%20%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20%20%20this.InitializeRegisters()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20AddType(createFcn%2C%20destroyFcn%2C%20type1%2C%20type2)%20%7B%0A%20%20%20%20%20%20%20%20if%20(type1%20%3D%3D%3D%20undefined)%20type1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(type2%20%3D%3D%3D%20undefined)%20type2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.createFcn%20%3D%20createFcn%3B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.destroyFcn%20%3D%20destroyFcn%3B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.primary%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20if%20(type1%20!%3D%20type2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.createFcn%20%3D%20createFcn%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.destroyFcn%20%3D%20destroyFcn%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.primary%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitializeRegisters()%20%7B%0A%20%20%20%20%20%20%20%20this.m_registers%20%3D%20new%20Vector(b2Shape.e_shapeTypeCount)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Shape.e_shapeTypeCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_registers%5Bi%5D%20%3D%20new%20Vector(b2Shape.e_shapeTypeCount)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20b2Shape.e_shapeTypeCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_registers%5Bi%5D%5Bj%5D%20%3D%20new%20b2ContactRegister()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.AddType(b2CircleContact.Create%2C%20b2CircleContact.Destroy%2C%20b2Shape.e_circleShape%2C%20b2Shape.e_circleShape)%3B%0A%20%20%20%20%20%20%20%20this.AddType(b2PolyAndCircleContact.Create%2C%20b2PolyAndCircleContact.Destroy%2C%20b2Shape.e_polygonShape%2C%20b2Shape.e_circleShape)%3B%0A%20%20%20%20%20%20%20%20this.AddType(b2PolygonContact.Create%2C%20b2PolygonContact.Destroy%2C%20b2Shape.e_polygonShape%2C%20b2Shape.e_polygonShape)%3B%0A%20%20%20%20%20%20%20%20this.AddType(b2EdgeAndCircleContact.Create%2C%20b2EdgeAndCircleContact.Destroy%2C%20b2Shape.e_edgeShape%2C%20b2Shape.e_circleShape)%3B%0A%20%20%20%20%20%20%20%20this.AddType(b2PolyAndEdgeContact.Create%2C%20b2PolyAndEdgeContact.Destroy%2C%20b2Shape.e_polygonShape%2C%20b2Shape.e_edgeShape)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Create(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20const%20type1%20%3D%20parseInt(fixtureA.GetType())%3B%0A%20%20%20%20%20%20%20%20const%20type2%20%3D%20parseInt(fixtureB.GetType())%3B%0A%20%20%20%20%20%20%20%20const%20reg%20%3D%20this.m_registers%5Btype1%5D%5Btype2%5D%3B%0A%20%20%20%20%20%20%20%20let%20c%3B%0A%20%20%20%20%20%20%20%20if%20(reg.pool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20reg.pool%3B%0A%20%20%20%20%20%20%20%20%20%20reg.pool%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20reg.poolCount--%3B%0A%20%20%20%20%20%20%20%20%20%20c.Reset(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20createFcn%20%3D%20reg.createFcn%3B%0A%20%20%20%20%20%20%20%20if%20(createFcn%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(reg.primary)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20createFcn(this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.Reset(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20createFcn(this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.Reset(fixtureB%2C%20fixtureA)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Destroy(contact)%20%7B%0A%20%20%20%20%20%20%20%20if%20(contact.m_manifold.m_pointCount%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20contact.m_fixtureA.m_body.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20contact.m_fixtureB.m_body.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20type1%20%3D%20parseInt(contact.m_fixtureA.GetType())%3B%0A%20%20%20%20%20%20%20%20const%20type2%20%3D%20parseInt(contact.m_fixtureB.GetType())%3B%0A%20%20%20%20%20%20%20%20const%20reg%20%3D%20this.m_registers%5Btype1%5D%5Btype2%5D%3B%0A%20%20%20%20%20%20%20%20if%20(true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20reg.poolCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20contact.m_next%20%3D%20reg.pool%3B%0A%20%20%20%20%20%20%20%20%20%20reg.pool%20%3D%20contact%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20destroyFcn%20%3D%20reg.destroyFcn%3B%0A%20%20%20%20%20%20%20%20destroyFcn(contact%2C%20this.m_allocator)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactFactory%20%3D%20b2ContactFactory%3B%0A%0A%20%20%20%20function%20b2ContactRegister()%20%7B%0A%20%20%20%20%20%20b2ContactRegister.b2ContactRegister.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactRegister%20%3D%20b2ContactRegister%3B%0A%0A%20%20%20%20class%20b2ContactResult%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactResult.b2ContactResult.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ContactResult()%20%7B%0A%20%20%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactResult%20%3D%20b2ContactResult%3B%0A%0A%20%20%20%20class%20b2ContactSolver%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2ContactSolver.b2ContactSolver.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactSolver)%20this.b2ContactSolver.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ContactSolver()%20%7B%0A%20%20%20%20%20%20%20%20this.m_step%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20%20%20this.m_constraints%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2ContactSolver()%20%7B%20%7D%0A%0A%20%20%20%20%20%20Initialize(step%2C%20contacts%2C%20contactCount%2C%20allocator)%20%7B%0A%20%20%20%20%20%20%20%20if%20(contactCount%20%3D%3D%3D%20undefined)%20contactCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20contact%3B%0A%20%20%20%20%20%20%20%20this.m_step.Set(step)%3B%0A%20%20%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20this.m_constraintCount%20%3D%20contactCount%3B%0A%20%20%20%20%20%20%20%20while%20(this.m_constraints.length%20%3C%20this.m_constraintCount)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_constraints%5Bthis.m_constraints.length%5D%20%3D%20new%20b2ContactConstraint()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20contact%20%3D%20contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20contact.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20contact.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20%20%20const%20shapeA%20%3D%20fixtureA.m_shape%3B%0A%20%20%20%20%20%20%20%20%20%20const%20shapeB%20%3D%20fixtureB.m_shape%3B%0A%20%20%20%20%20%20%20%20%20%20const%20radiusA%20%3D%20shapeA.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20const%20radiusB%20%3D%20shapeB.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20fixtureA.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20fixtureB.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20const%20manifold%20%3D%20contact.GetManifold()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20friction%20%3D%20b2Settings.b2MixFriction(fixtureA.GetFriction()%2C%20fixtureB.GetFriction())%3B%0A%20%20%20%20%20%20%20%20%20%20const%20restitution%20%3D%20b2Settings.b2MixRestitution(fixtureA.GetRestitution()%2C%20fixtureB.GetRestitution())%3B%0A%20%20%20%20%20%20%20%20%20%20const%20vAX%20%3D%20bodyA.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20vAY%20%3D%20bodyA.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20vBX%20%3D%20bodyB.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20vBY%20%3D%20bodyB.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20wA%20%3D%20bodyA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20const%20wB%20%3D%20bodyB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(manifold.m_pointCount%20%3E%200)%3B%0A%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.Initialize(manifold%2C%20bodyA.m_xf%2C%20radiusA%2C%20bodyB.m_xf%2C%20radiusB)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20normalX%20%3D%20b2ContactSolver.s_worldManifold.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20normalY%20%3D%20b2ContactSolver.s_worldManifold.m_normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20cc%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20cc.bodyA%20%3D%20bodyA%3B%0A%20%20%20%20%20%20%20%20%20%20cc.bodyB%20%3D%20bodyB%3B%0A%20%20%20%20%20%20%20%20%20%20cc.manifold%20%3D%20manifold%3B%0A%20%20%20%20%20%20%20%20%20%20cc.normal.x%20%3D%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20cc.normal.y%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20cc.pointCount%20%3D%20manifold.m_pointCount%3B%0A%20%20%20%20%20%20%20%20%20%20cc.friction%20%3D%20friction%3B%0A%20%20%20%20%20%20%20%20%20%20cc.restitution%20%3D%20restitution%3B%0A%20%20%20%20%20%20%20%20%20%20cc.localPlaneNormal.x%20%3D%20manifold.m_localPlaneNormal.x%3B%0A%20%20%20%20%20%20%20%20%20%20cc.localPlaneNormal.y%20%3D%20manifold.m_localPlaneNormal.y%3B%0A%20%20%20%20%20%20%20%20%20%20cc.localPoint.x%20%3D%20manifold.m_localPoint.x%3B%0A%20%20%20%20%20%20%20%20%20%20cc.localPoint.y%20%3D%20manifold.m_localPoint.y%3B%0A%20%20%20%20%20%20%20%20%20%20cc.radius%20%3D%20radiusA%20%2B%20radiusB%3B%0A%20%20%20%20%20%20%20%20%20%20cc.type%20%3D%20manifold.m_type%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20k%20%3D%200%3B%20k%20%3C%20cc.pointCount%3B%20%2B%2Bk)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cp%20%3D%20manifold.m_points%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20ccp%20%3D%20cc.points%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20%3D%20cp.m_normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20%3D%20cp.m_tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.localPoint.SetV(cp.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rAX%20%3D%20ccp.rA.x%20%3D%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.x%20-%20bodyA.m_sweep.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rAY%20%3D%20ccp.rA.y%20%3D%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.y%20-%20bodyA.m_sweep.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rBX%20%3D%20ccp.rB.x%20%3D%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.x%20-%20bodyB.m_sweep.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rBY%20%3D%20ccp.rB.y%20%3D%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.y%20-%20bodyB.m_sweep.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20rnA%20%3D%20rAX%20*%20normalY%20-%20rAY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20rnB%20%3D%20rBX%20*%20normalY%20-%20rBY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rnA%20*%3D%20rnA%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rnB%20*%3D%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20kNormal%20%3D%20bodyA.m_invMass%20%2B%20bodyB.m_invMass%20%2B%20bodyA.m_invI%20*%20rnA%20%2B%20bodyB.m_invI%20*%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalMass%20%3D%201.0%20%2F%20kNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20kEqualized%20%3D%20bodyA.m_mass%20*%20bodyA.m_invMass%20%2B%20bodyB.m_mass%20*%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20kEqualized%20%2B%3D%20bodyA.m_mass%20*%20bodyA.m_invI%20*%20rnA%20%2B%20bodyB.m_mass%20*%20bodyB.m_invI%20*%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.equalizedMass%20%3D%201.0%20%2F%20kEqualized%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20tangentY%20%3D%20(-normalX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20rtA%20%3D%20rAX%20*%20tangentY%20-%20rAY%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20rtB%20%3D%20rBX%20*%20tangentY%20-%20rBY%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rtA%20*%3D%20rtA%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rtB%20*%3D%20rtB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20kTangent%20%3D%20bodyA.m_invMass%20%2B%20bodyB.m_invMass%20%2B%20bodyA.m_invI%20*%20rtA%20%2B%20bodyB.m_invI%20*%20rtB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.tangentMass%20%3D%201.0%20%2F%20kTangent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.velocityBias%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20tX%20%3D%20vBX%20%2B%20((-wB%20*%20rBY))%20-%20vAX%20-%20((-wA%20*%20rAY))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20tY%20%3D%20vBY%20%2B%20(wB%20*%20rBX)%20-%20vAY%20-%20(wA%20*%20rAX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20vRel%20%3D%20cc.normal.x%20*%20tX%20%2B%20cc.normal.y%20*%20tY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(vRel%20%3C%20(-b2Settings.b2_velocityThreshold))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp.velocityBias%20%2B%3D%20(-cc.restitution%20*%20vRel)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(cc.pointCount%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20ccp1%20%3D%20cc.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20ccp2%20%3D%20cc.points%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rn1A%20%3D%20ccp1.rA.x%20*%20normalY%20-%20ccp1.rA.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rn1B%20%3D%20ccp1.rB.x%20*%20normalY%20-%20ccp1.rB.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rn2A%20%3D%20ccp2.rA.x%20*%20normalY%20-%20ccp2.rA.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rn2B%20%3D%20ccp2.rB.x%20*%20normalY%20-%20ccp2.rB.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20k11%20%3D%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn1A%20*%20rn1A%20%2B%20invIB%20*%20rn1B%20*%20rn1B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20k22%20%3D%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn2A%20*%20rn2A%20%2B%20invIB%20*%20rn2B%20*%20rn2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20k12%20%3D%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn1A%20*%20rn2A%20%2B%20invIB%20*%20rn1B%20*%20rn2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20k_maxConditionNumber%20%3D%20100.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(k11%20*%20k11%20%3C%20k_maxConditionNumber%20*%20(k11%20*%20k22%20-%20k12%20*%20k12))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.K.col1.Set(k11%2C%20k12)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.K.col2.Set(k12%2C%20k22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.K.GetInverse(cc.normalMass)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20let%20tVec2%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20const%20normalX%20%3D%20c.normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20normalY%20%3D%20c.normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tangentY%20%3D%20(-normalX)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20let%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20let%20tCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tCount%20%3D%20c.pointCount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20j%20%3C%20tCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20PX%20%3D%20ccp.normalImpulse%20*%20normalX%20%2B%20ccp.tangentImpulse%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20PY%20%3D%20ccp.normalImpulse%20*%20normalY%20%2B%20ccp.tangentImpulse%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_angularVelocity%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_linearVelocity.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_linearVelocity.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_angularVelocity%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_linearVelocity.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_linearVelocity.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tCount%20%3D%20c.pointCount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20j%20%3C%20tCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20ccp2%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp2.normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp2.tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints()%20%7B%0A%20%20%20%20%20%20%20%20let%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20ccp%3B%0A%20%20%20%20%20%20%20%20const%20rAX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20rAY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20rBX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20rBY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20dvX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20dvY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20vn%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20vt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20lambda%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20maxFriction%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20newImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20PX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20PY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20dX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20dY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20P1X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20P1Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20P2X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20P2Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20%20%20let%20wA%20%3D%20bodyA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20let%20wB%20%3D%20bodyB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20const%20vA%20%3D%20bodyA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20const%20vB%20%3D%20bodyB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20const%20normalX%20%3D%20c.normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20normalY%20%3D%20c.normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tangentY%20%3D%20(-normalX)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20friction%20%3D%20c.friction%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%20%3C%20c.pointCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dvX%20%3D%20vB.x%20-%20wB%20*%20ccp.rB.y%20-%20vA.x%20%2B%20wA%20*%20ccp.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dvY%20%3D%20vB.y%20%2B%20wB%20*%20ccp.rB.x%20-%20vA.y%20-%20wA%20*%20ccp.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vt%20%3D%20dvX%20*%20tangentX%20%2B%20dvY%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20ccp.tangentMass%20*%20(-vt)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxFriction%20%3D%20friction%20*%20ccp.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20b2Math.Clamp(ccp.tangentImpulse%20%2B%20lambda%2C%20(-maxFriction)%2C%20maxFriction)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20newImpulse%20-%20ccp.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20PX%20%3D%20lambda%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20PY%20%3D%20lambda%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20%3D%20newImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20tCount%20%3D%20parseInt(c.pointCount)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(c.pointCount%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp%20%3D%20c.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dvX%20%3D%20vB.x%20%2B%20((-wB%20*%20ccp.rB.y))%20-%20vA.x%20-%20((-wA%20*%20ccp.rA.y))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dvY%20%3D%20vB.y%20%2B%20(wB%20*%20ccp.rB.x)%20-%20vA.y%20-%20(wA%20*%20ccp.rA.x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn%20%3D%20dvX%20*%20normalX%20%2B%20dvY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20(-ccp.normalMass%20*%20(vn%20-%20ccp.velocityBias))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20ccp.normalImpulse%20%2B%20lambda%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20newImpulse%20%3E%200%20%3F%20newImpulse%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20newImpulse%20-%20ccp.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20PX%20%3D%20lambda%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20PY%20%3D%20lambda%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20%3D%20newImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cp1%20%3D%20c.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cp2%20%3D%20c.points%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20aX%20%3D%20cp1.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20aY%20%3D%20cp2.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20dv1X%20%3D%20vB.x%20-%20wB%20*%20cp1.rB.y%20-%20vA.x%20%2B%20wA%20*%20cp1.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20dv1Y%20%3D%20vB.y%20%2B%20wB%20*%20cp1.rB.x%20-%20vA.y%20-%20wA%20*%20cp1.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20dv2X%20%3D%20vB.x%20-%20wB%20*%20cp2.rB.y%20-%20vA.x%20%2B%20wA%20*%20cp2.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20dv2Y%20%3D%20vB.y%20%2B%20wB%20*%20cp2.rB.x%20-%20vA.y%20-%20wA%20*%20cp2.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20vn1%20%3D%20dv1X%20*%20normalX%20%2B%20dv1Y%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20vn2%20%3D%20dv2X%20*%20normalX%20%2B%20dv2Y%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20bX%20%3D%20vn1%20-%20cp1.velocityBias%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20bY%20%3D%20vn2%20-%20cp2.velocityBias%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20c.K%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bX%20-%3D%20tMat.col1.x%20*%20aX%20%2B%20tMat.col2.x%20*%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bY%20-%3D%20tMat.col1.y%20*%20aX%20%2B%20tMat.col2.y%20*%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20k_errorTol%20%3D%200.001%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(%3B%20%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20c.normalMass%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20xX%20%3D%20(-(tMat.col1.x%20*%20bX%20%2B%20tMat.col2.x%20*%20bY))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20xY%20%3D%20(-(tMat.col1.y%20*%20bX%20%2B%20tMat.col2.y%20*%20bY))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(xX%20%3E%3D%200.0%20%26%26%20xY%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(cp1.rA.x%20*%20P1Y%20-%20cp1.rA.y%20*%20P1X%20%2B%20cp2.rA.x%20*%20P2Y%20-%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(cp1.rB.x%20*%20P1Y%20-%20cp1.rB.y%20*%20P1X%20%2B%20cp2.rB.x%20*%20P2Y%20-%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%20(-cp1.normalMass%20*%20bX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%20c.K.col1.y%20*%20xX%20%2B%20bY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(xX%20%3E%3D%200.0%20%26%26%20vn2%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(cp1.rA.x%20*%20P1Y%20-%20cp1.rA.y%20*%20P1X%20%2B%20cp2.rA.x%20*%20P2Y%20-%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(cp1.rB.x%20*%20P1Y%20-%20cp1.rB.y%20*%20P1X%20%2B%20cp2.rB.x%20*%20P2Y%20-%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%20(-cp2.normalMass%20*%20bY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%20c.K.col2.x%20*%20xY%20%2B%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(xY%20%3E%3D%200.0%20%26%26%20vn1%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(cp1.rA.x%20*%20P1Y%20-%20cp1.rA.y%20*%20P1X%20%2B%20cp2.rA.x%20*%20P2Y%20-%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(cp1.rB.x%20*%20P1Y%20-%20cp1.rB.y%20*%20P1X%20%2B%20cp2.rB.x%20*%20P2Y%20-%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%20bY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(vn1%20%3E%3D%200.0%20%26%26%20vn2%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(cp1.rA.x%20*%20P1Y%20-%20cp1.rA.y%20*%20P1X%20%2B%20cp2.rA.x%20*%20P2Y%20-%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(cp1.rB.x%20*%20P1Y%20-%20cp1.rB.y%20*%20P1X%20%2B%20cp2.rB.x%20*%20P2Y%20-%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20FinalizeVelocityConstraints()%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20m%20%3D%20c.manifold%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20point1%20%3D%20m.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20point2%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20point1.m_normalImpulse%20%3D%20point2.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20point1.m_tangentImpulse%20%3D%20point2.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20minSeparation%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invMassA%20%3D%20bodyA.m_mass%20*%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invIA%20%3D%20bodyA.m_mass%20*%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invMassB%20%3D%20bodyB.m_mass%20*%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invIB%20%3D%20bodyB.m_mass%20*%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_psm.Initialize(c)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20normal%20%3D%20b2ContactSolver.s_psm.m_normal%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20point%20%3D%20b2ContactSolver.s_psm.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20separation%20%3D%20b2ContactSolver.s_psm.m_separations%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rAX%20%3D%20point.x%20-%20bodyA.m_sweep.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rAY%20%3D%20point.y%20-%20bodyA.m_sweep.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rBX%20%3D%20point.x%20-%20bodyB.m_sweep.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20rBY%20%3D%20point.y%20-%20bodyB.m_sweep.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minSeparation%20%3D%20minSeparation%20%3C%20separation%20%3F%20minSeparation%20%3A%20separation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20C%20%3D%20b2Math.Clamp(baumgarte%20*%20(separation%20%2B%20b2Settings.b2_linearSlop)%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20impulse%20%3D%20(-ccp.equalizedMass%20*%20C)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20PX%20%3D%20impulse%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20PY%20%3D%20impulse%20*%20normal.y%3B%20bodyA.m_sweep.c.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_sweep.c.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_sweep.a%20-%3D%20invIA%20*%20(rAX%20*%20PY%20-%20rAY%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.c.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.c.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.a%20%2B%3D%20invIB%20*%20(rBX%20*%20PY%20-%20rBY%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20minSeparation%20%3E%20(-1.5%20*%20b2Settings.b2_linearSlop)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver%20%3D%20b2ContactSolver%3B%0A%0A%20%20%20%20class%20b2EdgeAndCircleContact%20extends%20b2Contact%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2EdgeAndCircleContact.b2EdgeAndCircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2EdgeAndCircleContact()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Reset(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Evaluate()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20this.b2CollideEdgeAndCircle(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2EdgeShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2CollideEdgeAndCircle(manifold%2C%20edge%2C%20xf1%2C%20circle%2C%20xf2)%20%7B%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%20%3D%20b2EdgeAndCircleContact%3B%0A%0A%20%20%20%20class%20b2NullContact%20extends%20b2Contact%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2NullContact.b2NullContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2NullContact)%20this.b2NullContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2NullContact()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2NullContact()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Contact.call(this)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Evaluate()%20%7B%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2NullContact%20%3D%20b2NullContact%3B%0A%0A%20%20%20%20class%20b2PolyAndCircleContact%20extends%20b2Contact%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2PolyAndCircleContact.b2PolyAndCircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2PolyAndCircleContact()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Reset(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(fixtureA.GetType()%20%3D%3D%20b2Shape.e_polygonShape)%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(fixtureB.GetType()%20%3D%3D%20b2Shape.e_circleShape)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Evaluate()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_fixtureA.m_body%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_fixtureB.m_body%3B%0A%20%20%20%20%20%20%20%20b2Collision.CollidePolygonAndCircle(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%20%3D%20b2PolyAndCircleContact%3B%0A%0A%20%20%20%20class%20b2PolyAndEdgeContact%20extends%20b2Contact%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2PolyAndEdgeContact.b2PolyAndEdgeContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2PolyAndEdgeContact()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Reset(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(fixtureA.GetType()%20%3D%3D%20b2Shape.e_polygonShape)%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(fixtureB.GetType()%20%3D%3D%20b2Shape.e_edgeShape)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Evaluate()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20this.b2CollidePolyAndEdge(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2EdgeShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2CollidePolyAndEdge(manifold%2C%20polygon%2C%20xf1%2C%20edge%2C%20xf2)%20%7B%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%20%3D%20b2PolyAndEdgeContact%3B%0A%0A%20%20%20%20class%20b2PolygonContact%20extends%20b2Contact%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2PolygonContact.b2PolygonContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2PolygonContact()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Reset(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Evaluate()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20b2Collision.CollidePolygons(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2PolygonShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolygonContact%20%3D%20b2PolygonContact%3B%0A%0A%20%20%20%20class%20b2PositionSolverManifold%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2PositionSolverManifold.b2PositionSolverManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PositionSolverManifold)%20this.b2PositionSolverManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2PositionSolverManifold()%20%7B%0A%20%20%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_separations%20%3D%20new%20Vector_a2j_Number(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(cc)%20%7B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(cc.pointCount%20%3E%200)%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20clipPointX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20clipPointY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20let%20planePointX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20planePointY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20switch%20(cc.type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Manifold.e_circles%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pointAX%20%3D%20cc.bodyA.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pointAY%20%3D%20cc.bodyA.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5B0%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pointBX%20%3D%20cc.bodyB.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pointBY%20%3D%20cc.bodyB.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20dX%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20dY%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20d2%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(d2%20%3E%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20d%20%3D%20Math.sqrt(d2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20dX%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20dY%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.x%20%3D%200.5%20*%20(pointAX%20%2B%20pointBX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.y%20%3D%200.5%20*%20(pointAY%20%2B%20pointBY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5B0%5D%20%3D%20dX%20*%20this.m_normal.x%20%2B%20dY%20*%20this.m_normal.y%20-%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceA%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%20cc.bodyA.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%20cc.bodyA.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20cc.pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5Bi%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%20cc.bodyB.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%20cc.bodyB.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5Bi%5D%20%3D%20(clipPointX%20-%20planePointX)%20*%20this.m_normal.x%20%2B%20(clipPointY%20-%20planePointY)%20*%20this.m_normal.y%20-%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%20clipPointX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%20clipPointY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceB%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%20cc.bodyB.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%20cc.bodyB.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%20%3C%20cc.pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5Bi%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%20cc.bodyA.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%20cc.bodyA.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5Bi%5D%20%3D%20(clipPointX%20-%20planePointX)%20*%20this.m_normal.x%20%2B%20(clipPointY%20-%20planePointY)%20*%20this.m_normal.y%20-%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.Set(clipPointX%2C%20clipPointY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20*%3D%20(-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20*%3D%20(-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%20%3D%20b2PositionSolverManifold%3B%0A%0A%20%20%20%20class%20b2Controller%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Step(step)%20%7B%20%7D%0A%20%20%20%20%20%20Draw(debugDraw)%20%7B%20%7D%0A%0A%20%20%20%20%20%20AddBody(body)%20%7B%0A%20%20%20%20%20%20%20%20const%20edge%20%3D%20new%20b2ControllerEdge()%3B%0A%20%20%20%20%20%20%20%20edge.controller%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20edge.body%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20edge.nextBody%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20edge.prevBody%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_bodyList%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20if%20(edge.nextBody)%20edge.nextBody.prevBody%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20this.m_bodyCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20edge.nextController%20%3D%20body.m_controllerList%3B%0A%20%20%20%20%20%20%20%20edge.prevController%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20body.m_controllerList%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20if%20(edge.nextController)%20edge.nextController.prevController%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20body.m_controllerCount%2B%2B%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20RemoveBody(body)%20%7B%0A%20%20%20%20%20%20%20%20let%20edge%20%3D%20body.m_controllerList%3B%0A%20%20%20%20%20%20%20%20while%20(edge%20%26%26%20edge.controller%20!%3D%20this)%20%7B%20edge%20%3D%20edge.nextController%3B%20%7D%0A%20%20%20%20%20%20%20%20if%20(edge.prevBody)%20edge.prevBody.nextBody%20%3D%20edge.nextBody%3B%0A%20%20%20%20%20%20%20%20if%20(edge.nextBody)%20edge.nextBody.prevBody%20%3D%20edge.prevBody%3B%0A%20%20%20%20%20%20%20%20if%20(edge.nextController)%20edge.nextController.prevController%20%3D%20edge.prevController%3B%0A%20%20%20%20%20%20%20%20if%20(edge.prevController)%20edge.prevController.nextController%20%3D%20edge.nextController%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_bodyList%20%3D%3D%20edge)%20this.m_bodyList%20%3D%20edge.nextBody%3B%0A%20%20%20%20%20%20%20%20if%20(body.m_controllerList%20%3D%3D%20edge)%20body.m_controllerList%20%3D%20edge.nextController%3B%0A%20%20%20%20%20%20%20%20body.m_controllerCount--%3B%0A%20%20%20%20%20%20%20%20this.m_bodyCount--%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Clear()%20%7B%0A%20%20%20%20%20%20%20%20while%20(this.m_bodyList)%20%7B%20this.RemoveBody(this.m_bodyList.body)%3B%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNext()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetWorld()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_world%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetBodyList()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyList%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%20%3D%20b2Controller%3B%0A%0A%20%20%20%20class%20b2BuoyancyController%20extends%20b2Controller%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2BuoyancyController.b2BuoyancyController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2BuoyancyController()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2(0%2C%20(-1))%3B%0A%20%20%20%20%20%20%20%20this.offset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.density%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.velocity%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%20%20%20%20this.linearDrag%20%3D%202%3B%0A%20%20%20%20%20%20%20%20this.angularDrag%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.useDensity%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.useWorldGravity%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.gravity%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Step(step)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.m_bodyList)%20return%3B%0A%20%20%20%20%20%20%20%20if%20(this.useWorldGravity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.gravity%20%3D%20this.GetWorld().GetGravity().Copy()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20areac%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20massc%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20let%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20let%20mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20fixture%20%3D%20body.GetFixtureList()%3B%20fixture%3B%20fixture%20%3D%20fixture.GetNext())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20sc%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20sarea%20%3D%20fixture.GetShape().ComputeSubmergedArea(this.normal%2C%20this.offset%2C%20body.GetTransform()%2C%20sc)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20area%20%2B%3D%20sarea%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20areac.x%20%2B%3D%20sarea%20*%20sc.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20areac.y%20%2B%3D%20sarea%20*%20sc.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20shapeDensity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.useDensity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20shapeDensity%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20shapeDensity%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20mass%20%2B%3D%20sarea%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20massc.x%20%2B%3D%20sarea%20*%20sc.x%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20massc.y%20%2B%3D%20sarea%20*%20sc.y%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20areac.x%20%2F%3D%20area%3B%0A%20%20%20%20%20%20%20%20%20%20areac.y%20%2F%3D%20area%3B%0A%20%20%20%20%20%20%20%20%20%20massc.x%20%2F%3D%20mass%3B%0A%20%20%20%20%20%20%20%20%20%20massc.y%20%2F%3D%20mass%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(area%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20const%20buoyancyForce%20%3D%20this.gravity.GetNegative()%3B%0A%20%20%20%20%20%20%20%20%20%20buoyancyForce.Multiply(this.density%20*%20area)%3B%0A%20%20%20%20%20%20%20%20%20%20body.ApplyForce(buoyancyForce%2C%20massc)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dragForce%20%3D%20body.GetLinearVelocityFromWorldPoint(areac)%3B%0A%20%20%20%20%20%20%20%20%20%20dragForce.Subtract(this.velocity)%3B%0A%20%20%20%20%20%20%20%20%20%20dragForce.Multiply((-this.linearDrag%20*%20area))%3B%0A%20%20%20%20%20%20%20%20%20%20body.ApplyForce(dragForce%2C%20areac)%3B%0A%20%20%20%20%20%20%20%20%20%20body.ApplyTorque((-body.GetInertia()%20%2F%20body.GetMass()%20*%20area%20*%20body.GetAngularVelocity()%20*%20this.angularDrag))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Draw(debugDraw)%20%7B%0A%20%20%20%20%20%20%20%20const%20r%20%3D%201000%3B%0A%20%20%20%20%20%20%20%20const%20p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20const%20p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20p1.x%20%3D%20this.normal.x%20*%20this.offset%20%2B%20this.normal.y%20*%20r%3B%0A%20%20%20%20%20%20%20%20p1.y%20%3D%20this.normal.y%20*%20this.offset%20-%20this.normal.x%20*%20r%3B%0A%20%20%20%20%20%20%20%20p2.x%20%3D%20this.normal.x%20*%20this.offset%20-%20this.normal.y%20*%20r%3B%0A%20%20%20%20%20%20%20%20p2.y%20%3D%20this.normal.y%20*%20this.offset%20%2B%20this.normal.x%20*%20r%3B%0A%20%20%20%20%20%20%20%20const%20color%20%3D%20new%20b2Color(0%2C%200%2C%201)%3B%0A%20%20%20%20%20%20%20%20debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Controllers.b2BuoyancyController%20%3D%20b2BuoyancyController%3B%0A%0A%20%20%20%20class%20b2ConstantAccelController%20extends%20b2Controller%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2ConstantAccelController.b2ConstantAccelController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ConstantAccelController()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.A%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Step(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20smallA%20%3D%20new%20b2Vec2(this.A.x%20*%20step.dt%2C%20this.A.y%20*%20step.dt)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20body.SetLinearVelocity(new%20b2Vec2(body.GetLinearVelocity().x%20%2B%20smallA.x%2C%20body.GetLinearVelocity().y%20%2B%20smallA.y))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantAccelController%20%3D%20b2ConstantAccelController%3B%0A%0A%20%20%20%20class%20b2ConstantForceController%20extends%20b2Controller%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2ConstantForceController.b2ConstantForceController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2ConstantForceController()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.F%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Step(step)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20body.ApplyForce(this.F%2C%20body.GetWorldCenter())%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantForceController%20%3D%20b2ConstantForceController%3B%0A%0A%20%20%20%20function%20b2ControllerEdge()%20%7B%0A%20%20%20%20%20%20b2ControllerEdge.b2ControllerEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ControllerEdge%20%3D%20b2ControllerEdge%3B%0A%0A%20%20%20%20class%20b2GravityController%20extends%20b2Controller%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2GravityController.b2GravityController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2GravityController()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.G%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.invSqr%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Step(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20body1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20p1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20mass1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20j%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20body2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20p2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20dx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20dy%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20r2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20f%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(this.invSqr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body1%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20p1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mass1%20%3D%20body1.GetMass()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20j%20!%3D%20i%3B%20j%20%3D%20j.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20body2%20%3D%20j.body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20p2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20r2%20%3D%20dx%20*%20dx%20%2B%20dy%20*%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(r2%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20new%20b2Vec2(dx%2C%20dy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply(this.G%20%2F%20r2%20%2F%20Math.sqrt(r2)%20*%20mass1%20*%20body2.GetMass())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(body1.IsAwake())%20body1.ApplyForce(f%2C%20p1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply((-1))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(body2.IsAwake())%20body2.ApplyForce(f%2C%20p2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body1%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20p1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mass1%20%3D%20body1.GetMass()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20j%20!%3D%20i%3B%20j%20%3D%20j.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20body2%20%3D%20j.body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20p2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20r2%20%3D%20dx%20*%20dx%20%2B%20dy%20*%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(r2%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20new%20b2Vec2(dx%2C%20dy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply(this.G%20%2F%20r2%20*%20mass1%20*%20body2.GetMass())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(body1.IsAwake())%20body1.ApplyForce(f%2C%20p1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply((-1))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(body2.IsAwake())%20body2.ApplyForce(f%2C%20p2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Controllers.b2GravityController%20%3D%20b2GravityController%3B%0A%0A%20%20%20%20class%20b2TensorDampingController%20extends%20b2Controller%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2TensorDampingController.b2TensorDampingController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2TensorDampingController()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.T%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.maxTimestep%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetAxisAligned(xDamping%2C%20yDamping)%20%7B%0A%20%20%20%20%20%20%20%20if%20(xDamping%20%3D%3D%3D%20undefined)%20xDamping%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(yDamping%20%3D%3D%3D%20undefined)%20yDamping%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.T.col1.x%20%3D%20(-xDamping)%3B%0A%20%20%20%20%20%20%20%20this.T.col1.y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.T.col2.x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.T.col2.y%20%3D%20(-yDamping)%3B%0A%20%20%20%20%20%20%20%20if%20(xDamping%20%3E%200%20%7C%7C%20yDamping%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.maxTimestep%20%3D%201%20%2F%20Math.max(xDamping%2C%20yDamping)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.maxTimestep%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Step(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20timestep%20%3D%20step.dt%3B%0A%20%20%20%20%20%20%20%20if%20(timestep%20%3C%3D%20Number.MIN_VALUE)%20return%3B%0A%20%20%20%20%20%20%20%20if%20(timestep%20%3E%20this.maxTimestep%20%26%26%20this.maxTimestep%20%3E%200)%20timestep%20%3D%20this.maxTimestep%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20damping%20%3D%20body.GetWorldVector(b2Math.MulMV(this.T%2C%20body.GetLocalVector(body.GetLinearVelocity())))%3B%0A%20%20%20%20%20%20%20%20%20%20body.SetLinearVelocity(new%20b2Vec2(body.GetLinearVelocity().x%20%2B%20damping.x%20*%20timestep%2C%20body.GetLinearVelocity().y%20%2B%20damping.y%20*%20timestep))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Controllers.b2TensorDampingController%20%3D%20b2TensorDampingController%3B%0A%0A%20%20%20%20class%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Joint)%20this.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Joint()%20%7B%0A%20%20%20%20%20%20%20%20this.m_edgeA%20%3D%20new%20b2JointEdge()%3B%0A%20%20%20%20%20%20%20%20this.m_edgeB%20%3D%20new%20b2JointEdge()%3B%0A%20%20%20%20%20%20%20%20this.m_localCenterA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localCenterB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetType()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetBodyA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetBodyB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetNext()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetUserData()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetUserData(data)%20%7B%0A%20%20%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsActive()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.IsActive()%20%26%26%20this.m_bodyB.IsActive()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2Joint(def)%20%7B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(def.bodyA%20!%3D%20def.bodyB)%3B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20def.type%3B%0A%20%20%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA%20%3D%20def.bodyA%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB%20%3D%20def.bodyB%3B%0A%20%20%20%20%20%20%20%20this.m_collideConnected%20%3D%20def.collideConnected%3B%0A%20%20%20%20%20%20%20%20this.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.m_userData%20%3D%20def.userData%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%20%7D%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%20%7D%0A%20%20%20%20%20%20FinalizeVelocityConstraints()%20%7B%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2Joint%20%3D%20b2Joint%3B%0A%0A%20%20%20%20class%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2JointDef)%20this.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2JointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_unknownJoint%3B%0A%20%20%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.bodyA%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.bodyB%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.collideConnected%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2JointDef%20%3D%20b2JointDef%3B%0A%0A%20%20%20%20class%20b2DistanceJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2DistanceJointDef.b2DistanceJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DistanceJointDef)%20this.b2DistanceJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2DistanceJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2DistanceJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_distanceJoint%3B%0A%20%20%20%20%20%20%20%20this.length%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.frequencyHz%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.dampingRatio%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(bA%2C%20bB%2C%20anchorA%2C%20anchorB)%20%7B%0A%20%20%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchorA))%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchorB))%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20anchorB.x%20-%20anchorA.x%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20anchorB.y%20-%20anchorA.y%3B%0A%20%20%20%20%20%20%20%20this.length%20%3D%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%20%20%20%20this.frequencyHz%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.dampingRatio%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2DistanceJointDef%20%3D%20b2DistanceJointDef%3B%0A%0A%20%20%20%20class%20b2FrictionJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2FrictionJoint.b2FrictionJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FrictionJoint)%20this.b2FrictionJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2FrictionJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_linearMass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchorA)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchorB)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_linearImpulse.x%2C%20inv_dt%20*%20this.m_linearImpulse.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20inv_dt%20*%20this.m_angularImpulse%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMaxForce(force)%20%7B%0A%20%20%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_maxForce%20%3D%20force%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMaxForce()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_maxForce%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMaxTorque(torque)%20%7B%0A%20%20%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_maxTorque%20%3D%20torque%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMaxTorque()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_maxTorque%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2FrictionJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchorA.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchorB.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20%20%20this.m_linearMass.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_angularMass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_angularImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_maxForce%20%3D%20def.maxForce%3B%0A%20%20%20%20%20%20%20%20this.m_maxTorque%20%3D%20def.maxTorque%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20const%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20const%20K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20K.col1.x%20%3D%20mA%20%2B%20mB%3B%0A%20%20%20%20%20%20%20%20K.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20K.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20K.col2.y%20%3D%20mA%20%2B%20mB%3B%0A%20%20%20%20%20%20%20%20K.col1.x%20%2B%3D%20iA%20*%20rAY%20*%20rAY%3B%0A%20%20%20%20%20%20%20%20K.col2.x%20%2B%3D%20(-iA%20*%20rAX%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20K.col1.y%20%2B%3D%20(-iA%20*%20rAX%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20K.col2.y%20%2B%3D%20iA%20*%20rAX%20*%20rAX%3B%0A%20%20%20%20%20%20%20%20K.col1.x%20%2B%3D%20iB%20*%20rBY%20*%20rBY%3B%0A%20%20%20%20%20%20%20%20K.col2.x%20%2B%3D%20(-iB%20*%20rBX%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20K.col1.y%20%2B%3D%20(-iB%20*%20rBX%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20K.col2.y%20%2B%3D%20iB%20*%20rBX%20*%20rBX%3B%0A%20%20%20%20%20%20%20%20K.GetInverse(this.m_linearMass)%3B%0A%20%20%20%20%20%20%20%20this.m_angularMass%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_angularMass%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularMass%20%3D%201.0%20%2F%20this.m_angularMass%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20const%20P%20%3D%20this.m_linearImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20mA%20*%20P.x%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20mA%20*%20P.y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20iA%20*%20(rAX%20*%20P.y%20-%20rAY%20*%20P.x%20%2B%20this.m_angularImpulse)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20mB%20*%20P.x%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20mB%20*%20P.y%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20iB%20*%20(rBX%20*%20P.y%20-%20rBY%20*%20P.x%20%2B%20this.m_angularImpulse)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20const%20vA%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20wA%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20vB%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20wB%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20const%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20let%20maxImpulse%20%3D%200%3B%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot%20%3D%20wB%20-%20wA%3B%0A%20%20%20%20%20%20%20%20%20%20let%20impulse%20%3D%20(-this.m_angularMass%20*%20Cdot)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20oldImpulse%20%3D%20this.m_angularImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxTorque%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularImpulse%20%3D%20b2Math.Clamp(this.m_angularImpulse%20%2B%20impulse%2C%20(-maxImpulse)%2C%20maxImpulse)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_angularImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20iA%20*%20impulse%3B%0A%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20impulse%3B%0A%20%20%20%20%20%20%20%20%7D%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20CdotX%20%3D%20vB.x%20-%20wB%20*%20rBY%20-%20vA.x%20%2B%20wA%20*%20rAY%3B%0A%20%20%20%20%20%20%20%20%20%20const%20CdotY%20%3D%20vB.y%20%2B%20wB%20*%20rBX%20-%20vA.y%20-%20wA%20*%20rAX%3B%0A%20%20%20%20%20%20%20%20%20%20let%20impulseV%20%3D%20b2Math.MulMV(this.m_linearMass%2C%20new%20b2Vec2((-CdotX)%2C%20(-CdotY)))%3B%0A%20%20%20%20%20%20%20%20%20%20const%20oldImpulseV%20%3D%20this.m_linearImpulse.Copy()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.Add(impulseV)%3B%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxForce%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_linearImpulse.LengthSquared()%20%3E%20maxImpulse%20*%20maxImpulse)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.Multiply(maxImpulse)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20impulseV%20%3D%20b2Math.SubtractVV(this.m_linearImpulse%2C%20oldImpulseV)%3B%0A%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20mA%20*%20impulseV.x%3B%0A%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20mA%20*%20impulseV.y%3B%0A%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20iA%20*%20(rAX%20*%20impulseV.y%20-%20rAY%20*%20impulseV.x)%3B%0A%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20mB%20*%20impulseV.x%3B%0A%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20mB%20*%20impulseV.y%3B%0A%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20(rBX%20*%20impulseV.y%20-%20rBY%20*%20impulseV.x)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2FrictionJoint%20%3D%20b2FrictionJoint%3B%0A%0A%20%20%20%20class%20b2FrictionJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2FrictionJointDef.b2FrictionJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FrictionJointDef)%20this.b2FrictionJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2FrictionJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2FrictionJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_frictionJoint%3B%0A%20%20%20%20%20%20%20%20this.maxForce%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.maxTorque%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2FrictionJointDef%20%3D%20b2FrictionJointDef%3B%0A%0A%20%20%20%20class%20b2GearJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2GearJoint.b2GearJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2GearJoint)%20this.b2GearJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2GearJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_J%20%3D%20new%20b2Jacobian()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse%20*%20this.m_J.linearB.x%2C%20inv_dt%20*%20this.m_impulse%20*%20this.m_J.linearB.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20this.m_bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rX%20%3D%20this.m_localAnchor1.x%20-%20this.m_bodyB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rY%20%3D%20this.m_localAnchor1.y%20-%20this.m_bodyB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20PX%20%3D%20this.m_impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20%20%20const%20PY%20%3D%20this.m_impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20%20%20return%20inv_dt%20*%20(this.m_impulse%20*%20this.m_J.angularB%20-%20rX%20*%20PY%20%2B%20rY%20*%20PX)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetRatio()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_ratio%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetRatio(ratio)%20%7B%0A%20%20%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_ratio%20%3D%20ratio%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2GearJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20const%20type1%20%3D%20parseInt(def.joint1.m_type)%3B%0A%20%20%20%20%20%20%20%20const%20type2%20%3D%20parseInt(def.joint2.m_type)%3B%0A%20%20%20%20%20%20%20%20this.m_revolute1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_prismatic1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_revolute2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_prismatic2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20coordinate1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20coordinate2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_ground1%20%3D%20def.joint1.GetBodyA()%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA%20%3D%20def.joint1.GetBodyB()%3B%0A%20%20%20%20%20%20%20%20if%20(type1%20%3D%3D%20b2Joint.e_revoluteJoint)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_revolute1%20%3D%20(def.joint1%20instanceof%20b2RevoluteJoint%20%3F%20def.joint1%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_revolute1.GetJointAngle()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_prismatic1%20%3D%20(def.joint1%20instanceof%20b2PrismaticJoint%20%3F%20def.joint1%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_prismatic1.GetJointTranslation()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_ground2%20%3D%20def.joint2.GetBodyA()%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB%20%3D%20def.joint2.GetBodyB()%3B%0A%20%20%20%20%20%20%20%20if%20(type2%20%3D%3D%20b2Joint.e_revoluteJoint)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_revolute2%20%3D%20(def.joint2%20instanceof%20b2RevoluteJoint%20%3F%20def.joint2%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_revolute2.GetJointAngle()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_prismatic2%20%3D%20(def.joint2%20instanceof%20b2PrismaticJoint%20%3F%20def.joint2%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_prismatic2.GetJointTranslation()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_ratio%20%3D%20def.ratio%3B%0A%20%20%20%20%20%20%20%20this.m_constant%20%3D%20coordinate1%20%2B%20this.m_ratio%20*%20coordinate2%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20g1%20%3D%20this.m_ground1%3B%0A%20%20%20%20%20%20%20%20const%20g2%20%3D%20this.m_ground2%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20ugX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20ugY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20rX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20rY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20%20%20let%20crug%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20K%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_J.SetZero()%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_revolute1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_J.angularA%20%3D%20(-1.0)%3B%0A%20%20%20%20%20%20%20%20%20%20K%20%2B%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20g1.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_prismatic1.m_localXAxis1%3B%0A%20%20%20%20%20%20%20%20%20%20ugX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20ugY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20rX%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20rY%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20crug%20%3D%20rX%20*%20ugY%20-%20rY%20*%20ugX%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_J.linearA.Set((-ugX)%2C%20(-ugY))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_J.angularA%20%3D%20(-crug)%3B%0A%20%20%20%20%20%20%20%20%20%20K%20%2B%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20crug%20*%20crug%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_revolute2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_J.angularB%20%3D%20(-this.m_ratio)%3B%0A%20%20%20%20%20%20%20%20%20%20K%20%2B%3D%20this.m_ratio%20*%20this.m_ratio%20*%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20g2.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_prismatic2.m_localXAxis1%3B%0A%20%20%20%20%20%20%20%20%20%20ugX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20ugY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20rX%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20rY%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20crug%20%3D%20rX%20*%20ugY%20-%20rY%20*%20ugX%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_J.linearB.Set((-this.m_ratio%20*%20ugX)%2C%20(-this.m_ratio%20*%20ugY))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_J.angularB%20%3D%20(-this.m_ratio%20*%20crug)%3B%0A%20%20%20%20%20%20%20%20%20%20K%20%2B%3D%20this.m_ratio%20*%20this.m_ratio%20*%20(bB.m_invMass%20%2B%20bB.m_invI%20*%20crug%20*%20crug)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20K%20%3E%200.0%20%3F%201.0%20%2F%20K%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20this.m_impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20this.m_impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20const%20Cdot%20%3D%20this.m_J.Compute(bA.m_linearVelocity%2C%20bA.m_angularVelocity%2C%20bB.m_linearVelocity%2C%20bB.m_angularVelocity)%3B%0A%20%20%20%20%20%20%20%20const%20impulse%20%3D%20(-this.m_mass%20*%20Cdot)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%2B%3D%20impulse%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20coordinate1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20coordinate2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_revolute1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_revolute1.GetJointAngle()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_prismatic1.GetJointTranslation()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_revolute2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_revolute2.GetJointAngle()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_prismatic2.GetJointTranslation()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20C%20%3D%20this.m_constant%20-%20(coordinate1%20%2B%20this.m_ratio%20*%20coordinate2)%3B%0A%20%20%20%20%20%20%20%20const%20impulse%20%3D%20(-this.m_mass%20*%20C)%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20return%20linearError%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2GearJoint%20%3D%20b2GearJoint%3B%0A%0A%20%20%20%20class%20b2GearJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2GearJointDef.b2GearJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2GearJointDef)%20this.b2GearJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2GearJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2GearJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_gearJoint%3B%0A%20%20%20%20%20%20%20%20this.joint1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.joint2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.ratio%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2GearJointDef%20%3D%20b2GearJointDef%3B%0A%0A%20%20%20%20class%20b2Jacobian%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20b2Jacobian.b2Jacobian.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2Jacobian()%20%7B%0A%20%20%20%20%20%20%20%20this.linearA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.linearB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetZero()%20%7B%0A%20%20%20%20%20%20%20%20this.linearA.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.angularA%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.linearB.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.angularB%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Set(x1%2C%20a1%2C%20x2%2C%20a2)%20%7B%0A%20%20%20%20%20%20%20%20if%20(a1%20%3D%3D%3D%20undefined)%20a1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(a2%20%3D%3D%3D%20undefined)%20a2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.linearA.SetV(x1)%3B%0A%20%20%20%20%20%20%20%20this.angularA%20%3D%20a1%3B%0A%20%20%20%20%20%20%20%20this.linearB.SetV(x2)%3B%0A%20%20%20%20%20%20%20%20this.angularB%20%3D%20a2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Compute(x1%2C%20a1%2C%20x2%2C%20a2)%20%7B%0A%20%20%20%20%20%20%20%20if%20(a1%20%3D%3D%3D%20undefined)%20a1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(a2%20%3D%3D%3D%20undefined)%20a2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20(this.linearA.x%20*%20x1.x%20%2B%20this.linearA.y%20*%20x1.y)%20%2B%20this.angularA%20*%20a1%20%2B%20(this.linearB.x%20*%20x2.x%20%2B%20this.linearB.y%20*%20x2.y)%20%2B%20this.angularB%20*%20a2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2Jacobian%20%3D%20b2Jacobian%3B%0A%0A%20%20%20%20class%20b2DistanceJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2DistanceJoint.b2DistanceJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DistanceJoint)%20this.b2DistanceJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2DistanceJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_u%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse%20*%20this.m_u.x%2C%20inv_dt%20*%20this.m_impulse%20*%20this.m_u.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLength()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_length%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetLength(length)%20%7B%0A%20%20%20%20%20%20%20%20if%20(length%20%3D%3D%3D%20undefined)%20length%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_length%20%3D%20length%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFrequency()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_frequencyHz%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetFrequency(hz)%20%7B%0A%20%20%20%20%20%20%20%20if%20(hz%20%3D%3D%3D%20undefined)%20hz%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_frequencyHz%20%3D%20hz%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetDampingRatio()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_dampingRatio%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetDampingRatio(ratio)%20%7B%0A%20%20%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_dampingRatio%20%3D%20ratio%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2DistanceJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20tY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20%20%20this.m_length%20%3D%20def.length%3B%0A%20%20%20%20%20%20%20%20this.m_frequencyHz%20%3D%20def.frequencyHz%3B%0A%20%20%20%20%20%20%20%20this.m_dampingRatio%20%3D%20def.dampingRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_gamma%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_bias%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20this.m_u.x%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20this.m_u.y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20const%20length%20%3D%20Math.sqrt(this.m_u.x%20*%20this.m_u.x%20%2B%20this.m_u.y%20*%20this.m_u.y)%3B%0A%20%20%20%20%20%20%20%20if%20(length%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u.Multiply(1.0%20%2F%20length)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20cr1u%20%3D%20(r1X%20*%20this.m_u.y%20-%20r1Y%20*%20this.m_u.x)%3B%0A%20%20%20%20%20%20%20%20const%20cr2u%20%3D%20(r2X%20*%20this.m_u.y%20-%20r2Y%20*%20this.m_u.x)%3B%0A%20%20%20%20%20%20%20%20const%20invMass%20%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20cr1u%20*%20cr1u%20%2B%20bB.m_invMass%20%2B%20bB.m_invI%20*%20cr2u%20*%20cr2u%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20invMass%20!%3D%200.0%20%3F%201.0%20%2F%20invMass%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_frequencyHz%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20C%20%3D%20length%20-%20this.m_length%3B%0A%20%20%20%20%20%20%20%20%20%20const%20omega%20%3D%202.0%20*%20Math.PI%20*%20this.m_frequencyHz%3B%0A%20%20%20%20%20%20%20%20%20%20const%20d%20%3D%202.0%20*%20this.m_mass%20*%20this.m_dampingRatio%20*%20omega%3B%0A%20%20%20%20%20%20%20%20%20%20const%20k%20%3D%20this.m_mass%20*%20omega%20*%20omega%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_gamma%20%3D%20step.dt%20*%20(d%20%2B%20step.dt%20*%20k)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_gamma%20%3D%20this.m_gamma%20!%3D%200.0%20%3F%201%20%2F%20this.m_gamma%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_bias%20%3D%20C%20*%20step.dt%20*%20k%20*%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20%3D%20invMass%20%2B%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20%3D%20this.m_mass%20!%3D%200.0%20%3F%201.0%20%2F%20this.m_mass%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20const%20PX%20%3D%20this.m_impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20PY%20%3D%20this.m_impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20((-bA.m_angularVelocity%20*%20r1Y))%3B%0A%20%20%20%20%20%20%20%20const%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20(bA.m_angularVelocity%20*%20r1X)%3B%0A%20%20%20%20%20%20%20%20const%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20((-bB.m_angularVelocity%20*%20r2Y))%3B%0A%20%20%20%20%20%20%20%20const%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20(bB.m_angularVelocity%20*%20r2X)%3B%0A%20%20%20%20%20%20%20%20const%20Cdot%20%3D%20(this.m_u.x%20*%20(v2X%20-%20v1X)%20%2B%20this.m_u.y%20*%20(v2Y%20-%20v1Y))%3B%0A%20%20%20%20%20%20%20%20const%20impulse%20%3D%20(-this.m_mass%20*%20(Cdot%20%2B%20this.m_bias%20%2B%20this.m_gamma%20*%20this.m_impulse))%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%2B%3D%20impulse%3B%0A%20%20%20%20%20%20%20%20const%20PX%20%3D%20impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20%20%20const%20PY%20%3D%20impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_frequencyHz%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20let%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20let%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20const%20length%20%3D%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%20%20%20%20dX%20%2F%3D%20length%3B%0A%20%20%20%20%20%20%20%20dY%20%2F%3D%20length%3B%0A%20%20%20%20%20%20%20%20let%20C%20%3D%20length%20-%20this.m_length%3B%0A%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(C%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%20%20%20%20%20%20%20%20const%20impulse%20%3D%20(-this.m_mass%20*%20C)%3B%0A%20%20%20%20%20%20%20%20this.m_u.Set(dX%2C%20dY)%3B%0A%20%20%20%20%20%20%20%20const%20PX%20%3D%20impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20%20%20const%20PY%20%3D%20impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20return%20b2Math.Abs(C)%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2DistanceJoint%20%3D%20b2DistanceJoint%3B%0A%0A%20%20%20%20function%20b2JointEdge()%20%7B%0A%20%20%20%20%20%20b2JointEdge.b2JointEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2JointEdge%20%3D%20b2JointEdge%3B%0A%0A%20%20%20%20class%20b2LineJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2LineJoint.b2LineJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2LineJoint)%20this.b2LineJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2LineJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localXAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localYAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_perp%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20(this.m_impulse.x%20*%20this.m_perp.x%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.x)%2C%20inv_dt%20*%20(this.m_impulse.x%20*%20this.m_perp.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.y))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointTranslation()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20p1%20%3D%20bA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20const%20p2%20%3D%20bB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20%20%20const%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20const%20translation%20%3D%20axis.x%20*%20dX%20%2B%20axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20return%20translation%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointSpeed()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20const%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20const%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20const%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20const%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20const%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20speed%20%3D%20(dX%20*%20((-w1%20*%20axis.y))%20%2B%20dY%20*%20(w1%20*%20axis.x))%20%2B%20(axis.x%20*%20(((v2.x%20%2B%20((-w2%20*%20r2Y)))%20-%20v1.x)%20-%20((-w1%20*%20r1Y)))%20%2B%20axis.y%20*%20(((v2.y%20%2B%20(w2%20*%20r2X))%20-%20v1.y)%20-%20(w1%20*%20r1X)))%3B%0A%20%20%20%20%20%20%20%20return%20speed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsLimitEnabled()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20EnableLimit(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLowerLimit()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_lowerTranslation%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetUpperLimit()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_upperTranslation%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetLimits(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20lower%3B%0A%20%20%20%20%20%20%20%20this.m_upperTranslation%20%3D%20upper%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsMotorEnabled()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20EnableMotor(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMotorSpeed(speed)%20%7B%0A%20%20%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMotorSpeed()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMaxMotorForce(force)%20%7B%0A%20%20%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20force%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMaxMotorForce()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_maxMotorForce%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMotorForce()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2LineJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20tY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20%20%20this.m_localXAxis1.SetV(def.localAxisA)%3B%0A%20%20%20%20%20%20%20%20this.m_localYAxis1.x%20%3D%20(-this.m_localXAxis1.y)%3B%0A%20%20%20%20%20%20%20%20this.m_localYAxis1.y%20%3D%20this.m_localXAxis1.x%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20def.lowerTranslation%3B%0A%20%20%20%20%20%20%20%20this.m_upperTranslation%20%3D%20def.upperTranslation%3B%0A%20%20%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20def.maxMotorForce%3B%0A%20%20%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20this.m_axis.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_perp.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_localCenterA.SetV(bA.GetLocalCenter())%3B%0A%20%20%20%20%20%20%20%20this.m_localCenterB.SetV(bB.GetLocalCenter())%3B%0A%20%20%20%20%20%20%20%20const%20xf1%20%3D%20bA.GetTransform()%3B%0A%20%20%20%20%20%20%20%20const%20xf2%20%3D%20bB.GetTransform()%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.m_invMassA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20this.m_invMassB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20this.m_invIA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20this.m_invIB%20%3D%20bB.m_invI%3B%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localXAxis1))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%20this.m_invMassA%20%2B%20this.m_invMassB%20%2B%20this.m_invIA%20*%20this.m_a1%20*%20this.m_a1%20%2B%20this.m_invIB%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%20this.m_motorMass%20%3E%20Number.MIN_VALUE%20%3F%201.0%20%2F%20this.m_motorMass%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_perp.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localYAxis1))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20%20%20const%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20%20%20const%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20%20%20const%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20jointTransition%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%202.0%20*%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20const%20PX%20%3D%20this.m_impulse.x%20*%20this.m_perp.x%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20PY%20%3D%20this.m_impulse.x%20*%20this.m_perp.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20L1%20%3D%20this.m_impulse.x%20*%20this.m_s1%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20%20%20const%20L2%20%3D%20this.m_impulse.x%20*%20this.m_s2%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20let%20PX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20PY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20L1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20L2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot%20%3D%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_a2%20*%20w2%20-%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20%20%20let%20impulse%20%3D%20this.m_motorMass%20*%20(this.m_motorSpeed%20-%20Cdot)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20const%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorForce%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(this.m_motorImpulse%20%2B%20impulse%2C%20(-maxImpulse)%2C%20maxImpulse)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20impulse%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20impulse%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20L1%20%3D%20impulse%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20%20%20L2%20%3D%20impulse%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20Cdot1%20%3D%20this.m_perp.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_perp.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_s2%20*%20w2%20-%20this.m_s1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot2%20%3D%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_a2%20*%20w2%20-%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20%20%20const%20f1%20%3D%20this.m_impulse.Copy()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20df%20%3D%20this.m_K.Solve(new%20b2Vec2()%2C%20(-Cdot1)%2C%20(-Cdot2))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.Add(df)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20b2Math.Max(this.m_impulse.y%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20b2Math.Min(this.m_impulse.y%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20b%20%3D%20(-Cdot1)%20-%20(this.m_impulse.y%20-%20f1.y)%20*%20this.m_K.col2.x%3B%0A%20%20%20%20%20%20%20%20%20%20let%20f2r%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_K.col1.x%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20f2r%20%3D%20b%20%2F%20this.m_K.col1.x%20%2B%20f1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20f2r%20%3D%20f1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%3D%20f2r%3B%0A%20%20%20%20%20%20%20%20%20%20df.x%20%3D%20this.m_impulse.x%20-%20f1.x%3B%0A%20%20%20%20%20%20%20%20%20%20df.y%20%3D%20this.m_impulse.y%20-%20f1.y%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20df.x%20*%20this.m_perp.x%20%2B%20df.y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20df.x%20*%20this.m_perp.y%20%2B%20df.y%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20L1%20%3D%20df.x%20*%20this.m_s1%20%2B%20df.y%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20%20%20L2%20%3D%20df.x%20*%20this.m_s2%20%2B%20df.y%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20df2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_K.col1.x%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20df2%20%3D%20((-Cdot1))%20%2F%20this.m_K.col1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20df2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20df2%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20df2%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20df2%20*%20this.m_perp.y%3B%0A%20%20%20%20%20%20%20%20%20%20L1%20%3D%20df2%20*%20this.m_s1%3B%0A%20%20%20%20%20%20%20%20%20%20L2%20%3D%20df2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20limitC%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%20bA.m_sweep.c%3B%0A%20%20%20%20%20%20%20%20let%20a1%20%3D%20bA.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20const%20c2%20%3D%20bB.m_sweep.c%3B%0A%20%20%20%20%20%20%20%20let%20a2%20%3D%20bB.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20m1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20m2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20i1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20i2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20active%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20let%20C2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20const%20R1%20%3D%20b2Mat22.FromAngle(a1)%3B%0A%20%20%20%20%20%20%20%20const%20R2%20%3D%20b2Mat22.FromAngle(a2)%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20R1%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20R2%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20c2.x%20%2B%20r2X%20-%20c1.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20c2.y%20%2B%20r2Y%20-%20c1.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.MulMV(R1%2C%20this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20translation%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%202.0%20*%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(translation%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Abs(translation)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(translation%20-%20this.m_lowerTranslation%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20this.m_lowerTranslation%20-%20translation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(translation%20-%20this.m_upperTranslation%20%2B%20b2Settings.b2_linearSlop%2C%200.0%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20translation%20-%20this.m_upperTranslation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_perp%20%3D%20b2Math.MulMV(R1%2C%20this.m_localYAxis1)%3B%0A%20%20%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20const%20impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20const%20C1%20%3D%20this.m_perp.x%20*%20dX%20%2B%20this.m_perp.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20b2Math.Abs(C1))%3B%0A%20%20%20%20%20%20%20%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20if%20(active)%20%7B%0A%20%20%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.Solve(impulse%2C%20(-C1)%2C%20(-C2))%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20%20%20const%20k11%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20let%20impulse1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(k11%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20impulse1%20%3D%20((-C1))%20%2F%20k11%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20impulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20impulse.x%20%3D%20impulse1%3B%0A%20%20%20%20%20%20%20%20%20%20impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20PX%20%3D%20impulse.x%20*%20this.m_perp.x%20%2B%20impulse.y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20const%20PY%20%3D%20impulse.x%20*%20this.m_perp.y%20%2B%20impulse.y%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20const%20L1%20%3D%20impulse.x%20*%20this.m_s1%20%2B%20impulse.y%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20const%20L2%20%3D%20impulse.x%20*%20this.m_s2%20%2B%20impulse.y%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20c1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20c1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20a1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20c2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20c2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20a2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20%3D%20a1%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%3D%20a2%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20return%20linearError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2LineJoint%20%3D%20b2LineJoint%3B%0A%0A%20%20%20%20class%20b2LineJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2LineJointDef.b2LineJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2LineJointDef)%20this.b2LineJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2LineJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAxisA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2LineJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_lineJoint%3B%0A%20%20%20%20%20%20%20%20this.localAxisA.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.lowerTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.upperTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.maxMotorForce%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(bA%2C%20bB%2C%20anchor%2C%20axis)%20%7B%0A%20%20%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20%20%20this.localAxisA%20%3D%20this.bodyA.GetLocalVector(axis)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2LineJointDef%20%3D%20b2LineJointDef%3B%0A%0A%20%20%20%20class%20b2MouseJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2MouseJoint.b2MouseJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2MouseJoint)%20this.b2MouseJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2MouseJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.K1%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.K2%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_target%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.m_C%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_target%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetTarget()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_target%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetTarget(target)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.m_bodyB.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_target%20%3D%20target%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMaxForce()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_maxForce%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMaxForce(maxForce)%20%7B%0A%20%20%20%20%20%20%20%20if%20(maxForce%20%3D%3D%3D%20undefined)%20maxForce%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_maxForce%20%3D%20maxForce%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetFrequency()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_frequencyHz%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetFrequency(hz)%20%7B%0A%20%20%20%20%20%20%20%20if%20(hz%20%3D%3D%3D%20undefined)%20hz%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_frequencyHz%20%3D%20hz%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetDampingRatio()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_dampingRatio%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetDampingRatio(ratio)%20%7B%0A%20%20%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_dampingRatio%20%3D%20ratio%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2MouseJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20this.m_target.SetV(def.target)%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%20this.m_target.x%20-%20this.m_bodyB.m_xf.position.x%3B%0A%20%20%20%20%20%20%20%20const%20tY%20%3D%20this.m_target.y%20-%20this.m_bodyB.m_xf.position.y%3B%0A%20%20%20%20%20%20%20%20const%20tMat%20%3D%20this.m_bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor.x%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor.y%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%20%20%20%20%20%20%20%20this.m_maxForce%20%3D%20def.maxForce%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_frequencyHz%20%3D%20def.frequencyHz%3B%0A%20%20%20%20%20%20%20%20this.m_dampingRatio%20%3D%20def.dampingRatio%3B%0A%20%20%20%20%20%20%20%20this.m_beta%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_gamma%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20b%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20const%20mass%20%3D%20b.GetMass()%3B%0A%20%20%20%20%20%20%20%20const%20omega%20%3D%202.0%20*%20Math.PI%20*%20this.m_frequencyHz%3B%0A%20%20%20%20%20%20%20%20const%20d%20%3D%202.0%20*%20mass%20*%20this.m_dampingRatio%20*%20omega%3B%0A%20%20%20%20%20%20%20%20const%20k%20%3D%20mass%20*%20omega%20*%20omega%3B%0A%20%20%20%20%20%20%20%20this.m_gamma%20%3D%20step.dt%20*%20(d%20%2B%20step.dt%20*%20k)%3B%0A%20%20%20%20%20%20%20%20this.m_gamma%20%3D%20this.m_gamma%20!%3D%200%20%3F%201%20%2F%20this.m_gamma%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_beta%20%3D%20step.dt%20*%20k%20*%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%20tMat%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rX%20%3D%20this.m_localAnchor.x%20-%20b.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rY%20%3D%20this.m_localAnchor.y%20-%20b.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%20(tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY)%3B%20rY%20%3D%20(tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY)%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20invMass%20%3D%20b.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20invI%20%3D%20b.m_invI%3B%20this.K1.col1.x%20%3D%20invMass%3B%0A%20%20%20%20%20%20%20%20this.K1.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.K1.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.K1.col2.y%20%3D%20invMass%3B%0A%20%20%20%20%20%20%20%20this.K2.col1.x%20%3D%20invI%20*%20rY%20*%20rY%3B%0A%20%20%20%20%20%20%20%20this.K2.col2.x%20%3D%20(-invI%20*%20rX%20*%20rY)%3B%0A%20%20%20%20%20%20%20%20this.K2.col1.y%20%3D%20(-invI%20*%20rX%20*%20rY)%3B%0A%20%20%20%20%20%20%20%20this.K2.col2.y%20%3D%20invI%20*%20rX%20*%20rX%3B%0A%20%20%20%20%20%20%20%20this.K.SetM(this.K1)%3B%0A%20%20%20%20%20%20%20%20this.K.AddM(this.K2)%3B%0A%20%20%20%20%20%20%20%20this.K.col1.x%20%2B%3D%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20this.K.col2.y%20%2B%3D%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20this.K.GetInverse(this.m_mass)%3B%0A%20%20%20%20%20%20%20%20this.m_C.x%20%3D%20b.m_sweep.c.x%20%2B%20rX%20-%20this.m_target.x%3B%0A%20%20%20%20%20%20%20%20this.m_C.y%20%3D%20b.m_sweep.c.y%20%2B%20rY%20-%20this.m_target.y%3B%0A%20%20%20%20%20%20%20%20b.m_angularVelocity%20*%3D%200.98%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%20invMass%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%20invMass%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%20invI%20*%20(rX%20*%20this.m_impulse.y%20-%20rY%20*%20this.m_impulse.x)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20b%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rX%20%3D%20this.m_localAnchor.x%20-%20b.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rY%20%3D%20this.m_localAnchor.y%20-%20b.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY)%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20(tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY)%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20CdotX%20%3D%20b.m_linearVelocity.x%20%2B%20((-b.m_angularVelocity%20*%20rY))%3B%0A%20%20%20%20%20%20%20%20const%20CdotY%20%3D%20b.m_linearVelocity.y%20%2B%20(b.m_angularVelocity%20*%20rX)%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20this.m_mass%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20CdotX%20%2B%20this.m_beta%20*%20this.m_C.x%20%2B%20this.m_gamma%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20CdotY%20%2B%20this.m_beta%20*%20this.m_C.y%20%2B%20this.m_gamma%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20let%20impulseX%20%3D%20(-(tMat.col1.x%20*%20tX%20%2B%20tMat.col2.x%20*%20tY))%3B%0A%20%20%20%20%20%20%20%20let%20impulseY%20%3D%20(-(tMat.col1.y%20*%20tX%20%2B%20tMat.col2.y%20*%20tY))%3B%0A%20%20%20%20%20%20%20%20const%20oldImpulseX%20%3D%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20const%20oldImpulseY%20%3D%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20impulseX%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20impulseY%3B%0A%20%20%20%20%20%20%20%20const%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxForce%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_impulse.LengthSquared()%20%3E%20maxImpulse%20*%20maxImpulse)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.Multiply(maxImpulse%20%2F%20this.m_impulse.Length())%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20impulseX%20%3D%20this.m_impulse.x%20-%20oldImpulseX%3B%0A%20%20%20%20%20%20%20%20impulseY%20%3D%20this.m_impulse.y%20-%20oldImpulseY%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%20b.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%20b.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%20b.m_invI%20*%20(rX%20*%20impulseY%20-%20rY%20*%20impulseX)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2MouseJoint%20%3D%20b2MouseJoint%3B%0A%0A%20%20%20%20class%20b2MouseJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2MouseJointDef.b2MouseJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2MouseJointDef)%20this.b2MouseJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2MouseJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.target%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2MouseJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_mouseJoint%3B%0A%20%20%20%20%20%20%20%20this.maxForce%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.frequencyHz%20%3D%205.0%3B%0A%20%20%20%20%20%20%20%20this.dampingRatio%20%3D%200.7%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2MouseJointDef%20%3D%20b2MouseJointDef%3B%0A%0A%20%20%20%20class%20b2PrismaticJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2PrismaticJoint.b2PrismaticJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PrismaticJoint)%20this.b2PrismaticJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2PrismaticJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localXAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localYAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_perp%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_K%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20(this.m_impulse.x%20*%20this.m_perp.x%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.x)%2C%20inv_dt%20*%20(this.m_impulse.x%20*%20this.m_perp.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.y))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointTranslation()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20p1%20%3D%20bA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20const%20p2%20%3D%20bB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20%20%20const%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20const%20translation%20%3D%20axis.x%20*%20dX%20%2B%20axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20return%20translation%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointSpeed()%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20const%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20const%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20const%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20const%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20const%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20speed%20%3D%20(dX%20*%20((-w1%20*%20axis.y))%20%2B%20dY%20*%20(w1%20*%20axis.x))%20%2B%20(axis.x%20*%20(((v2.x%20%2B%20((-w2%20*%20r2Y)))%20-%20v1.x)%20-%20((-w1%20*%20r1Y)))%20%2B%20axis.y%20*%20(((v2.y%20%2B%20(w2%20*%20r2X))%20-%20v1.y)%20-%20(w1%20*%20r1X)))%3B%0A%20%20%20%20%20%20%20%20return%20speed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsLimitEnabled()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20EnableLimit(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLowerLimit()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_lowerTranslation%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetUpperLimit()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_upperTranslation%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetLimits(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20lower%3B%0A%20%20%20%20%20%20%20%20this.m_upperTranslation%20%3D%20upper%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsMotorEnabled()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20EnableMotor(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMotorSpeed(speed)%20%7B%0A%20%20%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMotorSpeed()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMaxMotorForce(force)%20%7B%0A%20%20%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20force%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMotorForce()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2PrismaticJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20tY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20%20%20this.m_localXAxis1.SetV(def.localAxisA)%3B%0A%20%20%20%20%20%20%20%20this.m_localYAxis1.x%20%3D%20(-this.m_localXAxis1.y)%3B%0A%20%20%20%20%20%20%20%20this.m_localYAxis1.y%20%3D%20this.m_localXAxis1.x%3B%0A%20%20%20%20%20%20%20%20this.m_refAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20def.lowerTranslation%3B%0A%20%20%20%20%20%20%20%20this.m_upperTranslation%20%3D%20def.upperTranslation%3B%0A%20%20%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20def.maxMotorForce%3B%0A%20%20%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20this.m_axis.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_perp.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_localCenterA.SetV(bA.GetLocalCenter())%3B%0A%20%20%20%20%20%20%20%20this.m_localCenterB.SetV(bB.GetLocalCenter())%3B%0A%20%20%20%20%20%20%20%20const%20xf1%20%3D%20bA.GetTransform()%3B%0A%20%20%20%20%20%20%20%20const%20xf2%20%3D%20bB.GetTransform()%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.m_invMassA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20this.m_invMassB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20this.m_invIA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20this.m_invIB%20%3D%20bB.m_invI%3B%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localXAxis1))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%20this.m_invMassA%20%2B%20this.m_invMassB%20%2B%20this.m_invIA%20*%20this.m_a1%20*%20this.m_a1%20%2B%20this.m_invIB%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_motorMass%20%3E%20Number.MIN_VALUE)%20this.m_motorMass%20%3D%201.0%20%2F%20this.m_motorMass%3B%0A%20%20%20%20%20%20%20%20%7D%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_perp.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localYAxis1))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20%20%20const%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20%20%20const%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20%20%20const%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.z%20%3D%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.z%20%3D%20i1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col3.x%20%3D%20this.m_K.col1.z%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col3.y%20%3D%20this.m_K.col2.z%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col3.z%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20jointTransition%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%202.0%20*%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20const%20PX%20%3D%20this.m_impulse.x%20*%20this.m_perp.x%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20PY%20%3D%20this.m_impulse.x%20*%20this.m_perp.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20L1%20%3D%20this.m_impulse.x%20*%20this.m_s1%20%2B%20this.m_impulse.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20%20%20const%20L2%20%3D%20this.m_impulse.x%20*%20this.m_s2%20%2B%20this.m_impulse.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20let%20PX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20PY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20L1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20L2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot%20%3D%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_a2%20*%20w2%20-%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20%20%20let%20impulse%20%3D%20this.m_motorMass%20*%20(this.m_motorSpeed%20-%20Cdot)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20const%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorForce%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(this.m_motorImpulse%20%2B%20impulse%2C%20(-maxImpulse)%2C%20maxImpulse)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20impulse%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20impulse%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20L1%20%3D%20impulse%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20%20%20L2%20%3D%20impulse%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20Cdot1X%20%3D%20this.m_perp.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_perp.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_s2%20*%20w2%20-%20this.m_s1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20const%20Cdot1Y%20%3D%20w2%20-%20w1%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot2%20%3D%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_a2%20*%20w2%20-%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20%20%20const%20f1%20%3D%20this.m_impulse.Copy()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20df%20%3D%20this.m_K.Solve33(new%20b2Vec3()%2C%20(-Cdot1X)%2C%20(-Cdot1Y)%2C%20(-Cdot2))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.Add(df)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%20b2Math.Max(this.m_impulse.z%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%20b2Math.Min(this.m_impulse.z%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20const%20bX%20%3D%20(-Cdot1X)%20-%20(this.m_impulse.z%20-%20f1.z)%20*%20this.m_K.col3.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bY%20%3D%20(-Cdot1Y)%20-%20(this.m_impulse.z%20-%20f1.z)%20*%20this.m_K.col3.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20f2r%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20bX%2C%20bY)%3B%0A%20%20%20%20%20%20%20%20%20%20f2r.x%20%2B%3D%20f1.x%3B%0A%20%20%20%20%20%20%20%20%20%20f2r.y%20%2B%3D%20f1.y%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%3D%20f2r.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20f2r.y%3B%0A%20%20%20%20%20%20%20%20%20%20df.x%20%3D%20this.m_impulse.x%20-%20f1.x%3B%0A%20%20%20%20%20%20%20%20%20%20df.y%20%3D%20this.m_impulse.y%20-%20f1.y%3B%0A%20%20%20%20%20%20%20%20%20%20df.z%20%3D%20this.m_impulse.z%20-%20f1.z%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20df.x%20*%20this.m_perp.x%20%2B%20df.z%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20df.x%20*%20this.m_perp.y%20%2B%20df.z%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20L1%20%3D%20df.x%20*%20this.m_s1%20%2B%20df.y%20%2B%20df.z%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20%20%20L2%20%3D%20df.x%20*%20this.m_s2%20%2B%20df.y%20%2B%20df.z%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20df2%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20(-Cdot1X)%2C%20(-Cdot1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20df2.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20df2.y%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20df2.x%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20df2.x%20*%20this.m_perp.y%3B%0A%20%20%20%20%20%20%20%20%20%20L1%20%3D%20df2.x%20*%20this.m_s1%20%2B%20df2.y%3B%0A%20%20%20%20%20%20%20%20%20%20L2%20%3D%20df2.x%20*%20this.m_s2%20%2B%20df2.y%3B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20limitC%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%20bA.m_sweep.c%3B%0A%20%20%20%20%20%20%20%20let%20a1%20%3D%20bA.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20const%20c2%20%3D%20bB.m_sweep.c%3B%0A%20%20%20%20%20%20%20%20let%20a2%20%3D%20bB.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20m1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20m2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20i1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20i2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20active%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20let%20C2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20const%20R1%20%3D%20b2Mat22.FromAngle(a1)%3B%0A%20%20%20%20%20%20%20%20const%20R2%20%3D%20b2Mat22.FromAngle(a2)%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20R1%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20R2%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20c2.x%20%2B%20r2X%20-%20c1.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20c2.y%20%2B%20r2Y%20-%20c1.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.MulMV(R1%2C%20this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20translation%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%202.0%20*%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(translation%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Abs(translation)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(translation%20-%20this.m_lowerTranslation%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20this.m_lowerTranslation%20-%20translation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(translation%20-%20this.m_upperTranslation%20%2B%20b2Settings.b2_linearSlop%2C%200.0%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20translation%20-%20this.m_upperTranslation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_perp%20%3D%20b2Math.MulMV(R1%2C%20this.m_localYAxis1)%3B%0A%20%20%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20const%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%20%20const%20C1X%20%3D%20this.m_perp.x%20*%20dX%20%2B%20this.m_perp.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20const%20C1Y%20%3D%20a2%20-%20a1%20-%20this.m_refAngle%3B%0A%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20b2Math.Abs(C1X))%3B%0A%20%20%20%20%20%20%20%20angularError%20%3D%20b2Math.Abs(C1Y)%3B%0A%20%20%20%20%20%20%20%20if%20(active)%20%7B%0A%20%20%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.z%20%3D%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.z%20%3D%20i1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col3.x%20%3D%20this.m_K.col1.z%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col3.y%20%3D%20this.m_K.col2.z%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col3.z%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.Solve33(impulse%2C%20(-C1X)%2C%20(-C1Y)%2C%20(-C2))%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20%20%20const%20k11%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20const%20k12%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20%20%20const%20k22%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col1.Set(k11%2C%20k12%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_K.col2.Set(k12%2C%20k22%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20impulse1%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20(-C1X)%2C%20(-C1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20impulse.x%20%3D%20impulse1.x%3B%0A%20%20%20%20%20%20%20%20%20%20impulse.y%20%3D%20impulse1.y%3B%0A%20%20%20%20%20%20%20%20%20%20impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20PX%20%3D%20impulse.x%20*%20this.m_perp.x%20%2B%20impulse.z%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20const%20PY%20%3D%20impulse.x%20*%20this.m_perp.y%20%2B%20impulse.z%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20const%20L1%20%3D%20impulse.x%20*%20this.m_s1%20%2B%20impulse.y%20%2B%20impulse.z%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20const%20L2%20%3D%20impulse.x%20*%20this.m_s2%20%2B%20impulse.y%20%2B%20impulse.z%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20c1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20c1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20a1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20c2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20c2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20a2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20%3D%20a1%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%3D%20a2%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20return%20linearError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2PrismaticJoint%20%3D%20b2PrismaticJoint%3B%0A%0A%20%20%20%20class%20b2PrismaticJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2PrismaticJointDef.b2PrismaticJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PrismaticJointDef)%20this.b2PrismaticJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2PrismaticJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAxisA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2PrismaticJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_prismaticJoint%3B%0A%20%20%20%20%20%20%20%20this.localAxisA.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.lowerTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.upperTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.maxMotorForce%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(bA%2C%20bB%2C%20anchor%2C%20axis)%20%7B%0A%20%20%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20%20%20this.localAxisA%20%3D%20this.bodyA.GetLocalVector(axis)%3B%0A%20%20%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2PrismaticJointDef%20%3D%20b2PrismaticJointDef%3B%0A%0A%20%20%20%20class%20b2PulleyJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2PulleyJoint.b2PulleyJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PulleyJoint)%20this.b2PulleyJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2PulleyJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_u1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_u2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse%20*%20this.m_u2.x%2C%20inv_dt%20*%20this.m_impulse%20*%20this.m_u2.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetGroundAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20const%20a%20%3D%20this.m_ground.m_xf.position.Copy()%3B%0A%20%20%20%20%20%20%20%20a.Add(this.m_groundAnchor1)%3B%0A%20%20%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetGroundAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20const%20a%20%3D%20this.m_ground.m_xf.position.Copy()%3B%0A%20%20%20%20%20%20%20%20a.Add(this.m_groundAnchor2)%3B%0A%20%20%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLength1()%20%7B%0A%20%20%20%20%20%20%20%20const%20p%20%3D%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20const%20sX%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20%20%20const%20sY%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20p.x%20-%20sX%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20p.y%20-%20sY%3B%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLength2()%20%7B%0A%20%20%20%20%20%20%20%20const%20p%20%3D%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20const%20sX%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20%20%20const%20sY%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20%20%20const%20dX%20%3D%20p.x%20-%20sX%3B%0A%20%20%20%20%20%20%20%20const%20dY%20%3D%20p.y%20-%20sY%3B%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetRatio()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_ratio%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2PulleyJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20tY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_ground%20%3D%20this.m_bodyA.m_world.m_groundBody%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor1.x%20%3D%20def.groundAnchorA.x%20-%20this.m_ground.m_xf.position.x%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor1.y%20%3D%20def.groundAnchorA.y%20-%20this.m_ground.m_xf.position.y%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor2.x%20%3D%20def.groundAnchorB.x%20-%20this.m_ground.m_xf.position.x%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor2.y%20%3D%20def.groundAnchorB.y%20-%20this.m_ground.m_xf.position.y%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20%20%20this.m_ratio%20%3D%20def.ratio%3B%0A%20%20%20%20%20%20%20%20this.m_constant%20%3D%20def.lengthA%20%2B%20this.m_ratio%20*%20def.lengthB%3B%0A%20%20%20%20%20%20%20%20this.m_maxLength1%20%3D%20b2Math.Min(def.maxLengthA%2C%20this.m_constant%20-%20this.m_ratio%20*%20b2PulleyJoint.b2_minPulleyLength)%3B%0A%20%20%20%20%20%20%20%20this.m_maxLength2%20%3D%20b2Math.Min(def.maxLengthB%2C%20(this.m_constant%20-%20b2PulleyJoint.b2_minPulleyLength)%20%2F%20this.m_ratio)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20const%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20const%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20const%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20const%20s1X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20%20%20const%20s1Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20%20%20const%20s2X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20%20%20const%20s2Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20%20%20const%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20%20%20const%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.Multiply(1.0%20%2F%20length1)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.Multiply(1.0%20%2F%20length2)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20C%20%3D%20this.m_constant%20-%20length1%20-%20this.m_ratio%20*%20length2%3B%0A%20%20%20%20%20%20%20%20if%20(C%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_state%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_state%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(length1%20%3C%20this.m_maxLength1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState1%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState1%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(length2%20%3C%20this.m_maxLength2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState2%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState2%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20cr1u1%20%3D%20r1X%20*%20this.m_u1.y%20-%20r1Y%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20const%20cr2u2%20%3D%20r2X%20*%20this.m_u2.y%20-%20r2Y%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20this.m_limitMass1%20%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20cr1u1%20*%20cr1u1%3B%0A%20%20%20%20%20%20%20%20this.m_limitMass2%20%3D%20bB.m_invMass%20%2B%20bB.m_invI%20*%20cr2u2%20*%20cr2u2%3B%0A%20%20%20%20%20%20%20%20this.m_pulleyMass%20%3D%20this.m_limitMass1%20%2B%20this.m_ratio%20*%20this.m_ratio%20*%20this.m_limitMass2%3B%0A%20%20%20%20%20%20%20%20this.m_limitMass1%20%3D%201.0%20%2F%20this.m_limitMass1%3B%0A%20%20%20%20%20%20%20%20this.m_limitMass2%20%3D%201.0%20%2F%20this.m_limitMass2%3B%0A%20%20%20%20%20%20%20%20this.m_pulleyMass%20%3D%201.0%20%2F%20this.m_pulleyMass%3B%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitImpulse1%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitImpulse2%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20const%20P1X%20%3D%20((-this.m_impulse)%20-%20this.m_limitImpulse1)%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20P1Y%20%3D%20((-this.m_impulse)%20-%20this.m_limitImpulse1)%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20P2X%20%3D%20((-this.m_ratio%20*%20this.m_impulse)%20-%20this.m_limitImpulse2)%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20P2Y%20%3D%20((-this.m_ratio%20*%20this.m_impulse)%20-%20this.m_limitImpulse2)%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20let%20v1X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20v1Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20v2X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20v2Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20P1X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20P1Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20P2X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20P2Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20Cdot%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20impulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20oldImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_state%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20((-bA.m_angularVelocity%20*%20r1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20(bA.m_angularVelocity%20*%20r1X)%3B%0A%20%20%20%20%20%20%20%20%20%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20((-bB.m_angularVelocity%20*%20r2Y))%3B%0A%20%20%20%20%20%20%20%20%20%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20(bB.m_angularVelocity%20*%20r2X)%3B%0A%20%20%20%20%20%20%20%20%20%20Cdot%20%3D%20(-(this.m_u1.x%20*%20v1X%20%2B%20this.m_u1.y%20*%20v1Y))%20-%20this.m_ratio%20*%20(this.m_u2.x%20*%20v2X%20%2B%20this.m_u2.y%20*%20v2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_pulleyMass%20*%20((-Cdot))%3B%0A%20%20%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_impulse%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse%20%3D%20b2Math.Max(0.0%2C%20this.m_impulse%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_impulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20(-impulse%20*%20this.m_u1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20(-impulse%20*%20this.m_u1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20(-this.m_ratio%20*%20impulse%20*%20this.m_u2.x)%3B%0A%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20(-this.m_ratio%20*%20impulse%20*%20this.m_u2.y)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState1%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20((-bA.m_angularVelocity%20*%20r1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20(bA.m_angularVelocity%20*%20r1X)%3B%0A%20%20%20%20%20%20%20%20%20%20Cdot%20%3D%20(-(this.m_u1.x%20*%20v1X%20%2B%20this.m_u1.y%20*%20v1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20(-this.m_limitMass1%20*%20Cdot)%3B%0A%20%20%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_limitImpulse1%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%20b2Math.Max(0.0%2C%20this.m_limitImpulse1%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_limitImpulse1%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20(-impulse%20*%20this.m_u1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20(-impulse%20*%20this.m_u1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState2%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20((-bB.m_angularVelocity%20*%20r2Y))%3B%0A%20%20%20%20%20%20%20%20%20%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20(bB.m_angularVelocity%20*%20r2X)%3B%0A%20%20%20%20%20%20%20%20%20%20Cdot%20%3D%20(-(this.m_u2.x%20*%20v2X%20%2B%20this.m_u2.y%20*%20v2Y))%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20(-this.m_limitMass2%20*%20Cdot)%3B%0A%20%20%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_limitImpulse2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%20b2Math.Max(0.0%2C%20this.m_limitImpulse2%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_limitImpulse2%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20(-impulse%20*%20this.m_u2.x)%3B%0A%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20(-impulse%20*%20this.m_u2.y)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20s1X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20%20%20const%20s1Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20%20%20const%20s2X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20%20%20const%20s2Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20p1X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20p1Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20p2X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20p2Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20length1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20length2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20C%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20impulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20oldImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20oldLimitPositionImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_state%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20%20%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20%20%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20%20%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20%20%20%20%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u1.Multiply(1.0%20%2F%20length1)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u2.Multiply(1.0%20%2F%20length2)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20this.m_constant%20-%20length1%20-%20this.m_ratio%20*%20length2%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20(-C))%3B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(C%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20(-this.m_pulleyMass%20*%20C)%3B%0A%20%20%20%20%20%20%20%20%20%20p1X%20%3D%20(-impulse%20*%20this.m_u1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20p1Y%20%3D%20(-impulse%20*%20this.m_u1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20p2X%20%3D%20(-this.m_ratio%20*%20impulse%20*%20this.m_u2.x)%3B%0A%20%20%20%20%20%20%20%20%20%20p2Y%20%3D%20(-this.m_ratio%20*%20impulse%20*%20this.m_u2.y)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20p1X%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20p1Y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20p1Y%20-%20r1Y%20*%20p1X)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20p2X%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20p2Y%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20p2Y%20-%20r2Y%20*%20p2X)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState1%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20%20%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u1.x%20*%3D%201.0%20%2F%20length1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u1.y%20*%3D%201.0%20%2F%20length1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20this.m_maxLength1%20-%20length1%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20(-C))%3B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(C%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20(-this.m_limitMass1%20*%20C)%3B%0A%20%20%20%20%20%20%20%20%20%20p1X%20%3D%20(-impulse%20*%20this.m_u1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20p1Y%20%3D%20(-impulse%20*%20this.m_u1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20p1X%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20p1Y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20p1Y%20-%20r1Y%20*%20p1X)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState2%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20%20%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u2.x%20*%3D%201.0%20%2F%20length2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u2.y%20*%3D%201.0%20%2F%20length2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20this.m_maxLength2%20-%20length2%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20(-C))%3B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(C%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20(-this.m_limitMass2%20*%20C)%3B%0A%20%20%20%20%20%20%20%20%20%20p2X%20%3D%20(-impulse%20*%20this.m_u2.x)%3B%0A%20%20%20%20%20%20%20%20%20%20p2Y%20%3D%20(-impulse%20*%20this.m_u2.y)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20p2X%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20p2Y%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20p2Y%20-%20r2Y%20*%20p2X)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20linearError%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJoint%20%3D%20b2PulleyJoint%3B%0A%0A%20%20%20%20class%20b2PulleyJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2PulleyJointDef.b2PulleyJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PulleyJointDef)%20this.b2PulleyJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2PulleyJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.groundAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.groundAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2PulleyJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_pulleyJoint%3B%0A%20%20%20%20%20%20%20%20this.groundAnchorA.Set((-1.0)%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20this.groundAnchorB.Set(1.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA.Set((-1.0)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.lengthA%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.maxLengthA%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.lengthB%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.maxLengthB%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.ratio%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.collideConnected%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(bA%2C%20bB%2C%20gaA%2C%20gaB%2C%20anchorA%2C%20anchorB%2C%20r)%20%7B%0A%20%20%20%20%20%20%20%20if%20(r%20%3D%3D%3D%20undefined)%20r%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20this.groundAnchorA.SetV(gaA)%3B%0A%20%20%20%20%20%20%20%20this.groundAnchorB.SetV(gaB)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchorA)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchorB)%3B%0A%20%20%20%20%20%20%20%20const%20d1X%20%3D%20anchorA.x%20-%20gaA.x%3B%0A%20%20%20%20%20%20%20%20const%20d1Y%20%3D%20anchorA.y%20-%20gaA.y%3B%0A%20%20%20%20%20%20%20%20this.lengthA%20%3D%20Math.sqrt(d1X%20*%20d1X%20%2B%20d1Y%20*%20d1Y)%3B%0A%20%20%20%20%20%20%20%20const%20d2X%20%3D%20anchorB.x%20-%20gaB.x%3B%0A%20%20%20%20%20%20%20%20const%20d2Y%20%3D%20anchorB.y%20-%20gaB.y%3B%0A%20%20%20%20%20%20%20%20this.lengthB%20%3D%20Math.sqrt(d2X%20*%20d2X%20%2B%20d2Y%20*%20d2Y)%3B%0A%20%20%20%20%20%20%20%20this.ratio%20%3D%20r%3B%0A%20%20%20%20%20%20%20%20const%20C%20%3D%20this.lengthA%20%2B%20this.ratio%20*%20this.lengthB%3B%0A%20%20%20%20%20%20%20%20this.maxLengthA%20%3D%20C%20-%20this.ratio%20*%20b2PulleyJoint.b2_minPulleyLength%3B%0A%20%20%20%20%20%20%20%20this.maxLengthB%20%3D%20(C%20-%20b2PulleyJoint.b2_minPulleyLength)%20%2F%20this.ratio%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJointDef%20%3D%20b2PulleyJointDef%3B%0A%0A%20%20%20%20class%20b2RevoluteJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2RevoluteJoint.b2RevoluteJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RevoluteJoint)%20this.b2RevoluteJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2RevoluteJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.K1%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.K2%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.K3%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20%20%20this.impulse3%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%20%20this.impulse2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.reduced%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.z%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointAngle()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.m_sweep.a%20-%20this.m_bodyA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetJointSpeed()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.m_angularVelocity%20-%20this.m_bodyA.m_angularVelocity%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsLimitEnabled()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20EnableLimit(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetLowerLimit()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_lowerAngle%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetUpperLimit()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_upperAngle%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetLimits(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_lowerAngle%20%3D%20lower%3B%0A%20%20%20%20%20%20%20%20this.m_upperAngle%20%3D%20upper%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20IsMotorEnabled()%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20EnableMotor(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMotorSpeed(speed)%20%7B%0A%20%20%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMotorSpeed()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SetMaxMotorTorque(torque)%20%7B%0A%20%20%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.m_maxMotorTorque%20%3D%20torque%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetMotorTorque()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_maxMotorTorque%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2RevoluteJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20%20%20this.m_referenceAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_lowerAngle%20%3D%20def.lowerAngle%3B%0A%20%20%20%20%20%20%20%20this.m_upperAngle%20%3D%20def.upperAngle%3B%0A%20%20%20%20%20%20%20%20this.m_maxMotorTorque%20%3D%20def.maxMotorTorque%3B%0A%20%20%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableMotor%20%7C%7C%20this.m_enableLimit)%20%7B%20%7D%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20m1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20m2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20i1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20const%20i2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20r1Y%20*%20r1Y%20*%20i1%20%2B%20r2Y%20*%20r2Y%20*%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20(-r1Y%20*%20r1X%20*%20i1)%20-%20r2Y%20*%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20(-r1Y%20*%20i1)%20-%20r2Y%20*%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20m1%20%2B%20m2%20%2B%20r1X%20*%20r1X%20*%20i1%20%2B%20r2X%20*%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20r1X%20*%20i1%20%2B%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%201.0%20%2F%20(i1%20%2B%20i2)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20jointAngle%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b2Math.Abs(this.m_upperAngle%20-%20this.m_lowerAngle)%20%3C%202.0%20*%20b2Settings.b2_angularSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointAngle%20%3C%3D%20this.m_lowerAngle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointAngle%20%3E%3D%20this.m_upperAngle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20const%20PX%20%3D%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20PY%20%3D%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20m1%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20m1%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20i1%20*%20((r1X%20*%20PY%20-%20r1Y%20*%20PX)%20%2B%20this.m_motorImpulse%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20m2%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20m2%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20i2%20*%20((r2X%20*%20PY%20-%20r2Y%20*%20PX)%20%2B%20this.m_motorImpulse%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20newImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20r1X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20r1Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20r2X%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20r2Y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20m1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20m2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20i1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20const%20i2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot%20%3D%20w2%20-%20w1%20-%20this.m_motorSpeed%3B%0A%20%20%20%20%20%20%20%20%20%20let%20impulse%20%3D%20this.m_motorMass%20*%20((-Cdot))%3B%0A%20%20%20%20%20%20%20%20%20%20const%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20const%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorTorque%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(this.m_motorImpulse%20%2B%20impulse%2C%20(-maxImpulse)%2C%20maxImpulse)%3B%0A%20%20%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20i1%20*%20impulse%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20i2%20*%20impulse%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot1X%20%3D%20v2.x%20%2B%20((-w2%20*%20r2Y))%20-%20v1.x%20-%20((-w1%20*%20r1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot1Y%20%3D%20v2.y%20%2B%20(w2%20*%20r2X)%20-%20v1.y%20-%20(w1%20*%20r1X)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20Cdot2%20%3D%20w2%20-%20w1%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass.Solve33(this.impulse3%2C%20(-Cdot1X)%2C%20(-Cdot1Y)%2C%20(-Cdot2))%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.Add(this.impulse3)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20this.m_impulse.z%20%2B%20this.impulse3.z%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newImpulse%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.reduced%2C%20(-Cdot1X)%2C%20(-Cdot1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.x%20%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.y%20%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.z%20%3D%20(-this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20this.m_impulse.z%20%2B%20this.impulse3.z%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(newImpulse%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.reduced%2C%20(-Cdot1X)%2C%20(-Cdot1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.x%20%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.y%20%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.z%20%3D%20(-this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20v1.x%20-%3D%20m1%20*%20this.impulse3.x%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20-%3D%20m1%20*%20this.impulse3.y%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20i1%20*%20(r1X%20*%20this.impulse3.y%20-%20r1Y%20*%20this.impulse3.x%20%2B%20this.impulse3.z)%3B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20m2%20*%20this.impulse3.x%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20m2%20*%20this.impulse3.y%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20i2%20*%20(r2X%20*%20this.impulse3.y%20-%20r2Y%20*%20this.impulse3.x%20%2B%20this.impulse3.z)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20const%20CdotX%20%3D%20v2.x%20%2B%20((-w2%20*%20r2Y))%20-%20v1.x%20-%20((-w1%20*%20r1Y))%3B%0A%20%20%20%20%20%20%20%20%20%20const%20CdotY%20%3D%20v2.y%20%2B%20(w2%20*%20r2X)%20-%20v1.y%20-%20(w1%20*%20r1X)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.impulse2%2C%20(-CdotX)%2C%20(-CdotY))%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20-%3D%20m1%20*%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20-%3D%20m1%20*%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20%20%20w1%20-%3D%20i1%20*%20(r1X%20*%20this.impulse2.y%20-%20r1Y%20*%20this.impulse2.x)%3B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20m2%20*%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20m2%20*%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20%20%20w2%20%2B%3D%20i2%20*%20(r2X%20*%20this.impulse2.y%20-%20r2Y%20*%20this.impulse2.x)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20C%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20let%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20positionError%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20impulseX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20impulseY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20angle%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20%20%20%20%20let%20limitImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(angle%20-%20this.m_lowerAngle%2C%20(-b2Settings.b2_maxAngularCorrection)%2C%20b2Settings.b2_maxAngularCorrection)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20(-this.m_motorMass%20*%20C)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20b2Math.Abs(C)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20%3D%20angle%20-%20this.m_lowerAngle%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20(-C)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(C%20%2B%20b2Settings.b2_angularSlop%2C%20(-b2Settings.b2_maxAngularCorrection)%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20(-this.m_motorMass%20*%20C)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20%3D%20angle%20-%20this.m_upperAngle%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(C%20-%20b2Settings.b2_angularSlop%2C%200.0%2C%20b2Settings.b2_maxAngularCorrection)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20(-this.m_motorMass%20*%20C)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20limitImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20limitImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%20%7B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20%20%20let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20%20%20let%20CX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20%20%20let%20CY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20CLengthSquared%20%3D%20CX%20*%20CX%20%2B%20CY%20*%20CY%3B%0A%20%20%20%20%20%20%20%20%20%20const%20CLength%20%3D%20Math.sqrt(CLengthSquared)%3B%0A%20%20%20%20%20%20%20%20%20%20positionError%20%3D%20CLength%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invMass1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invMass2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invI1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20const%20invI2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20const%20k_allowedStretch%20%3D%2010.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(CLengthSquared%20%3E%20k_allowedStretch%20*%20k_allowedStretch)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20uX%20%3D%20CX%20%2F%20CLength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20uY%20%3D%20CY%20%2F%20CLength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20k%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20m%20%3D%201.0%20%2F%20k%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20impulseX%20%3D%20m%20*%20((-CX))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20impulseY%20%3D%20m%20*%20((-CY))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20k_beta%20%3D%200.5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20k_beta%20*%20invMass1%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20k_beta%20*%20invMass1%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20k_beta%20*%20invMass2%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20k_beta%20*%20invMass2%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20CX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20CY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.K1.col1.x%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20%20%20this.K1.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.K1.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20this.K1.col2.y%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20%20%20this.K2.col1.x%20%3D%20invI1%20*%20r1Y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20%20%20this.K2.col2.x%20%3D%20(-invI1%20*%20r1X%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.K2.col1.y%20%3D%20(-invI1%20*%20r1X%20*%20r1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.K2.col2.y%20%3D%20invI1%20*%20r1X%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20%20%20this.K3.col1.x%20%3D%20invI2%20*%20r2Y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20%20%20this.K3.col2.x%20%3D%20(-invI2%20*%20r2X%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.K3.col1.y%20%3D%20(-invI2%20*%20r2X%20*%20r2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20this.K3.col2.y%20%3D%20invI2%20*%20r2X%20*%20r2X%3B%0A%20%20%20%20%20%20%20%20%20%20this.K.SetM(this.K1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.K.AddM(this.K2)%3B%0A%20%20%20%20%20%20%20%20%20%20this.K.AddM(this.K3)%3B%0A%20%20%20%20%20%20%20%20%20%20this.K.Solve(b2RevoluteJoint.tImpulse%2C%20(-CX)%2C%20(-CY))%3B%0A%20%20%20%20%20%20%20%20%20%20impulseX%20%3D%20b2RevoluteJoint.tImpulse.x%3B%0A%20%20%20%20%20%20%20%20%20%20impulseY%20%3D%20b2RevoluteJoint.tImpulse.y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20bA.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20bA.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20(r1X%20*%20impulseY%20-%20r1Y%20*%20impulseX)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20impulseY%20-%20r2Y%20*%20impulseX)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20positionError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJoint%20%3D%20b2RevoluteJoint%3B%0A%0A%20%20%20%20class%20b2RevoluteJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2RevoluteJointDef.b2RevoluteJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RevoluteJointDef)%20this.b2RevoluteJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2RevoluteJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2RevoluteJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_revoluteJoint%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.lowerAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.upperAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.maxMotorTorque%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJointDef%20%3D%20b2RevoluteJointDef%3B%0A%0A%20%20%20%20class%20b2WeldJoint%20extends%20b2Joint%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2WeldJoint.b2WeldJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WeldJoint)%20this.b2WeldJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2WeldJoint()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorA()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchorA)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetAnchorB()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchorB)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionForce(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20GetReactionTorque(inv_dt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.z%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2WeldJoint(def)%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchorA.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchorB.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20%20%20this.m_referenceAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20InitVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20const%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20mA%20%2B%20mB%20%2B%20rAY%20*%20rAY%20*%20iA%20%2B%20rBY%20*%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20(-rAY%20*%20rAX%20*%20iA)%20-%20rBY%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20(-rAY%20*%20iA)%20-%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20mA%20%2B%20mB%20%2B%20rAX%20*%20rAX%20*%20iA%20%2B%20rBX%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20rAX%20*%20iA%20%2B%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20mA%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20mA%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20iA%20*%20(rAX%20*%20this.m_impulse.y%20-%20rAY%20*%20this.m_impulse.x%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20mB%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20mB%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20iB%20*%20(rBX%20*%20this.m_impulse.y%20-%20rBY%20*%20this.m_impulse.x%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolveVelocityConstraints(step)%20%7B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20const%20vA%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20wA%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20vB%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20let%20wB%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20const%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20const%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20Cdot1X%20%3D%20vB.x%20-%20wB%20*%20rBY%20-%20vA.x%20%2B%20wA%20*%20rAY%3B%0A%20%20%20%20%20%20%20%20const%20Cdot1Y%20%3D%20vB.y%20%2B%20wB%20*%20rBX%20-%20vA.y%20-%20wA%20*%20rAX%3B%0A%20%20%20%20%20%20%20%20const%20Cdot2%20%3D%20wB%20-%20wA%3B%0A%20%20%20%20%20%20%20%20const%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%20%20this.m_mass.Solve33(impulse%2C%20(-Cdot1X)%2C%20(-Cdot1Y)%2C%20(-Cdot2))%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.Add(impulse)%3B%0A%20%20%20%20%20%20%20%20vA.x%20-%3D%20mA%20*%20impulse.x%3B%0A%20%20%20%20%20%20%20%20vA.y%20-%3D%20mA%20*%20impulse.y%3B%0A%20%20%20%20%20%20%20%20wA%20-%3D%20iA%20*%20(rAX%20*%20impulse.y%20-%20rAY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20mB%20*%20impulse.x%3B%0A%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20mB%20*%20impulse.y%3B%0A%20%20%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20(rBX%20*%20impulse.y%20-%20rBY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20SolvePositionConstraints(baumgarte)%20%7B%0A%20%20%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20%20%20let%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20const%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20%20%20const%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%20%20%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%20%20%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20const%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20const%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20let%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20let%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20const%20C1X%20%3D%20bB.m_sweep.c.x%20%2B%20rBX%20-%20bA.m_sweep.c.x%20-%20rAX%3B%0A%20%20%20%20%20%20%20%20const%20C1Y%20%3D%20bB.m_sweep.c.y%20%2B%20rBY%20-%20bA.m_sweep.c.y%20-%20rAY%3B%0A%20%20%20%20%20%20%20%20const%20C2%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20%20%20const%20k_allowedStretch%20%3D%2010.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%20%20const%20positionError%20%3D%20Math.sqrt(C1X%20*%20C1X%20%2B%20C1Y%20*%20C1Y)%3B%0A%20%20%20%20%20%20%20%20const%20angularError%20%3D%20b2Math.Abs(C2)%3B%0A%20%20%20%20%20%20%20%20if%20(positionError%20%3E%20k_allowedStretch)%20%7B%0A%20%20%20%20%20%20%20%20%20%20iA%20*%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20iB%20*%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20mA%20%2B%20mB%20%2B%20rAY%20*%20rAY%20*%20iA%20%2B%20rBY%20*%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20(-rAY%20*%20rAX%20*%20iA)%20-%20rBY%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20(-rAY%20*%20iA)%20-%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20mA%20%2B%20mB%20%2B%20rAX%20*%20rAX%20*%20iA%20%2B%20rBX%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20rAX%20*%20iA%20%2B%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20%20%20const%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20%20%20this.m_mass.Solve33(impulse%2C%20(-C1X)%2C%20(-C1Y)%2C%20(-C2))%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20mA%20*%20impulse.x%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20mA%20*%20impulse.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20iA%20*%20(rAX%20*%20impulse.y%20-%20rAY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20mB%20*%20impulse.x%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20mB%20*%20impulse.y%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20iB%20*%20(rBX%20*%20impulse.y%20-%20rBY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20return%20positionError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2WeldJoint%20%3D%20b2WeldJoint%3B%0A%0A%20%20%20%20class%20b2WeldJointDef%20extends%20b2JointDef%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super(...arguments)%3B%0A%20%20%20%20%20%20%20%20b2WeldJointDef.b2WeldJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WeldJointDef)%20this.b2WeldJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20b2WeldJointDef()%20%7B%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20b2WeldJointDef()%20%7B%0A%20%20%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_weldJoint%3B%0A%20%20%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Initialize(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20Box2D.Dynamics.Joints.b2WeldJointDef%20%3D%20b2WeldJointDef%3B%0A%20%20%7D))()%3B%20%2F%2F%20definitions%0A%20%20Box2D.postDefs%20%3D%20%5B%5D%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%20%20%20%20const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%20%20%20%20const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%20%20%20%20const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%20%20%20%20const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%20%20%20%20const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%20%20%20%20const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%20%20%20%20const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%20%20%20%20const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%20%20%20%20const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%20%20%20%20const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%20%20%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%20%20%20%20const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%20%20%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%20%20%20%20const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%20%20%20%20const%20b2Bound%20%3D%20Box2D.Collision.b2Bound%3B%0A%20%20%20%20const%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%3B%0A%20%20%20%20const%20b2Collision%20%3D%20Box2D.Collision.b2Collision%3B%0A%20%20%20%20const%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%3B%0A%20%20%20%20const%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%3B%0A%20%20%20%20const%20b2Distance%20%3D%20Box2D.Collision.b2Distance%3B%0A%20%20%20%20const%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%3B%0A%20%20%20%20const%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%3B%0A%20%20%20%20const%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%3B%0A%20%20%20%20const%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%3B%0A%20%20%20%20const%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%3B%0A%20%20%20%20const%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%3B%0A%20%20%20%20const%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%3B%0A%20%20%20%20const%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%3B%0A%20%20%20%20const%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%3B%0A%20%20%20%20const%20b2Point%20%3D%20Box2D.Collision.b2Point%3B%0A%20%20%20%20const%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%3B%0A%20%20%20%20const%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%3B%0A%20%20%20%20const%20b2Segment%20%3D%20Box2D.Collision.b2Segment%3B%0A%20%20%20%20const%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%3B%0A%20%20%20%20const%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%3B%0A%20%20%20%20const%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%3B%0A%20%20%20%20const%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%3B%0A%20%20%20%20const%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%3B%0A%20%20%20%20const%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%3B%0A%20%20%20%20const%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%3B%0A%20%20%20%20const%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%3B%0A%20%20%20%20const%20Features%20%3D%20Box2D.Collision.Features%3B%0A%20%20%20%20const%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20b2AABB.Combine%20%3D%20(aabb1%2C%20aabb2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20aabb.Combine(aabb1%2C%20aabb2)%3B%0A%20%20%20%20%20%20return%20aabb%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Bound.b2Bound%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2BoundValues.b2BoundValues%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2Collision.b2Collision%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2Collision.ClipSegmentToLine%20%3D%20(vOut%2C%20vIn%2C%20normal%2C%20offset)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20let%20cv%3B%0A%20%20%20%20%20%20let%20numOut%20%3D%200%3B%0A%20%20%20%20%20%20cv%20%3D%20vIn%5B0%5D%3B%0A%20%20%20%20%20%20const%20vIn0%20%3D%20cv.v%3B%0A%20%20%20%20%20%20cv%20%3D%20vIn%5B1%5D%3B%0A%20%20%20%20%20%20const%20vIn1%20%3D%20cv.v%3B%0A%20%20%20%20%20%20const%20distance0%20%3D%20normal.x%20*%20vIn0.x%20%2B%20normal.y%20*%20vIn0.y%20-%20offset%3B%0A%20%20%20%20%20%20const%20distance1%20%3D%20normal.x%20*%20vIn1.x%20%2B%20normal.y%20*%20vIn1.y%20-%20offset%3B%0A%20%20%20%20%20%20if%20(distance0%20%3C%3D%200.0)%20vOut%5BnumOut%2B%2B%5D.Set(vIn%5B0%5D)%3B%0A%20%20%20%20%20%20if%20(distance1%20%3C%3D%200.0)%20vOut%5BnumOut%2B%2B%5D.Set(vIn%5B1%5D)%3B%0A%20%20%20%20%20%20if%20(distance0%20*%20distance1%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20const%20interp%20%3D%20distance0%20%2F%20(distance0%20-%20distance1)%3B%0A%20%20%20%20%20%20%20%20cv%20%3D%20vOut%5BnumOut%5D%3B%0A%20%20%20%20%20%20%20%20const%20tVec%20%3D%20cv.v%3B%0A%20%20%20%20%20%20%20%20tVec.x%20%3D%20vIn0.x%20%2B%20interp%20*%20(vIn1.x%20-%20vIn0.x)%3B%0A%20%20%20%20%20%20%20%20tVec.y%20%3D%20vIn0.y%20%2B%20interp%20*%20(vIn1.y%20-%20vIn0.y)%3B%0A%20%20%20%20%20%20%20%20cv%20%3D%20vOut%5BnumOut%5D%3B%0A%20%20%20%20%20%20%20%20let%20cv2%3B%0A%20%20%20%20%20%20%20%20if%20(distance0%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20cv2%20%3D%20vIn%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20cv.id%20%3D%20cv2.id%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20cv2%20%3D%20vIn%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20cv.id%20%3D%20cv2.id%3B%0A%20%20%20%20%20%20%20%20%7D%20%2B%2BnumOut%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20numOut%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.EdgeSeparation%20%3D%20(poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(edge1%20%3D%3D%3D%20undefined)%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20const%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20const%20vertices1%20%3D%20poly1.m_vertices%3B%0A%20%20%20%20%20%20const%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20const%20count2%20%3D%20parseInt(poly2.m_vertexCount)%3B%0A%20%20%20%20%20%20const%20vertices2%20%3D%20poly2.m_vertices%3B%0A%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20normals1%5Bedge1%5D%3B%0A%20%20%20%20%20%20const%20normal1WorldX%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20const%20normal1WorldY%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20const%20normal1X%20%3D%20(tMat.col1.x%20*%20normal1WorldX%20%2B%20tMat.col1.y%20*%20normal1WorldY)%3B%0A%20%20%20%20%20%20const%20normal1Y%20%3D%20(tMat.col2.x%20*%20normal1WorldX%20%2B%20tMat.col2.y%20*%20normal1WorldY)%3B%0A%20%20%20%20%20%20let%20index%20%3D%200%3B%0A%20%20%20%20%20%20let%20minDot%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20count2%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20dot%20%3D%20tVec.x%20*%20normal1X%20%2B%20tVec.y%20*%20normal1Y%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3C%20minDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20tVec%20%3D%20vertices1%5Bedge1%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20const%20v1X%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20const%20v1Y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bindex%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20let%20v2X%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20let%20v2Y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20v2X%20-%3D%20v1X%3B%0A%20%20%20%20%20%20v2Y%20-%3D%20v1Y%3B%0A%20%20%20%20%20%20const%20separation%20%3D%20v2X%20*%20normal1WorldX%20%2B%20v2Y%20*%20normal1WorldY%3B%0A%20%20%20%20%20%20return%20separation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.FindMaxSeparation%20%3D%20(edgeIndex%2C%20poly1%2C%20xf1%2C%20poly2%2C%20xf2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20const%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20poly2.m_centroid%3B%0A%20%20%20%20%20%20let%20dX%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20let%20dY%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20poly1.m_centroid%3B%0A%20%20%20%20%20%20dX%20-%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20dY%20-%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20const%20dLocal1X%20%3D%20(dX%20*%20xf1.R.col1.x%20%2B%20dY%20*%20xf1.R.col1.y)%3B%0A%20%20%20%20%20%20const%20dLocal1Y%20%3D%20(dX%20*%20xf1.R.col2.x%20%2B%20dY%20*%20xf1.R.col2.y)%3B%0A%20%20%20%20%20%20let%20edge%20%3D%200%3B%0A%20%20%20%20%20%20let%20maxDot%20%3D%20(-Number.MAX_VALUE)%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20count1%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals1%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20dot%20%3D%20(tVec.x%20*%20dLocal1X%20%2B%20tVec.y%20*%20dLocal1Y)%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3E%20maxDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20maxDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20s%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20edge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20const%20prevEdge%20%3D%20parseInt(edge%20-%201%20%3E%3D%200%20%3F%20edge%20-%201%20%3A%20count1%20-%201)%3B%0A%20%20%20%20%20%20const%20sPrev%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20prevEdge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20const%20nextEdge%20%3D%20parseInt(edge%20%2B%201%20%3C%20count1%20%3F%20edge%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20const%20sNext%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20nextEdge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20let%20bestEdge%20%3D%200%3B%0A%20%20%20%20%20%20let%20bestSeparation%20%3D%200%3B%0A%20%20%20%20%20%20let%20increment%20%3D%200%3B%0A%20%20%20%20%20%20if%20(sPrev%20%3E%20s%20%26%26%20sPrev%20%3E%20sNext)%20%7B%0A%20%20%20%20%20%20%20%20increment%20%3D%20(-1)%3B%0A%20%20%20%20%20%20%20%20bestEdge%20%3D%20prevEdge%3B%0A%20%20%20%20%20%20%20%20bestSeparation%20%3D%20sPrev%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(sNext%20%3E%20s)%20%7B%0A%20%20%20%20%20%20%20%20increment%20%3D%201%3B%0A%20%20%20%20%20%20%20%20bestEdge%20%3D%20nextEdge%3B%0A%20%20%20%20%20%20%20%20bestSeparation%20%3D%20sNext%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20edgeIndex%5B0%5D%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20(true)%20%7B%0A%20%20%20%20%20%20%20%20if%20(increment%20%3D%3D%20(-1))%20edge%20%3D%20bestEdge%20-%201%20%3E%3D%200%20%3F%20bestEdge%20-%201%20%3A%20count1%20-%201%3B%0A%20%20%20%20%20%20%20%20else%20edge%20%3D%20bestEdge%20%2B%201%20%3C%20count1%20%3F%20bestEdge%20%2B%201%20%3A%200%3B%20s%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20edge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20bestSeparation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20%20%20bestSeparation%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20edgeIndex%5B0%5D%20%3D%20bestEdge%3B%0A%20%20%20%20%20%20return%20bestSeparation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.FindIncidentEdge%20%3D%20(c%2C%20poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(edge1%20%3D%3D%3D%20undefined)%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20const%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20const%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20const%20count2%20%3D%20parseInt(poly2.m_vertexCount)%3B%0A%20%20%20%20%20%20const%20vertices2%20%3D%20poly2.m_vertices%3B%0A%20%20%20%20%20%20const%20normals2%20%3D%20poly2.m_normals%3B%0A%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20normals1%5Bedge1%5D%3B%0A%20%20%20%20%20%20let%20normal1X%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20let%20normal1Y%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20const%20tX%20%3D%20(tMat.col1.x%20*%20normal1X%20%2B%20tMat.col1.y%20*%20normal1Y)%3B%0A%20%20%20%20%20%20normal1Y%20%3D%20(tMat.col2.x%20*%20normal1X%20%2B%20tMat.col2.y%20*%20normal1Y)%3B%0A%20%20%20%20%20%20normal1X%20%3D%20tX%3B%0A%20%20%20%20%20%20let%20index%20%3D%200%3B%0A%20%20%20%20%20%20let%20minDot%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20count2%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20dot%20%3D%20(normal1X%20*%20tVec.x%20%2B%20normal1Y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3C%20minDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20tClip%3B%0A%20%20%20%20%20%20const%20i1%20%3D%20parseInt(index)%3B%0A%20%20%20%20%20%20const%20i2%20%3D%20parseInt(i1%20%2B%201%20%3C%20count2%20%3F%20i1%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20tClip%20%3D%20c%5B0%5D%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi1%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tClip.v.x%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.v.y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.id.features.referenceEdge%20%3D%20edge1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentEdge%20%3D%20i1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentVertex%20%3D%200%3B%0A%20%20%20%20%20%20tClip%20%3D%20c%5B1%5D%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi2%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tClip.v.x%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.v.y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.id.features.referenceEdge%20%3D%20edge1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentEdge%20%3D%20i2%3B%0A%20%20%20%20%20%20tClip.id.features.incidentVertex%20%3D%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.MakeClipPointVector%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20r%20%3D%20new%20Vector(2)%3B%0A%20%20%20%20%20%20r%5B0%5D%20%3D%20new%20ClipVertex()%3B%0A%20%20%20%20%20%20r%5B1%5D%20%3D%20new%20ClipVertex()%3B%0A%20%20%20%20%20%20return%20r%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollidePolygons%20%3D%20(manifold%2C%20polyA%2C%20xfA%2C%20polyB%2C%20xfB)%20%3D%3E%20%7B%0A%20%20%20%20%20%20let%20cv%3B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20const%20totalRadius%20%3D%20polyA.m_radius%20%2B%20polyB.m_radius%3B%0A%20%20%20%20%20%20let%20edgeA%20%3D%200%3B%0A%20%20%20%20%20%20b2Collision.s_edgeAO%5B0%5D%20%3D%20edgeA%3B%0A%20%20%20%20%20%20const%20separationA%20%3D%20b2Collision.FindMaxSeparation(b2Collision.s_edgeAO%2C%20polyA%2C%20xfA%2C%20polyB%2C%20xfB)%3B%0A%20%20%20%20%20%20edgeA%20%3D%20b2Collision.s_edgeAO%5B0%5D%3B%0A%20%20%20%20%20%20if%20(separationA%20%3E%20totalRadius)%20return%3B%0A%20%20%20%20%20%20let%20edgeB%20%3D%200%3B%0A%20%20%20%20%20%20b2Collision.s_edgeBO%5B0%5D%20%3D%20edgeB%3B%0A%20%20%20%20%20%20const%20separationB%20%3D%20b2Collision.FindMaxSeparation(b2Collision.s_edgeBO%2C%20polyB%2C%20xfB%2C%20polyA%2C%20xfA)%3B%0A%20%20%20%20%20%20edgeB%20%3D%20b2Collision.s_edgeBO%5B0%5D%3B%0A%20%20%20%20%20%20if%20(separationB%20%3E%20totalRadius)%20return%3B%0A%20%20%20%20%20%20let%20poly1%3B%0A%20%20%20%20%20%20let%20poly2%3B%0A%20%20%20%20%20%20let%20xf1%3B%0A%20%20%20%20%20%20let%20xf2%3B%0A%20%20%20%20%20%20let%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20let%20flip%20%3D%200%3B%0A%20%20%20%20%20%20const%20k_relativeTol%20%3D%200.98%3B%0A%20%20%20%20%20%20const%20k_absoluteTol%20%3D%200.001%3B%0A%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20if%20(separationB%20%3E%20k_relativeTol%20*%20separationA%20%2B%20k_absoluteTol)%20%7B%0A%20%20%20%20%20%20%20%20poly1%20%3D%20polyB%3B%0A%20%20%20%20%20%20%20%20poly2%20%3D%20polyA%3B%0A%20%20%20%20%20%20%20%20xf1%20%3D%20xfB%3B%0A%20%20%20%20%20%20%20%20xf2%20%3D%20xfA%3B%0A%20%20%20%20%20%20%20%20edge1%20%3D%20edgeB%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceB%3B%0A%20%20%20%20%20%20%20%20flip%20%3D%201%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20poly1%20%3D%20polyA%3B%0A%20%20%20%20%20%20%20%20poly2%20%3D%20polyB%3B%0A%20%20%20%20%20%20%20%20xf1%20%3D%20xfA%3B%0A%20%20%20%20%20%20%20%20xf2%20%3D%20xfB%3B%0A%20%20%20%20%20%20%20%20edge1%20%3D%20edgeA%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20flip%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20incidentEdge%20%3D%20b2Collision.s_incidentEdge%3B%0A%20%20%20%20%20%20b2Collision.FindIncidentEdge(incidentEdge%2C%20poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20const%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20const%20vertices1%20%3D%20poly1.m_vertices%3B%0A%20%20%20%20%20%20const%20local_v11%20%3D%20vertices1%5Bedge1%5D%3B%0A%20%20%20%20%20%20let%20local_v12%3B%0A%20%20%20%20%20%20if%20(edge1%20%2B%201%20%3C%20count1)%20%7B%0A%20%20%20%20%20%20%20%20local_v12%20%3D%20vertices1%5BparseInt(edge1%20%2B%201)%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20local_v12%20%3D%20vertices1%5B0%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20localTangent%20%3D%20b2Collision.s_localTangent%3B%0A%20%20%20%20%20%20localTangent.Set(local_v12.x%20-%20local_v11.x%2C%20local_v12.y%20-%20local_v11.y)%3B%0A%20%20%20%20%20%20localTangent.Normalize()%3B%0A%20%20%20%20%20%20const%20localNormal%20%3D%20b2Collision.s_localNormal%3B%0A%20%20%20%20%20%20localNormal.x%20%3D%20localTangent.y%3B%0A%20%20%20%20%20%20localNormal.y%20%3D%20(-localTangent.x)%3B%0A%20%20%20%20%20%20const%20planePoint%20%3D%20b2Collision.s_planePoint%3B%0A%20%20%20%20%20%20planePoint.Set(0.5%20*%20(local_v11.x%20%2B%20local_v12.x)%2C%200.5%20*%20(local_v11.y%20%2B%20local_v12.y))%3B%0A%20%20%20%20%20%20const%20tangent%20%3D%20b2Collision.s_tangent%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tangent.x%20%3D%20(tMat.col1.x%20*%20localTangent.x%20%2B%20tMat.col2.x%20*%20localTangent.y)%3B%0A%20%20%20%20%20%20tangent.y%20%3D%20(tMat.col1.y%20*%20localTangent.x%20%2B%20tMat.col2.y%20*%20localTangent.y)%3B%0A%20%20%20%20%20%20const%20tangent2%20%3D%20b2Collision.s_tangent2%3B%0A%20%20%20%20%20%20tangent2.x%20%3D%20(-tangent.x)%3B%0A%20%20%20%20%20%20tangent2.y%20%3D%20(-tangent.y)%3B%0A%20%20%20%20%20%20const%20normal%20%3D%20b2Collision.s_normal%3B%0A%20%20%20%20%20%20normal.x%20%3D%20tangent.y%3B%0A%20%20%20%20%20%20normal.y%20%3D%20(-tangent.x)%3B%0A%20%20%20%20%20%20const%20v11%20%3D%20b2Collision.s_v11%3B%0A%20%20%20%20%20%20const%20v12%20%3D%20b2Collision.s_v12%3B%0A%20%20%20%20%20%20v11.x%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20local_v11.x%20%2B%20tMat.col2.x%20*%20local_v11.y)%3B%0A%20%20%20%20%20%20v11.y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20local_v11.x%20%2B%20tMat.col2.y%20*%20local_v11.y)%3B%0A%20%20%20%20%20%20v12.x%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20local_v12.x%20%2B%20tMat.col2.x%20*%20local_v12.y)%3B%0A%20%20%20%20%20%20v12.y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20local_v12.x%20%2B%20tMat.col2.y%20*%20local_v12.y)%3B%0A%20%20%20%20%20%20const%20frontOffset%20%3D%20normal.x%20*%20v11.x%20%2B%20normal.y%20*%20v11.y%3B%0A%20%20%20%20%20%20const%20sideOffset1%20%3D%20(-tangent.x%20*%20v11.x)%20-%20tangent.y%20*%20v11.y%20%2B%20totalRadius%3B%0A%20%20%20%20%20%20const%20sideOffset2%20%3D%20tangent.x%20*%20v12.x%20%2B%20tangent.y%20*%20v12.y%20%2B%20totalRadius%3B%0A%20%20%20%20%20%20const%20clipPoints1%20%3D%20b2Collision.s_clipPoints1%3B%0A%20%20%20%20%20%20const%20clipPoints2%20%3D%20b2Collision.s_clipPoints2%3B%0A%20%20%20%20%20%20let%20np%20%3D%200%3B%0A%20%20%20%20%20%20np%20%3D%20b2Collision.ClipSegmentToLine(clipPoints1%2C%20incidentEdge%2C%20tangent2%2C%20sideOffset1)%3B%0A%20%20%20%20%20%20if%20(np%20%3C%202)%20return%3B%0A%20%20%20%20%20%20np%20%3D%20b2Collision.ClipSegmentToLine(clipPoints2%2C%20clipPoints1%2C%20tangent%2C%20sideOffset2)%3B%0A%20%20%20%20%20%20if%20(np%20%3C%202)%20return%3B%0A%20%20%20%20%20%20manifold.m_localPlaneNormal.SetV(localNormal)%3B%0A%20%20%20%20%20%20manifold.m_localPoint.SetV(planePoint)%3B%0A%20%20%20%20%20%20let%20pointCount%20%3D%200%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20cv%20%3D%20clipPoints2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20separation%20%3D%20normal.x%20*%20cv.v.x%20%2B%20normal.y%20*%20cv.v.y%20-%20frontOffset%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3C%3D%20totalRadius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20cp%20%3D%20manifold.m_points%5BpointCount%5D%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tX%20%3D%20cv.v.x%20-%20xf2.position.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tY%20%3D%20cv.v.y%20-%20xf2.position.y%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_localPoint.x%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_localPoint.y%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_id.Set(cv.id)%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_id.features.flip%20%3D%20flip%3B%0A%20%20%20%20%20%20%20%20%20%20%2B%2BpointCount%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%20pointCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollideCircles%20%3D%20(manifold%2C%20circle1%2C%20xf1%2C%20circle2%2C%20xf2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle1.m_p%3B%0A%20%20%20%20%20%20const%20p1X%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20const%20p1Y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle2.m_p%3B%0A%20%20%20%20%20%20const%20p2X%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20const%20p2Y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20const%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20const%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20const%20distSqr%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20const%20radius%20%3D%20circle1.m_radius%20%2B%20circle2.m_radius%3B%0A%20%20%20%20%20%20if%20(distSqr%20%3E%20radius%20*%20radius)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_circles%3B%0A%20%20%20%20%20%20manifold.m_localPoint.SetV(circle1.m_p)%3B%0A%20%20%20%20%20%20manifold.m_localPlaneNormal.SetZero()%3B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle2.m_p)%3B%0A%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollidePolygonAndCircle%20%3D%20(manifold%2C%20polygon%2C%20xf1%2C%20circle%2C%20xf2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20let%20tPoint%3B%0A%20%20%20%20%20%20let%20dX%20%3D%200%3B%0A%20%20%20%20%20%20let%20dY%20%3D%200%3B%0A%20%20%20%20%20%20const%20positionX%20%3D%200%3B%0A%20%20%20%20%20%20const%20positionY%20%3D%200%3B%0A%20%20%20%20%20%20let%20tVec%3B%0A%20%20%20%20%20%20let%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle.m_p%3B%0A%20%20%20%20%20%20const%20cX%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20const%20cY%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20dX%20%3D%20cX%20-%20xf1.position.x%3B%0A%20%20%20%20%20%20dY%20%3D%20cY%20-%20xf1.position.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20const%20cLocalX%20%3D%20(dX%20*%20tMat.col1.x%20%2B%20dY%20*%20tMat.col1.y)%3B%0A%20%20%20%20%20%20const%20cLocalY%20%3D%20(dX%20*%20tMat.col2.x%20%2B%20dY%20*%20tMat.col2.y)%3B%0A%20%20%20%20%20%20const%20dist%20%3D%200%3B%0A%20%20%20%20%20%20let%20normalIndex%20%3D%200%3B%0A%20%20%20%20%20%20let%20separation%20%3D%20(-Number.MAX_VALUE)%3B%0A%20%20%20%20%20%20const%20radius%20%3D%20polygon.m_radius%20%2B%20circle.m_radius%3B%0A%20%20%20%20%20%20const%20vertexCount%20%3D%20parseInt(polygon.m_vertexCount)%3B%0A%20%20%20%20%20%20const%20vertices%20%3D%20polygon.m_vertices%3B%0A%20%20%20%20%20%20const%20normals%20%3D%20polygon.m_normals%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20dX%20%3D%20cLocalX%20-%20tVec.x%3B%0A%20%20%20%20%20%20%20%20dY%20%3D%20cLocalY%20-%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%20tVec.x%20*%20dX%20%2B%20tVec.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20radius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20separation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20separation%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20normalIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20vertIndex1%20%3D%20parseInt(normalIndex)%3B%0A%20%20%20%20%20%20const%20vertIndex2%20%3D%20parseInt(vertIndex1%20%2B%201%20%3C%20vertexCount%20%3F%20vertIndex1%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20const%20v1%20%3D%20vertices%5BvertIndex1%5D%3B%0A%20%20%20%20%20%20const%20v2%20%3D%20vertices%5BvertIndex2%5D%3B%0A%20%20%20%20%20%20if%20(separation%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.SetV(normals%5BnormalIndex%5D)%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.x%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.y%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20u1%20%3D%20(cLocalX%20-%20v1.x)%20*%20(v2.x%20-%20v1.x)%20%2B%20(cLocalY%20-%20v1.y)%20*%20(v2.y%20-%20v1.y)%3B%0A%20%20%20%20%20%20const%20u2%20%3D%20(cLocalX%20-%20v2.x)%20*%20(v1.x%20-%20v2.x)%20%2B%20(cLocalY%20-%20v2.y)%20*%20(v1.y%20-%20v2.y)%3B%0A%20%20%20%20%20%20if%20(u1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20if%20((cLocalX%20-%20v1.x)%20*%20(cLocalX%20-%20v1.x)%20%2B%20(cLocalY%20-%20v1.y)%20*%20(cLocalY%20-%20v1.y)%20%3E%20radius%20*%20radius)%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20cLocalX%20-%20v1.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20cLocalY%20-%20v1.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.SetV(v1)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(u2%20%3C%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20((cLocalX%20-%20v2.x)%20*%20(cLocalX%20-%20v2.x)%20%2B%20(cLocalY%20-%20v2.y)%20*%20(cLocalY%20-%20v2.y)%20%3E%20radius%20*%20radius)%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20cLocalX%20-%20v2.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20cLocalY%20-%20v2.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.SetV(v2)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20faceCenterX%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20%20%20const%20faceCenterY%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20%20%20separation%20%3D%20(cLocalX%20-%20faceCenterX)%20*%20normals%5BvertIndex1%5D.x%20%2B%20(cLocalY%20-%20faceCenterY)%20*%20normals%5BvertIndex1%5D.y%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3E%20radius)%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20normals%5BvertIndex1%5D.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20normals%5BvertIndex1%5D.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.Set(faceCenterX%2C%20faceCenterY)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.TestOverlap%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20let%20t1%20%3D%20b.lowerBound%3B%0A%20%20%20%20%20%20let%20t2%20%3D%20a.upperBound%3B%0A%20%20%20%20%20%20const%20d1X%20%3D%20t1.x%20-%20t2.x%3B%0A%20%20%20%20%20%20const%20d1Y%20%3D%20t1.y%20-%20t2.y%3B%0A%20%20%20%20%20%20t1%20%3D%20a.lowerBound%3B%0A%20%20%20%20%20%20t2%20%3D%20b.upperBound%3B%0A%20%20%20%20%20%20const%20d2X%20%3D%20t1.x%20-%20t2.x%3B%0A%20%20%20%20%20%20const%20d2Y%20%3D%20t1.y%20-%20t2.y%3B%0A%20%20%20%20%20%20if%20(d1X%20%3E%200.0%20%7C%7C%20d1Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20if%20(d2X%20%3E%200.0%20%7C%7C%20d2Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_incidentEdge%20%3D%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_clipPoints1%20%3D%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_clipPoints2%20%3D%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_edgeAO%20%3D%20new%20Vector_a2j_Number(1)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_edgeBO%20%3D%20new%20Vector_a2j_Number(1)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_localTangent%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_localNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_planePoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_tangent%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_tangent2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_v11%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_v12%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.b2CollidePolyTempVec%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.b2_nullFeature%20%3D%200x000000ff%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Distance.b2Distance%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2Distance.Distance%20%3D%20(output%2C%20cache%2C%20input)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2B%2Bb2Distance.b2_gjkCalls%3B%0A%20%20%20%20%20%20const%20proxyA%20%3D%20input.proxyA%3B%0A%20%20%20%20%20%20const%20proxyB%20%3D%20input.proxyB%3B%0A%20%20%20%20%20%20const%20transformA%20%3D%20input.transformA%3B%0A%20%20%20%20%20%20const%20transformB%20%3D%20input.transformB%3B%0A%20%20%20%20%20%20const%20simplex%20%3D%20b2Distance.s_simplex%3B%0A%20%20%20%20%20%20simplex.ReadCache(cache%2C%20proxyA%2C%20transformA%2C%20proxyB%2C%20transformB)%3B%0A%20%20%20%20%20%20const%20vertices%20%3D%20simplex.m_vertices%3B%0A%20%20%20%20%20%20const%20k_maxIters%20%3D%2020%3B%0A%20%20%20%20%20%20const%20saveA%20%3D%20b2Distance.s_saveA%3B%0A%20%20%20%20%20%20const%20saveB%20%3D%20b2Distance.s_saveB%3B%0A%20%20%20%20%20%20let%20saveCount%20%3D%200%3B%0A%20%20%20%20%20%20const%20closestPoint%20%3D%20simplex.GetClosestPoint()%3B%0A%20%20%20%20%20%20let%20distanceSqr1%20%3D%20closestPoint.LengthSquared()%3B%0A%20%20%20%20%20%20let%20distanceSqr2%20%3D%20distanceSqr1%3B%0A%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20let%20p%3B%0A%20%20%20%20%20%20let%20iter%20%3D%200%3B%0A%20%20%20%20%20%20while%20(iter%20%3C%20k_maxIters)%20%7B%0A%20%20%20%20%20%20%20%20saveCount%20%3D%20simplex.m_count%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20saveCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20saveA%5Bi%5D%20%3D%20vertices%5Bi%5D.indexA%3B%0A%20%20%20%20%20%20%20%20%20%20saveB%5Bi%5D%20%3D%20vertices%5Bi%5D.indexB%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20switch%20(simplex.m_count)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20simplex.Solve2()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20simplex.Solve3()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(simplex.m_count%20%3D%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20p%20%3D%20simplex.GetClosestPoint()%3B%0A%20%20%20%20%20%20%20%20distanceSqr2%20%3D%20p.LengthSquared()%3B%0A%20%20%20%20%20%20%20%20if%20(distanceSqr2%20%3E%20distanceSqr1)%20%7B%20%7D%0A%20%20%20%20%20%20%20%20distanceSqr1%20%3D%20distanceSqr2%3B%0A%20%20%20%20%20%20%20%20const%20d%20%3D%20simplex.GetSearchDirection()%3B%0A%20%20%20%20%20%20%20%20if%20(d.LengthSquared()%20%3C%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20vertex%20%3D%20vertices%5Bsimplex.m_count%5D%3B%0A%20%20%20%20%20%20%20%20vertex.indexA%20%3D%20proxyA.GetSupport(b2Math.MulTMV(transformA.R%2C%20d.GetNegative()))%3B%0A%20%20%20%20%20%20%20%20vertex.wA%20%3D%20b2Math.MulX(transformA%2C%20proxyA.GetVertex(vertex.indexA))%3B%0A%20%20%20%20%20%20%20%20vertex.indexB%20%3D%20proxyB.GetSupport(b2Math.MulTMV(transformB.R%2C%20d))%3B%0A%20%20%20%20%20%20%20%20vertex.wB%20%3D%20b2Math.MulX(transformB%2C%20proxyB.GetVertex(vertex.indexB))%3B%0A%20%20%20%20%20%20%20%20vertex.w%20%3D%20b2Math.SubtractVV(vertex.wB%2C%20vertex.wA)%3B%0A%20%20%20%20%20%20%20%20%2B%2Biter%3B%0A%20%20%20%20%20%20%20%20%2B%2Bb2Distance.b2_gjkIters%3B%0A%20%20%20%20%20%20%20%20let%20duplicate%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20i%20%3C%20saveCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(vertex.indexA%20%3D%3D%20saveA%5Bi%5D%20%26%26%20vertex.indexB%20%3D%3D%20saveB%5Bi%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20duplicate%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(duplicate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%20%2B%2Bsimplex.m_count%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b2Distance.b2_gjkMaxIters%20%3D%20b2Math.Max(b2Distance.b2_gjkMaxIters%2C%20iter)%3B%0A%20%20%20%20%20%20simplex.GetWitnessPoints(output.pointA%2C%20output.pointB)%3B%0A%20%20%20%20%20%20output.distance%20%3D%20b2Math.SubtractVV(output.pointA%2C%20output.pointB).Length()%3B%0A%20%20%20%20%20%20output.iterations%20%3D%20iter%3B%0A%20%20%20%20%20%20simplex.WriteCache(cache)%3B%0A%20%20%20%20%20%20if%20(input.useRadii)%20%7B%0A%20%20%20%20%20%20%20%20const%20rA%20%3D%20proxyA.m_radius%3B%0A%20%20%20%20%20%20%20%20const%20rB%20%3D%20proxyB.m_radius%3B%0A%20%20%20%20%20%20%20%20if%20(output.distance%20%3E%20rA%20%2B%20rB%20%26%26%20output.distance%20%3E%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20output.distance%20-%3D%20rA%20%2B%20rB%3B%0A%20%20%20%20%20%20%20%20%20%20const%20normal%20%3D%20b2Math.SubtractVV(output.pointB%2C%20output.pointA)%3B%0A%20%20%20%20%20%20%20%20%20%20normal.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.x%20%2B%3D%20rA%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.y%20%2B%3D%20rA%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointB.x%20-%3D%20rB%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointB.y%20-%3D%20rB%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20p.x%20%3D%200.5%20*%20(output.pointA.x%20%2B%20output.pointB.x)%3B%0A%20%20%20%20%20%20%20%20%20%20p.y%20%3D%200.5%20*%20(output.pointA.y%20%2B%20output.pointB.y)%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.x%20%3D%20output.pointB.x%20%3D%20p.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.y%20%3D%20output.pointB.y%20%3D%20p.y%3B%0A%20%20%20%20%20%20%20%20%20%20output.distance%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_simplex%20%3D%20new%20b2Simplex()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_saveA%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_saveB%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DistanceInput.b2DistanceInput%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2DistanceProxy.b2DistanceProxy%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2DynamicTree.b2DynamicTree%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.__implements%20%3D%20%7B%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.__implements%5BIBroadPhase%5D%20%3D%20true%3B%0A%20%20%20%20b2DynamicTreePair.b2DynamicTreePair%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_circles%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_faceA%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_faceB%20%3D%200x0004%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_points%20%3D%200x01%3B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_faceA%20%3D%200x02%3B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_faceB%20%3D%200x04%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2SimplexVertex.b2SimplexVertex%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2TimeOfImpact.b2TimeOfImpact%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2TimeOfImpact.TimeOfImpact%20%3D%20input%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiCalls%3B%0A%20%20%20%20%20%20const%20proxyA%20%3D%20input.proxyA%3B%0A%20%20%20%20%20%20const%20proxyB%20%3D%20input.proxyB%3B%0A%20%20%20%20%20%20const%20sweepA%20%3D%20input.sweepA%3B%0A%20%20%20%20%20%20const%20sweepB%20%3D%20input.sweepB%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(sweepA.t0%20%3D%3D%20sweepB.t0)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(1.0%20-%20sweepA.t0%20%3E%20Number.MIN_VALUE)%3B%0A%20%20%20%20%20%20const%20radius%20%3D%20proxyA.m_radius%20%2B%20proxyB.m_radius%3B%0A%20%20%20%20%20%20const%20tolerance%20%3D%20input.tolerance%3B%0A%20%20%20%20%20%20let%20alpha%20%3D%200.0%3B%0A%20%20%20%20%20%20const%20k_maxIterations%20%3D%201000%3B%0A%20%20%20%20%20%20let%20iter%20%3D%200%3B%0A%20%20%20%20%20%20let%20target%20%3D%200.0%3B%0A%20%20%20%20%20%20b2TimeOfImpact.s_cache.count%20%3D%200%3B%0A%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.useRadii%20%3D%20false%3B%0A%20%20%20%20%20%20for%20(%3B%20%3B)%20%7B%0A%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20alpha)%3B%0A%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20alpha)%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.proxyA%20%3D%20proxyA%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.proxyB%20%3D%20proxyB%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.transformA%20%3D%20b2TimeOfImpact.s_xfA%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.transformB%20%3D%20b2TimeOfImpact.s_xfB%3B%0A%20%20%20%20%20%20%20%20b2Distance.Distance(b2TimeOfImpact.s_distanceOutput%2C%20b2TimeOfImpact.s_cache%2C%20b2TimeOfImpact.s_distanceInput)%3B%0A%20%20%20%20%20%20%20%20if%20(b2TimeOfImpact.s_distanceOutput.distance%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_fcn.Initialize(b2TimeOfImpact.s_cache%2C%20proxyA%2C%20b2TimeOfImpact.s_xfA%2C%20proxyB%2C%20b2TimeOfImpact.s_xfB)%3B%0A%20%20%20%20%20%20%20%20const%20separation%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA%2C%20b2TimeOfImpact.s_xfB)%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(separation%20%3E%20radius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20b2Math.Max(radius%20-%20tolerance%2C%200.75%20*%20radius)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20b2Math.Max(separation%20-%20tolerance%2C%200.02%20*%20radius)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(separation%20-%20target%20%3C%200.5%20*%20tolerance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20newAlpha%20%3D%20alpha%3B%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20x1%20%3D%20alpha%3B%0A%20%20%20%20%20%20%20%20%20%20let%20x2%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20let%20f1%20%3D%20separation%3B%0A%20%20%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20f2%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA%2C%20b2TimeOfImpact.s_xfB)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(f2%20%3E%3D%20target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20let%20rootIterCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(%3B%20%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(rootIterCount%20%26%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20x1%20%2B%20(target%20-%20f1)%20*%20(x2%20-%20x1)%20%2F%20(f2%20-%20f1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%200.5%20*%20(x1%20%2B%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20f%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA%2C%20b2TimeOfImpact.s_xfB)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b2Math.Abs(f%20-%20target)%20%3C%200.025%20*%20tolerance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newAlpha%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(f%20%3E%20target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f1%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f2%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%2B%2BrootIterCount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiRootIters%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(rootIterCount%20%3D%3D%2050)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxRootIters%20%3D%20b2Math.Max(b2TimeOfImpact.b2_toiMaxRootIters%2C%20rootIterCount)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(newAlpha%20%3C%20(1.0%20%2B%20100.0%20*%20Number.MIN_VALUE)%20*%20alpha)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20alpha%20%3D%20newAlpha%3B%0A%20%20%20%20%20%20%20%20iter%2B%2B%3B%0A%20%20%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiIters%3B%0A%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%20k_maxIterations)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxIters%20%3D%20b2Math.Max(b2TimeOfImpact.b2_toiMaxIters%2C%20iter)%3B%0A%20%20%20%20%20%20return%20alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiCalls%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiRootIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_cache%20%3D%20new%20b2SimplexCache()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_distanceInput%20%3D%20new%20b2DistanceInput()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_xfA%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_xfB%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_fcn%20%3D%20new%20b2SeparationFunction()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_distanceOutput%20%3D%20new%20b2DistanceOutput()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Features.Features%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%7D))()%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%20%20%20%20const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%20%20%20%20const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%20%20%20%20const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%20%20%20%20const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%20%20%20%20const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%20%20%20%20const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%20%20%20%20const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%20%20%20%20const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%20%20%20%20const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%20%20%20%20const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%20%20%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%20%20%20%20const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%20%20%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%20%20%20%20const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%20%20%20%20const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%20%20%20%20const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%20%20%20%20const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%20%20%20%20const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%20%20%20%20const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%20%20%20%20const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%20%20const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%20%20%20%20const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%20%20%20%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20%20%20const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%20%20%20%20const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%20%20%20%20const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%20%20%20%20const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%20%20%20%20const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%20%20%20%20const%20b2Bound%20%3D%20Box2D.Collision.b2Bound%3B%0A%20%20%20%20const%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%3B%0A%20%20%20%20const%20b2Collision%20%3D%20Box2D.Collision.b2Collision%3B%0A%20%20%20%20const%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%3B%0A%20%20%20%20const%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%3B%0A%20%20%20%20const%20b2Distance%20%3D%20Box2D.Collision.b2Distance%3B%0A%20%20%20%20const%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%3B%0A%20%20%20%20const%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%3B%0A%20%20%20%20const%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%3B%0A%20%20%20%20const%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%3B%0A%20%20%20%20const%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%3B%0A%20%20%20%20const%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%3B%0A%20%20%20%20const%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%3B%0A%20%20%20%20const%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%3B%0A%20%20%20%20const%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%3B%0A%20%20%20%20const%20b2Point%20%3D%20Box2D.Collision.b2Point%3B%0A%20%20%20%20const%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%3B%0A%20%20%20%20const%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%3B%0A%20%20%20%20const%20b2Segment%20%3D%20Box2D.Collision.b2Segment%3B%0A%20%20%20%20const%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%3B%0A%20%20%20%20const%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%3B%0A%20%20%20%20const%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%3B%0A%20%20%20%20const%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%3B%0A%20%20%20%20const%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%3B%0A%20%20%20%20const%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%3B%0A%20%20%20%20const%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%3B%0A%20%20%20%20const%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%3B%0A%20%20%20%20const%20Features%20%3D%20Box2D.Collision.Features%3B%0A%20%20%20%20const%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20b2CircleShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2EdgeChainDef.b2EdgeChainDef%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2PolygonShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2PolygonShape.AsArray%20%3D%20(vertices%2C%20vertexCount)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsArray(vertices%2C%20vertexCount)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsVector%20%3D%20(vertices%2C%20vertexCount)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsVector(vertices%2C%20vertexCount)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsBox%20%3D%20(hx%2C%20hy)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsBox(hx%2C%20hy)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsOrientedBox%20%3D%20(hx%2C%20hy%2C%20center%2C%20angle)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20if%20(center%20%3D%3D%3D%20undefined)%20center%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200.0%3B%0A%20%20%20%20%20%20const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsOrientedBox(hx%2C%20hy%2C%20center%2C%20angle)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsEdge%20%3D%20(v1%2C%20v2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsEdge(v1%2C%20v2)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.ComputeCentroid%20%3D%20(vs%2C%20count)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20const%20c%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20let%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20const%20p1X%20%3D%200.0%3B%0A%20%20%20%20%20%20const%20p1Y%20%3D%200.0%3B%0A%20%20%20%20%20%20const%20inv3%20%3D%201.0%20%2F%203.0%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20const%20p2%20%3D%20vs%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20p3%20%3D%20i%20%2B%201%20%3C%20count%20%3F%20vs%5BparseInt(i%20%2B%201)%5D%20%3A%20vs%5B0%5D%3B%0A%20%20%20%20%20%20%20%20const%20e1X%20%3D%20p2.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20const%20e1Y%20%3D%20p2.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20const%20e2X%20%3D%20p3.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20const%20e2Y%20%3D%20p3.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20const%20D%20%3D%20(e1X%20*%20e2Y%20-%20e1Y%20*%20e2X)%3B%0A%20%20%20%20%20%20%20%20const%20triangleArea%20%3D%200.5%20*%20D%3B%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20c.x%20%2B%3D%20triangleArea%20*%20inv3%20*%20(p1X%20%2B%20p2.x%20%2B%20p3.x)%3B%0A%20%20%20%20%20%20%20%20c.y%20%2B%3D%20triangleArea%20*%20inv3%20*%20(p1Y%20%2B%20p2.y%20%2B%20p3.y)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20c.x%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20c.y%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.ComputeOBB%20%3D%20(obb%2C%20vs%2C%20count)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20const%20p%20%3D%20new%20Vector(count%20%2B%201)%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20i%20%3C%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20p%5Bi%5D%20%3D%20vs%5Bi%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20p%5Bcount%5D%20%3D%20p%5B0%5D%3B%0A%20%20%20%20%20%20let%20minArea%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(i%20%3D%201%3B%0A%20%20%20%20%20%20%20%20i%20%3C%3D%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20const%20root%20%3D%20p%5BparseInt(i%20-%201)%5D%3B%0A%20%20%20%20%20%20%20%20let%20uxX%20%3D%20p%5Bi%5D.x%20-%20root.x%3B%0A%20%20%20%20%20%20%20%20let%20uxY%20%3D%20p%5Bi%5D.y%20-%20root.y%3B%0A%20%20%20%20%20%20%20%20const%20length%20%3D%20Math.sqrt(uxX%20*%20uxX%20%2B%20uxY%20*%20uxY)%3B%0A%20%20%20%20%20%20%20%20uxX%20%2F%3D%20length%3B%0A%20%20%20%20%20%20%20%20uxY%20%2F%3D%20length%3B%0A%20%20%20%20%20%20%20%20const%20uyX%20%3D%20(-uxY)%3B%0A%20%20%20%20%20%20%20%20const%20uyY%20%3D%20uxX%3B%0A%20%20%20%20%20%20%20%20let%20lowerX%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20let%20lowerY%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20let%20upperX%20%3D%20(-Number.MAX_VALUE)%3B%0A%20%20%20%20%20%20%20%20let%20upperY%20%3D%20(-Number.MAX_VALUE)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20count%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20dX%20%3D%20p%5Bj%5D.x%20-%20root.x%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dY%20%3D%20p%5Bj%5D.y%20-%20root.y%3B%0A%20%20%20%20%20%20%20%20%20%20const%20rX%20%3D%20(uxX%20*%20dX%20%2B%20uxY%20*%20dY)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20rY%20%3D%20(uyX%20*%20dX%20%2B%20uyY%20*%20dY)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rX%20%3C%20lowerX)%20lowerX%20%3D%20rX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rY%20%3C%20lowerY)%20lowerY%20%3D%20rY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rX%20%3E%20upperX)%20upperX%20%3D%20rX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rY%20%3E%20upperY)%20upperY%20%3D%20rY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20area%20%3D%20(upperX%20-%20lowerX)%20*%20(upperY%20-%20lowerY)%3B%0A%20%20%20%20%20%20%20%20if%20(area%20%3C%200.95%20*%20minArea)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minArea%20%3D%20area%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col1.x%20%3D%20uxX%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col1.y%20%3D%20uxY%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col2.x%20%3D%20uyX%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col2.y%20%3D%20uyY%3B%0A%20%20%20%20%20%20%20%20%20%20const%20centerX%20%3D%200.5%20*%20(lowerX%20%2B%20upperX)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20centerY%20%3D%200.5%20*%20(lowerY%20%2B%20upperY)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tMat%20%3D%20obb.R%3B%0A%20%20%20%20%20%20%20%20%20%20obb.center.x%20%3D%20root.x%20%2B%20(tMat.col1.x%20*%20centerX%20%2B%20tMat.col2.x%20*%20centerY)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.center.y%20%3D%20root.y%20%2B%20(tMat.col1.y%20*%20centerX%20%2B%20tMat.col2.y%20*%20centerY)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.extents.x%20%3D%200.5%20*%20(upperX%20-%20lowerX)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.extents.y%20%3D%200.5%20*%20(upperY%20-%20lowerY)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2PolygonShape.s_mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Shape.b2Shape%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2Shape.TestOverlap%20%3D%20(shape1%2C%20transform1%2C%20shape2%2C%20transform2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20input%20%3D%20new%20b2DistanceInput()%3B%0A%20%20%20%20%20%20input.proxyA%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20input.proxyA.Set(shape1)%3B%0A%20%20%20%20%20%20input.proxyB%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20input.proxyB.Set(shape2)%3B%0A%20%20%20%20%20%20input.transformA%20%3D%20transform1%3B%0A%20%20%20%20%20%20input.transformB%20%3D%20transform2%3B%0A%20%20%20%20%20%20input.useRadii%20%3D%20true%3B%0A%20%20%20%20%20%20const%20simplexCache%20%3D%20new%20b2SimplexCache()%3B%0A%20%20%20%20%20%20simplexCache.count%20%3D%200%3B%0A%20%20%20%20%20%20const%20output%20%3D%20new%20b2DistanceOutput()%3B%0A%20%20%20%20%20%20b2Distance.Distance(output%2C%20simplexCache%2C%20input)%3B%0A%20%20%20%20%20%20return%20output.distance%20%3C%2010.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_unknownShape%20%3D%20parseInt((-1))%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_circleShape%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_polygonShape%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_edgeShape%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount%20%3D%203%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_hitCollide%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_missCollide%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide%20%3D%20parseInt((-1))%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D))()%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%20%20%20%20const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%20%20%20%20const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%20%20%20%20const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%20%20%20%20const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%20%20%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%20%20%20%20const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%20%20%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%0A%20%20%20%20b2Settings.b2Settings%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2Settings.b2MixFriction%20%3D%20(friction1%2C%20friction2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(friction1%20%3D%3D%3D%20undefined)%20friction1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(friction2%20%3D%3D%3D%20undefined)%20friction2%20%3D%200%3B%0A%20%20%20%20%20%20return%20Math.sqrt(friction1%20*%20friction2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Settings.b2MixRestitution%20%3D%20(restitution1%2C%20restitution2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(restitution1%20%3D%3D%3D%20undefined)%20restitution1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(restitution2%20%3D%3D%3D%20undefined)%20restitution2%20%3D%200%3B%0A%20%20%20%20%20%20return%20restitution1%20%3E%20restitution2%20%3F%20restitution1%20%3A%20restitution2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Settings.b2Assert%20%3D%20a%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(!a)%20%7B%0A%20%20%20%20%20%20%20%20throw%20'Assertion%20Failed'%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.VERSION%20%3D%20'2.1alpha'%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.USHRT_MAX%20%3D%200x0000ffff%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_pi%20%3D%20Math.PI%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxManifoldPoints%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_aabbExtension%20%3D%200.1%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_aabbMultiplier%20%3D%202.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_polygonRadius%20%3D%202.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_linearSlop%20%3D%200.005%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_angularSlop%20%3D%202.0%20%2F%20180.0%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_toiSlop%20%3D%208.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland%20%3D%2032%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland%20%3D%2032%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_velocityThreshold%20%3D%201.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxLinearCorrection%20%3D%200.2%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxAngularCorrection%20%3D%208.0%20%2F%20180.0%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTranslation%20%3D%202.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTranslationSquared%20%3D%20b2Settings.b2_maxTranslation%20*%20b2Settings.b2_maxTranslation%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxRotation%20%3D%200.5%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxRotationSquared%20%3D%20b2Settings.b2_maxRotation%20*%20b2Settings.b2_maxRotation%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_contactBaumgarte%20%3D%200.2%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_timeToSleep%20%3D%200.5%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_linearSleepTolerance%20%3D%200.01%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_angularSleepTolerance%20%3D%202.0%20%2F%20180.0%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D))()%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%20%20%20%20const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%20%20%20%20const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%20%20%20%20const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%20%20%20%20const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%20%20%20%20const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%20%20%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%20%20%20%20const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%20%20%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%0A%20%20%20%20b2Mat22.FromAngle%20%3D%20angle%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20const%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20mat.Set(angle)%3B%0A%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.FromVV%20%3D%20(c1%2C%20c2)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20mat.SetVV(c1%2C%20c2)%3B%0A%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.b2Math%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2Math.IsValid%20%3D%20x%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20return%20isFinite(x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Dot%20%3D%20(a%2C%20b)%20%3D%3E%20a.x%20*%20b.x%20%2B%20a.y%20*%20b.y%3B%0A%20%20%20%20b2Math.CrossVV%20%3D%20(a%2C%20b)%20%3D%3E%20a.x%20*%20b.y%20-%20a.y%20*%20b.x%3B%0A%20%20%20%20b2Math.CrossVF%20%3D%20(a%2C%20s)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20const%20v%20%3D%20new%20b2Vec2(s%20*%20a.y%2C%20(-s%20*%20a.x))%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.CrossFV%20%3D%20(s%2C%20a)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20const%20v%20%3D%20new%20b2Vec2((-s%20*%20a.y)%2C%20s%20*%20a.x)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulMV%20%3D%20(A%2C%20v)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20u%20%3D%20new%20b2Vec2(A.col1.x%20*%20v.x%20%2B%20A.col2.x%20*%20v.y%2C%20A.col1.y%20*%20v.x%20%2B%20A.col2.y%20*%20v.y)%3B%0A%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulTMV%20%3D%20(A%2C%20v)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20u%20%3D%20new%20b2Vec2(b2Math.Dot(v%2C%20A.col1)%2C%20b2Math.Dot(v%2C%20A.col2))%3B%0A%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulX%20%3D%20(T%2C%20v)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20a%20%3D%20b2Math.MulMV(T.R%2C%20v)%3B%0A%20%20%20%20%20%20a.x%20%2B%3D%20T.position.x%3B%0A%20%20%20%20%20%20a.y%20%2B%3D%20T.position.y%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulXT%20%3D%20(T%2C%20v)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20a%20%3D%20b2Math.SubtractVV(v%2C%20T.position)%3B%0A%20%20%20%20%20%20const%20tX%20%3D%20(a.x%20*%20T.R.col1.x%20%2B%20a.y%20*%20T.R.col1.y)%3B%0A%20%20%20%20%20%20a.y%20%3D%20(a.x%20*%20T.R.col2.x%20%2B%20a.y%20*%20T.R.col2.y)%3B%0A%20%20%20%20%20%20a.x%20%3D%20tX%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AddVV%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20v%20%3D%20new%20b2Vec2(a.x%20%2B%20b.x%2C%20a.y%20%2B%20b.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.SubtractVV%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20v%20%3D%20new%20b2Vec2(a.x%20-%20b.x%2C%20a.y%20-%20b.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Distance%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20cX%20%3D%20a.x%20-%20b.x%3B%0A%20%20%20%20%20%20const%20cY%20%3D%20a.y%20-%20b.y%3B%0A%20%20%20%20%20%20return%20Math.sqrt(cX%20*%20cX%20%2B%20cY%20*%20cY)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.DistanceSquared%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20cX%20%3D%20a.x%20-%20b.x%3B%0A%20%20%20%20%20%20const%20cY%20%3D%20a.y%20-%20b.y%3B%0A%20%20%20%20%20%20return%20(cX%20*%20cX%20%2B%20cY%20*%20cY)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulFV%20%3D%20(s%2C%20a)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20const%20v%20%3D%20new%20b2Vec2(s%20*%20a.x%2C%20s%20*%20a.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AddMM%20%3D%20(A%2C%20B)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20C%20%3D%20b2Mat22.FromVV(b2Math.AddVV(A.col1%2C%20B.col1)%2C%20b2Math.AddVV(A.col2%2C%20B.col2))%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulMM%20%3D%20(A%2C%20B)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20C%20%3D%20b2Mat22.FromVV(b2Math.MulMV(A%2C%20B.col1)%2C%20b2Math.MulMV(A%2C%20B.col2))%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulTMM%20%3D%20(A%2C%20B)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20c1%20%3D%20new%20b2Vec2(b2Math.Dot(A.col1%2C%20B.col1)%2C%20b2Math.Dot(A.col2%2C%20B.col1))%3B%0A%20%20%20%20%20%20const%20c2%20%3D%20new%20b2Vec2(b2Math.Dot(A.col1%2C%20B.col2)%2C%20b2Math.Dot(A.col2%2C%20B.col2))%3B%0A%20%20%20%20%20%20const%20C%20%3D%20b2Mat22.FromVV(c1%2C%20c2)%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Abs%20%3D%20a%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3E%200.0%20%3F%20a%20%3A%20(-a)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AbsV%20%3D%20a%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20b%20%3D%20new%20b2Vec2(b2Math.Abs(a.x)%2C%20b2Math.Abs(a.y))%3B%0A%20%20%20%20%20%20return%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AbsM%20%3D%20A%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20B%20%3D%20b2Mat22.FromVV(b2Math.AbsV(A.col1)%2C%20b2Math.AbsV(A.col2))%3B%0A%20%20%20%20%20%20return%20B%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Min%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(b%20%3D%3D%3D%20undefined)%20b%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3C%20b%20%3F%20a%20%3A%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MinV%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20c%20%3D%20new%20b2Vec2(b2Math.Min(a.x%2C%20b.x)%2C%20b2Math.Min(a.y%2C%20b.y))%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Max%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(b%20%3D%3D%3D%20undefined)%20b%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3E%20b%20%3F%20a%20%3A%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MaxV%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20c%20%3D%20new%20b2Vec2(b2Math.Max(a.x%2C%20b.x)%2C%20b2Math.Max(a.y%2C%20b.y))%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Clamp%20%3D%20(a%2C%20low%2C%20high)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(low%20%3D%3D%3D%20undefined)%20low%20%3D%200%3B%0A%20%20%20%20%20%20if%20(high%20%3D%3D%3D%20undefined)%20high%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3C%20low%20%3F%20low%20%3A%20a%20%3E%20high%20%3F%20high%20%3A%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.ClampV%20%3D%20(a%2C%20low%2C%20high)%20%3D%3E%20b2Math.MaxV(low%2C%20b2Math.MinV(a%2C%20high))%3B%0A%20%20%20%20b2Math.Swap%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20tmp%20%3D%20a%5B0%5D%3B%0A%20%20%20%20%20%20a%5B0%5D%20%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20b%5B0%5D%20%3D%20tmp%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Random%20%3D%20()%20%3D%3E%20Math.random()%20*%202%20-%201%3B%0A%20%20%20%20b2Math.RandomRange%20%3D%20(lo%2C%20hi)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(lo%20%3D%3D%3D%20undefined)%20lo%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hi%20%3D%3D%3D%20undefined)%20hi%20%3D%200%3B%0A%20%20%20%20%20%20let%20r%20%3D%20Math.random()%3B%0A%20%20%20%20%20%20r%20%3D%20(hi%20-%20lo)%20*%20r%20%2B%20lo%3B%0A%20%20%20%20%20%20return%20r%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.NextPowerOfTwo%20%3D%20x%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%201)%20%26%200x7FFFFFFF%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%202)%20%26%200x3FFFFFFF%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%204)%20%26%200x0FFFFFFF%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%208)%20%26%200x00FFFFFF%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%2016)%20%26%200x0000FFFF%3B%0A%20%20%20%20%20%20return%20x%20%2B%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.IsPowerOfTwo%20%3D%20x%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20const%20result%20%3D%20x%20%3E%200%20%26%26%20(x%20%26%20(x%20-%201))%20%3D%3D%200%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Vec2_zero%20%3D%20new%20b2Vec2(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Mat22_identity%20%3D%20b2Mat22.FromVV(new%20b2Vec2(1.0%2C%200.0)%2C%20new%20b2Vec2(0.0%2C%201.0))%3B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Transform_identity%20%3D%20new%20b2Transform(b2Math.b2Vec2_zero%2C%20b2Math.b2Mat22_identity)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Vec2.b2Vec2%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2Vec2.Make%20%3D%20(x_%2C%20y_)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(x_%2C%20y_)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.b2Vec3%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%7D))()%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2ControllerEdge%20%3D%20Box2D.Dynamics.Controllers.b2ControllerEdge%3B%0A%20%20%20%20const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%20%20%20%20const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%20%20%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%20%20%20%20const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%20%20%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%20%20%20%20const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%20%20%20%20const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%20%20%20%20const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%20%20%20%20const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%20%20%20%20const%20b2Bound%20%3D%20Box2D.Collision.b2Bound%3B%0A%20%20%20%20const%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%3B%0A%20%20%20%20const%20b2Collision%20%3D%20Box2D.Collision.b2Collision%3B%0A%20%20%20%20const%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%3B%0A%20%20%20%20const%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%3B%0A%20%20%20%20const%20b2Distance%20%3D%20Box2D.Collision.b2Distance%3B%0A%20%20%20%20const%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%3B%0A%20%20%20%20const%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%3B%0A%20%20%20%20const%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%3B%0A%20%20%20%20const%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%3B%0A%20%20%20%20const%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%3B%0A%20%20%20%20const%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%3B%0A%20%20%20%20const%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%3B%0A%20%20%20%20const%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%3B%0A%20%20%20%20const%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%3B%0A%20%20%20%20const%20b2Point%20%3D%20Box2D.Collision.b2Point%3B%0A%20%20%20%20const%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%3B%0A%20%20%20%20const%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%3B%0A%20%20%20%20const%20b2Segment%20%3D%20Box2D.Collision.b2Segment%3B%0A%20%20%20%20const%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%3B%0A%20%20%20%20const%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%3B%0A%20%20%20%20const%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%3B%0A%20%20%20%20const%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%3B%0A%20%20%20%20const%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%3B%0A%20%20%20%20const%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%3B%0A%20%20%20%20const%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%3B%0A%20%20%20%20const%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%3B%0A%20%20%20%20const%20Features%20%3D%20Box2D.Collision.Features%3B%0A%20%20%20%20const%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%20%20%20%20const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%20%20%20%20const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%20%20%20%20const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%20%20%20%20const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%20%20%20%20const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%20%20%20%20const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%20%20%20%20const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%20%20%20%20const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%20%20%20%20const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%20%20%20%20const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%20%20%20%20const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%20%20%20%20const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%20%20%20%20const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%20%20const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%20%20%20%20const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%20%20%20%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20%20%20const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%20%20%20%20const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%20%20%20%20const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%20%20%20%20const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%20%20%20%20const%20b2CircleContact%20%3D%20Box2D.Dynamics.Contacts.b2CircleContact%3B%0A%20%20%20%20const%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%3B%0A%20%20%20%20const%20b2ContactConstraint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraint%3B%0A%20%20%20%20const%20b2ContactConstraintPoint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%3B%0A%20%20%20%20const%20b2ContactEdge%20%3D%20Box2D.Dynamics.Contacts.b2ContactEdge%3B%0A%20%20%20%20const%20b2ContactFactory%20%3D%20Box2D.Dynamics.Contacts.b2ContactFactory%3B%0A%20%20%20%20const%20b2ContactRegister%20%3D%20Box2D.Dynamics.Contacts.b2ContactRegister%3B%0A%20%20%20%20const%20b2ContactResult%20%3D%20Box2D.Dynamics.Contacts.b2ContactResult%3B%0A%20%20%20%20const%20b2ContactSolver%20%3D%20Box2D.Dynamics.Contacts.b2ContactSolver%3B%0A%20%20%20%20const%20b2EdgeAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%3B%0A%20%20%20%20const%20b2NullContact%20%3D%20Box2D.Dynamics.Contacts.b2NullContact%3B%0A%20%20%20%20const%20b2PolyAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%3B%0A%20%20%20%20const%20b2PolyAndEdgeContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%3B%0A%20%20%20%20const%20b2PolygonContact%20%3D%20Box2D.Dynamics.Contacts.b2PolygonContact%3B%0A%20%20%20%20const%20b2PositionSolverManifold%20%3D%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%3B%0A%20%20%20%20const%20b2Controller%20%3D%20Box2D.Dynamics.Controllers.b2Controller%3B%0A%20%20%20%20const%20b2DistanceJoint%20%3D%20Box2D.Dynamics.Joints.b2DistanceJoint%3B%0A%20%20%20%20const%20b2DistanceJointDef%20%3D%20Box2D.Dynamics.Joints.b2DistanceJointDef%3B%0A%20%20%20%20const%20b2FrictionJoint%20%3D%20Box2D.Dynamics.Joints.b2FrictionJoint%3B%0A%20%20%20%20const%20b2FrictionJointDef%20%3D%20Box2D.Dynamics.Joints.b2FrictionJointDef%3B%0A%20%20%20%20const%20b2GearJoint%20%3D%20Box2D.Dynamics.Joints.b2GearJoint%3B%0A%20%20%20%20const%20b2GearJointDef%20%3D%20Box2D.Dynamics.Joints.b2GearJointDef%3B%0A%20%20%20%20const%20b2Jacobian%20%3D%20Box2D.Dynamics.Joints.b2Jacobian%3B%0A%20%20%20%20const%20b2Joint%20%3D%20Box2D.Dynamics.Joints.b2Joint%3B%0A%20%20%20%20const%20b2JointDef%20%3D%20Box2D.Dynamics.Joints.b2JointDef%3B%0A%20%20%20%20const%20b2JointEdge%20%3D%20Box2D.Dynamics.Joints.b2JointEdge%3B%0A%20%20%20%20const%20b2LineJoint%20%3D%20Box2D.Dynamics.Joints.b2LineJoint%3B%0A%20%20%20%20const%20b2LineJointDef%20%3D%20Box2D.Dynamics.Joints.b2LineJointDef%3B%0A%20%20%20%20const%20b2MouseJoint%20%3D%20Box2D.Dynamics.Joints.b2MouseJoint%3B%0A%20%20%20%20const%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%3B%0A%20%20%20%20const%20b2PrismaticJoint%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJoint%3B%0A%20%20%20%20const%20b2PrismaticJointDef%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJointDef%3B%0A%20%20%20%20const%20b2PulleyJoint%20%3D%20Box2D.Dynamics.Joints.b2PulleyJoint%3B%0A%20%20%20%20const%20b2PulleyJointDef%20%3D%20Box2D.Dynamics.Joints.b2PulleyJointDef%3B%0A%20%20%20%20const%20b2RevoluteJoint%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJoint%3B%0A%20%20%20%20const%20b2RevoluteJointDef%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJointDef%3B%0A%20%20%20%20const%20b2WeldJoint%20%3D%20Box2D.Dynamics.Joints.b2WeldJoint%3B%0A%20%20%20%20const%20b2WeldJointDef%20%3D%20Box2D.Dynamics.Joints.b2WeldJointDef%3B%0A%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.s_xf1%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_islandFlag%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_awakeFlag%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_allowSleepFlag%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_bulletFlag%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_fixedRotationFlag%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_activeFlag%20%3D%200x0020%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_staticBody%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_kinematicBody%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_dynamicBody%20%3D%202%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactFilter.b2ContactFilter%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactFilter.b2_defaultFilter%20%3D%20new%20b2ContactFilter()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactListener.b2ContactListener%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactListener.b2_defaultListener%20%3D%20new%20b2ContactListener()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactManager.b2ContactManager%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactManager.s_evalCP%20%3D%20new%20b2ContactPoint()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DebugDraw.b2DebugDraw%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_shapeBit%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_jointBit%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_aabbBit%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_pairBit%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_controllerBit%20%3D%200x0020%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DestructionListener.b2DestructionListener%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2Island.b2Island%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Island.s_impulse%20%3D%20new%20b2ContactImpulse()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2TimeStep.b2TimeStep%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_timestep2%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_backupA%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_backupB%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_timestep%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_queue%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_jointColor%20%3D%20new%20b2Color(0.5%2C%200.8%2C%200.8)%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.e_newFixture%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.e_locked%20%3D%200x0002%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D))()%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%20%20%20%20const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%20%20%20%20const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%20%20%20%20const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%20%20%20%20const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%20%20%20%20const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%20%20%20%20const%20b2CircleContact%20%3D%20Box2D.Dynamics.Contacts.b2CircleContact%3B%0A%20%20%20%20const%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%3B%0A%20%20%20%20const%20b2ContactConstraint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraint%3B%0A%20%20%20%20const%20b2ContactConstraintPoint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%3B%0A%20%20%20%20const%20b2ContactEdge%20%3D%20Box2D.Dynamics.Contacts.b2ContactEdge%3B%0A%20%20%20%20const%20b2ContactFactory%20%3D%20Box2D.Dynamics.Contacts.b2ContactFactory%3B%0A%20%20%20%20const%20b2ContactRegister%20%3D%20Box2D.Dynamics.Contacts.b2ContactRegister%3B%0A%20%20%20%20const%20b2ContactResult%20%3D%20Box2D.Dynamics.Contacts.b2ContactResult%3B%0A%20%20%20%20const%20b2ContactSolver%20%3D%20Box2D.Dynamics.Contacts.b2ContactSolver%3B%0A%20%20%20%20const%20b2EdgeAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%3B%0A%20%20%20%20const%20b2NullContact%20%3D%20Box2D.Dynamics.Contacts.b2NullContact%3B%0A%20%20%20%20const%20b2PolyAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%3B%0A%20%20%20%20const%20b2PolyAndEdgeContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%3B%0A%20%20%20%20const%20b2PolygonContact%20%3D%20Box2D.Dynamics.Contacts.b2PolygonContact%3B%0A%20%20%20%20const%20b2PositionSolverManifold%20%3D%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%3B%0A%20%20%20%20const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%20%20%20%20const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%20%20%20%20const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%20%20%20%20const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%20%20%20%20const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%20%20%20%20const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%20%20%20%20const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%20%20const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%20%20%20%20const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%20%20%20%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20%20%20const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%20%20%20%20const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%20%20%20%20const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%20%20%20%20const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%20%20%20%20const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%20%20%20%20const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%20%20%20%20const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%20%20%20%20const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%20%20%20%20const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%20%20%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%20%20%20%20const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%20%20%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%20%20%20%20const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%20%20%20%20const%20b2Bound%20%3D%20Box2D.Collision.b2Bound%3B%0A%20%20%20%20const%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%3B%0A%20%20%20%20const%20b2Collision%20%3D%20Box2D.Collision.b2Collision%3B%0A%20%20%20%20const%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%3B%0A%20%20%20%20const%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%3B%0A%20%20%20%20const%20b2Distance%20%3D%20Box2D.Collision.b2Distance%3B%0A%20%20%20%20const%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%3B%0A%20%20%20%20const%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%3B%0A%20%20%20%20const%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%3B%0A%20%20%20%20const%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%3B%0A%20%20%20%20const%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%3B%0A%20%20%20%20const%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%3B%0A%20%20%20%20const%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%3B%0A%20%20%20%20const%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%3B%0A%20%20%20%20const%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%3B%0A%20%20%20%20const%20b2Point%20%3D%20Box2D.Collision.b2Point%3B%0A%20%20%20%20const%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%3B%0A%20%20%20%20const%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%3B%0A%20%20%20%20const%20b2Segment%20%3D%20Box2D.Collision.b2Segment%3B%0A%20%20%20%20const%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%3B%0A%20%20%20%20const%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%3B%0A%20%20%20%20const%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%3B%0A%20%20%20%20const%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%3B%0A%20%20%20%20const%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%3B%0A%20%20%20%20const%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%3B%0A%20%20%20%20const%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%3B%0A%20%20%20%20const%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%3B%0A%20%20%20%20const%20Features%20%3D%20Box2D.Collision.Features%3B%0A%20%20%20%20const%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20b2CircleContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2CircleContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2CircleContact()%3B%0A%20%20%20%20b2CircleContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_islandFlag%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_toiFlag%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag%20%3D%200x0020%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_filterFlag%20%3D%200x0040%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.s_input%20%3D%20new%20b2TOIInput()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactEdge.b2ContactEdge%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2ContactFactory.b2ContactFactory%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2ContactRegister.b2ContactRegister%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold%20%3D%20new%20b2WorldManifold()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver.s_psm%20%3D%20new%20b2PositionSolverManifold()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2EdgeAndCircleContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2EdgeAndCircleContact()%3B%0A%20%20%20%20b2EdgeAndCircleContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2NullContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolyAndCircleContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolyAndCircleContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2PolyAndCircleContact()%3B%0A%20%20%20%20b2PolyAndCircleContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolyAndEdgeContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2PolyAndEdgeContact()%3B%0A%20%20%20%20b2PolyAndEdgeContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2PolygonContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolygonContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2PolygonContact()%3B%0A%20%20%20%20b2PolygonContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2PositionSolverManifold.b2PositionSolverManifold%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D))()%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%20%20%20%20const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%20%20%20%20const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%20%20%20%20const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%20%20%20%20const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%20%20%20%20const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%20%20%20%20const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%20%20const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%20%20%20%20const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%20%20%20%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20%20%20const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%20%20%20%20const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%20%20%20%20const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%20%20%20%20const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%20%20%20%20const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%20%20%20%20const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%20%20%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%20%20%20%20const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%20%20%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%20%20%20%20const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%20%20%20%20const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%20%20%20%20const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%20%20%20%20const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%20%20%20%20const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%20%20%20%20const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%20%20%20%20const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%20%20%20%20const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%20%20%20%20const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%20%20%20%20const%20b2BuoyancyController%20%3D%20Box2D.Dynamics.Controllers.b2BuoyancyController%3B%0A%20%20%20%20const%20b2ConstantAccelController%20%3D%20Box2D.Dynamics.Controllers.b2ConstantAccelController%3B%0A%20%20%20%20const%20b2ConstantForceController%20%3D%20Box2D.Dynamics.Controllers.b2ConstantForceController%3B%0A%20%20%20%20const%20b2Controller%20%3D%20Box2D.Dynamics.Controllers.b2Controller%3B%0A%20%20%20%20const%20b2ControllerEdge%20%3D%20Box2D.Dynamics.Controllers.b2ControllerEdge%3B%0A%20%20%20%20const%20b2GravityController%20%3D%20Box2D.Dynamics.Controllers.b2GravityController%3B%0A%20%20%20%20const%20b2TensorDampingController%20%3D%20Box2D.Dynamics.Controllers.b2TensorDampingController%3B%0A%0A%20%20%20%20b2BuoyancyController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2ConstantAccelController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2ConstantForceController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2Controller.b2Controller%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2ControllerEdge.b2ControllerEdge%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2GravityController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2TensorDampingController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%7D))()%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%20%20%20%20const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%20%20%20%20const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%20%20%20%20const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%20%20%20%20const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%20%20%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%20%20%20%20const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%20%20%20%20const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%20%20%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20%20%20const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%20%20%20%20const%20b2DistanceJoint%20%3D%20Box2D.Dynamics.Joints.b2DistanceJoint%3B%0A%20%20%20%20const%20b2DistanceJointDef%20%3D%20Box2D.Dynamics.Joints.b2DistanceJointDef%3B%0A%20%20%20%20const%20b2FrictionJoint%20%3D%20Box2D.Dynamics.Joints.b2FrictionJoint%3B%0A%20%20%20%20const%20b2FrictionJointDef%20%3D%20Box2D.Dynamics.Joints.b2FrictionJointDef%3B%0A%20%20%20%20const%20b2GearJoint%20%3D%20Box2D.Dynamics.Joints.b2GearJoint%3B%0A%20%20%20%20const%20b2GearJointDef%20%3D%20Box2D.Dynamics.Joints.b2GearJointDef%3B%0A%20%20%20%20const%20b2Jacobian%20%3D%20Box2D.Dynamics.Joints.b2Jacobian%3B%0A%20%20%20%20const%20b2Joint%20%3D%20Box2D.Dynamics.Joints.b2Joint%3B%0A%20%20%20%20const%20b2JointDef%20%3D%20Box2D.Dynamics.Joints.b2JointDef%3B%0A%20%20%20%20const%20b2JointEdge%20%3D%20Box2D.Dynamics.Joints.b2JointEdge%3B%0A%20%20%20%20const%20b2LineJoint%20%3D%20Box2D.Dynamics.Joints.b2LineJoint%3B%0A%20%20%20%20const%20b2LineJointDef%20%3D%20Box2D.Dynamics.Joints.b2LineJointDef%3B%0A%20%20%20%20const%20b2MouseJoint%20%3D%20Box2D.Dynamics.Joints.b2MouseJoint%3B%0A%20%20%20%20const%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%3B%0A%20%20%20%20const%20b2PrismaticJoint%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJoint%3B%0A%20%20%20%20const%20b2PrismaticJointDef%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJointDef%3B%0A%20%20%20%20const%20b2PulleyJoint%20%3D%20Box2D.Dynamics.Joints.b2PulleyJoint%3B%0A%20%20%20%20const%20b2PulleyJointDef%20%3D%20Box2D.Dynamics.Joints.b2PulleyJointDef%3B%0A%20%20%20%20const%20b2RevoluteJoint%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJoint%3B%0A%20%20%20%20const%20b2RevoluteJointDef%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJointDef%3B%0A%20%20%20%20const%20b2WeldJoint%20%3D%20Box2D.Dynamics.Joints.b2WeldJoint%3B%0A%20%20%20%20const%20b2WeldJointDef%20%3D%20Box2D.Dynamics.Joints.b2WeldJointDef%3B%0A%20%20%20%20const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%20%20%20%20const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%20%20%20%20const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%20%20%20%20const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%20%20%20%20const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%20%20%20%20const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%20%20%20%20const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%20%20const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%20%20%20%20const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%20%20%20%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20%20%20const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%20%20%20%20const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%20%20%20%20const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%20%20%20%20const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%0A%20%20%20%20b2DistanceJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2DistanceJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2FrictionJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2FrictionJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2GearJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2GearJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2Joint.Create%20%3D%20(def%2C%20allocator)%20%3D%3E%20%7B%0A%20%20%20%20%20%20let%20joint%20%3D%20null%3B%0A%20%20%20%20%20%20switch%20(def.type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_distanceJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2DistanceJoint((def%20instanceof%20b2DistanceJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_mouseJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2MouseJoint((def%20instanceof%20b2MouseJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_prismaticJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2PrismaticJoint((def%20instanceof%20b2PrismaticJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_revoluteJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2RevoluteJoint((def%20instanceof%20b2RevoluteJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_pulleyJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2PulleyJoint((def%20instanceof%20b2PulleyJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_gearJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2GearJoint((def%20instanceof%20b2GearJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_lineJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2LineJoint((def%20instanceof%20b2LineJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_weldJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2WeldJoint((def%20instanceof%20b2WeldJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_frictionJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2FrictionJoint((def%20instanceof%20b2FrictionJointDef%20%3F%20def%20%3A%20null))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20joint%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.Destroy%20%3D%20(joint%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_unknownJoint%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_distanceJoint%20%3D%203%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint%20%3D%204%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_mouseJoint%20%3D%205%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_gearJoint%20%3D%206%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_lineJoint%20%3D%207%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_weldJoint%20%3D%208%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_frictionJoint%20%3D%209%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_equalLimits%20%3D%203%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2JointDef.b2JointDef%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2JointEdge.b2JointEdge%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2LineJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2MouseJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2MouseJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2PrismaticJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2PrismaticJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2PulleyJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength%20%3D%202.0%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2PulleyJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2RevoluteJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2RevoluteJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2WeldJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2WeldJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%7D))()%3B%0A%20%20((()%20%3D%3E%20%7B%0A%20%20%20%20const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%7D))()%3B%0A%20%20let%20i%3B%0A%20%20for%20(i%20%3D%200%3B%20i%20%3C%20Box2D.postDefs.length%3B%20%2B%2Bi)%20Box2D.postDefs%5Bi%5D()%3B%0A%0A%20%20Scratch.extensions.register(new%20BoxPhys())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B"]) {
        vm.extensionManager.loadExtensionURL(extension);
      }

      vm.runtime.isProjectPermissionManagerDisabled = true;
      
    } catch (e) {
      handleError(e);
    }
  </script>
  
  
    <script>
      const getProjectData = (function() {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.2, 0.98, loaded / total));
        };
        
        storage.addWebStore(
          [
            storage.AssetType.ImageVector,
            storage.AssetType.ImageBitmap,
            storage.AssetType.Sound,
            storage.AssetType.Font
          ].filter(i => i),
          (asset) => new URL('./assets/' + asset.assetId + '.' + asset.dataFormat, location).href
        );
        return () => new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
          resolve(xhr.response);
        };
        xhr.onerror = () => {
          if (location.protocol === 'file:') {
            reject(new Error('Zip environment must be used from a website, not from a file URL.'));
          } else {
            reject(new Error('Request to load project data failed.'));
          }
        };
        xhr.onprogress = (e) => {
          if (e.lengthComputable) {
            setProgress(interpolate(0.1, 0.2, e.loaded / e.total));
          }
        };
        xhr.responseType = 'arraybuffer';
        xhr.open('GET', "./assets/project.json");
        xhr.send();
      });
      })();
    </script>
  <script>
    const run = async () => {
      const projectData = await getProjectData();
      await scaffolding.loadProject(projectData);
      setProgress(1);
      loadingScreen.hidden = true;
      if (false) {
        scaffolding.start();
      } else {
        launchScreen.hidden = false;
        launchScreen.addEventListener('click', () => {
          launchScreen.hidden = true;
          scaffolding.start();
        });
        launchScreen.focus();
      }
    };
    run().catch(handleError);
  </script>
</body>
</html>
